(()=>{"use strict";var t={1422:(t,e,i)=>{i.r(e);i.d(e,{ACTION_MOVE:()=>s.ACTION_MOVE,ACTION_NONE:()=>s.ACTION_NONE,ACTION_RESIZE_EAST:()=>s.ACTION_RESIZE_EAST,ACTION_RESIZE_NORTH:()=>s.ACTION_RESIZE_NORTH,ACTION_RESIZE_NORTHEAST:()=>s.ACTION_RESIZE_NORTHEAST,ACTION_RESIZE_NORTHWEST:()=>s.ACTION_RESIZE_NORTHWEST,ACTION_RESIZE_SOUTH:()=>s.ACTION_RESIZE_SOUTH,ACTION_RESIZE_SOUTHEAST:()=>s.ACTION_RESIZE_SOUTHEAST,ACTION_RESIZE_SOUTHWEST:()=>s.ACTION_RESIZE_SOUTHWEST,ACTION_RESIZE_WEST:()=>s.ACTION_RESIZE_WEST,ACTION_ROTATE:()=>s.ACTION_ROTATE,ACTION_SCALE:()=>s.ACTION_SCALE,ACTION_SELECT:()=>s.ACTION_SELECT,ACTION_TRANSFORM:()=>s.ACTION_TRANSFORM,ATTRIBUTE_ACTION:()=>s.ATTRIBUTE_ACTION,CROPPER_CANVAS:()=>s.CROPPER_CANVAS,CROPPER_CROSSHAIR:()=>s.CROPPER_CROSSHAIR,CROPPER_GIRD:()=>s.CROPPER_GIRD,CROPPER_HANDLE:()=>s.CROPPER_HANDLE,CROPPER_IMAGE:()=>s.CROPPER_IMAGE,CROPPER_SELECTION:()=>s.CROPPER_SELECTION,CROPPER_SHADE:()=>s.CROPPER_SHADE,CROPPER_VIEWER:()=>s.CROPPER_VIEWER,CropperCanvas:()=>n.CropperCanvas,CropperCrosshair:()=>n.CropperCrosshair,CropperElement:()=>n.CropperElement,CropperGrid:()=>n.CropperGrid,CropperHandle:()=>n.CropperHandle,CropperImage:()=>n.CropperImage,CropperSelection:()=>n.CropperSelection,CropperShade:()=>n.CropperShade,CropperViewer:()=>n.CropperViewer,DEFAULT_TEMPLATE:()=>o,EVENT_ACTION:()=>s.EVENT_ACTION,EVENT_ACTION_END:()=>s.EVENT_ACTION_END,EVENT_ACTION_MOVE:()=>s.EVENT_ACTION_MOVE,EVENT_ACTION_START:()=>s.EVENT_ACTION_START,EVENT_CHANGE:()=>s.EVENT_CHANGE,EVENT_ERROR:()=>s.EVENT_ERROR,EVENT_KEYDOWN:()=>s.EVENT_KEYDOWN,EVENT_LOAD:()=>s.EVENT_LOAD,EVENT_POINTER_DOWN:()=>s.EVENT_POINTER_DOWN,EVENT_POINTER_MOVE:()=>s.EVENT_POINTER_MOVE,EVENT_POINTER_UP:()=>s.EVENT_POINTER_UP,EVENT_RESIZE:()=>s.EVENT_RESIZE,EVENT_TOUCH_END:()=>s.EVENT_TOUCH_END,EVENT_TOUCH_MOVE:()=>s.EVENT_TOUCH_MOVE,EVENT_TOUCH_START:()=>s.EVENT_TOUCH_START,EVENT_TRANSFORM:()=>s.EVENT_TRANSFORM,EVENT_WHEEL:()=>s.EVENT_WHEEL,HAS_POINTER_EVENT:()=>s.HAS_POINTER_EVENT,IS_BROWSER:()=>s.IS_BROWSER,IS_TOUCH_DEVICE:()=>s.IS_TOUCH_DEVICE,NAMESPACE:()=>s.NAMESPACE,WINDOW:()=>s.WINDOW,default:()=>c,emit:()=>s.emit,getAdjustedSizes:()=>s.getAdjustedSizes,getOffset:()=>s.getOffset,isElement:()=>s.isElement,isFunction:()=>s.isFunction,isNaN:()=>s.isNaN,isNumber:()=>s.isNumber,isObject:()=>s.isObject,isPlainObject:()=>s.isPlainObject,isPositiveNumber:()=>s.isPositiveNumber,isString:()=>s.isString,isUndefined:()=>s.isUndefined,multiplyMatrices:()=>s.multiplyMatrices,nextTick:()=>s.nextTick,off:()=>s.off,on:()=>s.on,once:()=>s.once,toAngleInRadian:()=>s.toAngleInRadian,toCamelCase:()=>s.toCamelCase,toKebabCase:()=>s.toKebabCase});var s=i(1423);var n=i(1424);
/*! Cropper.js v2.0.0 | (c) 2015-present Chen Fengyuan | MIT */var o="<cropper-canvas background>"+"<cropper-image rotatable scalable skewable translatable></cropper-image>"+"<cropper-shade hidden></cropper-shade>"+'<cropper-handle action="select" plain></cropper-handle>'+'<cropper-selection initial-coverage="0.5" movable resizable>'+'<cropper-grid role="grid" bordered covered></cropper-grid>'+"<cropper-crosshair centered></cropper-crosshair>"+'<cropper-handle action="move" theme-color="rgba(255, 255, 255, 0.35)"></cropper-handle>'+'<cropper-handle action="n-resize"></cropper-handle>'+'<cropper-handle action="e-resize"></cropper-handle>'+'<cropper-handle action="s-resize"></cropper-handle>'+'<cropper-handle action="w-resize"></cropper-handle>'+'<cropper-handle action="ne-resize"></cropper-handle>'+'<cropper-handle action="nw-resize"></cropper-handle>'+'<cropper-handle action="se-resize"></cropper-handle>'+'<cropper-handle action="sw-resize"></cropper-handle>'+"</cropper-selection>"+"</cropper-canvas>";const a=/^img|canvas$/;const r=/<(\/?(?:script|style)[^>]*)>/gi;const h={template:o};n.CropperCanvas.$define();n.CropperCrosshair.$define();n.CropperGrid.$define();n.CropperHandle.$define();n.CropperImage.$define();n.CropperSelection.$define();n.CropperShade.$define();n.CropperViewer.$define();class c{constructor(t,e){this.options=h;if((0,s.isString)(t)){t=document.querySelector(t)}if(!(0,s.isElement)(t)||!a.test(t.localName)){throw new Error("The first argument is required and must be an <img> or <canvas> element.")}this.element=t;e=Object.assign(Object.assign({},h),e);this.options=e;const{ownerDocument:i}=t;let{container:n}=e;if(n){if((0,s.isString)(n)){n=i.querySelector(n)}if(!(0,s.isElement)(n)){throw new Error("The `container` option must be an element or a valid selector.")}}if(!(0,s.isElement)(n)){if(t.parentElement){n=t.parentElement}else{n=i.body}}this.container=n;const o=t.localName;let c="";if(o==="img"){({src:c}=t)}else if(o==="canvas"&&window.HTMLCanvasElement){c=t.toDataURL()}const{template:l}=e;if(l&&(0,s.isString)(l)){const e=document.createElement("template");const i=document.createDocumentFragment();e.innerHTML=l.replace(r,"&lt;$1&gt;");i.appendChild(e.content);Array.from(i.querySelectorAll(s.CROPPER_IMAGE)).forEach(e=>{e.setAttribute("src",c);e.setAttribute("alt",t.alt||"The image to crop")});if(t.parentElement){t.style.display="none";n.insertBefore(i,t.nextSibling)}else{n.appendChild(i)}}}getCropperCanvas(){return this.container.querySelector(s.CROPPER_CANVAS)}getCropperImage(){return this.container.querySelector(s.CROPPER_IMAGE)}getCropperSelection(){return this.container.querySelector(s.CROPPER_SELECTION)}getCropperSelections(){return this.container.querySelectorAll(s.CROPPER_SELECTION)}}c.version="2.0.0"},1423:(t,e,i)=>{i.r(e);i.d(e,{ACTION_MOVE:()=>C,ACTION_NONE:()=>g,ACTION_RESIZE_EAST:()=>O,ACTION_RESIZE_NORTH:()=>b,ACTION_RESIZE_NORTHEAST:()=>_,ACTION_RESIZE_NORTHWEST:()=>v,ACTION_RESIZE_SOUTH:()=>A,ACTION_RESIZE_SOUTHEAST:()=>R,ACTION_RESIZE_SOUTHWEST:()=>I,ACTION_RESIZE_WEST:()=>S,ACTION_ROTATE:()=>N,ACTION_SCALE:()=>$,ACTION_SELECT:()=>T,ACTION_TRANSFORM:()=>m,ATTRIBUTE_ACTION:()=>w,CROPPER_CANVAS:()=>h,CROPPER_CROSSHAIR:()=>c,CROPPER_GIRD:()=>l,CROPPER_HANDLE:()=>d,CROPPER_IMAGE:()=>E,CROPPER_SELECTION:()=>u,CROPPER_SHADE:()=>f,CROPPER_VIEWER:()=>p,EVENT_ACTION:()=>Z,EVENT_ACTION_END:()=>U,EVENT_ACTION_MOVE:()=>j,EVENT_ACTION_START:()=>Y,EVENT_CHANGE:()=>X,EVENT_ERROR:()=>D,EVENT_KEYDOWN:()=>H,EVENT_LOAD:()=>W,EVENT_POINTER_DOWN:()=>V,EVENT_POINTER_MOVE:()=>x,EVENT_POINTER_UP:()=>M,EVENT_RESIZE:()=>z,EVENT_TOUCH_END:()=>y,EVENT_TOUCH_MOVE:()=>P,EVENT_TOUCH_START:()=>k,EVENT_TRANSFORM:()=>G,EVENT_WHEEL:()=>L,HAS_POINTER_EVENT:()=>a,IS_BROWSER:()=>s,IS_TOUCH_DEVICE:()=>o,NAMESPACE:()=>r,WINDOW:()=>n,emit:()=>ut,getAdjustedSizes:()=>gt,getOffset:()=>Tt,isElement:()=>st,isFunction:()=>it,isNaN:()=>B,isNumber:()=>K,isObject:()=>Q,isPlainObject:()=>et,isPositiveNumber:()=>q,isString:()=>F,isUndefined:()=>J,multiplyMatrices:()=>bt,nextTick:()=>pt,off:()=>ct,on:()=>lt,once:()=>dt,toAngleInRadian:()=>$t,toCamelCase:()=>rt,toKebabCase:()=>ot});const s=typeof window!=="undefined"&&typeof window.document!=="undefined";const n=s?window:{};const o=s?"ontouchstart"in n.document.documentElement:false;const a=s?"PointerEvent"in n:false;const r="cropper";const h=`${r}-canvas`;const c=`${r}-crosshair`;const l=`${r}-grid`;const d=`${r}-handle`;const E=`${r}-image`;const u=`${r}-selection`;const f=`${r}-shade`;const p=`${r}-viewer`;const T="select";const C="move";const $="scale";const N="rotate";const m="transform";const g="none";const b="n-resize";const O="e-resize";const A="s-resize";const S="w-resize";const _="ne-resize";const v="nw-resize";const R="se-resize";const I="sw-resize";const w="action";const y=o?"touchend touchcancel":"mouseup";const P=o?"touchmove":"mousemove";const k=o?"touchstart":"mousedown";const V=a?"pointerdown":k;const x=a?"pointermove":P;const M=a?"pointerup pointercancel":y;const D="error";const H="keydown";const W="load";const z="resize";const L="wheel";const Z="action";const U="actionend";const j="actionmove";const Y="actionstart";const X="change";const G="transform";function F(t){return typeof t==="string"}const B=Number.isNaN||n.isNaN;function K(t){return typeof t==="number"&&!B(t)}function q(t){return K(t)&&t>0&&t<Infinity}function J(t){return typeof t==="undefined"}function Q(t){return typeof t==="object"&&t!==null}const{hasOwnProperty:tt}=Object.prototype;function et(t){if(!Q(t)){return false}try{const{constructor:e}=t;const{prototype:i}=e;return e&&i&&tt.call(i,"isPrototypeOf")}catch(t){return false}}function it(t){return typeof t==="function"}function st(t){return typeof t==="object"&&t!==null&&t.nodeType===1}const nt=/([a-z\d])([A-Z])/g;function ot(t){return String(t).replace(nt,"$1-$2").toLowerCase()}const at=/-[A-z\d]/g;function rt(t){return t.replace(at,t=>t.slice(1).toUpperCase())}const ht=/\s\s*/;function ct(t,e,i,s){e.trim().split(ht).forEach(e=>{t.removeEventListener(e,i,s)})}function lt(t,e,i,s){e.trim().split(ht).forEach(e=>{t.addEventListener(e,i,s)})}function dt(t,e,i,s){lt(t,e,i,Object.assign(Object.assign({},s),{once:true}))}const Et={bubbles:true,cancelable:true,composed:true};function ut(t,e,i,s){return t.dispatchEvent(new CustomEvent(e,Object.assign(Object.assign(Object.assign({},Et),{detail:i}),s)))}const ft=Promise.resolve();function pt(t,e){return e?ft.then(t?e.bind(t):e):ft}function Tt(t){const{documentElement:e}=t.ownerDocument;const i=t.getBoundingClientRect();return{left:i.left+(n.pageXOffset-e.clientLeft),top:i.top+(n.pageYOffset-e.clientTop)}}const Ct=/deg|g?rad|turn$/i;function $t(t){const e=parseFloat(t)||0;if(e!==0){const[i="rad"]=String(t).match(Ct)||[];switch(i.toLowerCase()){case"deg":return e/360*(Math.PI*2);case"grad":return e/400*(Math.PI*2);case"turn":return e*(Math.PI*2)}}return e}const Nt="contain";const mt="cover";function gt(t,e=Nt){const{aspectRatio:i}=t;let{width:s,height:n}=t;const o=q(s);const a=q(n);if(o&&a){const t=n*i;if(e===Nt&&t>s||e===mt&&t<s){n=s/i}else{s=n*i}}else if(o){n=s/i}else if(a){s=n*i}return{width:s,height:n}}function bt(t,...e){if(e.length===0){return t}const[i,s,n,o,a,r]=t;const[h,c,l,d,E,u]=e[0];t=[i*h+n*c,s*h+o*c,i*l+n*d,s*l+o*d,i*E+n*u+a,s*E+o*u+r];return bt(t,...e.slice(1))}},1424:(t,e,i)=>{i.r(e);i.d(e,{CropperCanvas:()=>n["default"],CropperCrosshair:()=>l["default"],CropperElement:()=>s["default"],CropperGrid:()=>c["default"],CropperHandle:()=>r["default"],CropperImage:()=>o["default"],CropperSelection:()=>h["default"],CropperShade:()=>a["default"],CropperViewer:()=>d["default"]});var s=i(1425);var n=i(1426);var o=i(1427);var a=i(1428);var r=i(1429);var h=i(1430);var c=i(1431);var l=i(1432);var d=i(1433)},1425:(t,e,i)=>{i.r(e);i.d(e,{default:()=>d});var s=i(1423);var n=`:host([hidden]){display:none!important}`;const o=/left|top|width|height/i;const a="open";const r=new WeakMap;const h=new WeakMap;const c=new Map;const l=s.WINDOW.document&&Array.isArray(s.WINDOW.document.adoptedStyleSheets)&&"replaceSync"in s.WINDOW.CSSStyleSheet.prototype;class d extends HTMLElement{get $sharedStyle(){return`${this.themeColor?`:host{--theme-color: ${this.themeColor};}`:""}${n}`}constructor(){var t,e;super();this.shadowRootMode=a;this.slottable=true;const i=(e=(t=Object.getPrototypeOf(this))===null||t===void 0?void 0:t.constructor)===null||e===void 0?void 0:e.$name;if(i){c.set(i,this.tagName.toLowerCase())}}static get observedAttributes(){return["shadow-root-mode","slottable","theme-color"]}attributeChangedCallback(t,e,i){if(Object.is(i,e)){return}const n=(0,s.toCamelCase)(t);const o=this[n];let a=i;switch(typeof o){case"boolean":a=i!==null&&i!=="false";break;case"number":a=Number(i);break}this[n]=a;switch(t){case"theme-color":{const t=h.get(this);const e=this.$sharedStyle;if(t&&e){if(l){t.replaceSync(e)}else{t.textContent=e}}break}}}$propertyChangedCallback(t,e,i){if(Object.is(i,e)){return}t=(0,s.toKebabCase)(t);switch(typeof i){case"boolean":if(i===true){if(!this.hasAttribute(t)){this.setAttribute(t,"")}}else{this.removeAttribute(t)}break;case"number":if((0,s.isNaN)(i)){i=""}else{i=String(i)}default:if(i){if(this.getAttribute(t)!==i){this.setAttribute(t,i)}}else{this.removeAttribute(t)}}}connectedCallback(){Object.getPrototypeOf(this).constructor.observedAttributes.forEach(t=>{const e=(0,s.toCamelCase)(t);let i=this[e];if(!(0,s.isUndefined)(i)){this.$propertyChangedCallback(e,undefined,i)}Object.defineProperty(this,e,{enumerable:true,configurable:true,get(){return i},set(t){const s=i;i=t;this.$propertyChangedCallback(e,s,t)}})});const t=this.attachShadow({mode:this.shadowRootMode||a});if(!this.shadowRoot){r.set(this,t)}h.set(this,this.$addStyles(this.$sharedStyle));if(this.$style){this.$addStyles(this.$style)}if(this.$template){const e=document.createElement("template");e.innerHTML=this.$template;t.appendChild(e.content)}if(this.slottable){const e=document.createElement("slot");t.appendChild(e)}}disconnectedCallback(){if(h.has(this)){h.delete(this)}if(r.has(this)){r.delete(this)}}$getTagNameOf(t){var e;return(e=c.get(t))!==null&&e!==void 0?e:t}$setStyles(t){Object.keys(t).forEach(e=>{let i=t[e];if((0,s.isNumber)(i)){if(i!==0&&o.test(e)){i=`${i}px`}else{i=String(i)}}this.style[e]=i});return this}$getShadowRoot(){return this.shadowRoot||r.get(this)}$addStyles(t){let e;const i=this.$getShadowRoot();if(l){e=new CSSStyleSheet;e.replaceSync(t);i.adoptedStyleSheets=i.adoptedStyleSheets.concat(e)}else{e=document.createElement("style");e.textContent=t;i.appendChild(e)}return e}$emit(t,e,i){return(0,s.emit)(this,t,e,i)}$nextTick(t){return(0,s.nextTick)(this,t)}static $define(t,e){if((0,s.isObject)(t)){e=t;t=""}if(!t){t=this.$name||this.name}t=(0,s.toKebabCase)(t);if(s.IS_BROWSER&&s.WINDOW.customElements&&!s.WINDOW.customElements.get(t)){customElements.define(t,this,e)}}}d.$version="2.0.0"},1426:(t,e,i)=>{i.r(e);i.d(e,{default:()=>a});var s=i(1425);var n=i(1423);var o=`:host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:"";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}`;class a extends s["default"]{constructor(){super(...arguments);this.$onPointerDown=null;this.$onPointerMove=null;this.$onPointerUp=null;this.$onWheel=null;this.$wheeling=false;this.$pointers=new Map;this.$style=o;this.$action=n.ACTION_NONE;this.background=false;this.disabled=false;this.scaleStep=.1;this.themeColor="#39f"}static get observedAttributes(){return super.observedAttributes.concat(["background","disabled","scale-step"])}connectedCallback(){super.connectedCallback();if(!this.disabled){this.$bind()}}disconnectedCallback(){if(!this.disabled){this.$unbind()}super.disconnectedCallback()}$propertyChangedCallback(t,e,i){if(Object.is(i,e)){return}super.$propertyChangedCallback(t,e,i);switch(t){case"disabled":if(i){this.$unbind()}else{this.$bind()}break}}$bind(){if(!this.$onPointerDown){this.$onPointerDown=this.$handlePointerDown.bind(this);(0,n.on)(this,n.EVENT_POINTER_DOWN,this.$onPointerDown)}if(!this.$onPointerMove){this.$onPointerMove=this.$handlePointerMove.bind(this);(0,n.on)(this.ownerDocument,n.EVENT_POINTER_MOVE,this.$onPointerMove)}if(!this.$onPointerUp){this.$onPointerUp=this.$handlePointerUp.bind(this);(0,n.on)(this.ownerDocument,n.EVENT_POINTER_UP,this.$onPointerUp)}if(!this.$onWheel){this.$onWheel=this.$handleWheel.bind(this);(0,n.on)(this,n.EVENT_WHEEL,this.$onWheel,{passive:false,capture:true})}}$unbind(){if(this.$onPointerDown){(0,n.off)(this,n.EVENT_POINTER_DOWN,this.$onPointerDown);this.$onPointerDown=null}if(this.$onPointerMove){(0,n.off)(this.ownerDocument,n.EVENT_POINTER_MOVE,this.$onPointerMove);this.$onPointerMove=null}if(this.$onPointerUp){(0,n.off)(this.ownerDocument,n.EVENT_POINTER_UP,this.$onPointerUp);this.$onPointerUp=null}if(this.$onWheel){(0,n.off)(this,n.EVENT_WHEEL,this.$onWheel,{capture:true});this.$onWheel=null}}$handlePointerDown(t){const{buttons:e,button:i,type:s}=t;if(this.disabled||(s==="pointerdown"&&t.pointerType==="mouse"||s==="mousedown")&&((0,n.isNumber)(e)&&e!==1||(0,n.isNumber)(i)&&i!==0||t.ctrlKey)){return}const{$pointers:o}=this;let a="";if(t.changedTouches){Array.from(t.changedTouches).forEach(({identifier:t,pageX:e,pageY:i})=>{o.set(t,{startX:e,startY:i,endX:e,endY:i})})}else{const{pointerId:e=0,pageX:i,pageY:s}=t;o.set(e,{startX:i,startY:s,endX:i,endY:s})}if(o.size>1){a=n.ACTION_TRANSFORM}else if((0,n.isElement)(t.target)){a=t.target.action||t.target.getAttribute(n.ATTRIBUTE_ACTION)||""}if(this.$emit(n.EVENT_ACTION_START,{action:a,relatedEvent:t})===false){return}t.preventDefault();this.$action=a;this.style.willChange="transform"}$handlePointerMove(t){const{$action:e,$pointers:i}=this;if(this.disabled||e===n.ACTION_NONE||i.size===0){return}if(this.$emit(n.EVENT_ACTION_MOVE,{action:e,relatedEvent:t})===false){return}t.preventDefault();if(t.changedTouches){Array.from(t.changedTouches).forEach(({identifier:t,pageX:e,pageY:s})=>{const n=i.get(t);if(n){Object.assign(n,{endX:e,endY:s})}})}else{const{pointerId:e=0,pageX:s,pageY:n}=t;const o=i.get(e);if(o){Object.assign(o,{endX:s,endY:n})}}const s={action:e,relatedEvent:t};if(e===n.ACTION_TRANSFORM){const e=new Map(i);let o=0;let a=0;let r=0;let h=0;let c=t.pageX;let l=t.pageY;i.forEach((t,i)=>{e.delete(i);e.forEach(e=>{let i=e.startX-t.startX;let s=e.startY-t.startY;let n=e.endX-t.endX;let d=e.endY-t.endY;let E=0;let u=0;let f=0;let p=0;if(i===0){if(s<0){f=Math.PI*2}else if(s>0){f=Math.PI}}else if(i>0){f=Math.PI/2+Math.atan(s/i)}else if(i<0){f=Math.PI*1.5+Math.atan(s/i)}if(n===0){if(d<0){p=Math.PI*2}else if(d>0){p=Math.PI}}else if(n>0){p=Math.PI/2+Math.atan(d/n)}else if(n<0){p=Math.PI*1.5+Math.atan(d/n)}if(p>0||f>0){const i=p-f;const s=Math.abs(i);if(s>o){o=s;r=i;c=(t.startX+e.startX)/2;l=(t.startY+e.startY)/2}}i=Math.abs(i);s=Math.abs(s);n=Math.abs(n);d=Math.abs(d);if(i>0&&s>0){E=Math.sqrt(i*i+s*s)}else if(i>0){E=i}else if(s>0){E=s}if(n>0&&d>0){u=Math.sqrt(n*n+d*d)}else if(n>0){u=n}else if(d>0){u=d}if(E>0&&u>0){const i=(u-E)/E;const s=Math.abs(i);if(s>a){a=s;h=i;c=(t.startX+e.startX)/2;l=(t.startY+e.startY)/2}}})});const d=o>0;const E=a>0;if(d&&E){s.rotate=r;s.scale=h;s.centerX=c;s.centerY=l}else if(d){s.action=n.ACTION_ROTATE;s.rotate=r;s.centerX=c;s.centerY=l}else if(E){s.action=n.ACTION_SCALE;s.scale=h;s.centerX=c;s.centerY=l}else{s.action=n.ACTION_NONE}}else{const[t]=Array.from(i.values());Object.assign(s,t)}i.forEach(t=>{t.startX=t.endX;t.startY=t.endY});if(s.action!==n.ACTION_NONE){this.$emit(n.EVENT_ACTION,s,{cancelable:false})}}$handlePointerUp(t){const{$action:e,$pointers:i}=this;if(this.disabled||e===n.ACTION_NONE){return}if(this.$emit(n.EVENT_ACTION_END,{action:e,relatedEvent:t})===false){return}t.preventDefault();if(t.changedTouches){Array.from(t.changedTouches).forEach(({identifier:t})=>{i.delete(t)})}else{const{pointerId:e=0}=t;i.delete(e)}if(i.size===0){this.style.willChange="";this.$action=n.ACTION_NONE}}$handleWheel(t){if(this.disabled){return}t.preventDefault();if(this.$wheeling){return}this.$wheeling=true;setTimeout(()=>{this.$wheeling=false},50);const e=t.deltaY>0?-1:1;const i=e*this.scaleStep;this.$emit(n.EVENT_ACTION,{action:n.ACTION_SCALE,scale:i,relatedEvent:t},{cancelable:false})}$setAction(t){if((0,n.isString)(t)){this.$action=t}return this}$toCanvas(t){return new Promise((e,i)=>{if(!this.isConnected){i(new Error("The current element is not connected to the DOM."));return}const s=document.createElement("canvas");let o=this.offsetWidth;let a=this.offsetHeight;let r=1;if((0,n.isPlainObject)(t)&&((0,n.isPositiveNumber)(t.width)||(0,n.isPositiveNumber)(t.height))){({width:o,height:a}=(0,n.getAdjustedSizes)({aspectRatio:o/a,width:t.width,height:t.height}));r=o/this.offsetWidth}s.width=o;s.height=a;const h=this.querySelector(this.$getTagNameOf(n.CROPPER_IMAGE));if(!h){e(s);return}h.$ready().then(i=>{const c=s.getContext("2d");if(c){const[e,l,d,E,u,f]=h.$getTransform();let p=u;let T=f;let C=i.naturalWidth;let $=i.naturalHeight;if(r!==1){p*=r;T*=r;C*=r;$*=r}const N=C/2;const m=$/2;c.fillStyle="transparent";c.fillRect(0,0,o,a);if((0,n.isPlainObject)(t)&&(0,n.isFunction)(t.beforeDraw)){t.beforeDraw.call(this,c,s)}c.save();c.translate(N,m);c.transform(e,l,d,E,p,T);c.translate(-N,-m);c.drawImage(i,0,0,C,$);c.restore()}e(s)}).catch(i)})}}a.$name=n.CROPPER_CANVAS;a.$version="2.0.0"},1427:(t,e,i)=>{i.r(e);i.d(e,{default:()=>h});var s=i(1425);var n=i(1423);var o=`:host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}`;const a=new WeakMap;const r=["alt","crossorigin","decoding","importance","loading","referrerpolicy","sizes","src","srcset"];class h extends s["default"]{constructor(){super(...arguments);this.$matrix=[1,0,0,1,0,0];this.$onLoad=null;this.$onCanvasAction=null;this.$onCanvasActionEnd=null;this.$onCanvasActionStart=null;this.$actionStartTarget=null;this.$style=o;this.$image=new Image;this.initialCenterSize="contain";this.rotatable=false;this.scalable=false;this.skewable=false;this.slottable=false;this.translatable=false}set $canvas(t){a.set(this,t)}get $canvas(){return a.get(this)}static get observedAttributes(){return super.observedAttributes.concat(r,["initial-center-size","rotatable","scalable","skewable","translatable"])}attributeChangedCallback(t,e,i){if(Object.is(i,e)){return}super.attributeChangedCallback(t,e,i);if(r.includes(t)){this.$image.setAttribute(t,i)}}$propertyChangedCallback(t,e,i){if(Object.is(i,e)){return}super.$propertyChangedCallback(t,e,i);switch(t){case"initialCenterSize":this.$nextTick(()=>{this.$center(i)});break}}connectedCallback(){super.connectedCallback();const{$image:t}=this;const e=this.closest(this.$getTagNameOf(n.CROPPER_CANVAS));if(e){this.$canvas=e;this.$setStyles({display:"block",position:"absolute"});this.$onCanvasActionStart=t=>{var e,i;this.$actionStartTarget=(i=(e=t.detail)===null||e===void 0?void 0:e.relatedEvent)===null||i===void 0?void 0:i.target};this.$onCanvasActionEnd=()=>{this.$actionStartTarget=null};this.$onCanvasAction=this.$handleAction.bind(this);(0,n.on)(e,n.EVENT_ACTION_START,this.$onCanvasActionStart);(0,n.on)(e,n.EVENT_ACTION_END,this.$onCanvasActionEnd);(0,n.on)(e,n.EVENT_ACTION,this.$onCanvasAction)}this.$onLoad=this.$handleLoad.bind(this);(0,n.on)(t,n.EVENT_LOAD,this.$onLoad);this.$getShadowRoot().appendChild(t)}disconnectedCallback(){const{$image:t,$canvas:e}=this;if(e){if(this.$onCanvasActionStart){(0,n.off)(e,n.EVENT_ACTION_START,this.$onCanvasActionStart);this.$onCanvasActionStart=null}if(this.$onCanvasActionEnd){(0,n.off)(e,n.EVENT_ACTION_END,this.$onCanvasActionEnd);this.$onCanvasActionEnd=null}if(this.$onCanvasAction){(0,n.off)(e,n.EVENT_ACTION,this.$onCanvasAction);this.$onCanvasAction=null}}if(t&&this.$onLoad){(0,n.off)(t,n.EVENT_LOAD,this.$onLoad);this.$onLoad=null}this.$getShadowRoot().removeChild(t);super.disconnectedCallback()}$handleLoad(){const{$image:t}=this;this.$setStyles({width:t.naturalWidth,height:t.naturalHeight});if(this.$canvas){this.$center(this.initialCenterSize)}}$handleAction(t){if(this.hidden||!(this.rotatable||this.scalable||this.translatable)){return}const{$canvas:e}=this;const{detail:i}=t;if(i){const{relatedEvent:t}=i;let{action:s}=i;if(s===n.ACTION_TRANSFORM&&(!this.rotatable||!this.scalable)){if(this.rotatable){s=n.ACTION_ROTATE}else if(this.scalable){s=n.ACTION_SCALE}else{s=n.ACTION_NONE}}switch(s){case n.ACTION_MOVE:if(this.translatable){let s=null;if(t){s=t.target.closest(this.$getTagNameOf(n.CROPPER_SELECTION))}if(!s){s=e.querySelector(this.$getTagNameOf(n.CROPPER_SELECTION))}if(s&&s.multiple&&!s.active){s=e.querySelector(`${this.$getTagNameOf(n.CROPPER_SELECTION)}[active]`)}if(!s||s.hidden||!s.movable||s.dynamic||!(this.$actionStartTarget&&s.contains(this.$actionStartTarget))){this.$move(i.endX-i.startX,i.endY-i.startY)}}break;case n.ACTION_ROTATE:if(this.rotatable){if(t){const{x:e,y:s}=this.getBoundingClientRect();this.$rotate(i.rotate,t.clientX-e,t.clientY-s)}else{this.$rotate(i.rotate)}}break;case n.ACTION_SCALE:if(this.scalable){if(t){const e=t.target.closest(this.$getTagNameOf(n.CROPPER_SELECTION));if(!e||!e.zoomable||e.zoomable&&e.dynamic){const{x:e,y:s}=this.getBoundingClientRect();this.$zoom(i.scale,t.clientX-e,t.clientY-s)}}else{this.$zoom(i.scale)}}break;case n.ACTION_TRANSFORM:if(this.rotatable&&this.scalable){const{rotate:e}=i;let{scale:s}=i;if(s<0){s=1/(1-s)}else{s+=1}const n=Math.cos(e);const o=Math.sin(e);const[a,r,h,c]=[n*s,o*s,-o*s,n*s];if(t){const e=this.getBoundingClientRect();const i=t.clientX-e.x;const s=t.clientY-e.y;const[n,o,l,d]=this.$matrix;const E=e.width/2;const u=e.height/2;const f=i-E;const p=s-u;const T=(f*d-l*p)/(n*d-l*o);const C=(p*n-o*f)/(n*d-l*o);this.$transform(a,r,h,c,T*(1-a)+C*h,C*(1-c)+T*r)}else{this.$transform(a,r,h,c,0,0)}}break}}}$ready(t){const{$image:e}=this;const i=new Promise((t,i)=>{const s=new Error("Failed to load the image source");if(e.complete){if(e.naturalWidth>0&&e.naturalHeight>0){t(e)}else{i(s)}}else{const o=()=>{(0,n.off)(e,n.EVENT_ERROR,a);t(e)};const a=()=>{(0,n.off)(e,n.EVENT_LOAD,o);i(s)};(0,n.once)(e,n.EVENT_LOAD,o);(0,n.once)(e,n.EVENT_ERROR,a)}});if((0,n.isFunction)(t)){i.then(e=>{t(e);return e})}return i}$center(t){const{parentElement:e}=this;if(!e){return this}const i=e.getBoundingClientRect();const s=i.width;const n=i.height;const{x:o,y:a,width:r,height:h}=this.getBoundingClientRect();const c=o+r/2;const l=a+h/2;const d=i.x+s/2;const E=i.y+n/2;this.$move(d-c,E-l);if(t&&(r!==s||h!==n)){const e=s/r;const i=n/h;switch(t){case"cover":this.$scale(Math.max(e,i));break;case"contain":this.$scale(Math.min(e,i));break}}return this}$move(t,e=t){if(this.translatable&&(0,n.isNumber)(t)&&(0,n.isNumber)(e)){const[i,s,n,o]=this.$matrix;const a=(t*o-n*e)/(i*o-n*s);const r=(e*i-s*t)/(i*o-n*s);this.$translate(a,r)}return this}$moveTo(t,e=t){if(this.translatable&&(0,n.isNumber)(t)&&(0,n.isNumber)(e)){const[i,s,n,o]=this.$matrix;const a=(t*o-n*e)/(i*o-n*s);const r=(e*i-s*t)/(i*o-n*s);this.$setTransform(i,s,n,o,a,r)}return this}$rotate(t,e,i){if(this.rotatable){const s=(0,n.toAngleInRadian)(t);const o=Math.cos(s);const a=Math.sin(s);const[r,h,c,l]=[o,a,-a,o];if((0,n.isNumber)(e)&&(0,n.isNumber)(i)){const[t,s,n,o]=this.$matrix;const{width:a,height:d}=this.getBoundingClientRect();const E=a/2;const u=d/2;const f=e-E;const p=i-u;const T=(f*o-n*p)/(t*o-n*s);const C=(p*t-s*f)/(t*o-n*s);this.$transform(r,h,c,l,T*(1-r)-C*c,C*(1-l)-T*h)}else{this.$transform(r,h,c,l,0,0)}}return this}$zoom(t,e,i){if(!this.scalable||t===0){return this}if(t<0){t=1/(1-t)}else{t+=1}if((0,n.isNumber)(e)&&(0,n.isNumber)(i)){const[s,n,o,a]=this.$matrix;const{width:r,height:h}=this.getBoundingClientRect();const c=r/2;const l=h/2;const d=e-c;const E=i-l;const u=(d*a-o*E)/(s*a-o*n);const f=(E*s-n*d)/(s*a-o*n);this.$transform(t,0,0,t,u*(1-t),f*(1-t))}else{this.$scale(t)}return this}$scale(t,e=t){if(this.scalable){this.$transform(t,0,0,e,0,0)}return this}$skew(t,e=0){if(this.skewable){const i=(0,n.toAngleInRadian)(t);const s=(0,n.toAngleInRadian)(e);this.$transform(1,Math.tan(s),Math.tan(i),1,0,0)}return this}$translate(t,e=t){if(this.translatable&&(0,n.isNumber)(t)&&(0,n.isNumber)(e)){this.$transform(1,0,0,1,t,e)}return this}$transform(t,e,i,s,o,a){if((0,n.isNumber)(t)&&(0,n.isNumber)(e)&&(0,n.isNumber)(i)&&(0,n.isNumber)(s)&&(0,n.isNumber)(o)&&(0,n.isNumber)(a)){return this.$setTransform((0,n.multiplyMatrices)(this.$matrix,[t,e,i,s,o,a]))}return this}$setTransform(t,e,i,s,o,a){if(this.rotatable||this.scalable||this.skewable||this.translatable){if(Array.isArray(t)){[t,e,i,s,o,a]=t}if((0,n.isNumber)(t)&&(0,n.isNumber)(e)&&(0,n.isNumber)(i)&&(0,n.isNumber)(s)&&(0,n.isNumber)(o)&&(0,n.isNumber)(a)){const r=[...this.$matrix];const h=[t,e,i,s,o,a];if(this.$emit(n.EVENT_TRANSFORM,{matrix:h,oldMatrix:r})===false){return this}this.$matrix=h;this.style.transform=`matrix(${h.join(", ")})`}}return this}$getTransform(){return this.$matrix.slice()}$resetTransform(){return this.$setTransform([1,0,0,1,0,0])}}h.$name=n.CROPPER_IMAGE;h.$version="2.0.0"},1428:(t,e,i)=>{i.r(e);i.d(e,{default:()=>r});var s=i(1425);var n=i(1423);var o=`:host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}`;const a=new WeakMap;class r extends s["default"]{constructor(){super(...arguments);this.$onCanvasChange=null;this.$onCanvasActionEnd=null;this.$onCanvasActionStart=null;this.$style=o;this.x=0;this.y=0;this.width=0;this.height=0;this.slottable=false;this.themeColor="rgba(0, 0, 0, 0.65)"}set $canvas(t){a.set(this,t)}get $canvas(){return a.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["height","width","x","y"])}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(n.CROPPER_CANVAS));if(t){this.$canvas=t;this.style.position="absolute";const e=t.querySelector(this.$getTagNameOf(n.CROPPER_SELECTION));if(e){this.$onCanvasActionStart=t=>{if(e.hidden&&t.detail.action===n.ACTION_SELECT){this.hidden=false}};this.$onCanvasActionEnd=t=>{if(e.hidden&&t.detail.action===n.ACTION_SELECT){this.hidden=true}};this.$onCanvasChange=t=>{const{x:i,y:s,width:n,height:o}=t.detail;this.$change(i,s,n,o);if(e.hidden||i===0&&s===0&&n===0&&o===0){this.hidden=true}};(0,n.on)(t,n.EVENT_ACTION_START,this.$onCanvasActionStart);(0,n.on)(t,n.EVENT_ACTION_END,this.$onCanvasActionEnd);(0,n.on)(t,n.EVENT_CHANGE,this.$onCanvasChange)}}this.$render()}disconnectedCallback(){const{$canvas:t}=this;if(t){if(this.$onCanvasActionStart){(0,n.off)(t,n.EVENT_ACTION_START,this.$onCanvasActionStart);this.$onCanvasActionStart=null}if(this.$onCanvasActionEnd){(0,n.off)(t,n.EVENT_ACTION_END,this.$onCanvasActionEnd);this.$onCanvasActionEnd=null}if(this.$onCanvasChange){(0,n.off)(t,n.EVENT_CHANGE,this.$onCanvasChange);this.$onCanvasChange=null}}super.disconnectedCallback()}$change(t,e,i=this.width,s=this.height){if(!(0,n.isNumber)(t)||!(0,n.isNumber)(e)||!(0,n.isNumber)(i)||!(0,n.isNumber)(s)||t===this.x&&e===this.y&&i===this.width&&s===this.height){return this}if(this.hidden){this.hidden=false}this.x=t;this.y=e;this.width=i;this.height=s;return this.$render()}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:n.WINDOW.innerWidth})}}r.$name=n.CROPPER_SHADE;r.$version="2.0.0"},1429:(t,e,i)=>{i.r(e);i.d(e,{default:()=>a});var s=i(1425);var n=i(1423);var o=`:host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:"";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}`;class a extends s["default"]{constructor(){super(...arguments);this.$onCanvasCropEnd=null;this.$onCanvasCropStart=null;this.$style=o;this.action=n.ACTION_NONE;this.plain=false;this.slottable=false;this.themeColor="rgba(51, 153, 255, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["action","plain"])}}a.$name=n.CROPPER_HANDLE;a.$version="2.0.0"},1430:(t,e,i)=>{i.r(e);i.d(e,{default:()=>r});var s=i(1425);var n=i(1423);var o=`:host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:"";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}`;const a=new WeakMap;class r extends s["default"]{constructor(){super(...arguments);this.$onCanvasAction=null;this.$onCanvasActionStart=null;this.$onCanvasActionEnd=null;this.$onDocumentKeyDown=null;this.$action="";this.$actionStartTarget=null;this.$changing=false;this.$style=o;this.$initialSelection={x:0,y:0,width:0,height:0};this.x=0;this.y=0;this.width=0;this.height=0;this.aspectRatio=NaN;this.initialAspectRatio=NaN;this.initialCoverage=NaN;this.active=false;this.linked=false;this.dynamic=false;this.movable=false;this.resizable=false;this.zoomable=false;this.multiple=false;this.keyboard=false;this.outlined=false;this.precise=false}set $canvas(t){a.set(this,t)}get $canvas(){return a.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["active","aspect-ratio","dynamic","height","initial-aspect-ratio","initial-coverage","keyboard","linked","movable","multiple","outlined","precise","resizable","width","x","y","zoomable"])}$propertyChangedCallback(t,e,i){if(Object.is(i,e)){return}super.$propertyChangedCallback(t,e,i);switch(t){case"x":case"y":case"width":case"height":if(!this.$changing){this.$nextTick(()=>{this.$change(this.x,this.y,this.width,this.height,this.aspectRatio,true)})}break;case"aspectRatio":case"initialAspectRatio":this.$nextTick(()=>{this.$initSelection()});break;case"initialCoverage":this.$nextTick(()=>{if((0,n.isPositiveNumber)(i)&&i<=1){this.$initSelection(true,true)}});break;case"keyboard":this.$nextTick(()=>{if(this.$canvas){if(i){if(!this.$onDocumentKeyDown){this.$onDocumentKeyDown=this.$handleKeyDown.bind(this);(0,n.on)(this.ownerDocument,n.EVENT_KEYDOWN,this.$onDocumentKeyDown)}}else if(this.$onDocumentKeyDown){(0,n.off)(this.ownerDocument,n.EVENT_KEYDOWN,this.$onDocumentKeyDown);this.$onDocumentKeyDown=null}}});break;case"multiple":this.$nextTick(()=>{if(this.$canvas){const t=this.$getSelections();if(i){t.forEach(t=>{t.active=false});this.active=true;this.$emit(n.EVENT_CHANGE,{x:this.x,y:this.y,width:this.width,height:this.height})}else{this.active=false;t.slice(1).forEach(t=>{this.$removeSelection(t)})}}});break;case"precise":this.$nextTick(()=>{this.$change(this.x,this.y)});break;case"linked":if(i){this.dynamic=true}break}}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(n.CROPPER_CANVAS));if(t){this.$canvas=t;this.$setStyles({position:"absolute",transform:`translate(${this.x}px, ${this.y}px)`});if(!this.hidden){this.$render()}this.$initSelection(true);this.$onCanvasActionStart=this.$handleActionStart.bind(this);this.$onCanvasActionEnd=this.$handleActionEnd.bind(this);this.$onCanvasAction=this.$handleAction.bind(this);(0,n.on)(t,n.EVENT_ACTION_START,this.$onCanvasActionStart);(0,n.on)(t,n.EVENT_ACTION_END,this.$onCanvasActionEnd);(0,n.on)(t,n.EVENT_ACTION,this.$onCanvasAction)}else{this.$render()}}disconnectedCallback(){const{$canvas:t}=this;if(t){if(this.$onCanvasActionStart){(0,n.off)(t,n.EVENT_ACTION_START,this.$onCanvasActionStart);this.$onCanvasActionStart=null}if(this.$onCanvasActionEnd){(0,n.off)(t,n.EVENT_ACTION_END,this.$onCanvasActionEnd);this.$onCanvasActionEnd=null}if(this.$onCanvasAction){(0,n.off)(t,n.EVENT_ACTION,this.$onCanvasAction);this.$onCanvasAction=null}}super.disconnectedCallback()}$getSelections(){let t=[];if(this.parentElement){t=Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(n.CROPPER_SELECTION)))}return t}$initSelection(t=false,e=false){const{initialCoverage:i,parentElement:s}=this;if((0,n.isPositiveNumber)(i)&&s){const o=this.aspectRatio||this.initialAspectRatio;let a=(e?0:this.width)||s.offsetWidth*i;let r=(e?0:this.height)||s.offsetHeight*i;if((0,n.isPositiveNumber)(o)){({width:a,height:r}=(0,n.getAdjustedSizes)({aspectRatio:o,width:a,height:r}))}this.$change(this.x,this.y,a,r);if(t){this.$center()}this.$initialSelection={x:this.x,y:this.y,width:this.width,height:this.height}}}$createSelection(){const t=this.cloneNode(true);if(this.hasAttribute("id")){t.removeAttribute("id")}t.initialCoverage=NaN;this.active=false;if(this.parentElement){this.parentElement.insertBefore(t,this.nextSibling)}return t}$removeSelection(t=this){if(this.parentElement){const e=this.$getSelections();if(e.length>1){const i=e.indexOf(t);const s=e[i+1]||e[i-1];if(s){t.active=false;this.parentElement.removeChild(t);s.active=true;s.$emit(n.EVENT_CHANGE,{x:s.x,y:s.y,width:s.width,height:s.height})}}else{this.$clear()}}}$handleActionStart(t){var e,i;const s=(i=(e=t.detail)===null||e===void 0?void 0:e.relatedEvent)===null||i===void 0?void 0:i.target;this.$action="";this.$actionStartTarget=s;if(!this.hidden&&this.multiple&&!this.active&&s===this&&this.parentElement){this.$getSelections().forEach(t=>{t.active=false});this.active=true;this.$emit(n.EVENT_CHANGE,{x:this.x,y:this.y,width:this.width,height:this.height})}}$handleAction(t){const{currentTarget:e,detail:i}=t;if(!e||!i){return}const{relatedEvent:s}=i;let{action:o}=i;if(!o&&this.multiple){o=this.$action||(s===null||s===void 0?void 0:s.target.action);this.$action=o}if(!o||this.hidden&&o!==n.ACTION_SELECT||this.multiple&&!this.active&&o!==n.ACTION_SCALE){return}const a=i.endX-i.startX;const r=i.endY-i.startY;const{width:h,height:c}=this;let{aspectRatio:l}=this;if(!(0,n.isPositiveNumber)(l)&&s.shiftKey){l=(0,n.isPositiveNumber)(h)&&(0,n.isPositiveNumber)(c)?h/c:1}switch(o){case n.ACTION_SELECT:if(a!==0&&r!==0){const{$canvas:t}=this;const s=(0,n.getOffset)(e);(this.multiple&&!this.hidden?this.$createSelection():this).$change(i.startX-s.left,i.startY-s.top,Math.abs(a),Math.abs(r),l);if(a<0){if(r<0){o=n.ACTION_RESIZE_NORTHWEST}else if(r>0){o=n.ACTION_RESIZE_SOUTHWEST}}else if(a>0){if(r<0){o=n.ACTION_RESIZE_NORTHEAST}else if(r>0){o=n.ACTION_RESIZE_SOUTHEAST}}if(t){t.$action=o}}break;case n.ACTION_MOVE:if(this.movable&&(this.dynamic||this.$actionStartTarget&&this.contains(this.$actionStartTarget))){this.$move(a,r)}break;case n.ACTION_SCALE:if(s&&this.zoomable&&(this.dynamic||this.contains(s.target))){const t=(0,n.getOffset)(e);this.$zoom(i.scale,s.pageX-t.left,s.pageY-t.top)}break;default:this.$resize(o,a,r,l)}}$handleActionEnd(){this.$action="";this.$actionStartTarget=null}$handleKeyDown(t){if(this.hidden||!this.keyboard||this.multiple&&!this.active||t.defaultPrevented){return}const{activeElement:e}=document;if(e&&(["INPUT","TEXTAREA"].includes(e.tagName)||["true","plaintext-only"].includes(e.contentEditable))){return}switch(t.key){case"Backspace":if(t.metaKey){t.preventDefault();this.$removeSelection()}break;case"Delete":t.preventDefault();this.$removeSelection();break;case"ArrowLeft":t.preventDefault();this.$move(-1,0);break;case"ArrowRight":t.preventDefault();this.$move(1,0);break;case"ArrowUp":t.preventDefault();this.$move(0,-1);break;case"ArrowDown":t.preventDefault();this.$move(0,1);break;case"+":t.preventDefault();this.$zoom(.1);break;case"-":t.preventDefault();this.$zoom(-.1);break}}$center(){const{parentElement:t}=this;if(!t){return this}const e=(t.offsetWidth-this.width)/2;const i=(t.offsetHeight-this.height)/2;return this.$change(e,i)}$move(t,e=t){return this.$moveTo(this.x+t,this.y+e)}$moveTo(t,e=t){if(!this.movable){return this}return this.$change(t,e)}$resize(t,e=0,i=0,s=this.aspectRatio){if(!this.resizable){return this}const o=(0,n.isPositiveNumber)(s);const{$canvas:a}=this;let{x:r,y:h,width:c,height:l}=this;switch(t){case n.ACTION_RESIZE_NORTH:h+=i;l-=i;if(l<0){t=n.ACTION_RESIZE_SOUTH;l=-l;h-=l}if(o){e=i*s;r+=e/2;c-=e;if(c<0){c=-c;r-=c}}break;case n.ACTION_RESIZE_EAST:c+=e;if(c<0){t=n.ACTION_RESIZE_WEST;c=-c;r-=c}if(o){i=e/s;h-=i/2;l+=i;if(l<0){l=-l;h-=l}}break;case n.ACTION_RESIZE_SOUTH:l+=i;if(l<0){t=n.ACTION_RESIZE_NORTH;l=-l;h-=l}if(o){e=i*s;r-=e/2;c+=e;if(c<0){c=-c;r-=c}}break;case n.ACTION_RESIZE_WEST:r+=e;c-=e;if(c<0){t=n.ACTION_RESIZE_EAST;c=-c;r-=c}if(o){i=e/s;h+=i/2;l-=i;if(l<0){l=-l;h-=l}}break;case n.ACTION_RESIZE_NORTHEAST:if(o){i=-e/s}h+=i;l-=i;c+=e;if(c<0&&l<0){t=n.ACTION_RESIZE_SOUTHWEST;c=-c;l=-l;r-=c;h-=l}else if(c<0){t=n.ACTION_RESIZE_NORTHWEST;c=-c;r-=c}else if(l<0){t=n.ACTION_RESIZE_SOUTHEAST;l=-l;h-=l}break;case n.ACTION_RESIZE_NORTHWEST:if(o){i=e/s}r+=e;h+=i;c-=e;l-=i;if(c<0&&l<0){t=n.ACTION_RESIZE_SOUTHEAST;c=-c;l=-l;r-=c;h-=l}else if(c<0){t=n.ACTION_RESIZE_NORTHEAST;c=-c;r-=c}else if(l<0){t=n.ACTION_RESIZE_SOUTHWEST;l=-l;h-=l}break;case n.ACTION_RESIZE_SOUTHEAST:if(o){i=e/s}c+=e;l+=i;if(c<0&&l<0){t=n.ACTION_RESIZE_NORTHWEST;c=-c;l=-l;r-=c;h-=l}else if(c<0){t=n.ACTION_RESIZE_SOUTHWEST;c=-c;r-=c}else if(l<0){t=n.ACTION_RESIZE_NORTHEAST;l=-l;h-=l}break;case n.ACTION_RESIZE_SOUTHWEST:if(o){i=-e/s}r+=e;c-=e;l+=i;if(c<0&&l<0){t=n.ACTION_RESIZE_NORTHEAST;c=-c;l=-l;r-=c;h-=l}else if(c<0){t=n.ACTION_RESIZE_SOUTHEAST;c=-c;r-=c}else if(l<0){t=n.ACTION_RESIZE_NORTHWEST;l=-l;h-=l}break}if(a){a.$setAction(t)}return this.$change(r,h,c,l)}$zoom(t,e,i){if(!this.zoomable||t===0){return this}if(t<0){t=1/(1-t)}else{t+=1}const{width:s,height:o}=this;const a=s*t;const r=o*t;let h=this.x;let c=this.y;if((0,n.isNumber)(e)&&(0,n.isNumber)(i)){h-=(a-s)*((e-this.x)/s);c-=(r-o)*((i-this.y)/o)}else{h-=(a-s)/2;c-=(r-o)/2}return this.$change(h,c,a,r)}$change(t,e,i=this.width,s=this.height,o=this.aspectRatio,a=false){if(this.$changing||!(0,n.isNumber)(t)||!(0,n.isNumber)(e)||!(0,n.isNumber)(i)||!(0,n.isNumber)(s)||i<0||s<0){return this}if((0,n.isPositiveNumber)(o)){({width:i,height:s}=(0,n.getAdjustedSizes)({aspectRatio:o,width:i,height:s},"cover"))}if(!this.precise){t=Math.round(t);e=Math.round(e);i=Math.round(i);s=Math.round(s)}if(t===this.x&&e===this.y&&i===this.width&&s===this.height&&Object.is(o,this.aspectRatio)&&!a){return this}if(this.hidden){this.hidden=false}if(this.$emit(n.EVENT_CHANGE,{x:t,y:e,width:i,height:s})===false){return this}this.$changing=true;this.x=t;this.y=e;this.width=i;this.height=s;this.$changing=false;return this.$render()}$reset(){const{x:t,y:e,width:i,height:s}=this.$initialSelection;return this.$change(t,e,i,s)}$clear(){this.$change(0,0,0,0,NaN,true);this.hidden=true;return this}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height})}$toCanvas(t){return new Promise((e,i)=>{if(!this.isConnected){i(new Error("The current element is not connected to the DOM."));return}const s=document.createElement("canvas");let{width:o,height:a}=this;let r=1;if((0,n.isPlainObject)(t)&&((0,n.isPositiveNumber)(t.width)||(0,n.isPositiveNumber)(t.height))){({width:o,height:a}=(0,n.getAdjustedSizes)({aspectRatio:o/a,width:t.width,height:t.height}));r=o/this.width}s.width=o;s.height=a;if(!this.$canvas){e(s);return}const h=this.$canvas.querySelector(this.$getTagNameOf(n.CROPPER_IMAGE));if(!h){e(s);return}h.$ready().then(i=>{const c=s.getContext("2d");if(c){const[e,l,d,E,u,f]=h.$getTransform();const p=-this.x;const T=-this.y;const C=(p*E-d*T)/(e*E-d*l);const $=(T*e-l*p)/(e*E-d*l);let N=e*C+d*$+u;let m=l*C+E*$+f;let g=i.naturalWidth;let b=i.naturalHeight;if(r!==1){N*=r;m*=r;g*=r;b*=r}const O=g/2;const A=b/2;c.fillStyle="transparent";c.fillRect(0,0,o,a);if((0,n.isPlainObject)(t)&&(0,n.isFunction)(t.beforeDraw)){t.beforeDraw.call(this,c,s)}c.save();c.translate(O,A);c.transform(e,l,d,E,N,m);c.translate(-O,-A);c.drawImage(i,0,0,g,b);c.restore()}e(s)}).catch(i)})}}r.$name=n.CROPPER_SELECTION;r.$version="2.0.0"},1431:(t,e,i)=>{i.r(e);i.d(e,{default:()=>a});var s=i(1425);var n=i(1423);var o=`:host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}`;class a extends s["default"]{constructor(){super(...arguments);this.$style=o;this.bordered=false;this.columns=3;this.covered=false;this.rows=3;this.slottable=false;this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["bordered","columns","covered","rows"])}$propertyChangedCallback(t,e,i){if(Object.is(i,e)){return}super.$propertyChangedCallback(t,e,i);if(t==="rows"||t==="columns"){this.$nextTick(()=>{this.$render()})}}connectedCallback(){super.connectedCallback();this.$render()}$render(){const t=this.$getShadowRoot();const e=document.createDocumentFragment();for(let t=0;t<this.rows;t+=1){const t=document.createElement("span");t.setAttribute("role","row");for(let e=0;e<this.columns;e+=1){const e=document.createElement("span");e.setAttribute("role","gridcell");t.appendChild(e)}e.appendChild(t)}if(t){t.innerHTML="";t.appendChild(e)}}}a.$name=n.CROPPER_GIRD;a.$version="2.0.0"},1432:(t,e,i)=>{i.r(e);i.d(e,{default:()=>a});var s=i(1425);var n=i(1423);var o=`:host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:"";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}`;class a extends s["default"]{constructor(){super(...arguments);this.$style=o;this.centered=false;this.slottable=false;this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["centered"])}}a.$name=n.CROPPER_CROSSHAIR;a.$version="2.0.0"},1433:(t,e,i)=>{i.r(e);i.d(e,{RESIZE_BOTH:()=>l,RESIZE_HORIZONTAL:()=>d,RESIZE_NONE:()=>u,RESIZE_VERTICAL:()=>E,default:()=>f});var s=i(1425);var n=i(1423);var o=`:host{display:block;height:100%;overflow:hidden;position:relative;width:100%}`;const a=new WeakMap;const r=new WeakMap;const h=new WeakMap;const c=new WeakMap;const l="both";const d="horizontal";const E="vertical";const u="none";class f extends s["default"]{constructor(){super(...arguments);this.$onSelectionChange=null;this.$onSourceImageLoad=null;this.$onSourceImageTransform=null;this.$scale=1;this.$style=o;this.resize=E;this.selection="";this.slottable=false}set $image(t){r.set(this,t)}get $image(){return r.get(this)}set $sourceImage(t){c.set(this,t)}get $sourceImage(){return c.get(this)}set $canvas(t){a.set(this,t)}get $canvas(){return a.get(this)}set $selection(t){h.set(this,t)}get $selection(){return h.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["resize","selection"])}connectedCallback(){super.connectedCallback();let t=null;if(this.selection){t=this.ownerDocument.querySelector(this.selection)}else{t=this.closest(this.$getTagNameOf(n.CROPPER_SELECTION))}if((0,n.isElement)(t)){this.$selection=t;this.$onSelectionChange=this.$handleSelectionChange.bind(this);(0,n.on)(t,n.EVENT_CHANGE,this.$onSelectionChange);const e=t.closest(this.$getTagNameOf(n.CROPPER_CANVAS));if(e){this.$canvas=e;const t=e.querySelector(this.$getTagNameOf(n.CROPPER_IMAGE));if(t){this.$sourceImage=t;this.$image=t.cloneNode(true);this.$getShadowRoot().appendChild(this.$image);this.$onSourceImageLoad=this.$handleSourceImageLoad.bind(this);this.$onSourceImageTransform=this.$handleSourceImageTransform.bind(this);(0,n.on)(t.$image,n.EVENT_LOAD,this.$onSourceImageLoad);(0,n.on)(t,n.EVENT_TRANSFORM,this.$onSourceImageTransform)}}this.$render()}}disconnectedCallback(){const{$selection:t,$sourceImage:e}=this;if(t&&this.$onSelectionChange){(0,n.off)(t,n.EVENT_CHANGE,this.$onSelectionChange);this.$onSelectionChange=null}if(e&&this.$onSourceImageLoad){(0,n.off)(e.$image,n.EVENT_LOAD,this.$onSourceImageLoad);this.$onSourceImageLoad=null}if(e&&this.$onSourceImageTransform){(0,n.off)(e,n.EVENT_TRANSFORM,this.$onSourceImageTransform);this.$onSourceImageTransform=null}super.disconnectedCallback()}$handleSelectionChange(t){this.$render(t.detail)}$handleSourceImageLoad(){const{$image:t,$sourceImage:e}=this;const i=t.getAttribute("src");const s=e.getAttribute("src");if(s&&s!==i){t.setAttribute("src",s);t.$ready(()=>{setTimeout(()=>{this.$render()},50)})}}$handleSourceImageTransform(t){this.$render(undefined,t.detail.matrix)}$render(t,e){const{$canvas:i,$selection:s}=this;if(!t&&!s.hidden){t=s}if(!t||t.x===0&&t.y===0&&t.width===0&&t.height===0){t={x:0,y:0,width:i.offsetWidth,height:i.offsetHeight}}const{x:n,y:o,width:a,height:r}=t;const h={};const{clientWidth:c,clientHeight:f}=this;let p=c;let T=f;let C=NaN;switch(this.resize){case l:C=1;p=a;T=r;h.width=a;h.height=r;break;case d:C=r>0?f/r:0;p=a*C;h.width=p;break;case E:C=a>0?c/a:0;T=r*C;h.height=T;break;case u:default:if(c>0){C=a>0?c/a:0}else if(f>0){C=r>0?f/r:0}}this.$scale=C;this.$setStyles(h);if(this.$sourceImage){this.$transformImageByOffset(e!==null&&e!==void 0?e:this.$sourceImage.$getTransform(),-n,-o)}}$transformImageByOffset(t,e,i){const{$image:s,$scale:n,$sourceImage:o}=this;if(o&&s&&n>=0){const[o,a,r,h,c,l]=t;const d=(e*h-r*i)/(o*h-r*a);const E=(i*o-a*e)/(o*h-r*a);const u=o*d+r*E+c;const f=a*d+h*E+l;s.$ready(t=>{this.$setStyles.call(s,{width:t.naturalWidth*n,height:t.naturalHeight*n})});s.$setTransform(o,a,r,h,u*n,f*n)}}}f.$name=n.CROPPER_VIEWER;f.$version="2.0.0"}};var e={};function i(s){var n=e[s];if(n!==undefined){return n.exports}var o=e[s]={exports:{}};t[s](o,o.exports,i);return o.exports}(()=>{i.d=(t,e)=>{for(var s in e){if(i.o(e,s)&&!i.o(t,s)){Object.defineProperty(t,s,{enumerable:true,get:e[s]})}}}})();(()=>{i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})();(()=>{i.r=t=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})}})();var s={};(()=>{i.r(s);var t=i(1422);
/**
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @copyright 2003-2014 by the INDEPNET Development Team.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */window.Cropper=t["default"]})()})();