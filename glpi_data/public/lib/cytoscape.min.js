(()=>{var e=Array(1049).concat([e=>{e.exports=function(e){function t(e){typeof console!=="undefined"&&(console.error||console.log)("[Script Loader]",e)}function r(){return typeof attachEvent!=="undefined"&&typeof addEventListener==="undefined"}try{if(typeof execScript!=="undefined"&&r()){execScript(e)}else if(typeof eval!=="undefined"){eval.call(null,e)}else{t("EvalError: No eval function available")}}catch(e){t(e)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e){if(Array.isArray(e))return e}function i(e){if(Array.isArray(e))return n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(e,m(n.key),n)}}function u(e,t,r){return t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:false}),e}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:true}:{done:false,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=true,s=false;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=true,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r,e}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=true,l=false;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=true,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){return a(e)||v(e,t)||x(e,t)||d()}function g(e){return i(e)||c(e)||x(e)||h()}function y(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(undefined!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function m(e){var t=y(e,"string");return"symbol"==typeof t?t:t+""}function b(e){"@babel/helpers - typeof";return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):undefined}}var w=typeof window==="undefined"?null:window;var E=w?w.navigator:null;w?w.document:null;var k=b("");var _=b({});var T=b(function(){});var C=typeof HTMLElement==="undefined"?"undefined":b(HTMLElement);var S=function e(t){return t&&t.instanceString&&P(t.instanceString)?t.instanceString():null};var D=function e(t){return t!=null&&b(t)==k};var P=function e(t){return t!=null&&b(t)===T};var A=function e(t){return!N(t)&&(Array.isArray?Array.isArray(t):t!=null&&t instanceof Array)};var M=function e(t){return t!=null&&b(t)===_&&!A(t)&&t.constructor===Object};var B=function e(t){return t!=null&&b(t)===_};var I=function e(t){return t!=null&&b(t)===b(1)&&!isNaN(t)};var O=function e(t){return I(t)&&Math.floor(t)===t};var R=function e(t){if("undefined"===C){return undefined}else{return null!=t&&t instanceof HTMLElement}};var N=function e(t){return L(t)||z(t)};var L=function e(t){return S(t)==="collection"&&t._private.single};var z=function e(t){return S(t)==="collection"&&!t._private.single};var j=function e(t){return S(t)==="core"};var V=function e(t){return S(t)==="stylesheet"};var F=function e(t){return S(t)==="event"};var G=function e(t){if(t===undefined||t===null){return true}else if(t===""||t.match(/^\s+$/)){return true}return false};var W=function e(t){if(typeof HTMLElement==="undefined"){return false}else{return t instanceof HTMLElement}};var q=function e(t){return M(t)&&I(t.x1)&&I(t.x2)&&I(t.y1)&&I(t.y2)};var X=function e(t){return B(t)&&P(t.then)};var Y=function e(){return E&&E.userAgent.match(/msie|trident|edge/i)};var U=function e(t,r){if(!r){r=function e(){if(arguments.length===1){return arguments[0]}else if(arguments.length===0){return"undefined"}var t=[];for(var r=0;r<arguments.length;r++){t.push(arguments[r])}return t.join("$")}}var n=function e(){var a=this;var i=arguments;var o;var s=r.apply(a,i);var u=n.cache;if(!(o=u[s])){o=u[s]=t.apply(a,i)}return o};n.cache={};return n};var H=U(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})});var K=U(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})});var Z=U(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t});var $=function e(t){if(G(t)){return t}return t.charAt(0).toUpperCase()+t.substring(1)};var Q=function e(t,r){return t.slice(-1*r.length)===r};var J="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))";var ee="rgb[a]?\\(("+J+"[%]?)\\s*,\\s*("+J+"[%]?)\\s*,\\s*("+J+"[%]?)(?:\\s*,\\s*("+J+"))?\\)";var te="rgb[a]?\\((?:"+J+"[%]?)\\s*,\\s*(?:"+J+"[%]?)\\s*,\\s*(?:"+J+"[%]?)(?:\\s*,\\s*(?:"+J+"))?\\)";var re="hsl[a]?\\(("+J+")\\s*,\\s*("+J+"[%])\\s*,\\s*("+J+"[%])(?:\\s*,\\s*("+J+"))?\\)";var ne="hsl[a]?\\((?:"+J+")\\s*,\\s*(?:"+J+"[%])\\s*,\\s*(?:"+J+"[%])(?:\\s*,\\s*(?:"+J+"))?\\)";var ae="\\#[0-9a-fA-F]{3}";var ie="\\#[0-9a-fA-F]{6}";var oe=function e(t,r){if(t<r){return-1}else if(t>r){return 1}else{return 0}};var se=function e(t,r){return-1*oe(t,r)};var ue=Object.assign!=null?Object.assign.bind(Object):function(e){var t=arguments;for(var r=1;r<t.length;r++){var n=t[r];if(n==null){continue}var a=Object.keys(n);for(var i=0;i<a.length;i++){var o=a[i];e[o]=n[o]}}return e};var le=function e(t){if(!(t.length===4||t.length===7)||t[0]!=="#"){return}var r=t.length===4;var n,a,i;var o=16;if(r){n=parseInt(t[1]+t[1],o);a=parseInt(t[2]+t[2],o);i=parseInt(t[3]+t[3],o)}else{n=parseInt(t[1]+t[2],o);a=parseInt(t[3]+t[4],o);i=parseInt(t[5]+t[6],o)}return[n,a,i]};var fe=function e(t){var r;var n,a,i,o,s,u,l;function f(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}var c=new RegExp("^"+re+"$").exec(t);if(c){n=parseInt(c[1]);if(n<0){n=(360- -1*n%360)%360}else if(n>360){n=n%360}n/=360;a=parseFloat(c[2]);if(a<0||a>100){return}a=a/100;i=parseFloat(c[3]);if(i<0||i>100){return}i=i/100;o=c[4];if(o!==undefined){o=parseFloat(o);if(o<0||o>1){return}}if(a===0){s=u=l=Math.round(i*255)}else{var v=i<.5?i*(1+a):i+a-i*a;var d=2*i-v;s=Math.round(255*f(d,v,n+1/3));u=Math.round(255*f(d,v,n));l=Math.round(255*f(d,v,n-1/3))}r=[s,u,l,o]}return r};var ce=function e(t){var r;var n=new RegExp("^"+ee+"$").exec(t);if(n){r=[];var a=[];for(var i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"){a[i]=true}o=parseFloat(o);if(a[i]){o=o/100*255}if(o<0||o>255){return}r.push(Math.floor(o))}var s=a[1]||a[2]||a[3];var u=a[1]&&a[2]&&a[3];if(s&&!u){return}var l=n[4];if(l!==undefined){l=parseFloat(l);if(l<0||l>1){return}r.push(l)}}return r};var ve=function e(t){return he[t.toLowerCase()]};var de=function e(t){return(A(t)?t:null)||ve(t)||le(t)||ce(t)||fe(t)};var he={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var pe=function e(t){var r=t.map;var n=t.keys;var a=n.length;for(var i=0;i<a;i++){var o=n[i];if(M(o)){throw Error("Tried to set map with object key")}if(i<n.length-1){if(r[o]==null){r[o]={}}r=r[o]}else{r[o]=t.value}}};var ge=function e(t){var r=t.map;var n=t.keys;var a=n.length;for(var i=0;i<a;i++){var o=n[i];if(M(o)){throw Error("Tried to get map with object key")}r=r[o];if(r==null){return r}}return r};var ye=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof r.g!=="undefined"?r.g:typeof self!=="undefined"?self:{};function me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var be;var xe;function we(){if(xe)return be;xe=1;function e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}be=e;return be}var Ee;var ke;function _e(){if(ke)return Ee;ke=1;var e=typeof ye=="object"&&ye&&ye.Object===Object&&ye;Ee=e;return Ee}var Te;var Ce;function Se(){if(Ce)return Te;Ce=1;var e=_e();var t=typeof self=="object"&&self&&self.Object===Object&&self;var r=e||t||Function("return this")();Te=r;return Te}var De;var Pe;function Ae(){if(Pe)return De;Pe=1;var e=Se();var t=function(){return e.Date.now()};De=t;return De}var Me;var Be;function Ie(){if(Be)return Me;Be=1;var e=/\s/;function t(t){var r=t.length;while(r--&&e.test(t.charAt(r))){}return r}Me=t;return Me}var Oe;var Re;function Ne(){if(Re)return Oe;Re=1;var e=Ie();var t=/^\s+/;function r(r){return r?r.slice(0,e(r)+1).replace(t,""):r}Oe=r;return Oe}var Le;var ze;function je(){if(ze)return Le;ze=1;var e=Se();var t=e.Symbol;Le=t;return Le}var Ve;var Fe;function Ge(){if(Fe)return Ve;Fe=1;var e=je();var t=Object.prototype;var r=t.hasOwnProperty;var n=t.toString;var a=e?e.toStringTag:undefined;function i(e){var t=r.call(e,a),i=e[a];try{e[a]=undefined;var o=true}catch(e){}var s=n.call(e);if(o){if(t){e[a]=i}else{delete e[a]}}return s}Ve=i;return Ve}var We;var qe;function Xe(){if(qe)return We;qe=1;var e=Object.prototype;var t=e.toString;function r(e){return t.call(e)}We=r;return We}var Ye;var Ue;function He(){if(Ue)return Ye;Ue=1;var e=je(),t=Ge(),r=Xe();var n="[object Null]",a="[object Undefined]";var i=e?e.toStringTag:undefined;function o(e){if(e==null){return e===undefined?a:n}return i&&i in Object(e)?t(e):r(e)}Ye=o;return Ye}var Ke;var Ze;function $e(){if(Ze)return Ke;Ze=1;function e(e){return e!=null&&typeof e=="object"}Ke=e;return Ke}var Qe;var Je;function et(){if(Je)return Qe;Je=1;var e=He(),t=$e();var r="[object Symbol]";function n(n){return typeof n=="symbol"||t(n)&&e(n)==r}Qe=n;return Qe}var tt;var rt;function nt(){if(rt)return tt;rt=1;var e=Ne(),t=we(),r=et();var n=0/0;var a=/^[-+]0x[0-9a-f]+$/i;var i=/^0b[01]+$/i;var o=/^0o[0-7]+$/i;var s=parseInt;function u(u){if(typeof u=="number"){return u}if(r(u)){return n}if(t(u)){var l=typeof u.valueOf=="function"?u.valueOf():u;u=t(l)?l+"":l}if(typeof u!="string"){return u===0?u:+u}u=e(u);var f=i.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):a.test(u)?n:+u}tt=u;return tt}var at;var it;function ot(){if(it)return at;it=1;var e=we(),t=Ae(),r=nt();var n="Expected a function";var a=Math.max,i=Math.min;function o(o,s,u){var l,f,c,v,d,h,p=0,g=false,y=false,m=true;if(typeof o!="function"){throw new TypeError(n)}s=r(s)||0;if(e(u)){g=!!u.leading;y="maxWait"in u;c=y?a(r(u.maxWait)||0,s):c;m="trailing"in u?!!u.trailing:m}function b(e){var t=l,r=f;l=f=undefined;p=e;v=o.apply(r,t);return v}function x(e){p=e;d=setTimeout(k,s);return g?b(e):v}function w(e){var t=e-h,r=e-p,n=s-t;return y?i(n,c-r):n}function E(e){var t=e-h,r=e-p;return h===undefined||t>=s||t<0||y&&r>=c}function k(){var e=t();if(E(e)){return _(e)}d=setTimeout(k,w(e))}function _(e){d=undefined;if(m&&l){return b(e)}l=f=undefined;return v}function T(){if(d!==undefined){clearTimeout(d)}p=0;l=h=f=d=undefined}function C(){return d===undefined?v:_(t())}function S(){var e=t(),r=E(e);l=arguments;f=this;h=e;if(r){if(d===undefined){return x(h)}if(y){clearTimeout(d);d=setTimeout(k,s);return b(h)}}if(d===undefined){d=setTimeout(k,s)}return v}S.cancel=T;S.flush=C;return S}at=o;return at}var st=ot();var ut=me(st);var lt=w?w.performance:null;var ft=lt&&lt.now?function(){return lt.now()}:function(){return Date.now()};var ct=function(){if(w){if(w.requestAnimationFrame){return function(e){w.requestAnimationFrame(e)}}else if(w.mozRequestAnimationFrame){return function(e){w.mozRequestAnimationFrame(e)}}else if(w.webkitRequestAnimationFrame){return function(e){w.webkitRequestAnimationFrame(e)}}else if(w.msRequestAnimationFrame){return function(e){w.msRequestAnimationFrame(e)}}}return function(e){if(e){setTimeout(function(){e(ft())},1e3/60)}}}();var vt=function e(t){return ct(t)};var dt=ft;var ht=9261;var pt=65599;var gt=5381;var yt=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ht;var n=r;var a;for(;;){a=t.next();if(a.done){break}n=n*pt+a.value|0}return n};var mt=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ht;return r*pt+t|0};var bt=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:gt;return(r<<5)+r+t|0};var xt=function e(t,r){return t*2097152+r};var wt=function e(t){return t[0]*2097152+t[1]};var Et=function e(t,r){return[mt(t[0],r[0]),bt(t[1],r[1])]};var kt=function e(t,r){var n={value:0,done:false};var a=0;var i=t.length;var o={next:function e(){if(a<i){n.value=t[a++]}else{n.done=true}return n}};return yt(o,r)};var _t=function e(t,r){var n={value:0,done:false};var a=0;var i=t.length;var o={next:function e(){if(a<i){n.value=t.charCodeAt(a++)}else{n.done=true}return n}};return yt(o,r)};var Tt=function e(){return Ct(arguments)};var Ct=function e(t){var r;for(var n=0;n<t.length;n++){var a=t[n];if(n===0){r=_t(a)}else{r=_t(a,r)}}return r};var St=true;var Dt=console.warn!=null;var Pt=console.trace!=null;var At=Number.MAX_SAFE_INTEGER||9007199254740991;var Mt=function e(){return true};var Bt=function e(){return false};var It=function e(){return 0};var Ot=function e(){};var Rt=function e(t){throw new Error(t)};var Nt=function e(t){if(t!==undefined){St=!!t}else{return St}};var Lt=function e(t){if(!Nt()){return}if(Dt){console.warn(t)}else{console.log(t);if(Pt){console.trace()}}};var zt=function e(t){return ue({},t)};var jt=function e(t){if(t==null){return t}if(A(t)){return t.slice()}else if(M(t)){return zt(t)}else{return t}};var Vt=function e(t){return t.slice()};var Ft=function e(t,r){for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r};var Gt={};var Wt=function e(){return Gt};var qt=function e(t){var r=Object.keys(t);return function(e){var n={};for(var a=0;a<r.length;a++){var i=r[a];var o=e==null?undefined:e[i];n[i]=o===undefined?t[i]:o}return n}};var Xt=function e(t,r,n){for(var a=t.length-1;a>=0;a--){if(t[a]===r){t.splice(a,1)}}};var Yt=function e(t){t.splice(0,t.length)};var Ut=function e(t,r){for(var n=0;n<r.length;n++){var a=r[n];t.push(a)}};var Ht=function e(t,r,n){if(n){r=Z(n,r)}return t[r]};var Kt=function e(t,r,n,a){if(n){r=Z(n,r)}t[r]=a};var Zt=function(){function e(){o(this,e);this._obj={}}return u(e,[{key:"set",value:function e(t,r){this._obj[t]=r;return this}},{key:"delete",value:function e(t){this._obj[t]=undefined;return this}},{key:"clear",value:function e(){this._obj={}}},{key:"has",value:function e(t){return this._obj[t]!==undefined}},{key:"get",value:function e(t){return this._obj[t]}}])}();var $t=typeof Map!=="undefined"?Map:Zt;var Qt="undefined";var Jt=function(){function e(t){o(this,e);this._obj=Object.create(null);this.size=0;if(t!=null){var r;if(t.instanceString!=null&&t.instanceString()===this.instanceString()){r=t.toArray()}else{r=t}for(var n=0;n<r.length;n++){this.add(r[n])}}}return u(e,[{key:"instanceString",value:function e(){return"set"}},{key:"add",value:function e(t){var r=this._obj;if(r[t]!==1){r[t]=1;this.size++}}},{key:"delete",value:function e(t){var r=this._obj;if(r[t]===1){r[t]=0;this.size--}}},{key:"clear",value:function e(){this._obj=Object.create(null)}},{key:"has",value:function e(t){return this._obj[t]===1}},{key:"toArray",value:function e(){var t=this;return Object.keys(this._obj).filter(function(e){return t.has(e)})}},{key:"forEach",value:function e(t,r){return this.toArray().forEach(t,r)}}])}();var er=(typeof Set==="undefined"?"undefined":b(Set))!==Qt?Set:Jt;var tr=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(t===undefined||r===undefined||!j(t)){Rt("An element must have a core reference and parameters set");return}var a=r.group;if(a==null){if(r.data&&r.data.source!=null&&r.data.target!=null){a="edges"}else{a="nodes"}}if(a!=="nodes"&&a!=="edges"){Rt("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1;this[0]=this;var i=this._private={cy:t,single:true,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:undefined,autoHeight:undefined,autoPadding:undefined,compoundBoundsClean:false,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:true,selected:r.selected?true:false,selectable:r.selectable===undefined?true:r.selectable?true:false,locked:r.locked?true:false,grabbed:false,grabbable:r.grabbable===undefined?true:r.grabbable?true:false,pannable:r.pannable===undefined?a==="edges"?true:false:r.pannable?true:false,active:false,classes:new er,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:false,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null){i.position.x=0}if(i.position.y==null){i.position.y=0}if(r.renderedPosition){var o=r.renderedPosition;var s=t.pan();var u=t.zoom();i.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];if(A(r.classes)){l=r.classes}else if(D(r.classes)){l=r.classes.split(/\s+/)}for(var f=0,c=l.length;f<c;f++){var v=l[f];if(!v||v===""){continue}i.classes.add(v)}this.createEmitter();if(n===undefined||n){this.restore()}var d=r.style||r.css;if(d){Lt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead.");this.style(d)}};var rr=function e(t){t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs};return function e(r,n,a){var i;if(M(r)&&!N(r)){i=r;r=i.roots||i.root;n=i.visit;a=i.directed}a=arguments.length===2&&!P(n)?n:a;n=P(n)?n:function(){};var o=this._private.cy;var s=r=D(r)?this.filter(r):r;var u=[];var l=[];var f={};var c={};var v={};var d=0;var h;var p=this.byGroup(),g=p.nodes,y=p.edges;for(var m=0;m<s.length;m++){var b=s[m];var x=b.id();if(b.isNode()){u.unshift(b);if(t.bfs){v[x]=true;l.push(b)}c[x]=0}}var w=function e(){var r=t.bfs?u.shift():u.pop();var i=r.id();if(t.dfs){if(v[i]){return 0}v[i]=true;l.push(r)}var o=c[i];var s=f[i];var p=s!=null?s.source():null;var m=s!=null?s.target():null;var b=s==null?undefined:r.same(p)?m[0]:p[0];var x;x=n(r,s,b,d++,o);if(x===true){h=r;return 1}if(x===false){return 1}var w=r.connectedEdges().filter(function(e){return(!a||e.source().same(r))&&y.has(e)});for(var E=0;E<w.length;E++){var k=w[E];var _=k.connectedNodes().filter(function(e){return!e.same(r)&&g.has(e)});var T=_.id();if(_.length!==0&&!v[T]){_=_[0];u.push(_);if(t.bfs){v[T]=true;l.push(_)}f[T]=k;c[T]=c[i]+1}}},E;while(u.length!==0){E=w();if(E===0)continue;if(E===1)break}var k=o.collection();for(var _=0;_<l.length;_++){var T=l[_];var C=f[T.id()];if(C!=null){k.push(C)}k.push(T)}return{path:o.collection(k),found:o.collection(h)}}};var nr={breadthFirstSearch:rr({bfs:true}),depthFirstSearch:rr({dfs:true})};nr.bfs=nr.breadthFirstSearch;nr.dfs=nr.depthFirstSearch;var ar={exports:{}};var ir=ar.exports;var or;function sr(){if(or)return ar.exports;or=1;(function(e,t){(function(){var t,r,n,a,i,o,s,u,l,f,c,v,d,h,p;n=Math.floor,f=Math.min;r=function(e,t){if(e<t){return-1}if(e>t){return 1}return 0};l=function(e,t,a,i,o){var s;if(a==null){a=0}if(o==null){o=r}if(a<0){throw new Error("lo must be non-negative")}if(i==null){i=e.length}while(a<i){s=n((a+i)/2);if(o(t,e[s])<0){i=s}else{a=s+1}}return[].splice.apply(e,[a,a-a].concat(t)),t};o=function(e,t,n){if(n==null){n=r}e.push(t);return h(e,0,e.length-1,n)};i=function(e,t){var n,a;if(t==null){t=r}n=e.pop();if(e.length){a=e[0];e[0]=n;p(e,0,t)}else{a=n}return a};u=function(e,t,n){var a;if(n==null){n=r}a=e[0];e[0]=t;p(e,0,n);return a};s=function(e,t,n){var a;if(n==null){n=r}if(e.length&&n(e[0],t)<0){a=[e[0],t],t=a[0],e[0]=a[1];p(e,0,n)}return t};a=function(e,t){var a,i,o,s,u,l;if(t==null){t=r}s=function(){l=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--){l.push(t)}return l}.apply(this).reverse();u=[];for(i=0,o=s.length;i<o;i++){a=s[i];u.push(p(e,a,t))}return u};d=function(e,t,n){var a;if(n==null){n=r}a=e.indexOf(t);if(a===-1){return}h(e,0,a,n);return p(e,a,n)};c=function(e,t,n){var i,o,u,l,f;if(n==null){n=r}o=e.slice(0,t);if(!o.length){return o}a(o,n);f=e.slice(t);for(u=0,l=f.length;u<l;u++){i=f[u];s(o,i,n)}return o.sort(n).reverse()};v=function(e,t,n){var o,s,u,c,v,d,h,p,g;if(n==null){n=r}if(t*10<=e.length){u=e.slice(0,t).sort(n);if(!u.length){return u}s=u[u.length-1];h=e.slice(t);for(c=0,d=h.length;c<d;c++){o=h[c];if(n(o,s)<0){l(u,o,0,null,n);u.pop();s=u[u.length-1]}}return u}a(e,n);g=[];for(v=0,p=f(t,e.length);0<=p?v<p:v>p;0<=p?++v:--v){g.push(i(e,n))}return g};h=function(e,t,n,a){var i,o,s;if(a==null){a=r}i=e[n];while(n>t){s=n-1>>1;o=e[s];if(a(i,o)<0){e[n]=o;n=s;continue}break}return e[n]=i};p=function(e,t,n){var a,i,o,s,u;if(n==null){n=r}i=e.length;u=t;o=e[t];a=2*t+1;while(a<i){s=a+1;if(s<i&&!(n(e[a],e[s])<0)){a=s}e[t]=e[a];t=a;a=2*t+1}e[t]=o;return h(e,u,t,n)};t=function(){e.push=o;e.pop=i;e.replace=u;e.pushpop=s;e.heapify=a;e.updateItem=d;e.nlargest=c;e.nsmallest=v;function e(e){this.cmp=e!=null?e:r;this.nodes=[]}e.prototype.push=function(e){return o(this.nodes,e,this.cmp)};e.prototype.pop=function(){return i(this.nodes,this.cmp)};e.prototype.peek=function(){return this.nodes[0]};e.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1};e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)};e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)};e.prototype.heapify=function(){return a(this.nodes,this.cmp)};e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)};e.prototype.clear=function(){return this.nodes=[]};e.prototype.empty=function(){return this.nodes.length===0};e.prototype.size=function(){return this.nodes.length};e.prototype.clone=function(){var t;t=new e;t.nodes=this.nodes.slice(0);return t};e.prototype.toArray=function(){return this.nodes.slice(0)};e.prototype.insert=e.prototype.push;e.prototype.top=e.prototype.peek;e.prototype.front=e.prototype.peek;e.prototype.has=e.prototype.contains;e.prototype.copy=e.prototype.clone;return e}();(function(t,r){{return e.exports=r()}})(this,function(){return t})}).call(ir)})(ar);return ar.exports}var ur;var lr;function fr(){if(lr)return ur;lr=1;ur=sr();return ur}var cr=fr();var vr=me(cr);var dr=qt({root:null,weight:function e(t){return 1},directed:false});var hr={dijkstra:function e(t){if(!M(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var n=dr(t),a=n.root,i=n.weight,o=n.directed;var s=this;var u=i;var l=D(a)?this.filter(a)[0]:a[0];var f={};var c={};var v={};var d=this.byGroup(),h=d.nodes,p=d.edges;p.unmergeBy(function(e){return e.isLoop()});var g=function e(t){return f[t.id()]};var y=function e(t,r){f[t.id()]=r;m.updateItem(t)};var m=new vr(function(e,t){return g(e)-g(t)});for(var b=0;b<h.length;b++){var x=h[b];f[x.id()]=x.same(l)?0:Infinity;m.push(x)}var w=function e(t,r){var n=(o?t.edgesTo(r):t.edgesWith(r)).intersect(p);var a=Infinity;var i;for(var s=0;s<n.length;s++){var l=n[s];var f=u(l);if(f<a||!i){a=f;i=l}}return{edge:i,dist:a}};while(m.size()>0){var E=m.pop();var k=g(E);var _=E.id();v[_]=k;if(k===Infinity){continue}var T=E.neighborhood().intersect(h);for(var C=0;C<T.length;C++){var S=T[C];var P=S.id();var A=w(E,S);var B=k+A.dist;if(B<g(S)){y(S,B);c[P]={node:E,edge:A.edge}}}}return{distanceTo:function e(t){var r=D(t)?h.filter(t)[0]:t[0];return v[r.id()]},pathTo:function e(t){var r=D(t)?h.filter(t)[0]:t[0];var n=[];var a=r;var i=a.id();if(r.length>0){n.unshift(r);while(c[i]){var o=c[i];n.unshift(o.edge);n.unshift(o.node);a=o.node;i=a.id()}}return s.spawn(n)}}}};var pr={kruskal:function e(t){t=t||function(e){return 1};var r=this.byGroup(),n=r.nodes,a=r.edges;var i=n.length;var o=new Array(i);var s=n;var u=function e(t){for(var r=0;r<o.length;r++){var n=o[r];if(n.has(t)){return r}}};for(var l=0;l<i;l++){o[l]=this.spawn(n[l])}var f=a.sort(function(e,r){return t(e)-t(r)});for(var c=0;c<f.length;c++){var v=f[c];var d=v.source()[0];var h=v.target()[0];var p=u(d);var g=u(h);var y=o[p];var m=o[g];if(p!==g){s.merge(v);y.merge(m);o.splice(g,1)}}return s}};var gr=qt({root:null,goal:null,weight:function e(t){return 1},heuristic:function e(t){return 0},directed:false});var yr={aStar:function e(t){var r=this.cy();var n=gr(t),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,u=n.weight;a=r.collection(a)[0];i=r.collection(i)[0];var l=a.id();var f=i.id();var c={};var v={};var d={};var h=new vr(function(e,t){return v[e.id()]-v[t.id()]});var p=new er;var g={};var y={};var m=function e(t,r){h.push(t);p.add(r)};var b,x;var w=function e(){b=h.pop();x=b.id();p["delete"](x)};var E=function e(t){return p.has(t)};m(a,l);c[l]=0;v[l]=o(a);var k=0;while(h.size()>0){w();k++;if(x===f){var _=[];var T=i;var C=f;var S=y[C];for(;;){_.unshift(T);if(S!=null){_.unshift(S)}T=g[C];if(T==null){break}C=T.id();S=y[C]}return{found:true,distance:c[x],path:this.spawn(_),steps:k}}d[x]=true;var D=b._private.edges;for(var P=0;P<D.length;P++){var A=D[P];if(!this.hasElementWithId(A.id())){continue}if(s&&A.data("source")!==x){continue}var M=A.source();var B=A.target();var I=M.id()!==x?M:B;var O=I.id();if(!this.hasElementWithId(O)){continue}if(d[O]){continue}var R=c[x]+u(A);if(!E(O)){c[O]=R;v[O]=R+o(I);m(I,O);g[O]=b;y[O]=A;continue}if(R<c[O]){c[O]=R;v[O]=R+o(I);g[O]=b;y[O]=A}}}return{found:false,distance:undefined,path:undefined,steps:k}}};var mr=qt({weight:function e(t){return 1},directed:false});var br={floydWarshall:function e(t){var r=this.cy();var n=mr(t),a=n.weight,i=n.directed;var o=a;var s=this.byGroup(),u=s.nodes,l=s.edges;var f=u.length;var c=f*f;var v=function e(t){return u.indexOf(t)};var d=function e(t){return u[t]};var h=new Array(c);for(var p=0;p<c;p++){var g=p%f;var y=(p-g)/f;if(y===g){h[p]=0}else{h[p]=Infinity}}var m=new Array(c);var b=new Array(c);for(var x=0;x<l.length;x++){var w=l[x];var E=w.source()[0];var k=w.target()[0];if(E===k){continue}var _=v(E);var T=v(k);var C=_*f+T;var S=o(w);if(h[C]>S){h[C]=S;m[C]=T;b[C]=w}if(!i){var P=T*f+_;if(!i&&h[P]>S){h[P]=S;m[P]=_;b[P]=w}}}for(var A=0;A<f;A++){for(var M=0;M<f;M++){var B=M*f+A;for(var I=0;I<f;I++){var O=M*f+I;var R=A*f+I;if(h[B]+h[R]<h[O]){h[O]=h[B]+h[R];m[O]=m[B]}}}}var N=function e(t){return(D(t)?r.filter(t):t)[0]};var L=function e(t){return v(N(t))};var z={distance:function e(t,r){var n=L(t);var a=L(r);return h[n*f+a]},path:function e(t,n){var a=L(t);var i=L(n);var o=d(a);if(a===i){return o.collection()}if(m[a*f+i]==null){return r.collection()}var e=r.collection();var s=a;var u;e.merge(o);while(a!==i){s=a;a=m[a*f+i];u=b[s*f+a];e.merge(u);e.merge(d(a))}return e}};return z}};var xr=qt({weight:function e(t){return 1},directed:false,root:null});var wr={bellmanFord:function e(t){var r=this;var n=xr(t),a=n.weight,i=n.directed,o=n.root;var s=a;var u=this;var l=this.cy();var f=this.byGroup(),c=f.edges,v=f.nodes;var d=v.length;var h=new $t;var p=false;var g=[];o=l.collection(o)[0];c.unmergeBy(function(e){return e.isLoop()});var y=c.length;var m=function e(t){var r=h.get(t.id());if(!r){r={};h.set(t.id(),r)}return r};var b=function e(t){return(D(t)?l.$(t):t)[0]};var x=function e(t){return m(b(t)).dist};var w=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o;var a=b(t);var i=[];var s=a;for(;;){if(s==null){return r.spawn()}var l=m(s),f=l.edge,c=l.pred;i.unshift(s[0]);if(s.same(n)&&i.length>0){break}if(f!=null){i.unshift(f)}s=c}return u.spawn(i)};for(var E=0;E<d;E++){var k=v[E];var _=m(k);if(k.same(o)){_.dist=0}else{_.dist=Infinity}_.pred=null;_.edge=null}var T=false;var C=function e(t,r,n,a,i,o){var s=a.dist+o;if(s<i.dist&&!n.same(a.edge)){i.dist=s;i.pred=t;i.edge=n;T=true}};for(var S=1;S<d;S++){T=false;for(var P=0;P<y;P++){var A=c[P];var M=A.source();var B=A.target();var I=s(A);var O=m(M);var R=m(B);C(M,B,A,O,R,I);if(!i){C(B,M,A,R,O,I)}}if(!T){break}}if(T){var N=[];for(var L=0;L<y;L++){var z=c[L];var j=z.source();var V=z.target();var F=s(z);var G=m(j).dist;var W=m(V).dist;if(G+F<W||!i&&W+F<G){if(!p){Lt("Graph contains a negative weight cycle for Bellman-Ford");p=true}if(t.findNegativeWeightCycles!==false){var q=[];if(G+F<W){q.push(j)}if(!i&&W+F<G){q.push(V)}var X=q.length;for(var Y=0;Y<X;Y++){var U=q[Y];var H=[U];H.push(m(U).edge);var K=m(U).pred;while(H.indexOf(K)===-1){H.push(K);H.push(m(K).edge);K=m(K).pred}H=H.slice(H.indexOf(K));var Z=H[0].id();var $=0;for(var Q=2;Q<H.length;Q+=2){if(H[Q].id()<Z){Z=H[Q].id();$=Q}}H=H.slice($).concat(H.slice(0,$));H.push(H[0]);var J=H.map(function(e){return e.id()}).join(",");if(N.indexOf(J)===-1){g.push(u.spawn(H));N.push(J)}}}else{break}}}}return{distanceTo:x,pathTo:w,hasNegativeWeightCycle:p,negativeWeightCycles:g}}};var Er=Math.sqrt(2);var kr=function e(t,r,n){if(n.length===0){Rt("Karger-Stein must be run on a connected (sub)graph")}var a=n[t];var i=a[1];var o=a[2];var s=r[i];var u=r[o];var l=n;for(var f=l.length-1;f>=0;f--){var c=l[f];var v=c[1];var d=c[2];if(r[v]===s&&r[d]===u||r[v]===u&&r[d]===s){l.splice(f,1)}}for(var h=0;h<l.length;h++){var p=l[h];if(p[1]===u){l[h]=p.slice();l[h][1]=s}else if(p[2]===u){l[h]=p.slice();l[h][2]=s}}for(var g=0;g<r.length;g++){if(r[g]===u){r[g]=s}}return l};var _r=function e(t,r,n,a){while(n>a){var i=Math.floor(Math.random()*r.length);r=kr(i,t,r);n--}return r};var Tr={kargerStein:function e(){var t=this;var r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(e){return e.isLoop()});var i=n.length;var o=a.length;var s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2));var u=Math.floor(i/Er);if(i<2){Rt("At least 2 nodes are required for Karger-Stein algorithm");return undefined}var l=[];for(var f=0;f<o;f++){var c=a[f];l.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}var v=Infinity;var d=[];var h=new Array(i);var p=new Array(i);var g=new Array(i);var y=function e(t,r){for(var n=0;n<i;n++){r[n]=t[n]}};for(var m=0;m<=s;m++){for(var b=0;b<i;b++){p[b]=b}var x=_r(p,l.slice(),i,u);var w=x.slice();y(p,g);var E=_r(p,x,u,2);var k=_r(g,w,u,2);if(E.length<=k.length&&E.length<v){v=E.length;d=E;y(p,h)}else if(k.length<=E.length&&k.length<v){v=k.length;d=k;y(g,h)}}var _=this.spawn(d.map(function(e){return a[e[0]]}));var T=this.spawn();var C=this.spawn();var S=h[0];for(var D=0;D<h.length;D++){var P=h[D];var A=n[D];if(P===S){T.merge(A)}else{C.merge(A)}}var M=function e(r){var n=t.spawn();r.forEach(function(e){n.merge(e);e.connectedEdges().forEach(function(e){if(t.contains(e)&&!_.contains(e)){n.merge(e)}})});return n};var B=[M(T),M(C)];var I={cut:_,components:B,partition1:T,partition2:C};return I}};var Cr;var Sr=function e(t){return{x:t.x,y:t.y}};var Dr=function e(t,r,n){return{x:t.x*r+n.x,y:t.y*r+n.y}};var Pr=function e(t,r,n){return{x:(t.x-n.x)/r,y:(t.y-n.y)/r}};var Ar=function e(t){return{x:t[0],y:t[1]}};var Mr=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length;var e=Infinity;for(var a=r;a<n;a++){var i=t[a];if(isFinite(i)){e=Math.min(i,e)}}return e};var Br=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length;var e=-Infinity;for(var a=r;a<n;a++){var i=t[a];if(isFinite(i)){e=Math.max(i,e)}}return e};var Ir=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length;var a=0;var i=0;for(var o=r;o<n;o++){var s=t[o];if(isFinite(s)){a+=s;i++}}return a/i};var Or=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;if(a){t=t.slice(r,n)}else{if(n<t.length){t.splice(n,t.length-n)}if(r>0){t.splice(0,r)}}var s=0;for(var u=t.length-1;u>=0;u--){var l=t[u];if(o){if(!isFinite(l)){t[u]=-Infinity;s++}}else{t.splice(u,1)}}if(i){t.sort(function(e,t){return e-t})}var f=t.length;var c=Math.floor(f/2);if(f%2!==0){return t[c+1+s]}else{return(t[c-1+s]+t[c+s])/2}};var Rr=function e(t){return Math.PI*t/180};var Nr=function e(t,r){return Math.atan2(r,t)-Math.PI/2};var Lr=Math.log2||function(e){return Math.log(e)/Math.log(2)};var zr=function e(t){if(t>0){return 1}else if(t<0){return-1}else{return 0}};var jr=function e(t,r){return Math.sqrt(Vr(t,r))};var Vr=function e(t,r){var n=r.x-t.x;var a=r.y-t.y;return n*n+a*a};var Fr=function e(t){var r=t.length;var n=0;for(var a=0;a<r;a++){n+=t[a]}for(var i=0;i<r;i++){t[i]=t[i]/n}return t};var Gr=function e(t,r,n,a){return(1-a)*(1-a)*t+2*(1-a)*a*r+a*a*n};var Wr=function e(t,r,n,a){return{x:Gr(t.x,r.x,n.x,a),y:Gr(t.y,r.y,n.y,a)}};var qr=function e(t,r,n,a){var i={x:r.x-t.x,y:r.y-t.y};var o=jr(t,r);var s={x:i.x/o,y:i.y/o};n=n==null?0:n;a=a!=null?a:n*o;return{x:t.x+s.x*a,y:t.y+s.y*a}};var Xr=function e(t,r,n){return Math.max(t,Math.min(n,r))};var Yr=function e(t){if(t==null){return{x1:Infinity,y1:Infinity,x2:-Infinity,y2:-Infinity,w:0,h:0}}else if(t.x1!=null&&t.y1!=null){if(t.x2!=null&&t.y2!=null&&t.x2>=t.x1&&t.y2>=t.y1){return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1}}else if(t.w!=null&&t.h!=null&&t.w>=0&&t.h>=0){return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}}};var Ur=function e(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}};var Hr=function e(t){t.x1=Infinity;t.y1=Infinity;t.x2=-Infinity;t.y2=-Infinity;t.w=0;t.h=0};var Kr=function e(t,r){t.x1=Math.min(t.x1,r.x1);t.x2=Math.max(t.x2,r.x2);t.w=t.x2-t.x1;t.y1=Math.min(t.y1,r.y1);t.y2=Math.max(t.y2,r.y2);t.h=t.y2-t.y1};var Zr=function e(t,r,n){t.x1=Math.min(t.x1,r);t.x2=Math.max(t.x2,r);t.w=t.x2-t.x1;t.y1=Math.min(t.y1,n);t.y2=Math.max(t.y2,n);t.h=t.y2-t.y1};var $r=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;t.x1-=r;t.x2+=r;t.y1-=r;t.y2+=r;t.w=t.x2-t.x1;t.h=t.y2-t.y1;return t};var Qr=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0];var n,a,i,o;if(r.length===1){n=a=i=o=r[0]}else if(r.length===2){n=i=r[0];o=a=r[1]}else if(r.length===4){var s=p(r,4);n=s[0];a=s[1];i=s[2];o=s[3]}t.x1-=o;t.x2+=a;t.y1-=n;t.y2+=i;t.w=t.x2-t.x1;t.h=t.y2-t.y1;return t};var Jr=function e(t,r){t.x1=r.x1;t.y1=r.y1;t.x2=r.x2;t.y2=r.y2;t.w=t.x2-t.x1;t.h=t.y2-t.y1};var en=function e(t,r){if(t.x1>r.x2){return false}if(r.x1>t.x2){return false}if(t.x2<r.x1){return false}if(r.x2<t.x1){return false}if(t.y2<r.y1){return false}if(r.y2<t.y1){return false}if(t.y1>r.y2){return false}if(r.y1>t.y2){return false}return true};var tn=function e(t,r,n){return t.x1<=r&&r<=t.x2&&t.y1<=n&&n<=t.y2};var rn=function e(t,r){return tn(t,r.x,r.y)};var nn=function e(t,r){return tn(t,r.x1,r.y1)&&tn(t,r.x2,r.y2)};var an=(Cr=Math.hypot)!==null&&Cr!==undefined?Cr:function(e,t){return Math.sqrt(e*e+t*t)};function on(e,t){if(e.length<3){throw new Error("Need at least 3 vertices")}var r=function e(t,r){return{x:t.x+r.x,y:t.y+r.y}};var n=function e(t,r){return{x:t.x-r.x,y:t.y-r.y}};var a=function e(t,r){return{x:t.x*r,y:t.y*r}};var i=function e(t,r){return t.x*r.y-t.y*r.x};var o=function e(t){var r=an(t.x,t.y);return r===0?{x:0,y:0}:{x:t.x/r,y:t.y/r}};var s=function e(t){var r=0;for(var n=0;n<t.length;n++){var a=t[n],i=t[(n+1)%t.length];r+=a.x*i.y-i.x*a.y}return r/2};var u=function e(t,o,s,u){var l=n(o,t);var f=n(u,s);var c=i(l,f);if(Math.abs(c)<1e-9){return r(t,a(l,.5))}var v=i(n(s,t),f)/c;return r(t,a(l,v))};var l=e.map(function(e){return{x:e.x,y:e.y}});if(s(l)<0)l.reverse();var f=l.length;var c=[];for(var v=0;v<f;v++){var d=l[v],h=l[(v+1)%f];var p=n(h,d);var g=o({x:p.y,y:-p.x});c.push(g)}var y=c.map(function(e,n){var i=r(l[n],a(e,t));var o=r(l[(n+1)%f],a(e,t));return{p1:i,p2:o}});var m=[];for(var b=0;b<f;b++){var x=y[(b-1+f)%f];var w=y[b];var E=u(x.p1,x.p2,w.p1,w.p2);m.push(E)}return m}function sn(e,t,r,n,a,i){var o=Tn(e,t,r,n,a);var s=on(o,i);var u=Yr();s.forEach(function(e){return Zr(u,e.x,e.y)});return u}var un=function e(t,r,n,a,i,o,s){var u=arguments.length>7&&arguments[7]!==undefined?arguments[7]:"auto";var l=u==="auto"?Bn(i,o):u;var f=i/2;var c=o/2;l=Math.min(l,f,c);var v=l!==f,d=l!==c;var h;if(v){var p=n-f+l-s;var g=a-c-s;var y=n+f-l+s;var m=g;h=_n(t,r,n,a,p,g,y,m,false);if(h.length>0){return h}}if(d){var b=n+f+s;var x=a-c+l-s;var w=b;var E=a+c-l+s;h=_n(t,r,n,a,b,x,w,E,false);if(h.length>0){return h}}if(v){var k=n-f+l-s;var _=a+c+s;var T=n+f-l+s;var C=_;h=_n(t,r,n,a,k,_,T,C,false);if(h.length>0){return h}}if(d){var S=n-f-s;var D=a-c+l-s;var P=S;var A=a+c-l+s;h=_n(t,r,n,a,S,D,P,A,false);if(h.length>0){return h}}var M;{var B=n-f+l;var I=a-c+l;M=En(t,r,n,a,B,I,l+s);if(M.length>0&&M[0]<=B&&M[1]<=I){return[M[0],M[1]]}}{var O=n+f-l;var R=a-c+l;M=En(t,r,n,a,O,R,l+s);if(M.length>0&&M[0]>=O&&M[1]<=R){return[M[0],M[1]]}}{var N=n+f-l;var L=a+c-l;M=En(t,r,n,a,N,L,l+s);if(M.length>0&&M[0]>=N&&M[1]>=L){return[M[0],M[1]]}}{var z=n-f+l;var j=a+c-l;M=En(t,r,n,a,z,j,l+s);if(M.length>0&&M[0]<=z&&M[1]>=j){return[M[0],M[1]]}}return[]};var ln=function e(t,r,n,a,i,o,s){var u=s;var l=Math.min(n,i);var f=Math.max(n,i);var c=Math.min(a,o);var v=Math.max(a,o);return l-u<=t&&t<=f+u&&c-u<=r&&r<=v+u};var fn=function e(t,r,n,a,i,o,s,u,l){var f={x1:Math.min(n,s,i)-l,x2:Math.max(n,s,i)+l,y1:Math.min(a,u,o)-l,y2:Math.max(a,u,o)+l};if(t<f.x1||t>f.x2||r<f.y1||r>f.y2){return false}else{return true}};var cn=function e(t,r,n,a){n-=a;var i=r*r-4*t*n;if(i<0){return[]}var o=Math.sqrt(i);var s=2*t;var u=(-r+o)/s;var l=(-r-o)/s;return[u,l]};var vn=function e(t,r,n,a,i){var o=1e-5;if(t===0){t=o}r/=t;n/=t;a/=t;var s,u,l,f,c,v,d,h;u=(3*n-r*r)/9;l=-(27*a)+r*(9*n-2*(r*r));l/=54;s=u*u*u+l*l;i[1]=0;d=r/3;if(s>0){c=l+Math.sqrt(s);c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3);v=l-Math.sqrt(s);v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3);i[0]=-d+c+v;d+=(c+v)/2;i[4]=i[2]=-d;d=Math.sqrt(3)*(-v+c)/2;i[3]=d;i[5]=-d;return}i[5]=i[3]=0;if(s===0){h=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3);i[0]=-d+2*h;i[4]=i[2]=-(h+d);return}u=-u;f=u*u*u;f=Math.acos(l/Math.sqrt(f));h=2*Math.sqrt(u);i[0]=-d+h*Math.cos(f/3);i[2]=-d+h*Math.cos((f+2*Math.PI)/3);i[4]=-d+h*Math.cos((f+4*Math.PI)/3);return};var dn=function e(t,r,n,a,i,o,s,u){var l=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*u+4*o*o-4*o*u+u*u;var f=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*u-6*o*o+3*o*u;var c=1*3*n*n-6*n*i+n*s-n*t+2*i*i+2*i*t-s*t+3*a*a-6*a*o+a*u-a*r+2*o*o+2*o*r-u*r;var v=1*n*i-n*n+n*t-i*t+a*o-a*a+a*r-o*r;var d=[];vn(l,f,c,v,d);var h=1e-7;var p=[];for(var g=0;g<6;g+=2){if(Math.abs(d[g+1])<h&&d[g]>=0&&d[g]<=1){p.push(d[g])}}p.push(1);p.push(0);var y=-1;var m,b,x;for(var w=0;w<p.length;w++){m=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*i+p[w]*p[w]*s;b=Math.pow(1-p[w],2)*a+2*(1-p[w])*p[w]*o+p[w]*p[w]*u;x=Math.pow(m-t,2)+Math.pow(b-r,2);if(y>=0){if(x<y){y=x}}else{y=x}}return y};var hn=function e(t,r,n,a,i,o){var s=[t-n,r-a];var u=[i-n,o-a];var l=u[0]*u[0]+u[1]*u[1];var f=s[0]*s[0]+s[1]*s[1];var c=s[0]*u[0]+s[1]*u[1];var v=c*c/l;if(c<0){return f}if(v>l){return(t-i)*(t-i)+(r-o)*(r-o)}return f-v};var pn=function e(t,r,n){var a,i,o,s;var u;var l=0;for(var f=0;f<n.length/2;f++){a=n[f*2];i=n[f*2+1];if(f+1<n.length/2){o=n[(f+1)*2];s=n[(f+1)*2+1]}else{o=n[(f+1-n.length/2)*2];s=n[(f+1-n.length/2)*2+1]}if(a==t&&o==t);else if(a>=t&&t>=o||a<=t&&t<=o){u=(t-a)/(o-a)*(s-i)+i;if(u>r){l++}}else{continue}}if(l%2===0){return false}else{return true}};var gn=function e(t,r,n,a,i,o,s,u,l){var f=new Array(n.length);var c;if(u[0]!=null){c=Math.atan(u[1]/u[0]);if(u[0]<0){c=c+Math.PI/2}else{c=-c-Math.PI/2}}else{c=u}var v=Math.cos(-c);var d=Math.sin(-c);for(var h=0;h<f.length/2;h++){f[h*2]=o/2*(n[h*2]*v-n[h*2+1]*d);f[h*2+1]=s/2*(n[h*2+1]*v+n[h*2]*d);f[h*2]+=a;f[h*2+1]+=i}var p;if(l>0){var g=bn(f,-l);p=mn(g)}else{p=f}return pn(t,r,p)};var yn=function e(t,r,n,a,i,o,s,u){var l=new Array(n.length*2);for(var f=0;f<u.length;f++){var c=u[f];l[f*4+0]=c.startX;l[f*4+1]=c.startY;l[f*4+2]=c.stopX;l[f*4+3]=c.stopY;var v=Math.pow(c.cx-t,2)+Math.pow(c.cy-r,2);if(v<=Math.pow(c.radius,2)){return true}}return pn(t,r,l)};var mn=function e(t){var r=new Array(t.length/2);var n,a,i,o;var s,u,l,f;for(var c=0;c<t.length/4;c++){n=t[c*4];a=t[c*4+1];i=t[c*4+2];o=t[c*4+3];if(c<t.length/4-1){s=t[(c+1)*4];u=t[(c+1)*4+1];l=t[(c+1)*4+2];f=t[(c+1)*4+3]}else{s=t[0];u=t[1];l=t[2];f=t[3]}var v=_n(n,a,i,o,s,u,l,f,true);r[c*2]=v[0];r[c*2+1]=v[1]}return r};var bn=function e(t,r){var n=new Array(t.length*2);var a,i,o,s;for(var u=0;u<t.length/2;u++){a=t[u*2];i=t[u*2+1];if(u<t.length/2-1){o=t[(u+1)*2];s=t[(u+1)*2+1]}else{o=t[0];s=t[1]}var l=s-i;var f=-(o-a);var c=Math.sqrt(l*l+f*f);var v=l/c;var d=f/c;n[u*4]=a+v*r;n[u*4+1]=i+d*r;n[u*4+2]=o+v*r;n[u*4+3]=s+d*r}return n};var xn=function e(t,r,n,a,i,o){var s=n-t;var u=a-r;s/=i;u/=o;var l=Math.sqrt(s*s+u*u);var f=l-1;if(f<0){return[]}var c=f/l;return[(n-t)*c+t,(a-r)*c+r]};var wn=function e(t,r,n,a,i,o,s){t-=i;r-=o;t/=n/2+s;r/=a/2+s;return t*t+r*r<=1};var En=function e(t,r,n,a,i,o,s){var u=[n-t,a-r];var l=[t-i,r-o];var f=u[0]*u[0]+u[1]*u[1];var c=2*(l[0]*u[0]+l[1]*u[1]);var v=l[0]*l[0]+l[1]*l[1]-s*s;var d=c*c-4*f*v;if(d<0){return[]}var h=(-c+Math.sqrt(d))/(2*f);var p=(-c-Math.sqrt(d))/(2*f);var g=Math.min(h,p);var y=Math.max(h,p);var m=[];if(g>=0&&g<=1){m.push(g)}if(y>=0&&y<=1){m.push(y)}if(m.length===0){return[]}var b=m[0]*u[0]+t;var x=m[0]*u[1]+r;if(m.length>1){if(m[0]==m[1]){return[b,x]}else{var w=m[1]*u[0]+t;var E=m[1]*u[1]+r;return[b,x,w,E]}}else{return[b,x]}};var kn=function e(t,r,n){if(r<=t&&t<=n||n<=t&&t<=r){return t}else if(t<=r&&r<=n||n<=r&&r<=t){return r}else{return n}};var _n=function e(t,r,n,a,i,o,s,u,l){var f=t-i;var c=n-t;var v=s-i;var d=r-o;var h=a-r;var p=u-o;var g=v*d-p*f;var y=c*d-h*f;var m=p*c-v*h;if(m!==0){var b=g/m;var x=y/m;var w=.001;var E=0-w;var k=1+w;if(E<=b&&b<=k&&E<=x&&x<=k){return[t+b*c,r+b*h]}else{if(!l){return[]}else{return[t+b*c,r+b*h]}}}else{if(g===0||y===0){if(kn(t,n,s)===s){return[s,u]}if(kn(t,n,i)===i){return[i,o]}if(kn(i,s,n)===n){return[n,a]}return[]}else{return[]}}};var Tn=function e(t,r,n,a,i){var o=[];var s=a/2;var u=i/2;var l=r;var f=n;o.push({x:l+s*t[0],y:f+u*t[1]});for(var c=1;c<t.length/2;c++){o.push({x:l+s*t[c*2],y:f+u*t[c*2+1]})}return o};var Cn=function e(t,r,n,a,i,o,s,u){var l=[];var f;var c=new Array(n.length);var v=true;if(o==null){v=false}var d;if(v){for(var h=0;h<c.length/2;h++){c[h*2]=n[h*2]*o+a;c[h*2+1]=n[h*2+1]*s+i}if(u>0){var p=bn(c,-u);d=mn(p)}else{d=c}}else{d=n}var g,y,m,b;for(var x=0;x<d.length/2;x++){g=d[x*2];y=d[x*2+1];if(x<d.length/2-1){m=d[(x+1)*2];b=d[(x+1)*2+1]}else{m=d[0];b=d[1]}f=_n(t,r,a,i,g,y,m,b);if(f.length!==0){l.push(f[0],f[1])}}return l};var Sn=function e(t,r,n,a,i,o,s,u,l){var f=[];var c;var v=new Array(n.length*2);l.forEach(function(e,n){if(n===0){v[v.length-2]=e.startX;v[v.length-1]=e.startY}else{v[n*4-2]=e.startX;v[n*4-1]=e.startY}v[n*4]=e.stopX;v[n*4+1]=e.stopY;c=En(t,r,a,i,e.cx,e.cy,e.radius);if(c.length!==0){f.push(c[0],c[1])}});for(var d=0;d<v.length/4;d++){c=_n(t,r,a,i,v[d*4],v[d*4+1],v[d*4+2],v[d*4+3],false);if(c.length!==0){f.push(c[0],c[1])}}if(f.length>2){var h=[f[0],f[1]];var p=Math.pow(h[0]-t,2)+Math.pow(h[1]-r,2);for(var g=1;g<f.length/2;g++){var y=Math.pow(f[g*2]-t,2)+Math.pow(f[g*2+1]-r,2);if(y<=p){h[0]=f[g*2];h[1]=f[g*2+1];p=y}}return h}return f};var Dn=function e(t,r,n){var a=[t[0]-r[0],t[1]-r[1]];var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]);var o=(i-n)/i;if(o<0){o=1e-5}return[r[0]+o*a[0],r[1]+o*a[1]]};var Pn=function e(t,r){var n=Mn(t,r);n=An(n);return n};var An=function e(t){var r,n;var a=t.length/2;var i=Infinity,o=Infinity,s=-Infinity,u=-Infinity;for(var l=0;l<a;l++){r=t[2*l];n=t[2*l+1];i=Math.min(i,r);s=Math.max(s,r);o=Math.min(o,n);u=Math.max(u,n)}var f=2/(s-i);var c=2/(u-o);for(var v=0;v<a;v++){r=t[2*v]=t[2*v]*f;n=t[2*v+1]=t[2*v+1]*c;i=Math.min(i,r);s=Math.max(s,r);o=Math.min(o,n);u=Math.max(u,n)}if(o<-1){for(var d=0;d<a;d++){n=t[2*d+1]=t[2*d+1]+(-1-o)}}return t};var Mn=function e(t,r){var n=1/t*2*Math.PI;var a=t%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;var i=new Array(t*2);var o;for(var s=0;s<t;s++){o=s*n+a;i[2*s]=Math.cos(o);i[2*s+1]=Math.sin(-o)}return i};var Bn=function e(t,r){return Math.min(t/4,r/4,8)};var In=function e(t,r){return Math.min(t/10,r/10,8)};var On=function e(){return 8};var Rn=function e(t,r,n){return[t-2*r+n,2*(r-t),t]};var Nn=function e(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function Ln(e,t){function r(e){var t=[];for(var r=0;r<e.length;r++){var n=e[r];var a=e[(r+1)%e.length];var i={x:a.x-n.x,y:a.y-n.y};var o={x:-i.y,y:i.x};var s=Math.sqrt(o.x*o.x+o.y*o.y);t.push({x:o.x/s,y:o.y/s})}return t}function n(e,t){var r=Infinity;var n=-Infinity;var a=l(e),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;var s=o.x*t.x+o.y*t.y;r=Math.min(r,s);n=Math.max(n,s)}}catch(e){a.e(e)}finally{a.f()}return{min:r,max:n}}function a(e,t){return!(e.max<t.min||t.max<e.min)}var i=[].concat(g(r(e)),g(r(t)));var o=l(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;var f=n(e,u);var c=n(t,u);if(!a(f,c)){return false}}}catch(e){o.e(e)}finally{o.f()}return true}var zn=qt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function e(t){return 1}});var jn={pageRank:function e(t){var r=zn(t),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight;var s=this._private.cy;var u=this.byGroup(),l=u.nodes,f=u.edges;var c=l.length;var v=c*c;var d=f.length;var h=new Array(v);var p=new Array(c);var g=(1-n)/c;for(var y=0;y<c;y++){for(var m=0;m<c;m++){var b=y*c+m;h[b]=0}p[y]=0}for(var x=0;x<d;x++){var w=f[x];var E=w.data("source");var k=w.data("target");if(E===k){continue}var _=l.indexOfId(E);var T=l.indexOfId(k);var C=o(w);var S=T*c+_;h[S]+=C;p[_]+=C}var D=1/c+g;for(var P=0;P<c;P++){if(p[P]===0){for(var A=0;A<c;A++){var M=A*c+P;h[M]=D}}else{for(var B=0;B<c;B++){var I=B*c+P;h[I]=h[I]/p[P]+g}}}var O=new Array(c);var R=new Array(c);var N;for(var L=0;L<c;L++){O[L]=1}for(var z=0;z<i;z++){for(var j=0;j<c;j++){R[j]=0}for(var V=0;V<c;V++){for(var F=0;F<c;F++){var G=V*c+F;R[V]+=h[G]*O[F]}}Fr(R);N=O;O=R;R=N;var W=0;for(var q=0;q<c;q++){var X=N[q]-O[q];W+=X*X}if(W<a){break}}var Y={rank:function e(t){t=s.collection(t)[0];return O[l.indexOf(t)]}};return Y}};var Vn=qt({root:null,weight:function e(t){return 1},directed:false,alpha:0});var Fn={degreeCentralityNormalized:function e(t){t=Vn(t);var r=this.cy();var n=this.nodes();var a=n.length;if(!t.directed){var i={};var o=0;for(var s=0;s<a;s++){var u=n[s];t.root=u;var l=this.degreeCentrality(t);if(o<l.degree){o=l.degree}i[u.id()]=l.degree}return{degree:function e(t){if(o===0){return 0}if(D(t)){t=r.filter(t)}return i[t.id()]/o}}}else{var f={};var c={};var v=0;var d=0;for(var h=0;h<a;h++){var p=n[h];var g=p.id();t.root=p;var y=this.degreeCentrality(t);if(v<y.indegree)v=y.indegree;if(d<y.outdegree)d=y.outdegree;f[g]=y.indegree;c[g]=y.outdegree}return{indegree:function e(t){if(v==0){return 0}if(D(t)){t=r.filter(t)}return f[t.id()]/v},outdegree:function e(t){if(d===0){return 0}if(D(t)){t=r.filter(t)}return c[t.id()]/d}}}},degreeCentrality:function e(t){t=Vn(t);var r=this.cy();var n=this;var a=t,i=a.root,o=a.weight,s=a.directed,u=a.alpha;i=r.collection(i)[0];if(!s){var l=i.connectedEdges().intersection(n);var f=l.length;var c=0;for(var v=0;v<l.length;v++){c+=o(l[v])}return{degree:Math.pow(f,1-u)*Math.pow(c,u)}}else{var d=i.connectedEdges();var h=d.filter(function(e){return e.target().same(i)&&n.has(e)});var p=d.filter(function(e){return e.source().same(i)&&n.has(e)});var g=h.length;var y=p.length;var m=0;var b=0;for(var x=0;x<h.length;x++){m+=o(h[x])}for(var w=0;w<p.length;w++){b+=o(p[w])}return{indegree:Math.pow(g,1-u)*Math.pow(m,u),outdegree:Math.pow(y,1-u)*Math.pow(b,u)}}}};Fn.dc=Fn.degreeCentrality;Fn.dcn=Fn.degreeCentralityNormalised=Fn.degreeCentralityNormalized;var Gn=qt({harmonic:true,weight:function e(){return 1},directed:false,root:null});var Wn={closenessCentralityNormalized:function e(t){var r=Gn(t),n=r.harmonic,a=r.weight,i=r.directed;var o=this.cy();var s={};var u=0;var l=this.nodes();var f=this.floydWarshall({weight:a,directed:i});for(var c=0;c<l.length;c++){var v=0;var d=l[c];for(var h=0;h<l.length;h++){if(c!==h){var p=f.distance(d,l[h]);if(n){v+=1/p}else{v+=p}}}if(!n){v=1/v}if(u<v){u=v}s[d.id()]=v}return{closeness:function e(t){if(u==0){return 0}if(D(t)){t=o.filter(t)[0].id()}else{t=t.id()}return s[t]/u}}},closenessCentrality:function e(t){var r=Gn(t),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];var s=this.dijkstra({root:n,weight:a,directed:i});var u=0;var l=this.nodes();for(var f=0;f<l.length;f++){var c=l[f];if(!c.same(n)){var v=s.distanceTo(c);if(o){u+=1/v}else{u+=v}}}return o?u:1/u}};Wn.cc=Wn.closenessCentrality;Wn.ccn=Wn.closenessCentralityNormalised=Wn.closenessCentralityNormalized;var qn=qt({weight:null,directed:false});var Xn={betweennessCentrality:function e(t){var r=qn(t),n=r.directed,a=r.weight;var i=a!=null;var o=this.cy();var s=this.nodes();var u={};var l={};var f=0;var c={set:function e(t,r){l[t]=r;if(r>f){f=r}},get:function e(t){return l[t]}};for(var v=0;v<s.length;v++){var d=s[v];var h=d.id();if(n){u[h]=d.outgoers().nodes()}else{u[h]=d.openNeighborhood().nodes()}c.set(h,0)}var p=function e(){var t=s[g].id();var r=[];var n={};var l={};var f={};var v=new vr(function(e,t){return f[e]-f[t]});for(var d=0;d<s.length;d++){var h=s[d].id();n[h]=[];l[h]=0;f[h]=Infinity}l[t]=1;f[t]=0;v.push(t);while(!v.empty()){var p=v.pop();r.push(p);if(i){for(var y=0;y<u[p].length;y++){var m=u[p][y];var b=o.getElementById(p);var x=undefined;if(b.edgesTo(m).length>0){x=b.edgesTo(m)[0]}else{x=m.edgesTo(b)[0]}var w=a(x);m=m.id();if(f[m]>f[p]+w){f[m]=f[p]+w;if(v.nodes.indexOf(m)<0){v.push(m)}else{v.updateItem(m)}l[m]=0;n[m]=[]}if(f[m]==f[p]+w){l[m]=l[m]+l[p];n[m].push(p)}}}else{for(var E=0;E<u[p].length;E++){var k=u[p][E].id();if(f[k]==Infinity){v.push(k);f[k]=f[p]+1}if(f[k]==f[p]+1){l[k]=l[k]+l[p];n[k].push(p)}}}}var _={};for(var T=0;T<s.length;T++){_[s[T].id()]=0}while(r.length>0){var C=r.pop();for(var S=0;S<n[C].length;S++){var D=n[C][S];_[D]=_[D]+l[D]/l[C]*(1+_[C])}if(C!=s[g].id()){c.set(C,c.get(C)+_[C])}}};for(var g=0;g<s.length;g++){p()}var y={betweenness:function e(t){var r=o.collection(t).id();return c.get(r)},betweennessNormalized:function e(t){if(f==0){return 0}var r=o.collection(t).id();return c.get(r)/f}};y.betweennessNormalised=y.betweennessNormalized;return y}};Xn.bc=Xn.betweennessCentrality;var Yn=qt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]});var Un=function e(t){return Yn(t)};var Hn=function e(t,r){var n=0;for(var a=0;a<r.length;a++){n+=r[a](t)}return n};var Kn=function e(t,r,n){for(var a=0;a<r;a++){t[a*r+a]=n}};var Zn=function e(t,r){var n;for(var a=0;a<r;a++){n=0;for(var i=0;i<r;i++){n+=t[i*r+a]}for(var o=0;o<r;o++){t[o*r+a]=t[o*r+a]/n}}};var $n=function e(t,r,n){var a=new Array(n*n);for(var i=0;i<n;i++){for(var o=0;o<n;o++){a[i*n+o]=0}for(var s=0;s<n;s++){for(var u=0;u<n;u++){a[i*n+u]+=t[i*n+s]*r[s*n+u]}}}return a};var Qn=function e(t,r,n){var a=t.slice(0);for(var i=1;i<n;i++){t=$n(t,a,r)}return t};var Jn=function e(t,r,n){var a=new Array(r*r);for(var i=0;i<r*r;i++){a[i]=Math.pow(t[i],n)}Zn(a,r);return a};var ea=function e(t,r,n,a){for(var i=0;i<n;i++){var o=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);var s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s){return false}}return true};var ta=function e(t,r,n,a){var i=[];for(var o=0;o<r;o++){var s=[];for(var u=0;u<r;u++){if(Math.round(t[o*r+u]*1e3)/1e3>0){s.push(n[u])}}if(s.length!==0){i.push(a.collection(s))}}return i};var ra=function e(t,r){for(var n=0;n<t.length;n++){if(!r[n]||t[n].id()!==r[n].id()){return false}}return true};var na=function e(t){for(var r=0;r<t.length;r++){for(var n=0;n<t.length;n++){if(r!=n&&ra(t[r],t[n])){t.splice(n,1)}}}return t};var aa=function e(t){var r=this.nodes();var n=this.edges();var a=this.cy();var i=Un(t);var o={};for(var s=0;s<r.length;s++){o[r[s].id()]=s}var u=r.length,l=u*u;var f=new Array(l),c;for(var v=0;v<l;v++){f[v]=0}for(var d=0;d<n.length;d++){var h=n[d];var p=o[h.source().id()];var g=o[h.target().id()];var y=Hn(h,i.attributes);f[p*u+g]+=y;f[g*u+p]+=y}Kn(f,u,i.multFactor);Zn(f,u);var m=true;var b=0;while(m&&b<i.maxIterations){m=false;c=Qn(f,u,i.expandFactor);f=Jn(c,u,i.inflateFactor);if(!ea(f,c,l,4)){m=true}b++}var x=ta(f,u,r,a);x=na(x);return x};var ia={markovClustering:aa,mcl:aa};var oa=function e(t){return t};var sa=function e(t,r){return Math.abs(r-t)};var ua=function e(t,r,n){return t+sa(r,n)};var la=function e(t,r,n){return t+Math.pow(n-r,2)};var fa=function e(t){return Math.sqrt(t)};var ca=function e(t,r,n){return Math.max(t,sa(r,n))};var va=function e(t,r,n,a,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:oa;var s=a;var u,l;for(var f=0;f<t;f++){u=r(f);l=n(f);s=i(s,u,l)}return o(s)};var da={euclidean:function e(t,r,n){if(t>=2){return va(t,r,n,0,la,fa)}else{return va(t,r,n,0,ua)}},squaredEuclidean:function e(t,r,n){return va(t,r,n,0,la)},manhattan:function e(t,r,n){return va(t,r,n,0,ua)},max:function e(t,r,n){return va(t,r,n,-Infinity,ca)}};da["squared-euclidean"]=da["squaredEuclidean"];da["squaredeuclidean"]=da["squaredEuclidean"];function ha(e,t,r,n,a,i){var o;if(P(e)){o=e}else{o=da[e]||da.euclidean}if(t===0&&P(e)){return o(a,i)}else{return o(t,r,n,a,i)}}var pa=qt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:false,testCentroids:null});var ga=function e(t){return pa(t)};var ya=function e(t,r,n,a,i){var o=i!=="kMedoids";var s=o?function(e){return n[e]}:function(e){return a[e](n)};var u=function e(t){return a[t](r)};var l=n;var f=r;return ha(t,a.length,s,u,l,f)};var ma=function e(t,r,n){var a=n.length;var i=new Array(a);var o=new Array(a);var s=new Array(r);var u=null;for(var l=0;l<a;l++){i[l]=t.min(n[l]).value;o[l]=t.max(n[l]).value}for(var f=0;f<r;f++){u=[];for(var c=0;c<a;c++){u[c]=Math.random()*(o[c]-i[c])+i[c]}s[f]=u}return s};var ba=function e(t,r,n,a,i){var o=Infinity;var s=0;for(var u=0;u<r.length;u++){var l=ya(n,t,r[u],a,i);if(l<o){o=l;s=u}}return s};var xa=function e(t,r,n){var a=[];var i=null;for(var o=0;o<r.length;o++){i=r[o];if(n[i.id()]===t){a.push(i)}}return a};var wa=function e(t,r,n){return Math.abs(r-t)<=n};var Ea=function e(t,r,n){for(var a=0;a<t.length;a++){for(var i=0;i<t[a].length;i++){var o=Math.abs(t[a][i]-r[a][i]);if(o>n){return false}}}return true};var ka=function e(t,r,n){for(var a=0;a<n;a++){if(t===r[a])return true}return false};var _a=function e(t,r){var n=new Array(r);if(t.length<50){for(var a=0;a<r;a++){var i=t[Math.floor(Math.random()*t.length)];while(ka(i,n,a)){i=t[Math.floor(Math.random()*t.length)]}n[a]=i}}else{for(var o=0;o<r;o++){n[o]=t[Math.floor(Math.random()*t.length)]}}return n};var Ta=function e(t,r,n){var a=0;for(var i=0;i<r.length;i++){a+=ya("manhattan",r[i],t,n,"kMedoids")}return a};var Ca=function e(t){var r=this.cy();var n=this.nodes();var a=null;var i=ga(t);var o=new Array(i.k);var s={};var u;if(i.testMode){if(typeof i.testCentroids==="number"){i.testCentroids;u=ma(n,i.k,i.attributes)}else if(b(i.testCentroids)==="object"){u=i.testCentroids}else{u=ma(n,i.k,i.attributes)}}else{u=ma(n,i.k,i.attributes)}var l=true;var f=0;while(l&&f<i.maxIterations){for(var c=0;c<n.length;c++){a=n[c];s[a.id()]=ba(a,u,i.distance,i.attributes,"kMeans")}l=false;for(var v=0;v<i.k;v++){var d=xa(v,n,s);if(d.length===0){continue}var h=i.attributes.length;var p=u[v];var g=new Array(h);var y=new Array(h);for(var m=0;m<h;m++){y[m]=0;for(var x=0;x<d.length;x++){a=d[x];y[m]+=i.attributes[m](a)}g[m]=y[m]/d.length;if(!wa(g[m],p[m],i.sensitivityThreshold)){l=true}}u[v]=g;o[v]=r.collection(d)}f++}return o};var Sa=function e(t){var r=this.cy();var n=this.nodes();var a=null;var i=ga(t);var o=new Array(i.k);var s;var u={};var l;var f=new Array(i.k);if(i.testMode){if(typeof i.testCentroids==="number");else if(b(i.testCentroids)==="object"){s=i.testCentroids}else{s=_a(n,i.k)}}else{s=_a(n,i.k)}var c=true;var v=0;while(c&&v<i.maxIterations){for(var d=0;d<n.length;d++){a=n[d];u[a.id()]=ba(a,s,i.distance,i.attributes,"kMedoids")}c=false;for(var h=0;h<s.length;h++){var p=xa(h,n,u);if(p.length===0){continue}f[h]=Ta(s[h],p,i.attributes);for(var g=0;g<p.length;g++){l=Ta(p[g],p,i.attributes);if(l<f[h]){f[h]=l;s[h]=p[g];c=true}}o[h]=r.collection(p)}v++}return o};var Da=function e(t,r,n,a,i){var o,s;for(var u=0;u<r.length;u++){for(var l=0;l<t.length;l++){a[u][l]=Math.pow(n[u][l],i.m)}}for(var f=0;f<t.length;f++){for(var c=0;c<i.attributes.length;c++){o=0;s=0;for(var v=0;v<r.length;v++){o+=a[v][f]*i.attributes[c](r[v]);s+=a[v][f]}t[f][c]=o/s}}};var Pa=function e(t,r,n,a,i){for(var o=0;o<t.length;o++){r[o]=t[o].slice()}var s,u,l;var f=2/(i.m-1);for(var c=0;c<n.length;c++){for(var v=0;v<a.length;v++){s=0;for(var d=0;d<n.length;d++){u=ya(i.distance,a[v],n[c],i.attributes,"cmeans");l=ya(i.distance,a[v],n[d],i.attributes,"cmeans");s+=Math.pow(u/l,f)}t[v][c]=1/s}}};var Aa=function e(t,r,n,a){var i=new Array(n.k);for(var o=0;o<i.length;o++){i[o]=[]}var s;var u;for(var l=0;l<r.length;l++){s=-Infinity;u=-1;for(var f=0;f<r[0].length;f++){if(r[l][f]>s){s=r[l][f];u=f}}i[u].push(t[l])}for(var c=0;c<i.length;c++){i[c]=a.collection(i[c])}return i};var Ma=function e(t){var r=this.cy();var n=this.nodes();var a=ga(t);var i;var o;var s;var u;var l;u=new Array(n.length);for(var f=0;f<n.length;f++){u[f]=new Array(a.k)}s=new Array(n.length);for(var c=0;c<n.length;c++){s[c]=new Array(a.k)}for(var v=0;v<n.length;v++){var d=0;for(var h=0;h<a.k;h++){s[v][h]=Math.random();d+=s[v][h]}for(var p=0;p<a.k;p++){s[v][p]=s[v][p]/d}}o=new Array(a.k);for(var g=0;g<a.k;g++){o[g]=new Array(a.attributes.length)}l=new Array(n.length);for(var y=0;y<n.length;y++){l[y]=new Array(a.k)}var m=true;var b=0;while(m&&b<a.maxIterations){m=false;Da(o,n,s,l,a);Pa(s,u,o,n,a);if(!Ea(s,u,a.sensitivityThreshold)){m=true}b++}i=Aa(n,s,a,r);return{clusters:i,degreeOfMembership:s}};var Ba={kMeans:Ca,kMedoids:Sa,fuzzyCMeans:Ma,fcm:Ma};var Ia=qt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:Infinity,addDendrogram:false,dendrogramDepth:0,attributes:[]});var Oa={single:"min",complete:"max"};var Ra=function e(t){var r=Ia(t);var n=Oa[r.linkage];if(n!=null){r.linkage=n}return r};var Na=function e(t,r,n,a,i){var o=0;var s=Infinity;var u;var l=i.attributes;var f=function e(t,r){return ha(i.distance,l.length,function(e){return l[e](t)},function(e){return l[e](r)},t,r)};for(var c=0;c<t.length;c++){var v=t[c].key;var d=n[v][a[v]];if(d<s){o=v;s=d}}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&t.length===1){return false}var h=r[o];var p=r[a[o]];var g;if(i.mode==="dendrogram"){g={left:h,right:p,key:h.key}}else{g={value:h.value.concat(p.value),key:h.key}}t[h.index]=g;t.splice(p.index,1);r[h.key]=g;for(var y=0;y<t.length;y++){var m=t[y];if(h.key===m.key){u=Infinity}else if(i.linkage==="min"){u=n[h.key][m.key];if(n[h.key][m.key]>n[p.key][m.key]){u=n[p.key][m.key]}}else if(i.linkage==="max"){u=n[h.key][m.key];if(n[h.key][m.key]<n[p.key][m.key]){u=n[p.key][m.key]}}else if(i.linkage==="mean"){u=(n[h.key][m.key]*h.size+n[p.key][m.key]*p.size)/(h.size+p.size)}else{if(i.mode==="dendrogram")u=f(m.value,h.value);else u=f(m.value[0],h.value[0])}n[h.key][m.key]=n[m.key][h.key]=u}for(var b=0;b<t.length;b++){var x=t[b].key;if(a[x]===h.key||a[x]===p.key){var w=x;for(var E=0;E<t.length;E++){var k=t[E].key;if(n[x][k]<n[x][w]){w=k}}a[x]=w}t[b].index=b}h.key=p.key=h.index=p.index=null;return true};var La=function e(t,r,n){if(!t)return;if(t.value){r.push(t.value)}else{if(t.left)La(t.left,r);if(t.right)La(t.right,r)}};var za=function e(t,r){if(!t)return"";if(t.left&&t.right){var n=za(t.left,r);var a=za(t.right,r);var i=r.add({group:"nodes",data:{id:n+","+a}});r.add({group:"edges",data:{source:n,target:i.id()}});r.add({group:"edges",data:{source:a,target:i.id()}});return i.id()}else if(t.value){return t.value.id()}};var ja=function e(t,r,n){if(!t)return[];var a=[],i=[],o=[];if(r===0){if(t.left)La(t.left,a);if(t.right)La(t.right,i);o=a.concat(i);return[n.collection(o)]}else if(r===1){if(t.value){return[n.collection(t.value)]}else{if(t.left)La(t.left,a);if(t.right)La(t.right,i);return[n.collection(a),n.collection(i)]}}else{if(t.value){return[n.collection(t.value)]}else{if(t.left)a=ja(t.left,r-1,n);if(t.right)i=ja(t.right,r-1,n);return a.concat(i)}}};var Va=function e(t){var r=this.cy();var n=this.nodes();var a=Ra(t);var i=a.attributes;var o=function e(t,r){return ha(a.distance,i.length,function(e){return i[e](t)},function(e){return i[e](r)},t,r)};var s=[];var u=[];var l=[];var f=[];for(var c=0;c<n.length;c++){var v={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};s[c]=v;f[c]=v;u[c]=[];l[c]=0}for(var d=0;d<s.length;d++){for(var h=0;h<=d;h++){var p=undefined;if(a.mode==="dendrogram"){p=d===h?Infinity:o(s[d].value,s[h].value)}else{p=d===h?Infinity:o(s[d].value[0],s[h].value[0])}u[d][h]=p;u[h][d]=p;if(p<u[d][l[d]]){l[d]=h}}}var g=Na(s,f,u,l,a);while(g){g=Na(s,f,u,l,a)}var y;if(a.mode==="dendrogram"){y=ja(s[0],a.dendrogramDepth,r);if(a.addDendrogram)za(s[0],r)}else{y=new Array(s.length);s.forEach(function(e,t){e.key=e.index=null;y[t]=r.collection(e.value)})}return y};var Fa={hierarchicalClustering:Va,hca:Va};var Ga=qt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]});var Wa=function e(t){var r=t.damping;var n=t.preference;if(!(.5<=r&&r<1)){Rt("Damping must range on [0.5, 1).  Got: ".concat(r))}var a=["median","mean","min","max"];if(!(a.some(function(e){return e===n})||I(n))){Rt("Preference must be one of [".concat(a.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n))}return Ga(t)};var qa=function e(t,r,n,a){var i=function e(t,r){return a[r](t)};return-ha(t,a.length,function(e){return i(r,e)},function(e){return i(n,e)},r,n)};var Xa=function e(t,r){var n=null;if(r==="median"){n=Or(t)}else if(r==="mean"){n=Ir(t)}else if(r==="min"){n=Mr(t)}else if(r==="max"){n=Br(t)}else{n=r}return n};var Ya=function e(t,r,n){var a=[];for(var i=0;i<t;i++){if(r[i*t+i]+n[i*t+i]>0){a.push(i)}}return a};var Ua=function e(t,r,n){var a=[];for(var i=0;i<t;i++){var o=-1;var s=-Infinity;for(var u=0;u<n.length;u++){var l=n[u];if(r[i*t+l]>s){o=l;s=r[i*t+l]}}if(o>0){a.push(o)}}for(var f=0;f<n.length;f++){a[n[f]]=n[f]}return a};var Ha=function e(t,r,n){var a=Ua(t,r,n);for(var i=0;i<n.length;i++){var o=[];for(var s=0;s<a.length;s++){if(a[s]===n[i]){o.push(s)}}var u=-1;var l=-Infinity;for(var f=0;f<o.length;f++){var c=0;for(var v=0;v<o.length;v++){c+=r[o[v]*t+o[f]]}if(c>l){u=f;l=c}}n[i]=o[u]}a=Ua(t,r,n);return a};var Ka=function e(t){var r=this.cy();var n=this.nodes();var a=Wa(t);var i={};for(var o=0;o<n.length;o++){i[n[o].id()]=o}var s;var u;var l;var f;var c;var v;s=n.length;u=s*s;l=new Array(u);for(var d=0;d<u;d++){l[d]=-Infinity}for(var h=0;h<s;h++){for(var p=0;p<s;p++){if(h!==p){l[h*s+p]=qa(a.distance,n[h],n[p],a.attributes)}}}f=Xa(l,a.preference);for(var g=0;g<s;g++){l[g*s+g]=f}c=new Array(u);for(var y=0;y<u;y++){c[y]=0}v=new Array(u);for(var m=0;m<u;m++){v[m]=0}var b=new Array(s);var x=new Array(s);var w=new Array(s);for(var E=0;E<s;E++){b[E]=0;x[E]=0;w[E]=0}var k=new Array(s*a.minIterations);for(var _=0;_<k.length;_++){k[_]=0}var T;for(T=0;T<a.maxIterations;T++){for(var C=0;C<s;C++){var S=-Infinity,D=-Infinity,P=-1,A=0;for(var M=0;M<s;M++){b[M]=c[C*s+M];A=v[C*s+M]+l[C*s+M];if(A>=S){D=S;S=A;P=M}else if(A>D){D=A}}for(var B=0;B<s;B++){c[C*s+B]=(1-a.damping)*(l[C*s+B]-S)+a.damping*b[B]}c[C*s+P]=(1-a.damping)*(l[C*s+P]-D)+a.damping*b[P]}for(var I=0;I<s;I++){var O=0;for(var R=0;R<s;R++){b[R]=v[R*s+I];x[R]=Math.max(0,c[R*s+I]);O+=x[R]}O-=x[I];x[I]=c[I*s+I];O+=x[I];for(var N=0;N<s;N++){v[N*s+I]=(1-a.damping)*Math.min(0,O-x[N])+a.damping*b[N]}v[I*s+I]=(1-a.damping)*(O-x[I])+a.damping*b[I]}var L=0;for(var z=0;z<s;z++){var j=v[z*s+z]+c[z*s+z]>0?1:0;k[T%a.minIterations*s+z]=j;L+=j}if(L>0&&(T>=a.minIterations-1||T==a.maxIterations-1)){var V=0;for(var F=0;F<s;F++){w[F]=0;for(var G=0;G<a.minIterations;G++){w[F]+=k[G*s+F]}if(w[F]===0||w[F]===a.minIterations){V++}}if(V===s){break}}}var W=Ya(s,c,v);var q=Ha(s,l,W);var X={};for(var Y=0;Y<W.length;Y++){X[W[Y]]=[]}for(var U=0;U<n.length;U++){var H=i[n[U].id()];var K=q[H];if(K!=null){X[K].push(n[U])}}var Z=new Array(W.length);for(var $=0;$<W.length;$++){Z[$]=r.collection(X[W[$]])}return Z};var Za={affinityPropagation:Ka,ap:Ka};var $a=qt({root:undefined,directed:false});var Qa={hierholzer:function e(t){if(!M(t)){var r=arguments;t={root:r[0],directed:r[1]}}var n=$a(t),a=n.root,i=n.directed;var o=this;var s=false;var u;var l;var f;if(a)f=D(a)?this.filter(a)[0].id():a[0].id();var c={};var v={};if(i){o.forEach(function(e){var t=e.id();if(e.isNode()){var r=e.indegree(true);var n=e.outdegree(true);var a=r-n;var i=n-r;if(a==1){if(u)s=true;else u=t}else if(i==1){if(l)s=true;else l=t}else if(i>1||a>1){s=true}c[t]=[];e.outgoers().forEach(function(e){if(e.isEdge())c[t].push(e.id())})}else{v[t]=[undefined,e.target().id()]}})}else{o.forEach(function(e){var t=e.id();if(e.isNode()){var r=e.degree(true);if(r%2){if(!u)u=t;else if(!l)l=t;else s=true}c[t]=[];e.connectedEdges().forEach(function(e){return c[t].push(e.id())})}else{v[t]=[e.source().id(),e.target().id()]}})}var d={found:false,trail:undefined};if(s)return d;else if(l&&u){if(i){if(f&&l!=f){return d}f=l}else{if(f&&l!=f&&u!=f){return d}else if(!f){f=l}}}else{if(!f)f=o[0].id()}var h=function e(t){var r=t;var n=[t];var a,o,s;while(c[r].length){a=c[r].shift();o=v[a][0];s=v[a][1];if(r!=s){c[s]=c[s].filter(function(e){return e!=a});r=s}else if(!i&&r!=o){c[o]=c[o].filter(function(e){return e!=a});r=o}n.unshift(a);n.unshift(r)}return n};var p=[];var g=[];g=h(f);while(g.length!=1){if(c[g[0]].length==0){p.unshift(o.getElementById(g.shift()));p.unshift(o.getElementById(g.shift()))}else{g=h(g.shift()).concat(g)}}p.unshift(o.getElementById(g.shift()));for(var y in c){if(c[y].length){return d}}d.found=true;d.trail=this.spawn(p,true);return d}};var Ja=function e(){var t=this;var r={};var n=0;var a=0;var i=[];var o=[];var s={};var u=function e(n,a){var s=o.length-1;var u=[];var l=t.spawn();while(o[s].x!=n||o[s].y!=a){u.push(o.pop().edge);s--}u.push(o.pop().edge);u.forEach(function(e){var n=e.connectedNodes().intersection(t);l.merge(e);n.forEach(function(e){var n=e.id();var a=e.connectedEdges().intersection(t);l.merge(e);if(!r[n].cutVertex){l.merge(a)}else{l.merge(a.filter(function(e){return e.isLoop()}))}})});i.push(l)};var l=function e(f,c,v){if(f===v)a+=1;r[c]={id:n,low:n++,cutVertex:false};var d=t.getElementById(c).connectedEdges().intersection(t);if(d.size()===0){i.push(t.spawn(t.getElementById(c)))}else{var h,p,g,y;d.forEach(function(e){h=e.source().id();p=e.target().id();g=h===c?p:h;if(g!==v){y=e.id();if(!s[y]){s[y]=true;o.push({x:c,y:g,edge:e})}if(!(g in r)){l(f,g,c);r[c].low=Math.min(r[c].low,r[g].low);if(r[c].id<=r[g].low){r[c].cutVertex=true;u(c,g)}}else{r[c].low=Math.min(r[c].low,r[g].id)}}})}};t.forEach(function(e){if(e.isNode()){var t=e.id();if(!(t in r)){a=0;l(t,t);r[t].cutVertex=a>1}}});var f=Object.keys(r).filter(function(e){return r[e].cutVertex}).map(function(e){return t.getElementById(e)});return{cut:t.spawn(f),components:i}};var ei={hopcroftTarjanBiconnected:Ja,htbc:Ja,htb:Ja,hopcroftTarjanBiconnectedComponents:Ja};var ti=function e(){var t=this;var r={};var n=0;var a=[];var i=[];var o=t.spawn(t);var s=function e(u){i.push(u);r[u]={index:n,low:n++,explored:false};var l=t.getElementById(u).connectedEdges().intersection(t);l.forEach(function(e){var t=e.target().id();if(t!==u){if(!(t in r)){s(t)}if(!r[t].explored){r[u].low=Math.min(r[u].low,r[t].low)}}});if(r[u].index===r[u].low){var f=t.spawn();for(;;){var c=i.pop();f.merge(t.getElementById(c));r[c].low=r[u].index;r[c].explored=true;if(c===u){break}}var v=f.edgesWith(f);var d=f.merge(v);a.push(d);o=o.difference(d)}};t.forEach(function(e){if(e.isNode()){var t=e.id();if(!(t in r)){s(t)}}});return{cut:o,components:a}};var ri={tarjanStronglyConnected:ti,tsc:ti,tscc:ti,tarjanStronglyConnectedComponents:ti};var ni={};[nr,hr,pr,yr,br,wr,Tr,jn,Fn,Wn,Xn,ia,Ba,Fa,Za,Qa,ei,ri].forEach(function(e){ue(ni,e)});
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var ai=0;var ii=1;var oi=2;var si=function e(t){if(!(this instanceof si))return new si(t);this.id="Thenable/1.0.7";this.state=ai;this.fulfillValue=undefined;this.rejectReason=undefined;this.onFulfilled=[];this.onRejected=[];this.proxy={then:this.then.bind(this)};if(typeof t==="function")t.call(this,this.fulfill.bind(this),this.reject.bind(this))};si.prototype={fulfill:function e(t){return ui(this,ii,"fulfillValue",t)},reject:function e(t){return ui(this,oi,"rejectReason",t)},then:function e(t,r){var n=this;var a=new si;n.onFulfilled.push(ci(t,a,"fulfill"));n.onRejected.push(ci(r,a,"reject"));li(n);return a.proxy}};var ui=function e(t,r,n,a){if(t.state===ai){t.state=r;t[n]=a;li(t)}return t};var li=function e(t){if(t.state===ii)fi(t,"onFulfilled",t.fulfillValue);else if(t.state===oi)fi(t,"onRejected",t.rejectReason)};var fi=function e(t,r,n){if(t[r].length===0)return;var a=t[r];t[r]=[];var i=function e(){for(var t=0;t<a.length;t++)a[t](n)};if(typeof setImmediate==="function")setImmediate(i);else setTimeout(i,0)};var ci=function e(t,r,n){return function(e){if(typeof t!=="function")r[n].call(r,e);else{var a;try{a=t(e)}catch(e){r.reject(e);return}vi(r,a)}}};var vi=function e(t,r){if(t===r||t.proxy===r){t.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(b(r)==="object"&&r!==null||typeof r==="function"){try{n=r.then}catch(e){t.reject(e);return}}if(typeof n==="function"){var a=false;try{n.call(r,function(e){if(a)return;a=true;if(e===r)t.reject(new TypeError("circular thenable chain"));else vi(t,e)},function(e){if(a)return;a=true;t.reject(e)})}catch(e){if(!a)t.reject(e)}return}t.fulfill(r)};si.all=function(e){return new si(function(t,r){var n=new Array(e.length);var a=0;var i=function r(i,o){n[i]=o;a++;if(a===e.length){t(n)}};for(var o=0;o<e.length;o++){(function(t){var n=e[t];var a=n!=null&&n.then!=null;if(a){n.then(function(e){i(t,e)},function(e){r(e)})}else{var o=n;i(t,o)}})(o)}})};si.resolve=function(e){return new si(function(t,r){t(e)})};si.reject=function(e){return new si(function(t,r){r(e)})};var di=typeof Promise!=="undefined"?Promise:si;var hi=function e(t,r,n){var a=j(t);var i=!a;var o=this._private=ue({duration:1e3},r,n);o.target=t;o.style=o.style||o.css;o.started=false;o.playing=false;o.hooked=false;o.applying=false;o.progress=0;o.completes=[];o.frames=[];if(o.complete&&P(o.complete)){o.completes.push(o.complete)}if(i){var s=t.position();o.startPosition=o.startPosition||{x:s.x,y:s.y};o.startStyle=o.startStyle||t.cy().style().getAnimationStartStyle(t,o.style)}if(a){var u=t.pan();o.startPan={x:u.x,y:u.y};o.startZoom=t.zoom()}this.length=1;this[0]=this};var pi=hi.prototype;ue(pi,{instanceString:function e(){return"animation"},hook:function e(){var t=this._private;if(!t.hooked){var r;var n=t.target._private.animation;if(t.queue){r=n.queue}else{r=n.current}r.push(this);if(N(t.target)){t.target.cy().addToAnimationPool(t.target)}t.hooked=true}return this},play:function e(){var t=this._private;if(t.progress===1){t.progress=0}t.playing=true;t.started=false;t.stopped=false;this.hook();return this},playing:function e(){return this._private.playing},apply:function e(){var t=this._private;t.applying=true;t.started=false;t.stopped=false;this.hook();return this},applying:function e(){return this._private.applying},pause:function e(){var t=this._private;t.playing=false;t.started=false;return this},stop:function e(){var t=this._private;t.playing=false;t.started=false;t.stopped=true;return this},rewind:function e(){return this.progress(0)},fastforward:function e(){return this.progress(1)},time:function e(t){var r=this._private;if(t===undefined){return r.progress*r.duration}else{return this.progress(t/r.duration)}},progress:function e(t){var r=this._private;var n=r.playing;if(t===undefined){return r.progress}else{if(n){this.pause()}r.progress=t;r.started=false;if(n){this.play()}}return this},completed:function e(){return this._private.progress===1},reverse:function e(){var t=this._private;var r=t.playing;if(r){this.pause()}t.progress=1-t.progress;t.started=false;var n=function e(r,n){var a=t[r];if(a==null){return}t[r]=t[n];t[n]=a};n("zoom","startZoom");n("pan","startPan");n("position","startPosition");if(t.style){for(var a=0;a<t.style.length;a++){var i=t.style[a];var o=i.name;var s=t.startStyle[o];t.startStyle[o]=i;t.style[a]=s}}if(r){this.play()}return this},promise:function e(t){var r=this._private;var n;switch(t){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new di(function(e,t){n.push(function(){e()})})}});pi.complete=pi.completed;pi.run=pi.play;pi.running=pi.playing;var gi={animated:function e(){return function e(){var t=this;var r=t.length!==undefined;var n=r?t:[t];var a=this._private.cy||this;if(!a.styleEnabled()){return false}var i=n[0];if(i){return i._private.animation.current.length>0}}},clearQueue:function e(){return function e(){var t=this;var r=t.length!==undefined;var n=r?t:[t];var a=this._private.cy||this;if(!a.styleEnabled()){return this}for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function e(){return function e(t,r){var n=this._private.cy||this;if(!n.styleEnabled()){return this}return this.animate({delay:t,duration:t,complete:r})}},delayAnimation:function e(){return function e(t,r){var n=this._private.cy||this;if(!n.styleEnabled()){return this}return this.animation({delay:t,duration:t,complete:r})}},animation:function e(){return function e(t,r){var n=this;var a=n.length!==undefined;var i=a?n:[n];var o=this._private.cy||this;var s=!a;var u=!s;if(!o.styleEnabled()){return this}var l=o.style();t=ue({},t,r);var f=Object.keys(t).length===0;if(f){return new hi(i[0],t)}if(t.duration===undefined){t.duration=400}switch(t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(u){t.style=l.getPropsList(t.style||t.css);t.css=undefined}if(u&&t.renderedPosition!=null){var c=t.renderedPosition;var v=o.pan();var d=o.zoom();t.position=Pr(c,d,v)}if(s&&t.panBy!=null){var h=t.panBy;var p=o.pan();t.pan={x:p.x+h.x,y:p.y+h.y}}var g=t.center||t.centre;if(s&&g!=null){var y=o.getCenterPan(g.eles,t.zoom);if(y!=null){t.pan=y}}if(s&&t.fit!=null){var m=t.fit;var b=o.getFitViewport(m.eles||m.boundingBox,m.padding);if(b!=null){t.pan=b.pan;t.zoom=b.zoom}}if(s&&M(t.zoom)){var x=o.getZoomedViewport(t.zoom);if(x!=null){if(x.zoomed){t.zoom=x.zoom}if(x.panned){t.pan=x.pan}}else{t.zoom=null}}return new hi(i[0],t)}},animate:function e(){return function e(t,r){var n=this;var a=n.length!==undefined;var i=a?n:[n];var o=this._private.cy||this;if(!o.styleEnabled()){return this}if(r){t=ue({},t,r)}for(var s=0;s<i.length;s++){var u=i[s];var l=u.animated()&&(t.queue===undefined||t.queue);var f=u.animation(t,l?{queue:true}:undefined);f.play()}return this}},stop:function e(){return function e(t,r){var n=this;var a=n.length!==undefined;var i=a?n:[n];var o=this._private.cy||this;if(!o.styleEnabled()){return this}for(var s=0;s<i.length;s++){var u=i[s];var l=u._private;var f=l.animation.current;for(var c=0;c<f.length;c++){var v=f[c];var d=v._private;if(r){d.duration=0}}if(t){l.animation.queue=[]}if(!r){l.animation.current=[]}}o.notify("draw");return this}}};var yi;var mi;function bi(){if(mi)return yi;mi=1;var e=Array.isArray;yi=e;return yi}var xi;var wi;function Ei(){if(wi)return xi;wi=1;var e=bi(),t=et();var r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(a,i){if(e(a)){return false}var o=typeof a;if(o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)){return true}return n.test(a)||!r.test(a)||i!=null&&a in Object(i)}xi=a;return xi}var ki;var _i;function Ti(){if(_i)return ki;_i=1;var e=He(),t=we();var r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(o){if(!t(o)){return false}var s=e(o);return s==n||s==a||s==r||s==i}ki=o;return ki}var Ci;var Si;function Di(){if(Si)return Ci;Si=1;var e=Se();var t=e["__core-js_shared__"];Ci=t;return Ci}var Pi;var Ai;function Mi(){if(Ai)return Pi;Ai=1;var e=Di();var t=function(){var t=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function r(e){return!!t&&t in e}Pi=r;return Pi}var Bi;var Ii;function Oi(){if(Ii)return Bi;Ii=1;var e=Function.prototype;var t=e.toString;function r(e){if(e!=null){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}Bi=r;return Bi}var Ri;var Ni;function Li(){if(Ni)return Ri;Ni=1;var e=Ti(),t=Mi(),r=we(),n=Oi();var a=/[\\^$.*+?()[\]{}|]/g;var i=/^\[object .+?Constructor\]$/;var o=Function.prototype,s=Object.prototype;var u=o.toString;var l=s.hasOwnProperty;var f=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(a){if(!r(a)||t(a)){return false}var o=e(a)?f:i;return o.test(n(a))}Ri=c;return Ri}var zi;var ji;function Vi(){if(ji)return zi;ji=1;function e(e,t){return e==null?undefined:e[t]}zi=e;return zi}var Fi;var Gi;function Wi(){if(Gi)return Fi;Gi=1;var e=Li(),t=Vi();function r(r,n){var a=t(r,n);return e(a)?a:undefined}Fi=r;return Fi}var qi;var Xi;function Yi(){if(Xi)return qi;Xi=1;var e=Wi();var t=e(Object,"create");qi=t;return qi}var Ui;var Hi;function Ki(){if(Hi)return Ui;Hi=1;var e=Yi();function t(){this.__data__=e?e(null):{};this.size=0}Ui=t;return Ui}var Zi;var $i;function Qi(){if($i)return Zi;$i=1;function e(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}Zi=e;return Zi}var Ji;var eo;function to(){if(eo)return Ji;eo=1;var e=Yi();var t="__lodash_hash_undefined__";var r=Object.prototype;var n=r.hasOwnProperty;function a(r){var a=this.__data__;if(e){var i=a[r];return i===t?undefined:i}return n.call(a,r)?a[r]:undefined}Ji=a;return Ji}var ro;var no;function ao(){if(no)return ro;no=1;var e=Yi();var t=Object.prototype;var r=t.hasOwnProperty;function n(t){var n=this.__data__;return e?n[t]!==undefined:r.call(n,t)}ro=n;return ro}var io;var oo;function so(){if(oo)return io;oo=1;var e=Yi();var t="__lodash_hash_undefined__";function r(r,n){var a=this.__data__;this.size+=this.has(r)?0:1;a[r]=e&&n===undefined?t:n;return this}io=r;return io}var uo;var lo;function fo(){if(lo)return uo;lo=1;var e=Ki(),t=Qi(),r=to(),n=ao(),a=so();function i(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}i.prototype.clear=e;i.prototype["delete"]=t;i.prototype.get=r;i.prototype.has=n;i.prototype.set=a;uo=i;return uo}var co;var vo;function ho(){if(vo)return co;vo=1;function e(){this.__data__=[];this.size=0}co=e;return co}var po;var go;function yo(){if(go)return po;go=1;function e(e,t){return e===t||e!==e&&t!==t}po=e;return po}var mo;var bo;function xo(){if(bo)return mo;bo=1;var e=yo();function t(t,r){var n=t.length;while(n--){if(e(t[n][0],r)){return n}}return-1}mo=t;return mo}var wo;var Eo;function ko(){if(Eo)return wo;Eo=1;var e=xo();var t=Array.prototype;var r=t.splice;function n(t){var n=this.__data__,a=e(n,t);if(a<0){return false}var i=n.length-1;if(a==i){n.pop()}else{r.call(n,a,1)}--this.size;return true}wo=n;return wo}var _o;var To;function Co(){if(To)return _o;To=1;var e=xo();function t(t){var r=this.__data__,n=e(r,t);return n<0?undefined:r[n][1]}_o=t;return _o}var So;var Do;function Po(){if(Do)return So;Do=1;var e=xo();function t(t){return e(this.__data__,t)>-1}So=t;return So}var Ao;var Mo;function Bo(){if(Mo)return Ao;Mo=1;var e=xo();function t(t,r){var n=this.__data__,a=e(n,t);if(a<0){++this.size;n.push([t,r])}else{n[a][1]=r}return this}Ao=t;return Ao}var Io;var Oo;function Ro(){if(Oo)return Io;Oo=1;var e=ho(),t=ko(),r=Co(),n=Po(),a=Bo();function i(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}i.prototype.clear=e;i.prototype["delete"]=t;i.prototype.get=r;i.prototype.has=n;i.prototype.set=a;Io=i;return Io}var No;var Lo;function zo(){if(Lo)return No;Lo=1;var e=Wi(),t=Se();var r=e(t,"Map");No=r;return No}var jo;var Vo;function Fo(){if(Vo)return jo;Vo=1;var e=fo(),t=Ro(),r=zo();function n(){this.size=0;this.__data__={hash:new e,map:new(r||t),string:new e}}jo=n;return jo}var Go;var Wo;function qo(){if(Wo)return Go;Wo=1;function e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}Go=e;return Go}var Xo;var Yo;function Uo(){if(Yo)return Xo;Yo=1;var e=qo();function t(t,r){var n=t.__data__;return e(r)?n[typeof r=="string"?"string":"hash"]:n.map}Xo=t;return Xo}var Ho;var Ko;function Zo(){if(Ko)return Ho;Ko=1;var e=Uo();function t(t){var r=e(this,t)["delete"](t);this.size-=r?1:0;return r}Ho=t;return Ho}var $o;var Qo;function Jo(){if(Qo)return $o;Qo=1;var e=Uo();function t(t){return e(this,t).get(t)}$o=t;return $o}var es;var ts;function rs(){if(ts)return es;ts=1;var e=Uo();function t(t){return e(this,t).has(t)}es=t;return es}var ns;var as;function is(){if(as)return ns;as=1;var e=Uo();function t(t,r){var n=e(this,t),a=n.size;n.set(t,r);this.size+=n.size==a?0:1;return this}ns=t;return ns}var os;var ss;function us(){if(ss)return os;ss=1;var e=Fo(),t=Zo(),r=Jo(),n=rs(),a=is();function i(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}i.prototype.clear=e;i.prototype["delete"]=t;i.prototype.get=r;i.prototype.has=n;i.prototype.set=a;os=i;return os}var ls;var fs;function cs(){if(fs)return ls;fs=1;var e=us();var t="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function"){throw new TypeError(t)}var i=function(){var e=arguments,t=a?a.apply(this,e):e[0],r=i.cache;if(r.has(t)){return r.get(t)}var o=n.apply(this,e);i.cache=r.set(t,o)||r;return o};i.cache=new(r.Cache||e);return i}r.Cache=e;ls=r;return ls}var vs;var ds;function hs(){if(ds)return vs;ds=1;var e=cs();var t=500;function r(r){var n=e(r,function(e){if(a.size===t){a.clear()}return e});var a=n.cache;return n}vs=r;return vs}var ps;var gs;function ys(){if(gs)return ps;gs=1;var e=hs();var t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var r=/\\(\\)?/g;var n=e(function(e){var n=[];if(e.charCodeAt(0)===46){n.push("")}e.replace(t,function(e,t,a,i){n.push(a?i.replace(r,"$1"):t||e)});return n});ps=n;return ps}var ms;var bs;function xs(){if(bs)return ms;bs=1;function e(e,t){var r=-1,n=e==null?0:e.length,a=Array(n);while(++r<n){a[r]=t(e[r],r,e)}return a}ms=e;return ms}var ws;var Es;function ks(){if(Es)return ws;Es=1;var e=je(),t=xs(),r=bi(),n=et();var a=e?e.prototype:undefined,i=a?a.toString:undefined;function o(e){if(typeof e=="string"){return e}if(r(e)){return t(e,o)+""}if(n(e)){return i?i.call(e):""}var a=e+"";return a=="0"&&1/e==-Infinity?"-0":a}ws=o;return ws}var _s;var Ts;function Cs(){if(Ts)return _s;Ts=1;var e=ks();function t(t){return t==null?"":e(t)}_s=t;return _s}var Ss;var Ds;function Ps(){if(Ds)return Ss;Ds=1;var e=bi(),t=Ei(),r=ys(),n=Cs();function a(a,i){if(e(a)){return a}return t(a,i)?[a]:r(n(a))}Ss=a;return Ss}var As;var Ms;function Bs(){if(Ms)return As;Ms=1;var e=et();function t(t){if(typeof t=="string"||e(t)){return t}var r=t+"";return r=="0"&&1/t==-Infinity?"-0":r}As=t;return As}var Is;var Os;function Rs(){if(Os)return Is;Os=1;var e=Ps(),t=Bs();function r(r,n){n=e(n,r);var a=0,i=n.length;while(r!=null&&a<i){r=r[t(n[a++])]}return a&&a==i?r:undefined}Is=r;return Is}var Ns;var Ls;function zs(){if(Ls)return Ns;Ls=1;var e=Rs();function t(t,r,n){var a=t==null?undefined:e(t,r);return a===undefined?n:a}Ns=t;return Ns}var js=zs();var Vs=me(js);var Fs;var Gs;function Ws(){if(Gs)return Fs;Gs=1;var e=Wi();var t=function(){try{var t=e(Object,"defineProperty");t({},"",{});return t}catch(e){}}();Fs=t;return Fs}var qs;var Xs;function Ys(){if(Xs)return qs;Xs=1;var e=Ws();function t(t,r,n){if(r=="__proto__"&&e){e(t,r,{configurable:true,enumerable:true,value:n,writable:true})}else{t[r]=n}}qs=t;return qs}var Us;var Hs;function Ks(){if(Hs)return Us;Hs=1;var e=Ys(),t=yo();var r=Object.prototype;var n=r.hasOwnProperty;function a(r,a,i){var o=r[a];if(!(n.call(r,a)&&t(o,i))||i===undefined&&!(a in r)){e(r,a,i)}}Us=a;return Us}var Zs;var $s;function Qs(){if($s)return Zs;$s=1;var e=9007199254740991;var t=/^(?:0|[1-9]\d*)$/;function r(r,n){var a=typeof r;n=n==null?e:n;return!!n&&(a=="number"||a!="symbol"&&t.test(r))&&(r>-1&&r%1==0&&r<n)}Zs=r;return Zs}var Js;var eu;function tu(){if(eu)return Js;eu=1;var e=Ks(),t=Ps(),r=Qs(),n=we(),a=Bs();function i(i,o,s,u){if(!n(i)){return i}o=t(o,i);var l=-1,f=o.length,c=f-1,v=i;while(v!=null&&++l<f){var d=a(o[l]),h=s;if(d==="__proto__"||d==="constructor"||d==="prototype"){return i}if(l!=c){var p=v[d];h=u?u(p,d,v):undefined;if(h===undefined){h=n(p)?p:r(o[l+1])?[]:{}}}e(v,d,h);v=v[d]}return i}Js=i;return Js}var ru;var nu;function au(){if(nu)return ru;nu=1;var e=tu();function t(t,r,n){return t==null?t:e(t,r,n)}ru=t;return ru}var iu=au();var ou=me(iu);var su;var uu;function lu(){if(uu)return su;uu=1;function e(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r]}return t}su=e;return su}var fu;var cu;function vu(){if(cu)return fu;cu=1;var e=xs(),t=lu(),r=bi(),n=et(),a=ys(),i=Bs(),o=Cs();function s(s){if(r(s)){return e(s,i)}return n(s)?[s]:t(a(o(s)))}fu=s;return fu}var du=vu();var hu=me(du);var pu={data:function e(t){var r={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateStyle:false,beforeGet:function e(t){},beforeSet:function e(t,r){},onSet:function e(t){},canSet:function e(t){return true}};t=ue({},r,t);return function e(r,n){var a=t;var i=this;var o=i.length!==undefined;var s=o?i:[i];var u=o?i[0]:i;if(D(r)){var l=r.indexOf(".")!==-1;var c=l&&hu(r);if(a.allowGetting&&n===undefined){var v;if(u){a.beforeGet(u);if(c&&u._private[a.field][r]===undefined){v=Vs(u._private[a.field],c)}else{v=u._private[a.field][r]}}return v}else if(a.allowSetting&&n!==undefined){var d=!a.immutableKeys[r];if(d){var h=f({},r,n);a.beforeSet(i,h);for(var p=0,g=s.length;p<g;p++){var y=s[p];if(a.canSet(y)){if(c&&u._private[a.field][r]===undefined){ou(y._private[a.field],c,n)}else{y._private[a.field][r]=n}}}if(a.updateStyle){i.updateStyle()}a.onSet(i);if(a.settingTriggersEvent){i[a.triggerFnName](a.settingEvent)}}}}else if(a.allowSetting&&M(r)){var m=r;var b,x;var w=Object.keys(m);a.beforeSet(i,m);for(var E=0;E<w.length;E++){b=w[E];x=m[b];var k=!a.immutableKeys[b];if(k){for(var _=0;_<s.length;_++){var T=s[_];if(a.canSet(T)){T._private[a.field][b]=x}}}}if(a.updateStyle){i.updateStyle()}a.onSet(i);if(a.settingTriggersEvent){i[a.triggerFnName](a.settingEvent)}}else if(a.allowBinding&&P(r)){var C=r;i.on(a.bindingEvent,C)}else if(a.allowGetting&&r===undefined){var S;if(u){a.beforeGet(u);S=u._private[a.field]}return S}return i}},removeData:function e(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};t=ue({},r,t);return function e(r){var n=t;var a=this;var i=a.length!==undefined;var o=i?a:[a];if(D(r)){var s=r.split(/\s+/);var u=s.length;for(var l=0;l<u;l++){var f=s[l];if(G(f)){continue}var c=!n.immutableKeys[f];if(c){for(var v=0,d=o.length;v<d;v++){o[v]._private[n.field][f]=undefined}}}if(n.triggerEvent){a[n.triggerFnName](n.event)}}else if(r===undefined){for(var h=0,p=o.length;h<p;h++){var g=o[h]._private[n.field];var y=Object.keys(g);for(var m=0;m<y.length;m++){var b=y[m];var x=!n.immutableKeys[b];if(x){g[b]=undefined}}}if(n.triggerEvent){a[n.triggerFnName](n.event)}}return a}}};var gu={eventAliasesOn:function e(t){var r=t;r.addListener=r.listen=r.bind=r.on;r.unlisten=r.unbind=r.off=r.removeListener;r.trigger=r.emit;r.pon=r.promiseOn=function(e,t){var r=this;var n=Array.prototype.slice.call(arguments,0);return new di(function(e,t){var a=function t(n){r.off.apply(r,o);e(n)};var i=n.concat([a]);var o=i.concat([]);r.on.apply(r,i)})}}};var yu={};[gi,pu,gu].forEach(function(e){ue(yu,e)});var mu={animate:yu.animate(),animation:yu.animation(),animated:yu.animated(),clearQueue:yu.clearQueue(),delay:yu.delay(),delayAnimation:yu.delayAnimation(),stop:yu.stop()};var bu={classes:function e(t){var r=this;if(t===undefined){var n=[];r[0]._private.classes.forEach(function(e){return n.push(e)});return n}else if(!A(t)){t=(t||"").match(/\S+/g)||[]}var a=[];var i=new er(t);for(var o=0;o<r.length;o++){var s=r[o];var u=s._private;var l=u.classes;var f=false;for(var c=0;c<t.length;c++){var v=t[c];var d=l.has(v);if(!d){f=true;break}}if(!f){f=l.size!==t.length}if(f){u.classes=i;a.push(s)}}if(a.length>0){this.spawn(a).updateStyle().emit("class")}return r},addClass:function e(t){return this.toggleClass(t,true)},hasClass:function e(t){var r=this[0];return r!=null&&r._private.classes.has(t)},toggleClass:function e(t,r){if(!A(t)){t=t.match(/\S+/g)||[]}var n=this;var a=r===undefined;var i=[];for(var o=0,s=n.length;o<s;o++){var u=n[o];var l=u._private.classes;var f=false;for(var c=0;c<t.length;c++){var v=t[c];var d=l.has(v);var h=false;if(r||a&&!d){l.add(v);h=true}else if(!r||a&&d){l["delete"](v);h=true}if(!f&&h){i.push(u);f=true}}}if(i.length>0){this.spawn(i).updateStyle().emit("class")}return n},removeClass:function e(t){return this.toggleClass(t,false)},flashClass:function e(t,r){var n=this;if(r==null){r=250}else if(r===0){return n}n.addClass(t);setTimeout(function(){n.removeClass(t)},r);return n}};bu.className=bu.classNames=bu.classes;var xu={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"'+"|"+"'(?:\\\\'|[^'])*'",number:J,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};xu.variable="(?:[\\w-.]|(?:\\\\"+xu.metaChar+"))+";xu.className="(?:[\\w-]|(?:\\\\"+xu.metaChar+"))+";xu.value=xu.string+"|"+xu.number;xu.id=xu.variable;(function(){var e,t,r;e=xu.comparatorOp.split("|");for(r=0;r<e.length;r++){t=e[r];xu.comparatorOp+="|@"+t}e=xu.comparatorOp.split("|");for(r=0;r<e.length;r++){t=e[r];if(t.indexOf("!")>=0){continue}if(t==="="){continue}xu.comparatorOp+="|\\!"+t}})();var wu=function e(){return{checks:[]}};var Eu={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20};var ku=[{selector:":selected",matches:function e(t){return t.selected()}},{selector:":unselected",matches:function e(t){return!t.selected()}},{selector:":selectable",matches:function e(t){return t.selectable()}},{selector:":unselectable",matches:function e(t){return!t.selectable()}},{selector:":locked",matches:function e(t){return t.locked()}},{selector:":unlocked",matches:function e(t){return!t.locked()}},{selector:":visible",matches:function e(t){return t.visible()}},{selector:":hidden",matches:function e(t){return!t.visible()}},{selector:":transparent",matches:function e(t){return t.transparent()}},{selector:":grabbed",matches:function e(t){return t.grabbed()}},{selector:":free",matches:function e(t){return!t.grabbed()}},{selector:":removed",matches:function e(t){return t.removed()}},{selector:":inside",matches:function e(t){return!t.removed()}},{selector:":grabbable",matches:function e(t){return t.grabbable()}},{selector:":ungrabbable",matches:function e(t){return!t.grabbable()}},{selector:":animated",matches:function e(t){return t.animated()}},{selector:":unanimated",matches:function e(t){return!t.animated()}},{selector:":parent",matches:function e(t){return t.isParent()}},{selector:":childless",matches:function e(t){return t.isChildless()}},{selector:":child",matches:function e(t){return t.isChild()}},{selector:":orphan",matches:function e(t){return t.isOrphan()}},{selector:":nonorphan",matches:function e(t){return t.isChild()}},{selector:":compound",matches:function e(t){if(t.isNode()){return t.isParent()}else{return t.source().isParent()||t.target().isParent()}}},{selector:":loop",matches:function e(t){return t.isLoop()}},{selector:":simple",matches:function e(t){return t.isSimple()}},{selector:":active",matches:function e(t){return t.active()}},{selector:":inactive",matches:function e(t){return!t.active()}},{selector:":backgrounding",matches:function e(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function e(t){return!t.backgrounding()}}].sort(function(e,t){return se(e.selector,t.selector)});var _u=function(){var e={};var t;for(var r=0;r<ku.length;r++){t=ku[r];e[t.selector]=t.matches}return e}();var Tu=function e(t,r){return _u[t](r)};var Cu="("+ku.map(function(e){return e.selector}).join("|")+")";var Su=function e(t){return t.replace(new RegExp("\\\\("+xu.metaChar+")","g"),function(e,t){return t})};var Du=function e(t,r,n){t[t.length-1]=n};var Pu=[{name:"group",query:true,regex:"("+xu.group+")",populate:function e(t,r,n){var a=p(n,1),i=a[0];r.checks.push({type:Eu.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:true,regex:Cu,populate:function e(t,r,n){var a=p(n,1),i=a[0];r.checks.push({type:Eu.STATE,value:i})}},{name:"id",query:true,regex:"\\#("+xu.id+")",populate:function e(t,r,n){var a=p(n,1),i=a[0];r.checks.push({type:Eu.ID,value:Su(i)})}},{name:"className",query:true,regex:"\\.("+xu.className+")",populate:function e(t,r,n){var a=p(n,1),i=a[0];r.checks.push({type:Eu.CLASS,value:Su(i)})}},{name:"dataExists",query:true,regex:"\\[\\s*("+xu.variable+")\\s*\\]",populate:function e(t,r,n){var a=p(n,1),i=a[0];r.checks.push({type:Eu.DATA_EXIST,field:Su(i)})}},{name:"dataCompare",query:true,regex:"\\[\\s*("+xu.variable+")\\s*("+xu.comparatorOp+")\\s*("+xu.value+")\\s*\\]",populate:function e(t,r,n){var a=p(n,3),i=a[0],o=a[1],s=a[2];var u=new RegExp("^"+xu.string+"$").exec(s)!=null;if(u){s=s.substring(1,s.length-1)}else{s=parseFloat(s)}r.checks.push({type:Eu.DATA_COMPARE,field:Su(i),operator:o,value:s})}},{name:"dataBool",query:true,regex:"\\[\\s*("+xu.boolOp+")\\s*("+xu.variable+")\\s*\\]",populate:function e(t,r,n){var a=p(n,2),i=a[0],o=a[1];r.checks.push({type:Eu.DATA_BOOL,field:Su(o),operator:i})}},{name:"metaCompare",query:true,regex:"\\[\\[\\s*("+xu.meta+")\\s*("+xu.comparatorOp+")\\s*("+xu.number+")\\s*\\]\\]",populate:function e(t,r,n){var a=p(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:Eu.META_COMPARE,field:Su(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:true,regex:xu.separator,populate:function e(t,r){var n=t.currentSubject;var a=t.edgeCount;var i=t.compoundCount;var o=t[t.length-1];if(n!=null){o.subject=n;t.currentSubject=null}o.edgeCount=a;o.compoundCount=i;t.edgeCount=0;t.compoundCount=0;var s=t[t.length++]=wu();return s}},{name:"directedEdge",separator:true,regex:xu.directedEdge,populate:function e(t,r){if(t.currentSubject==null){var n=wu();var a=r;var i=wu();n.checks.push({type:Eu.DIRECTED_EDGE,source:a,target:i});Du(t,r,n);t.edgeCount++;return i}else{var o=wu();var s=r;var u=wu();o.checks.push({type:Eu.NODE_SOURCE,source:s,target:u});Du(t,r,o);t.edgeCount++;return u}}},{name:"undirectedEdge",separator:true,regex:xu.undirectedEdge,populate:function e(t,r){if(t.currentSubject==null){var n=wu();var a=r;var i=wu();n.checks.push({type:Eu.UNDIRECTED_EDGE,nodes:[a,i]});Du(t,r,n);t.edgeCount++;return i}else{var o=wu();var s=r;var u=wu();o.checks.push({type:Eu.NODE_NEIGHBOR,node:s,neighbor:u});Du(t,r,o);return u}}},{name:"child",separator:true,regex:xu.child,populate:function e(t,r){if(t.currentSubject==null){var n=wu();var a=wu();var i=t[t.length-1];n.checks.push({type:Eu.CHILD,parent:i,child:a});Du(t,r,n);t.compoundCount++;return a}else if(t.currentSubject===r){var o=wu();var s=t[t.length-1];var u=wu();var l=wu();var f=wu();var c=wu();o.checks.push({type:Eu.COMPOUND_SPLIT,left:s,right:u,subject:l});l.checks=r.checks;r.checks=[{type:Eu.TRUE}];c.checks.push({type:Eu.TRUE});u.checks.push({type:Eu.PARENT,parent:c,child:f});Du(t,s,o);t.currentSubject=l;t.compoundCount++;return f}else{var v=wu();var d=wu();var h=[{type:Eu.PARENT,parent:v,child:d}];v.checks=r.checks;r.checks=h;t.compoundCount++;return d}}},{name:"descendant",separator:true,regex:xu.descendant,populate:function e(t,r){if(t.currentSubject==null){var n=wu();var a=wu();var i=t[t.length-1];n.checks.push({type:Eu.DESCENDANT,ancestor:i,descendant:a});Du(t,r,n);t.compoundCount++;return a}else if(t.currentSubject===r){var o=wu();var s=t[t.length-1];var u=wu();var l=wu();var f=wu();var c=wu();o.checks.push({type:Eu.COMPOUND_SPLIT,left:s,right:u,subject:l});l.checks=r.checks;r.checks=[{type:Eu.TRUE}];c.checks.push({type:Eu.TRUE});u.checks.push({type:Eu.ANCESTOR,ancestor:c,descendant:f});Du(t,s,o);t.currentSubject=l;t.compoundCount++;return f}else{var v=wu();var d=wu();var h=[{type:Eu.ANCESTOR,ancestor:v,descendant:d}];v.checks=r.checks;r.checks=h;t.compoundCount++;return d}}},{name:"subject",modifier:true,regex:xu.subject,populate:function e(t,r){if(t.currentSubject!=null&&t.currentSubject!==r){Lt("Redefinition of subject in selector `"+t.toString()+"`");return false}t.currentSubject=r;var n=t[t.length-1];var a=n.checks[0];var i=a==null?null:a.type;if(i===Eu.DIRECTED_EDGE){a.type=Eu.NODE_TARGET}else if(i===Eu.UNDIRECTED_EDGE){a.type=Eu.NODE_NEIGHBOR;a.node=a.nodes[1];a.neighbor=a.nodes[0];a.nodes=null}}}];Pu.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var Au=function e(t){var r;var n;var a;for(var i=0;i<Pu.length;i++){var o=Pu[i];var s=o.name;var u=t.match(o.regexObj);if(u!=null){n=u;r=o;a=s;var l=u[0];t=t.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:t}};var Mu=function e(t){var r=t.match(/^\s+/);if(r){var n=r[0];t=t.substring(n.length)}return t};var Bu=function e(t){var r=this;var n=r.inputText=t;var a=r[0]=wu();r.length=1;n=Mu(n);for(;;){var i=Au(n);if(i.expr==null){Lt("The selector `"+t+"`is invalid");return false}else{var o=i.match.slice(1);var s=i.expr.populate(r,a,o);if(s===false){return false}else if(s!=null){a=s}}n=i.remaining;if(n.match(/^\s*$/)){break}}var u=r[r.length-1];if(r.currentSubject!=null){u.subject=r.currentSubject}u.edgeCount=r.edgeCount;u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var f=r[l];if(f.compoundCount>0&&f.edgeCount>0){Lt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector");return false}if(f.edgeCount>1){Lt("The selector `"+t+"` is invalid because it uses multiple edge selectors");return false}else if(f.edgeCount===1){Lt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}}return true};var Iu=function e(){if(this.toStringCache!=null){return this.toStringCache}var t=function e(t){if(t==null){return""}else{return t}};var r=function e(r){if(D(r)){return'"'+r+'"'}else{return t(r)}};var n=function e(t){return" "+t+" "};var a=function e(a,o){var s=a.type,u=a.value;switch(s){case Eu.GROUP:{var l=t(u);return l.substring(0,l.length-1)}case Eu.DATA_COMPARE:{var f=a.field,c=a.operator;return"["+f+n(t(c))+r(u)+"]"}case Eu.DATA_BOOL:{var v=a.operator,d=a.field;return"["+t(v)+d+"]"}case Eu.DATA_EXIST:{var h=a.field;return"["+h+"]"}case Eu.META_COMPARE:{var p=a.operator,g=a.field;return"[["+g+n(t(p))+r(u)+"]]"}case Eu.STATE:{return u}case Eu.ID:{return"#"+u}case Eu.CLASS:{return"."+u}case Eu.PARENT:case Eu.CHILD:{return i(a.parent,o)+n(">")+i(a.child,o)}case Eu.ANCESTOR:case Eu.DESCENDANT:{return i(a.ancestor,o)+" "+i(a.descendant,o)}case Eu.COMPOUND_SPLIT:{var y=i(a.left,o);var m=i(a.subject,o);var b=i(a.right,o);return y+(y.length>0?" ":"")+m+b}case Eu.TRUE:{return""}}};var i=function e(t,r){return t.checks.reduce(function(e,n,i){return e+(r===t&&i===0?"$":"")+a(n,r)},"")};var o="";for(var s=0;s<this.length;s++){var u=this[s];o+=i(u,u.subject);if(this.length>1&&s<this.length-1){o+=", "}}this.toStringCache=o;return o};var Ou={parse:Bu,toString:Iu};var Ru=function e(t,r,n){var a;var i=D(t);var o=I(t);var s=D(n);var u,l;var f=false;var c=false;var v=false;if(r.indexOf("!")>=0){r=r.replace("!","");c=true}if(r.indexOf("@")>=0){r=r.replace("@","");f=true}if(i||s||f){u=!i&&!o?"":""+t;l=""+n}if(f){t=u=u.toLowerCase();n=l=l.toLowerCase()}switch(r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=t===n;break;case">":v=true;a=t>n;break;case">=":v=true;a=t>=n;break;case"<":v=true;a=t<n;break;case"<=":v=true;a=t<=n;break;default:a=false;break}if(c&&(t!=null||!v)){a=!a}return a};var Nu=function e(t,r){switch(r){case"?":return t?true:false;case"!":return t?false:true;case"^":return t===undefined}};var Lu=function e(t){return t!==undefined};var zu=function e(t,r){return t.data(r)};var ju=function e(t,r){return t[r]()};var Vu=[];var Fu=function e(t,r){return t.checks.every(function(e){return Vu[e.type](e,r)})};Vu[Eu.GROUP]=function(e,t){var r=e.value;return r==="*"||r===t.group()};Vu[Eu.STATE]=function(e,t){var r=e.value;return Tu(r,t)};Vu[Eu.ID]=function(e,t){var r=e.value;return t.id()===r};Vu[Eu.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)};Vu[Eu.META_COMPARE]=function(e,t){var r=e.field,n=e.operator,a=e.value;return Ru(ju(t,r),n,a)};Vu[Eu.DATA_COMPARE]=function(e,t){var r=e.field,n=e.operator,a=e.value;return Ru(zu(t,r),n,a)};Vu[Eu.DATA_BOOL]=function(e,t){var r=e.field,n=e.operator;return Nu(zu(t,r),n)};Vu[Eu.DATA_EXIST]=function(e,t){var r=e.field;e.operator;return Lu(zu(t,r))};Vu[Eu.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0];var n=e.nodes[1];var a=t.source();var i=t.target();return Fu(r,a)&&Fu(n,i)||Fu(n,a)&&Fu(r,i)};Vu[Eu.NODE_NEIGHBOR]=function(e,t){return Fu(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&Fu(e.neighbor,t)})};Vu[Eu.DIRECTED_EDGE]=function(e,t){return Fu(e.source,t.source())&&Fu(e.target,t.target())};Vu[Eu.NODE_SOURCE]=function(e,t){return Fu(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&Fu(e.target,t)})};Vu[Eu.NODE_TARGET]=function(e,t){return Fu(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&Fu(e.source,t)})};Vu[Eu.CHILD]=function(e,t){return Fu(e.child,t)&&Fu(e.parent,t.parent())};Vu[Eu.PARENT]=function(e,t){return Fu(e.parent,t)&&t.children().some(function(t){return Fu(e.child,t)})};Vu[Eu.DESCENDANT]=function(e,t){return Fu(e.descendant,t)&&t.ancestors().some(function(t){return Fu(e.ancestor,t)})};Vu[Eu.ANCESTOR]=function(e,t){return Fu(e.ancestor,t)&&t.descendants().some(function(t){return Fu(e.descendant,t)})};Vu[Eu.COMPOUND_SPLIT]=function(e,t){return Fu(e.subject,t)&&Fu(e.left,t)&&Fu(e.right,t)};Vu[Eu.TRUE]=function(){return true};Vu[Eu.COLLECTION]=function(e,t){var r=e.value;return r.has(t)};Vu[Eu.FILTER]=function(e,t){var r=e.value;return r(t)};var Gu=function e(t){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Eu.ID){return t.getElementById(r[0].checks[0].value).collection()}var n=function e(t){for(var n=0;n<r.length;n++){var a=r[n];if(Fu(a,t)){return true}}return false};if(r.text()==null){n=function e(){return true}}return t.filter(n)};var Wu=function e(t){var r=this;for(var n=0;n<r.length;n++){var a=r[n];if(Fu(a,t)){return true}}return false};var qu={matches:Wu,filter:Gu};var Xu=function e(t){this.inputText=t;this.currentSubject=null;this.compoundCount=0;this.edgeCount=0;this.length=0;if(t==null||D(t)&&t.match(/^\s*$/));else if(N(t)){this.addQuery({checks:[{type:Eu.COLLECTION,value:t.collection()}]})}else if(P(t)){this.addQuery({checks:[{type:Eu.FILTER,value:t}]})}else if(D(t)){if(!this.parse(t)){this.invalid=true}}else{Rt("A selector must be created from a string; found ")}};var Yu=Xu.prototype;[Ou,qu].forEach(function(e){return ue(Yu,e)});Yu.text=function(){return this.inputText};Yu.size=function(){return this.length};Yu.eq=function(e){return this[e]};Yu.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};Yu.addQuery=function(e){this[this.length++]=e};Yu.selector=Yu.toString;var Uu={allAre:function e(t){var r=new Xu(t);return this.every(function(e){return r.matches(e)})},is:function e(t){var r=new Xu(t);return this.some(function(e){return r.matches(e)})},some:function e(t,r){for(var n=0;n<this.length;n++){var a=!r?t(this[n],n,this):t.apply(r,[this[n],n,this]);if(a){return true}}return false},every:function e(t,r){for(var n=0;n<this.length;n++){var a=!r?t(this[n],n,this):t.apply(r,[this[n],n,this]);if(!a){return false}}return true},same:function e(t){if(this===t){return true}t=this.cy().collection(t);var r=this.length;var n=t.length;if(r!==n){return false}if(r===1){return this[0]===t[0]}return this.every(function(e){return t.hasElementWithId(e.id())})},anySame:function e(t){t=this.cy().collection(t);return this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function e(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(e){return r.hasElementWithId(e.id())})},contains:function e(t){t=this.cy().collection(t);var r=this;return t.every(function(e){return r.hasElementWithId(e.id())})}};Uu.allAreNeighbours=Uu.allAreNeighbors;Uu.has=Uu.contains;Uu.equal=Uu.equals=Uu.same;var Hu=function e(t,r){return function e(n,a,i,o){var s=n;var u=this;var l;if(s==null){l=""}else if(N(s)&&s.length===1){l=s.id()}if(u.length===1&&l){var f=u[0]._private;var c=f.traversalCache=f.traversalCache||{};var v=c[r]=c[r]||[];var d=_t(l);var h=v[d];if(h){return h}else{return v[d]=t.call(u,n,a,i,o)}}else{return t.call(u,n,a,i,o)}}};var Ku={parent:function e(t){var r=[];if(this.length===1){var e=this[0]._private.parent;if(e){return e}}for(var n=0;n<this.length;n++){var a=this[n];var i=a._private.parent;if(i){r.push(i)}}return this.spawn(r,true).filter(t)},parents:function e(t){var e=[];var r=this.parent();while(r.nonempty()){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}r=r.parent()}return this.spawn(e,true).filter(t)},commonAncestors:function e(t){var r;for(var n=0;n<this.length;n++){var a=this[n];var i=a.parents();r=r||i;r=r.intersect(i)}return r.filter(t)},orphans:function e(t){return this.stdFilter(function(e){return e.isOrphan()}).filter(t)},nonorphans:function e(t){return this.stdFilter(function(e){return e.isChild()}).filter(t)},children:Hu(function(e){var t=[];for(var r=0;r<this.length;r++){var n=this[r];var a=n._private.children;for(var i=0;i<a.length;i++){t.push(a[i])}}return this.spawn(t,true).filter(e)},"children"),siblings:function e(t){return this.parent().children().not(this).filter(t)},isParent:function e(){var t=this[0];if(t){return t.isNode()&&t._private.children.length!==0}},isChildless:function e(){var t=this[0];if(t){return t.isNode()&&t._private.children.length===0}},isChild:function e(){var t=this[0];if(t){return t.isNode()&&t._private.parent!=null}},isOrphan:function e(){var t=this[0];if(t){return t.isNode()&&t._private.parent==null}},descendants:function e(t){var r=[];function n(e){for(var t=0;t<e.length;t++){var a=e[t];r.push(a);if(a.children().nonempty()){n(a.children())}}}n(this.children());return this.spawn(r,true).filter(t)}};function Zu(e,t,r,n){var a=[];var i=new er;var o=e.cy();var s=o.hasCompoundNodes();for(var u=0;u<e.length;u++){var l=e[u];if(r){a.push(l)}else if(s){n(a,i,l)}}while(a.length>0){var f=a.shift();t(f);i.add(f.id());if(s){n(a,i,f)}}return e}function $u(e,t,r){if(r.isParent()){var n=r._private.children;for(var a=0;a<n.length;a++){var i=n[a];if(!t.has(i.id())){e.push(i)}}}}Ku.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return Zu(this,e,t,$u)};function Qu(e,t,r){if(r.isChild()){var n=r._private.parent;if(!t.has(n.id())){e.push(n)}}}Ku.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return Zu(this,e,t,Qu)};function Ju(e,t,r){Qu(e,t,r);$u(e,t,r)}Ku.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return Zu(this,e,t,Ju)};Ku.ancestors=Ku.parents;var el,tl;el=tl={data:yu.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateStyle:true}),removeData:yu.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateStyle:true}),scratch:yu.data({field:"scratch",bindingEvent:"scratch",allowBinding:true,allowSetting:true,settingEvent:"scratch",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,updateStyle:true}),removeScratch:yu.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:true,updateStyle:true}),rscratch:yu.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:yu.removeData({field:"rscratch",triggerEvent:false}),id:function e(){var t=this[0];if(t){return t._private.data.id}}};el.attr=el.data;el.removeAttr=el.removeData;var rl=tl;var nl={};function al(e){return function(t){var r=this;if(t===undefined){t=true}if(r.length===0){return}if(r.isNode()&&!r.removed()){var n=0;var a=r[0];var i=a._private.edges;for(var o=0;o<i.length;o++){var s=i[o];if(!t&&s.isLoop()){continue}n+=e(a,s)}return n}else{return}}}ue(nl,{degree:al(function(e,t){if(t.source().same(t.target())){return 2}else{return 1}}),indegree:al(function(e,t){if(t.target().same(e)){return 1}else{return 0}}),outdegree:al(function(e,t){if(t.source().same(e)){return 1}else{return 0}})});function il(e,t){return function(r){var n;var a=this.nodes();for(var i=0;i<a.length;i++){var o=a[i];var s=o[e](r);if(s!==undefined&&(n===undefined||t(s,n))){n=s}}return n}}ue(nl,{minDegree:il("degree",function(e,t){return e<t}),maxDegree:il("degree",function(e,t){return e>t}),minIndegree:il("indegree",function(e,t){return e<t}),maxIndegree:il("indegree",function(e,t){return e>t}),minOutdegree:il("outdegree",function(e,t){return e<t}),maxOutdegree:il("outdegree",function(e,t){return e>t})});ue(nl,{totalDegree:function e(t){var r=0;var n=this.nodes();for(var a=0;a<n.length;a++){r+=n[a].degree(t)}return r}});var ol,sl;var ul=function e(t,r,n){for(var a=0;a<t.length;a++){var i=t[a];if(!i.locked()){var o=i._private.position;var s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};if(i.isParent()&&!(s.x===0&&s.y===0)){i.children().shift(s,n)}i.dirtyBoundingBoxCache()}}};var ll={field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"emitAndNotify",allowGetting:true,validKeys:["x","y"],beforeGet:function e(t){t.updateCompoundBounds()},beforeSet:function e(t,r){ul(t,r,false)},onSet:function e(t){t.dirtyCompoundBoundsCache()},canSet:function e(t){return!t.locked()}};ol=sl={position:yu.data(ll),silentPosition:yu.data(ue({},ll,{allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:false,beforeSet:function e(t,r){ul(t,r,true)},onSet:function e(t){t.dirtyCompoundBoundsCache()}})),positions:function e(t,r){if(M(t)){if(r){this.silentPosition(t)}else{this.position(t)}}else if(P(t)){var n=t;var a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i];var s=undefined;if(s=n(o,i)){if(r){o.silentPosition(s)}else{o.position(s)}}}a.endBatch()}return this},silentPositions:function e(t){return this.positions(t,true)},shift:function e(t,r,n){var a;if(M(t)){a={x:I(t.x)?t.x:0,y:I(t.y)?t.y:0};n=r}else if(D(t)&&I(r)){a={x:0,y:0};a[t]=r}if(a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this)){continue}var u=s.position();var l={x:u.x+a.x,y:u.y+a.y};if(n){s.silentPosition(l)}else{s.position(l)}}i.endBatch()}return this},silentShift:function e(t,r){if(M(t)){this.shift(t,true)}else if(D(t)&&I(r)){this.shift(t,r,true)}return this},renderedPosition:function e(t,r){var n=this[0];var a=this.cy();var i=a.zoom();var o=a.pan();var s=M(t)?t:undefined;var u=s!==undefined||r!==undefined&&D(t);if(n&&n.isNode()){if(u){for(var l=0;l<this.length;l++){var f=this[l];if(r!==undefined){f.position(t,(r-o[t])/i)}else if(s!==undefined){f.position(Pr(s,i,o))}}}else{var c=n.position();s=Dr(c,i,o);if(t===undefined){return s}else{return s[t]}}}else if(!u){return undefined}return this},relativePosition:function e(t,r){var n=this[0];var a=this.cy();var i=M(t)?t:undefined;var o=i!==undefined||r!==undefined&&D(t);var s=a.hasCompoundNodes();if(n&&n.isNode()){if(o){for(var u=0;u<this.length;u++){var l=this[u];var f=s?l.parent():null;var c=f&&f.length>0;var v=c;if(c){f=f[0]}var d=v?f.position():{x:0,y:0};if(r!==undefined){l.position(t,r+d[t])}else if(i!==undefined){l.position({x:i.x+d.x,y:i.y+d.y})}}}else{var h=n.position();var p=s?n.parent():null;var g=p&&p.length>0;var y=g;if(g){p=p[0]}var m=y?p.position():{x:0,y:0};i={x:h.x-m.x,y:h.y-m.y};if(t===undefined){return i}else{return i[t]}}}else if(!o){return undefined}return this}};ol.modelPosition=ol.point=ol.position;ol.modelPositions=ol.points=ol.positions;ol.renderedPoint=ol.renderedPosition;ol.relativePoint=ol.relativePosition;var fl=sl;var cl,vl;cl=vl={};vl.renderedBoundingBox=function(e){var t=this.boundingBox(e);var r=this.cy();var n=r.zoom();var a=r.pan();var i=t.x1*n+a.x;var o=t.x2*n+a.x;var s=t.y1*n+a.y;var u=t.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:u,w:o-i,h:u-s}};vl.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes()){return this}this.forEachUp(function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=false;r.bbCache=null;if(!e){t.emitAndNotify("bounds")}}});return this};vl.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes()){return this}if(!e&&t.batching()){return this}function r(e){if(!e.isParent()){return}var t=e._private;var r=e.children();var n=e.pstyle("compound-sizing-wrt-labels").value==="include";var a={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}};var i=r.boundingBox({includeLabels:n,includeOverlays:false,useCache:false});var o=t.position;if(i.w===0||i.h===0){i={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue};i.x1=o.x-i.w/2;i.x2=o.x+i.w/2;i.y1=o.y-i.h/2;i.y2=o.y+i.h/2}function s(e,t,r){var n=0;var a=0;var i=t+r;if(e>0&&i>0){n=t/i*e;a=r/i*e}return{biasDiff:n,biasComplementDiff:a}}function u(e,t,r,n){if(r.units==="%"){switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}else if(r.units==="px"){return r.pfValue}else{return 0}}var l=a.width.left.value;if(a.width.left.units==="px"&&a.width.val>0){l=l*100/a.width.val}var f=a.width.right.value;if(a.width.right.units==="px"&&a.width.val>0){f=f*100/a.width.val}var c=a.height.top.value;if(a.height.top.units==="px"&&a.height.val>0){c=c*100/a.height.val}var v=a.height.bottom.value;if(a.height.bottom.units==="px"&&a.height.val>0){v=v*100/a.height.val}var d=s(a.width.val-i.w,l,f);var h=d.biasDiff;var p=d.biasComplementDiff;var g=s(a.height.val-i.h,c,v);var y=g.biasDiff;var m=g.biasComplementDiff;t.autoPadding=u(i.w,i.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value);t.autoWidth=Math.max(i.w,a.width.val);o.x=(-h+i.x1+i.x2+p)/2;t.autoHeight=Math.max(i.h,a.height.val);o.y=(-y+i.y1+i.y2+m)/2}for(var n=0;n<this.length;n++){var a=this[n];var i=a._private;if(!i.compoundBoundsClean||e){r(a);if(!t.batching()){i.compoundBoundsClean=true}}}return this};var dl=function e(t){if(t===Infinity||t===-Infinity){return 0}return t};var hl=function e(t,r,n,a,i){if(a-r===0||i-n===0){return}if(r==null||n==null||a==null||i==null){return}t.x1=r<t.x1?r:t.x1;t.x2=a>t.x2?a:t.x2;t.y1=n<t.y1?n:t.y1;t.y2=i>t.y2?i:t.y2;t.w=t.x2-t.x1;t.h=t.y2-t.y1};var pl=function e(t,r){if(r==null){return t}return hl(t,r.x1,r.y1,r.x2,r.y2)};var gl=function e(t,r,n){return Ht(t,r,n)};var yl=function e(t,r,n){if(r.cy().headless()){return}var a=r._private;var i=a.rstyle;var o=i.arrowWidth/2;var s=r.pstyle(n+"-arrow-shape").value;var u;var l;if(s!=="none"){if(n==="source"){u=i.srcX;l=i.srcY}else if(n==="target"){u=i.tgtX;l=i.tgtY}else{u=i.midX;l=i.midY}var f=a.arrowBounds=a.arrowBounds||{};var c=f[n]=f[n]||{};c.x1=u-o;c.y1=l-o;c.x2=u+o;c.y2=l+o;c.w=c.x2-c.x1;c.h=c.y2-c.y1;$r(c,1);hl(t,c.x1,c.y1,c.x2,c.y2)}};var ml=function e(t,r,n){if(r.cy().headless()){return}var a;if(n){a=n+"-"}else{a=""}var i=r._private;var o=i.rstyle;var s=r.pstyle(a+"label").strValue;if(s){var u=r.pstyle("text-halign");var l=r.pstyle("text-valign");var f=gl(o,"labelWidth",n);var c=gl(o,"labelHeight",n);var v=gl(o,"labelX",n);var d=gl(o,"labelY",n);var h=r.pstyle(a+"text-margin-x").pfValue;var p=r.pstyle(a+"text-margin-y").pfValue;var g=r.isEdge();var y=r.pstyle(a+"text-rotation");var m=r.pstyle("text-outline-width").pfValue;var b=r.pstyle("text-border-width").pfValue;var x=b/2;var w=r.pstyle("text-background-padding").pfValue;var E=2;var k=c;var _=f;var T=_/2;var C=k/2;var S,D,P,A;if(g){S=v-T;D=v+T;P=d-C;A=d+C}else{switch(u.value){case"left":S=v-_;D=v;break;case"center":S=v-T;D=v+T;break;case"right":S=v;D=v+_;break}switch(l.value){case"top":P=d-k;A=d;break;case"center":P=d-C;A=d+C;break;case"bottom":P=d;A=d+k;break}}var M=h-Math.max(m,x)-w-E;var B=h+Math.max(m,x)+w+E;var I=p-Math.max(m,x)-w-E;var O=p+Math.max(m,x)+w+E;S+=M;D+=B;P+=I;A+=O;var R=n||"main";var N=i.labelBounds;var L=N[R]=N[R]||{};L.x1=S;L.y1=P;L.x2=D;L.y2=A;L.w=D-S;L.h=A-P;L.leftPad=M;L.rightPad=B;L.topPad=I;L.botPad=O;var z=g&&y.strValue==="autorotate";var j=y.pfValue!=null&&y.pfValue!==0;if(z||j){var V=z?gl(i.rstyle,"labelAngle",n):y.pfValue;var F=Math.cos(V);var G=Math.sin(V);var W=(S+D)/2;var q=(P+A)/2;if(!g){switch(u.value){case"left":W=D;break;case"right":W=S;break}switch(l.value){case"top":q=A;break;case"bottom":q=P;break}}var X=function e(t,r){t=t-W;r=r-q;return{x:t*F-r*G+W,y:t*G+r*F+q}};var Y=X(S,P);var U=X(S,A);var H=X(D,P);var K=X(D,A);S=Math.min(Y.x,U.x,H.x,K.x);D=Math.max(Y.x,U.x,H.x,K.x);P=Math.min(Y.y,U.y,H.y,K.y);A=Math.max(Y.y,U.y,H.y,K.y)}var Z=R+"Rot";var $=N[Z]=N[Z]||{};$.x1=S;$.y1=P;$.x2=D;$.y2=A;$.w=D-S;$.h=A-P;hl(t,S,P,D,A);hl(i.labelBounds.all,S,P,D,A)}return t};var bl=function e(t,r){if(r.cy().headless()){return}var n=r.pstyle("outline-opacity").value;var a=r.pstyle("outline-width").value;var i=r.pstyle("outline-offset").value;var o=a+i;xl(t,r,n,o,"outside",o/2)};var xl=function e(t,r,n,a,i,o){if(n===0||a<=0||i==="inside"){return}var s=r.cy();var u=r.pstyle("shape").value;var l=s.renderer().nodeShapes[u];var f=r.position(),c=f.x,v=f.y;var d=r.width();var h=r.height();if(l.hasMiterBounds){if(i==="center"){a/=2}var p=l.miterBounds(c,v,d,h,a);pl(t,p)}else if(o!=null&&o>0){Qr(t,[o,o,o,o])}};var wl=function e(t,r){if(r.cy().headless()){return}var n=r.pstyle("border-opacity").value;var a=r.pstyle("border-width").pfValue;var i=r.pstyle("border-position").value;xl(t,r,n,a,i)};var El=function e(t,r){var n=t._private.cy;var a=n.styleEnabled();var i=n.headless();var o=Yr();var s=t._private;var u=t.isNode();var l=t.isEdge();var f,c,v,d;var h,p;var g=s.rstyle;var y=u&&a?t.pstyle("bounds-expansion").pfValue:[0];var m=function e(t){return t.pstyle("display").value!=="none"};var b=!a||m(t)&&(!l||m(t.source())&&m(t.target()));if(b){var x=0;var w=0;if(a&&r.includeOverlays){x=t.pstyle("overlay-opacity").value;if(x!==0){w=t.pstyle("overlay-padding").value}}var E=0;var k=0;if(a&&r.includeUnderlays){E=t.pstyle("underlay-opacity").value;if(E!==0){k=t.pstyle("underlay-padding").value}}var _=Math.max(w,k);var T=0;var C=0;if(a){T=t.pstyle("width").pfValue;C=T/2}if(u&&r.includeNodes){var S=t.position();h=S.x;p=S.y;var D=t.outerWidth();var P=D/2;var A=t.outerHeight();var M=A/2;f=h-P;c=h+P;v=p-M;d=p+M;hl(o,f,v,c,d);if(a){bl(o,t)}if(a&&r.includeOutlines&&!i){bl(o,t)}if(a){wl(o,t)}}else if(l&&r.includeEdges){if(a&&!i){var B=t.pstyle("curve-style").strValue;f=Math.min(g.srcX,g.midX,g.tgtX);c=Math.max(g.srcX,g.midX,g.tgtX);v=Math.min(g.srcY,g.midY,g.tgtY);d=Math.max(g.srcY,g.midY,g.tgtY);f-=C;c+=C;v-=C;d+=C;hl(o,f,v,c,d);if(B==="haystack"){var I=g.haystackPts;if(I&&I.length===2){f=I[0].x;v=I[0].y;c=I[1].x;d=I[1].y;if(f>c){var O=f;f=c;c=O}if(v>d){var R=v;v=d;d=R}hl(o,f-C,v-C,c+C,d+C)}}else if(B==="bezier"||B==="unbundled-bezier"||Q(B,"segments")||Q(B,"taxi")){var N;switch(B){case"bezier":case"unbundled-bezier":N=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":N=g.linePts;break}if(N!=null){for(var L=0;L<N.length;L++){var z=N[L];f=z.x-C;c=z.x+C;v=z.y-C;d=z.y+C;hl(o,f,v,c,d)}}}}else{var j=t.source();var V=j.position();var F=t.target();var G=F.position();f=V.x;c=G.x;v=V.y;d=G.y;if(f>c){var W=f;f=c;c=W}if(v>d){var q=v;v=d;d=q}f-=C;c+=C;v-=C;d+=C;hl(o,f,v,c,d)}}if(a&&r.includeEdges&&l){yl(o,t,"mid-source");yl(o,t,"mid-target");yl(o,t,"source");yl(o,t,"target")}if(a){var X=t.pstyle("ghost").value==="yes";if(X){var Y=t.pstyle("ghost-offset-x").pfValue;var U=t.pstyle("ghost-offset-y").pfValue;hl(o,o.x1+Y,o.y1+U,o.x2+Y,o.y2+U)}}var H=s.bodyBounds=s.bodyBounds||{};Jr(H,o);Qr(H,y);$r(H,1);if(a){f=o.x1;c=o.x2;v=o.y1;d=o.y2;hl(o,f-_,v-_,c+_,d+_)}var K=s.overlayBounds=s.overlayBounds||{};Jr(K,o);Qr(K,y);$r(K,1);var Z=s.labelBounds=s.labelBounds||{};if(Z.all!=null){Hr(Z.all)}else{Z.all=Yr()}if(a&&r.includeLabels){if(r.includeMainLabels){ml(o,t,null)}if(l){if(r.includeSourceLabels){ml(o,t,"source")}if(r.includeTargetLabels){ml(o,t,"target")}}}}o.x1=dl(o.x1);o.y1=dl(o.y1);o.x2=dl(o.x2);o.y2=dl(o.y2);o.w=dl(o.x2-o.x1);o.h=dl(o.y2-o.y1);if(o.w>0&&o.h>0&&b){Qr(o,y);$r(o,1)}return o};var kl=function e(t){var r=0;var n=function e(t){return(t?1:0)<<r++};var a=0;a+=n(t.incudeNodes);a+=n(t.includeEdges);a+=n(t.includeLabels);a+=n(t.includeMainLabels);a+=n(t.includeSourceLabels);a+=n(t.includeTargetLabels);a+=n(t.includeOverlays);a+=n(t.includeOutlines);return a};var _l=function e(t){var r=function e(t){return Math.round(t)};if(t.isEdge()){var n=t.source().position();var a=t.target().position();return kt([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=t.position();return kt([r(i.x),r(i.y)])}};var Tl=function e(t,r){var n=t._private;var a;var i=t.isEdge();var o=r==null?Sl:kl(r);var s=o===Sl;if(n.bbCache==null){a=El(t,Cl);n.bbCache=a;n.bbCachePosKey=_l(t)}else{a=n.bbCache}if(!s){var u=t.isNode();a=Yr();if(r.includeNodes&&u||r.includeEdges&&!u){if(r.includeOverlays){pl(a,n.overlayBounds)}else{pl(a,n.bodyBounds)}}if(r.includeLabels){if(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)){pl(a,n.labelBounds.all)}else{if(r.includeMainLabels){pl(a,n.labelBounds.mainRot)}if(r.includeSourceLabels){pl(a,n.labelBounds.sourceRot)}if(r.includeTargetLabels){pl(a,n.labelBounds.targetRot)}}}a.w=a.x2-a.x1;a.h=a.y2-a.y1}return a};var Cl={includeNodes:true,includeEdges:true,includeLabels:true,includeMainLabels:true,includeSourceLabels:true,includeTargetLabels:true,includeOverlays:true,includeUnderlays:true,includeOutlines:true,useCache:true};var Sl=kl(Cl);var Dl=qt(Cl);vl.boundingBox=function(e){var t;var r=e===undefined||e.useCache===undefined||e.useCache===true;var n=U(function(e){var t=e._private;return t.bbCache==null||t.styleDirty||t.bbCachePosKey!==_l(e)},function(e){return e.id()});if(r&&this.length===1&&!n(this[0])){if(e===undefined){e=Cl}else{e=Dl(e)}t=Tl(this[0],e)}else{t=Yr();e=e||Cl;var a=Dl(e);var i=this;var o=i.cy();var s=o.styleEnabled();this.edges().forEach(n);this.nodes().forEach(n);if(s){this.recalculateRenderedStyle(r)}this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var l=i[u];if(n(l)){l.dirtyBoundingBoxCache()}pl(t,Tl(l,a))}}t.x1=dl(t.x1);t.y1=dl(t.y1);t.x2=dl(t.x2);t.y2=dl(t.y2);t.w=dl(t.x2-t.x1);t.h=dl(t.y2-t.y1);return t};vl.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null;t.bbCachePosKey=null;t.bodyBounds=null;t.overlayBounds=null;t.labelBounds.all=null;t.labelBounds.source=null;t.labelBounds.target=null;t.labelBounds.main=null;t.labelBounds.sourceRot=null;t.labelBounds.targetRot=null;t.labelBounds.mainRot=null;t.arrowBounds.source=null;t.arrowBounds.target=null;t.arrowBounds["mid-source"]=null;t.arrowBounds["mid-target"]=null}this.emitAndNotify("bounds");return this};vl.boundingBoxAt=function(e){var t=this.nodes();var r=this.cy();var n=r.hasCompoundNodes();var a=r.collection();if(n){a=t.filter(function(e){return e.isParent()});t=t.not(a)}if(M(e)){var i=e;e=function e(){return i}}var o=function t(r,n){return r._private.bbAtOldPos=e(r,n)};var s=function e(t){return t._private.bbAtOldPos};r.startBatch();t.forEach(o).silentPositions(e);if(n){a.dirtyCompoundBoundsCache();a.dirtyBoundingBoxCache();a.updateCompoundBounds(true)}var u=Ur(this.boundingBox({useCache:false}));t.silentPositions(s);if(n){a.dirtyCompoundBoundsCache();a.dirtyBoundingBoxCache();a.updateCompoundBounds(true)}r.endBatch();return u};cl.boundingbox=cl.bb=cl.boundingBox;cl.renderedBoundingbox=cl.renderedBoundingBox;var Pl=vl;var Al,Ml;Al=Ml={};var Bl=function e(t){t.uppercaseName=$(t.name);t.autoName="auto"+t.uppercaseName;t.labelName="label"+t.uppercaseName;t.outerName="outer"+t.uppercaseName;t.uppercaseOuterName=$(t.outerName);Al[t.name]=function e(){var r=this[0];var n=r._private;var a=n.cy;var i=a._private.styleEnabled;if(r){if(i){if(r.isParent()){r.updateCompoundBounds();return n[t.autoName]||0}var o=r.pstyle(t.name);switch(o.strValue){case"label":r.recalculateRenderedStyle();return n.rstyle[t.labelName]||0;default:return o.pfValue}}else{return 1}}};Al["outer"+t.uppercaseName]=function e(){var r=this[0];var n=r._private;var a=n.cy;var i=a._private.styleEnabled;if(r){if(i){var o=r[t.name]();var s=r.pstyle("border-position").value;var u;if(s==="center"){u=r.pstyle("border-width").pfValue}else if(s==="outside"){u=2*r.pstyle("border-width").pfValue}else{u=0}var l=2*r.padding();return o+u+l}else{return 1}}};Al["rendered"+t.uppercaseName]=function e(){var r=this[0];if(r){var n=r[t.name]();return n*this.cy().zoom()}};Al["rendered"+t.uppercaseOuterName]=function e(){var r=this[0];if(r){var n=r[t.outerName]();return n*this.cy().zoom()}}};Bl({name:"width"});Bl({name:"height"});Ml.padding=function(){var e=this[0];var t=e._private;if(e.isParent()){e.updateCompoundBounds();if(t.autoPadding!==undefined){return t.autoPadding}else{return e.pstyle("padding").pfValue}}else{return e.pstyle("padding").pfValue}};Ml.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};Ml.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Il=Ml;var Ol=function e(t,r){if(t.isEdge()&&t.takesUpSpace()){return r(t)}};var Rl=function e(t,r){if(t.isEdge()&&t.takesUpSpace()){var n=t.cy();return Dr(r(t),n.zoom(),n.pan())}};var Nl=function e(t,r){if(t.isEdge()&&t.takesUpSpace()){var n=t.cy();var a=n.pan();var i=n.zoom();return r(t).map(function(e){return Dr(e,i,a)})}};var Ll=function e(t){return t.renderer().getControlPoints(t)};var zl=function e(t){return t.renderer().getSegmentPoints(t)};var jl=function e(t){return t.renderer().getSourceEndpoint(t)};var Vl=function e(t){return t.renderer().getTargetEndpoint(t)};var Fl=function e(t){return t.renderer().getEdgeMidpoint(t)};var Gl={controlPoints:{get:Ll,mult:true},segmentPoints:{get:zl,mult:true},sourceEndpoint:{get:jl},targetEndpoint:{get:Vl},midpoint:{get:Fl}};var Wl=function e(t){return"rendered"+t[0].toUpperCase()+t.substr(1)};var ql=Object.keys(Gl).reduce(function(e,t){var r=Gl[t];var n=Wl(t);e[t]=function(){return Ol(this,r.get)};if(r.mult){e[n]=function(){return Nl(this,r.get)}}else{e[n]=function(){return Rl(this,r.get)}}return e},{});var Xl=ue({},fl,Pl,Il,ql);
/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Yl=function e(t,r){this.recycle(t,r)};function Ul(){return false}function Hl(){return true}Yl.prototype={instanceString:function e(){return"event"},recycle:function e(t,r){this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ul;if(t!=null&&t.preventDefault){this.type=t.type;this.isDefaultPrevented=t.defaultPrevented?Hl:Ul}else if(t!=null&&t.type){r=t}else{this.type=t}if(r!=null){this.originalEvent=r.originalEvent;this.type=r.type!=null?r.type:this.type;this.cy=r.cy;this.target=r.target;this.position=r.position;this.renderedPosition=r.renderedPosition;this.namespace=r.namespace;this.layout=r.layout}if(this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position;var a=this.cy.zoom();var i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function e(){this.isDefaultPrevented=Hl;var t=this.originalEvent;if(!t){return}if(t.preventDefault){t.preventDefault()}},stopPropagation:function e(){this.isPropagationStopped=Hl;var t=this.originalEvent;if(!t){return}if(t.stopPropagation){t.stopPropagation()}},stopImmediatePropagation:function e(){this.isImmediatePropagationStopped=Hl;this.stopPropagation()},isDefaultPrevented:Ul,isPropagationStopped:Ul,isImmediatePropagationStopped:Ul};var Kl=/^([^.]+)(\.(?:[^.]+))?$/;var Zl=".*";var $l={qualifierCompare:function e(t,r){return t===r},eventMatches:function e(){return true},addEventFields:function e(){},callbackContext:function e(t){return t},beforeEmit:function e(){},afterEmit:function e(){},bubble:function e(){return false},parent:function e(){return null},context:null};var Ql=Object.keys($l);var Jl={};function ef(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Jl;var t=arguments.length>1?arguments[1]:undefined;for(var r=0;r<Ql.length;r++){var n=Ql[r];this[n]=e[n]||$l[n]}this.context=t||this.context;this.listeners=[];this.emitting=0}var tf=ef.prototype;var rf=function e(t,r,n,a,i,o,s){if(P(a)){i=a;a=null}if(s){if(o==null){o=s}else{o=ue({},o,s)}}var u=A(n)?n:n.split(/\s+/);for(var l=0;l<u.length;l++){var f=u[l];if(G(f)){continue}var c=f.match(Kl);if(c){var v=c[1];var d=c[2]?c[2]:null;var h=r(t,f,v,d,a,i,o);if(h===false){break}}}};var nf=function e(t,r){t.addEventFields(t.context,r);return new Yl(r.type,r)};var af=function e(t,r,n){if(F(n)){r(t,n);return}else if(M(n)){r(t,nf(t,n));return}var a=A(n)?n:n.split(/\s+/);for(var i=0;i<a.length;i++){var o=a[i];if(G(o)){continue}var s=o.match(Kl);if(s){var u=s[1];var l=s[2]?s[2]:null;var f=nf(t,{type:u,namespace:l,target:t.context});r(t,f)}}};tf.on=tf.addListener=function(e,t,r,n,a){rf(this,function(e,t,r,n,a,i,o){if(P(i)){e.listeners.push({event:t,callback:i,type:r,namespace:n,qualifier:a,conf:o})}},e,t,r,n,a);return this};tf.one=function(e,t,r,n){return this.on(e,t,r,n,{one:true})};tf.removeListener=tf.off=function(e,t,r,n){var a=this;if(this.emitting!==0){this.listeners=Vt(this.listeners)}var i=this.listeners;var o=function o(s){var u=i[s];rf(a,function(t,r,n,a,o,l){if((u.type===n||e==="*")&&(!a&&u.namespace!==".*"||u.namespace===a)&&(!o||t.qualifierCompare(u.qualifier,o))&&(!l||u.callback===l)){i.splice(s,1);return false}},e,t,r,n)};for(var s=i.length-1;s>=0;s--){o(s)}return this};tf.removeAllListeners=function(){return this.removeListener("*")};tf.emit=tf.trigger=function(e,t,r){var n=this.listeners;var a=n.length;this.emitting++;if(!A(t)){t=[t]}af(this,function(e,i){if(r!=null){n=[{event:i.event,type:i.type,namespace:i.namespace,callback:r}];a=n.length}var o=function r(){var a=n[s];if(a.type===i.type&&(!a.namespace||a.namespace===i.namespace||a.namespace===Zl)&&e.eventMatches(e.context,a,i)){var o=[i];if(t!=null){Ut(o,t)}e.beforeEmit(e.context,a,i);if(a.conf&&a.conf.one){e.listeners=e.listeners.filter(function(e){return e!==a})}var u=e.callbackContext(e.context,a,i);var l=a.callback.apply(u,o);e.afterEmit(e.context,a,i);if(l===false){i.stopPropagation();i.preventDefault()}}};for(var s=0;s<a;s++){o()}if(e.bubble(e.context)&&!i.isPropagationStopped()){e.parent(e.context).emit(i,t)}},e);this.emitting--;return this};var of={qualifierCompare:function e(t,r){if(t==null||r==null){return t==null&&r==null}else{return t.sameText(r)}},eventMatches:function e(t,r,n){var a=r.qualifier;if(a!=null){return t!==n.target&&L(n.target)&&a.matches(n.target)}return true},addEventFields:function e(t,r){r.cy=t.cy();r.target=t},callbackContext:function e(t,r,n){return r.qualifier!=null?n.target:t},beforeEmit:function e(t,r){if(r.conf&&r.conf.once){r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)}},bubble:function e(){return true},parent:function e(t){return t.isChild()?t.parent():t.cy()}};var sf=function e(t){if(D(t)){return new Xu(t)}else{return t}};var uf={createEmitter:function e(){for(var t=0;t<this.length;t++){var r=this[t];var n=r._private;if(!n.emitter){n.emitter=new ef(of,r)}}return this},emitter:function e(){return this._private.emitter},on:function e(t,r,n){var a=sf(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().on(t,a,n)}return this},removeListener:function e(t,r,n){var a=sf(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(t,a,n)}return this},removeAllListeners:function e(){for(var t=0;t<this.length;t++){var r=this[t];r.emitter().removeAllListeners()}return this},one:function e(t,r,n){var a=sf(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().one(t,a,n)}return this},once:function e(t,r,n){var a=sf(r);for(var i=0;i<this.length;i++){var o=this[i];o.emitter().on(t,a,n,{once:true,onceCollection:this})}},emit:function e(t,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(t,r)}return this},emitAndNotify:function e(t,r){if(this.length===0){return}this.cy().notify(t,this);this.emit(t,r);return this}};yu.eventAliasesOn(uf);var lf={nodes:function e(t){return this.filter(function(e){return e.isNode()}).filter(t)},edges:function e(t){return this.filter(function(e){return e.isEdge()}).filter(t)},byGroup:function e(){var t=this.spawn();var r=this.spawn();for(var n=0;n<this.length;n++){var a=this[n];if(a.isNode()){t.push(a)}else{r.push(a)}}return{nodes:t,edges:r}},filter:function e(t,r){if(t===undefined){return this}else if(D(t)||N(t)){return new Xu(t).filter(this)}else if(P(t)){var n=this.spawn();var a=this;for(var i=0;i<a.length;i++){var o=a[i];var s=r?t.apply(r,[o,i,a]):t(o,i,a);if(s){n.push(o)}}return n}return this.spawn()},not:function e(t){if(!t){return this}else{if(D(t)){t=this.filter(t)}var r=this.spawn();for(var n=0;n<this.length;n++){var a=this[n];var i=t.has(a);if(!i){r.push(a)}}return r}},absoluteComplement:function e(){var t=this.cy();return t.mutableElements().not(this)},intersect:function e(t){if(D(t)){var r=t;return this.filter(r)}var n=this.spawn();var a=this;var i=t;var o=this.length<t.length;var s=o?a:i;var u=o?i:a;for(var l=0;l<s.length;l++){var f=s[l];if(u.has(f)){n.push(f)}}return n},xor:function e(t){var r=this._private.cy;if(D(t)){t=r.$(t)}var n=this.spawn();var a=this;var i=t;var o=function e(t,r){for(var a=0;a<t.length;a++){var i=t[a];var o=i._private.data.id;var s=r.hasElementWithId(o);if(!s){n.push(i)}}};o(a,i);o(i,a);return n},diff:function e(t){var r=this._private.cy;if(D(t)){t=r.$(t)}var n=this.spawn();var a=this.spawn();var i=this.spawn();var o=this;var s=t;var u=function e(t,r,n){for(var a=0;a<t.length;a++){var o=t[a];var s=o._private.data.id;var u=r.hasElementWithId(s);if(u){i.merge(o)}else{n.push(o)}}};u(o,s,n);u(s,o,a);return{left:n,right:a,both:i}},add:function e(t){var r=this._private.cy;if(!t){return this}if(D(t)){var n=t;t=r.mutableElements().filter(n)}var a=this.spawnSelf();for(var i=0;i<t.length;i++){var o=t[i];var e=!this.has(o);if(e){a.push(o)}}return a},merge:function e(t){var r=this._private;var n=r.cy;if(!t){return this}if(t&&D(t)){var a=t;t=n.mutableElements().filter(a)}var i=r.map;for(var o=0;o<t.length;o++){var s=t[o];var u=s._private.data.id;var l=!i.has(u);if(l){var f=this.length++;this[f]=s;i.set(u,{ele:s,index:f})}}return this},unmergeAt:function e(t){var r=this[t];var n=r.id();var a=this._private;var i=a.map;this[t]=undefined;i["delete"](n);var o=t===this.length-1;if(this.length>1&&!o){var s=this.length-1;var u=this[s];var l=u._private.data.id;this[s]=undefined;this[t]=u;i.set(l,{ele:u,index:t})}this.length--;return this},unmergeOne:function e(t){t=t[0];var r=this._private;var n=t._private.data.id;var a=r.map;var i=a.get(n);if(!i){return this}var o=i.index;this.unmergeAt(o);return this},unmerge:function e(t){var r=this._private.cy;if(!t){return this}if(t&&D(t)){var n=t;t=r.mutableElements().filter(n)}for(var a=0;a<t.length;a++){this.unmergeOne(t[a])}return this},unmergeBy:function e(t){for(var r=this.length-1;r>=0;r--){var n=this[r];if(t(n)){this.unmergeAt(r)}}return this},map:function e(t,r){var n=[];var a=this;for(var i=0;i<a.length;i++){var o=a[i];var s=r?t.apply(r,[o,i,a]):t(o,i,a);n.push(s)}return n},reduce:function e(t,r){var n=r;var a=this;for(var i=0;i<a.length;i++){n=t(n,a[i],i,a)}return n},max:function e(t,r){var e=-Infinity;var n;var a=this;for(var i=0;i<a.length;i++){var o=a[i];var s=r?t.apply(r,[o,i,a]):t(o,i,a);if(s>e){e=s;n=o}}return{value:e,ele:n}},min:function e(t,r){var e=Infinity;var n;var a=this;for(var i=0;i<a.length;i++){var o=a[i];var s=r?t.apply(r,[o,i,a]):t(o,i,a);if(s<e){e=s;n=o}}return{value:e,ele:n}}};var ff=lf;ff["u"]=ff["|"]=ff["+"]=ff.union=ff.or=ff.add;ff["\\"]=ff["!"]=ff["-"]=ff.difference=ff.relativeComplement=ff.subtract=ff.not;ff["n"]=ff["&"]=ff["."]=ff.and=ff.intersection=ff.intersect;ff["^"]=ff["(+)"]=ff["(-)"]=ff.symmetricDifference=ff.symdiff=ff.xor;ff.fnFilter=ff.filterFn=ff.stdFilter=ff.filter;ff.complement=ff.abscomp=ff.absoluteComplement;var cf={isNode:function e(){return this.group()==="nodes"},isEdge:function e(){return this.group()==="edges"},isLoop:function e(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function e(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function e(){var t=this[0];if(t){return t._private.group}}};var vf=function e(t,r){var n=t.cy();var a=n.hasCompoundNodes();function i(e){var t=e.pstyle("z-compound-depth");if(t.value==="auto"){return a?e.zDepth():0}else if(t.value==="bottom"){return-1}else if(t.value==="top"){return At}return 0}var o=i(t)-i(r);if(o!==0){return o}function s(e){var t=e.pstyle("z-index-compare");if(t.value==="auto"){return e.isNode()?1:0}return 0}var u=s(t)-s(r);if(u!==0){return u}var l=t.pstyle("z-index").value-r.pstyle("z-index").value;if(l!==0){return l}return t.poolIndex()-r.poolIndex()};var df={forEach:function e(t,r){if(P(t)){var n=this.length;for(var a=0;a<n;a++){var i=this[a];var o=r?t.apply(r,[i,a,this]):t(i,a,this);if(o===false){break}}}return this},toArray:function e(){var t=[];for(var r=0;r<this.length;r++){t.push(this[r])}return t},slice:function e(t,r){var n=[];var a=this.length;if(r==null){r=a}if(t==null){t=0}if(t<0){t=a+t}if(r<0){r=a+r}for(var i=t;i>=0&&i<r&&i<a;i++){n.push(this[i])}return this.spawn(n)},size:function e(){return this.length},eq:function e(t){return this[t]||this.spawn()},first:function e(){return this[0]||this.spawn()},last:function e(){return this[this.length-1]||this.spawn()},empty:function e(){return this.length===0},nonempty:function e(){return!this.empty()},sort:function e(t){if(!P(t)){return this}var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function e(){return this.sort(vf)},zDepth:function e(){var t=this[0];if(!t){return undefined}var r=t._private;var n=r.group;if(n==="nodes"){var a=r.data.parent?t.parents().size():0;if(!t.isParent()){return At-1}return a}else{var i=r.source;var o=r.target;var s=i.zDepth();var u=o.zDepth();return Math.max(s,u,0)}}};df.each=df.forEach;var hf=function e(){var t="undefined";var r=(typeof Symbol==="undefined"?"undefined":b(Symbol))!=t&&b(Symbol.iterator)!=t;if(r){df[Symbol.iterator]=function(){var e=this;var t={value:undefined,done:false};var r=0;var n=this.length;return f({next:function a(){if(r<n){t.value=e[r++]}else{t.value=undefined;t.done=true}return t}},Symbol.iterator,function(){return this})}}};hf();var pf=qt({nodeDimensionsIncludeLabels:false});var gf={layoutDimensions:function e(t){t=pf(t);var r;if(!this.takesUpSpace()){r={w:0,h:0}}else if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else{r={w:this.outerWidth(),h:this.outerHeight()}}if(r.w===0||r.h===0){r.w=r.h=1}return r},layoutPositions:function e(t,r,n){var a=this.nodes().filter(function(e){return!e.isParent()});var i=this.cy();var o=r.eles;var s=function e(t){return t.id()};var u=U(n,s);t.emit({type:"layoutstart",layout:t});t.animations=[];var l=function e(t,r,n){var a={x:r.x1+r.w/2,y:r.y1+r.h/2};var i={x:(n.x-a.x)*t,y:(n.y-a.y)*t};return{x:a.x+i.x,y:a.y+i.y}};var f=r.spacingFactor&&r.spacingFactor!==1;var c=function e(){if(!f){return null}var t=Yr();for(var r=0;r<a.length;r++){var n=a[r];var i=u(n,r);Zr(t,i.x,i.y)}return t};var v=c();var d=U(function(e,t){var n=u(e,t);if(f){var a=Math.abs(r.spacingFactor);n=l(a,v,n)}if(r.transform!=null){n=r.transform(e,n)}return n},s);if(r.animate){for(var h=0;h<a.length;h++){var p=a[h];var g=d(p,h);var y=r.animateFilter==null||r.animateFilter(p,h);if(y){var m=p.animation({position:g,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(m)}else{p.position(g)}}if(r.fit){var b=i.animation({fit:{boundingBox:o.boundingBoxAt(d),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(b)}else if(r.zoom!==undefined&&r.pan!==undefined){var x=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(x)}t.animations.forEach(function(e){return e.play()});t.one("layoutready",r.ready);t.emit({type:"layoutready",layout:t});di.all(t.animations.map(function(e){return e.promise()})).then(function(){t.one("layoutstop",r.stop);t.emit({type:"layoutstop",layout:t})})}else{a.positions(d);if(r.fit){i.fit(r.eles,r.padding)}if(r.zoom!=null){i.zoom(r.zoom)}if(r.pan){i.pan(r.pan)}t.one("layoutready",r.ready);t.emit({type:"layoutready",layout:t});t.one("layoutstop",r.stop);t.emit({type:"layoutstop",layout:t})}return this},layout:function e(t){var r=this.cy();return r.makeLayout(ue({},t,{eles:this}))}};gf.createLayout=gf.makeLayout=gf.layout;function yf(e,t,r){var n=r._private;var a=n.styleCache=n.styleCache||[];var i;if((i=a[e])!=null){return i}else{i=a[e]=t(r);return i}}function mf(e,t){e=_t(e);return function r(n){return yf(e,t,n)}}function bf(e,t){e=_t(e);var r=function e(r){return t.call(r)};return function t(){var n=this[0];if(n){return yf(e,r,n)}}}var xf={recalculateRenderedStyle:function e(t){var r=this.cy();var n=r.renderer();var a=r.styleEnabled();if(n&&a){n.recalculateRenderedStyle(this,t)}return this},dirtyStyleCache:function e(){var t=this.cy();var r=function e(t){return t._private.styleCache=null};if(t.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents());n.merge(n.connectedEdges());n.forEach(r)}else{this.forEach(function(e){r(e);e.connectedEdges().forEach(r)})}return this},updateStyle:function e(t){var r=this._private.cy;if(!r.styleEnabled()){return this}if(r.batching()){var n=r._private.batchStyleEles;n.merge(this);return this}var a=r.hasCompoundNodes();var i=this;t=t||t===undefined?true:false;if(a){i=this.spawnSelf().merge(this.descendants()).merge(this.parents())}var o=i;if(t){o.emitAndNotify("style")}else{o.emit("style")}i.forEach(function(e){return e._private.styleDirty=true});return this},cleanStyle:function e(){var t=this.cy();if(!t.styleEnabled()){return}for(var r=0;r<this.length;r++){var n=this[r];if(n._private.styleDirty){n._private.styleDirty=false;t.style().apply(n)}}},parsedStyle:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=this[0];var a=n.cy();if(!a.styleEnabled()){return}if(n){if(n._private.styleDirty){n._private.styleDirty=false;a.style().apply(n)}var i=n._private.style[t];if(i!=null){return i}else if(r){return a.style().getDefaultProperty(t)}else{return null}}},numericStyle:function e(t){var r=this[0];if(!r.cy().styleEnabled()){return}if(r){var n=r.pstyle(t);return n.pfValue!==undefined?n.pfValue:n.value}},numericStyleUnits:function e(t){var r=this[0];if(!r.cy().styleEnabled()){return}if(r){return r.pstyle(t).units}},renderedStyle:function e(t){var r=this.cy();if(!r.styleEnabled()){return this}var n=this[0];if(n){return r.style().getRenderedStyle(n,t)}},style:function e(t,r){var n=this.cy();if(!n.styleEnabled()){return this}var a=false;var e=n.style();if(M(t)){var i=t;e.applyBypass(this,i,a);this.emitAndNotify("style")}else if(D(t)){if(r===undefined){var o=this[0];if(o){return e.getStylePropertyValue(o,t)}else{return}}else{e.applyBypass(this,t,r,a);this.emitAndNotify("style")}}else if(t===undefined){var s=this[0];if(s){return e.getRawStyle(s)}else{return}}return this},removeStyle:function e(t){var r=this.cy();if(!r.styleEnabled()){return this}var n=false;var a=r.style();var i=this;if(t===undefined){for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}}else{t=t.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,t,n)}}this.emitAndNotify("style");return this},show:function e(){this.css("display","element");return this},hide:function e(){this.css("display","none");return this},effectiveOpacity:function e(){var t=this.cy();if(!t.styleEnabled()){return 1}var r=t.hasCompoundNodes();var n=this[0];if(n){var a=n._private;var i=n.pstyle("opacity").value;if(!r){return i}var o=!a.data.parent?null:n.parents();if(o){for(var s=0;s<o.length;s++){var u=o[s];var l=u.pstyle("opacity").value;i=l*i}}return i}},transparent:function e(){var t=this.cy();if(!t.styleEnabled()){return false}var r=this[0];var n=r.cy().hasCompoundNodes();if(r){if(!n){return r.pstyle("opacity").value===0}else{return r.effectiveOpacity()===0}}},backgrounding:function e(){var t=this.cy();if(!t.styleEnabled()){return false}var r=this[0];return r._private.backgrounding?true:false}};function wf(e,t){var r=e._private;var n=r.data.parent?e.parents():null;if(n){for(var a=0;a<n.length;a++){var i=n[a];if(!t(i)){return false}}}return true}function Ef(e){var t=e.ok;var r=e.edgeOkViaNode||e.ok;var n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled()){return true}var a=this[0];var i=e.hasCompoundNodes();if(a){var o=a._private;if(!t(a)){return false}if(a.isNode()){return!i||wf(a,n)}else{var s=o.source;var u=o.target;return r(s)&&(!i||wf(s,r))&&(s===u||r(u)&&(!i||wf(u,r)))}}}}var kf=mf("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:true)});xf.takesUpSpace=bf("takesUpSpace",Ef({ok:kf}));var _f=mf("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&kf(e)});var Tf=mf("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&kf(e)});xf.interactive=bf("interactive",Ef({ok:_f,parentOk:Tf,edgeOkViaNode:kf}));xf.noninteractive=function(){var e=this[0];if(e){return!e.interactive()}};var Cf=mf("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&kf(e)});var Sf=kf;xf.visible=bf("visible",Ef({ok:Cf,edgeOkViaNode:Sf}));xf.hidden=function(){var e=this[0];if(e){return!e.visible()}};xf.isBundledBezier=bf("isBundledBezier",function(){if(!this.cy().styleEnabled()){return false}return!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace()});xf.bypass=xf.css=xf.style;xf.renderedCss=xf.renderedStyle;xf.removeBypass=xf.removeCss=xf.removeStyle;xf.pstyle=xf.parsedStyle;var Df={};function Pf(e){return function(){var t=arguments;var r=[];if(t.length===2){var n=t[0];var a=t[1];this.on(e.event,n,a)}else if(t.length===1&&P(t[0])){var i=t[0];this.on(e.event,i)}else if(t.length===0||t.length===1&&A(t[0])){var o=t.length===1?t[0]:null;for(var s=0;s<this.length;s++){var u=this[s];var l=!e.ableField||u._private[e.ableField];var f=u._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(u);if(c!==undefined){l=c;if(!c){return this}}}if(l){u._private[e.field]=e.value;if(f){r.push(u)}}}var v=this.spawn(r);v.updateStyle();v.emit(e.event);if(o){v.emit(o)}}return this}}function Af(e){Df[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(r!==undefined){return r}}return t._private[e.field]}};Df[e.on]=Pf({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:true});Df[e.off]=Pf({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:false})}Af({field:"locked",overrideField:function e(t){return t.cy().autolock()?true:undefined},on:"lock",off:"unlock"});Af({field:"grabbable",overrideField:function e(t){return t.cy().autoungrabify()||t.pannable()?false:undefined},on:"grabify",off:"ungrabify"});Af({field:"selected",ableField:"selectable",overrideAble:function e(t){return t.cy().autounselectify()?false:undefined},on:"select",off:"unselect"});Af({field:"selectable",overrideField:function e(t){return t.cy().autounselectify()?false:undefined},on:"selectify",off:"unselectify"});Df.deselect=Df.unselect;Df.grabbed=function(){var e=this[0];if(e){return e._private.grabbed}};Af({field:"active",on:"activate",off:"unactivate"});Af({field:"pannable",on:"panify",off:"unpanify"});Df.inactive=function(){var e=this[0];if(e){return!e._private.active}};var Mf={};var Bf=function e(t){return function e(r){var n=this;var a=[];for(var i=0;i<n.length;i++){var o=n[i];if(!o.isNode()){continue}var s=false;var u=o.connectedEdges();for(var l=0;l<u.length;l++){var f=u[l];var c=f.source();var v=f.target();if(t.noIncomingEdges&&v===o&&c!==o||t.noOutgoingEdges&&c===o&&v!==o){s=true;break}}if(!s){a.push(o)}}return this.spawn(a,true).filter(r)}};var If=function e(t){return function(e){var r=this;var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.isNode()){continue}var o=i.connectedEdges();for(var s=0;s<o.length;s++){var u=o[s];var l=u.source();var f=u.target();if(t.outgoing&&l===i){n.push(u);n.push(f)}else if(t.incoming&&f===i){n.push(u);n.push(l)}}}return this.spawn(n,true).filter(e)}};var Of=function e(t){return function(e){var r=this;var n=[];var a={};for(;;){var i=t.outgoing?r.outgoers():r.incomers();if(i.length===0){break}var o=false;for(var s=0;s<i.length;s++){var u=i[s];var l=u.id();if(!a[l]){a[l]=true;n.push(u);o=true}}if(!o){break}r=i}return this.spawn(n,true).filter(e)}};Mf.clearTraversalCache=function(){for(var e=0;e<this.length;e++){this[e]._private.traversalCache=null}};ue(Mf,{roots:Bf({noIncomingEdges:true}),leaves:Bf({noOutgoingEdges:true}),outgoers:Hu(If({outgoing:true}),"outgoers"),successors:Of({outgoing:true}),incomers:Hu(If({incoming:true}),"incomers"),predecessors:Of({})});ue(Mf,{neighborhood:Hu(function(e){var t=[];var r=this.nodes();for(var n=0;n<r.length;n++){var a=r[n];var i=a.connectedEdges();for(var o=0;o<i.length;o++){var s=i[o];var u=s.source();var l=s.target();var f=a===u?l:u;if(f.length>0){t.push(f[0])}t.push(s[0])}}return this.spawn(t,true).filter(e)},"neighborhood"),closedNeighborhood:function e(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function e(t){return this.neighborhood(t)}});Mf.neighbourhood=Mf.neighborhood;Mf.closedNeighbourhood=Mf.closedNeighborhood;Mf.openNeighbourhood=Mf.openNeighborhood;ue(Mf,{source:Hu(function e(t){var r=this[0];var n;if(r){n=r._private.source||r.cy().collection()}return n&&t?n.filter(t):n},"source"),target:Hu(function e(t){var r=this[0];var n;if(r){n=r._private.target||r.cy().collection()}return n&&t?n.filter(t):n},"target"),sources:Rf({attr:"source"}),targets:Rf({attr:"target"})});function Rf(e){return function t(r){var n=[];for(var a=0;a<this.length;a++){var i=this[a];var o=i._private[e.attr];if(o){n.push(o)}}return this.spawn(n,true).filter(r)}}ue(Mf,{edgesWith:Hu(Nf(),"edgesWith"),edgesTo:Hu(Nf({thisIsSrc:true}),"edgesTo")});function Nf(e){return function t(r){var n=[];var a=this._private.cy;var i=e||{};if(D(r)){r=a.$(r)}for(var o=0;o<r.length;o++){var s=r[o]._private.edges;for(var u=0;u<s.length;u++){var l=s[u];var f=l._private.data;var c=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target);var v=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target);var d=c||v;if(!d){continue}if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c){continue}if(i.thisIsTgt&&!v){continue}}n.push(l)}}return this.spawn(n,true)}}ue(Mf,{connectedEdges:Hu(function(e){var t=[];var r=this;for(var n=0;n<r.length;n++){var a=r[n];if(!a.isNode()){continue}var i=a._private.edges;for(var o=0;o<i.length;o++){var s=i[o];t.push(s)}}return this.spawn(t,true).filter(e)},"connectedEdges"),connectedNodes:Hu(function(e){var t=[];var r=this;for(var n=0;n<r.length;n++){var a=r[n];if(!a.isEdge()){continue}t.push(a.source()[0]);t.push(a.target()[0])}return this.spawn(t,true).filter(e)},"connectedNodes"),parallelEdges:Hu(Lf(),"parallelEdges"),codirectedEdges:Hu(Lf({codirected:true}),"codirectedEdges")});function Lf(e){var t={codirected:false};e=ue({},t,e);return function t(r){var n=[];var a=this.edges();var i=e;for(var o=0;o<a.length;o++){var s=a[o];var u=s._private;var l=u.source;var f=l._private.data.id;var c=u.data.target;var v=l._private.edges;for(var d=0;d<v.length;d++){var h=v[d];var p=h._private.data;var g=p.target;var y=p.source;var m=g===c&&y===f;var b=f===g&&c===y;if(i.codirected&&m||!i.codirected&&(m||b)){n.push(h)}}}return this.spawn(n,true).filter(r)}}ue(Mf,{components:function e(t){var r=this;var n=r.cy();var a=n.collection();var i=t==null?r.nodes():t.nodes();var e=[];if(t!=null&&i.empty()){i=t.sources()}var o=function e(t,r){a.merge(t);i.unmerge(t);r.merge(t)};if(i.empty()){return r.spawn()}var s=function t(){var a=n.collection();e.push(a);var s=i[0];o(s,a);r.bfs({directed:false,roots:s,visit:function e(t){return o(t,a)}});a.forEach(function(e){e.connectedEdges().forEach(function(e){if(r.has(e)&&a.has(e.source())&&a.has(e.target())){a.merge(e)}})})};do{s()}while(i.length>0);return e},component:function e(){var t=this[0];return t.cy().mutableElements().components(t)[0]}});Mf.componentsOf=Mf.components;var zf=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(t===undefined){Rt("A collection must have a reference to the core");return}var i=new $t;var o=false;if(!r){r=[]}else if(r.length>0&&M(r[0])&&!L(r[0])){o=true;var s=[];var u=new er;for(var l=0,f=r.length;l<f;l++){var c=r[l];if(c.data==null){c.data={}}var v=c.data;if(v.id==null){v.id=Ft()}else if(t.hasElementWithId(v.id)||u.has(v.id)){continue}var d=new tr(t,c,false);s.push(d);u.add(v.id)}r=s}this.length=0;for(var h=0,p=r.length;h<p;h++){var g=r[h][0];if(g==null){continue}var y=g._private.data.id;if(!n||!i.has(y)){if(n){i.set(y,{index:this.length,ele:g})}this[this.length]=g;this.length++}}this._private={eles:this,cy:t,get map(){if(this.lazyMap==null){this.rebuildMap()}return this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function e(){var t=this.lazyMap=new $t;var r=this.eles;for(var n=0;n<r.length;n++){var a=r[n];t.set(a.id(),{index:n,ele:a})}}};if(n){this._private.map=i}if(o&&!a){this.restore()}};var jf=tr.prototype=zf.prototype=Object.create(Array.prototype);jf.instanceString=function(){return"collection"};jf.spawn=function(e,t){return new zf(this.cy(),e,t)};jf.spawnSelf=function(){return this.spawn(this)};jf.cy=function(){return this._private.cy};jf.renderer=function(){return this._private.cy.renderer()};jf.element=function(){return this[0]};jf.collection=function(){if(z(this)){return this}else{return new zf(this._private.cy,[this])}};jf.unique=function(){return new zf(this._private.cy,this,true)};jf.hasElementWithId=function(e){e=""+e;return this._private.map.has(e)};jf.getElementById=function(e){e=""+e;var t=this._private.cy;var r=this._private.map.get(e);return r?r.ele:new zf(t)};jf.$id=jf.getElementById;jf.poolIndex=function(){var e=this._private.cy;var t=e._private.elements;var r=this[0]._private.data.id;return t._private.map.get(r).index};jf.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};jf.indexOfId=function(e){e=""+e;return this._private.map.get(e).index};jf.json=function(e){var t=this.element();var r=this.cy();if(t==null&&e){return this}if(t==null){return undefined}var n=t._private;if(M(e)){r.startBatch();if(e.data){t.data(e.data);var a=n.data;if(t.isEdge()){var i=false;var o={};var s=e.data.source;var u=e.data.target;if(s!=null&&s!=a.source){o.source=""+s;i=true}if(u!=null&&u!=a.target){o.target=""+u;i=true}if(i){t=t.move(o)}}else{var l="parent"in e.data;var f=e.data.parent;if(l&&(f!=null||a.parent!=null)&&f!=a.parent){if(f===undefined){f=null}if(f!=null){f=""+f}t=t.move({parent:f})}}}if(e.position){t.position(e.position)}var c=function r(a,i,o){var s=e[a];if(s!=null&&s!==n[a]){if(s){t[i]()}else{t[o]()}}};c("removed","remove","restore");c("selected","select","unselect");c("selectable","selectify","unselectify");c("locked","lock","unlock");c("grabbable","grabify","ungrabify");c("pannable","panify","unpanify");if(e.classes!=null){t.classes(e.classes)}r.endBatch();return this}else if(e===undefined){var v={data:jt(n.data),position:jt(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};v.classes="";var d=0;n.classes.forEach(function(e){return v.classes+=d++===0?e:" "+e});return v}};jf.jsons=function(){var e=[];for(var t=0;t<this.length;t++){var r=this[t];var n=r.json();e.push(n)}return e};jf.clone=function(){var e=this.cy();var t=[];for(var r=0;r<this.length;r++){var n=this[r];var a=n.json();var i=new tr(e,a,false);t.push(i)}return new zf(e,t)};jf.copy=jf.clone;jf.restore=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=this;var n=r.cy();var a=n._private;var i=[];var o=[];var s;for(var u=0,l=r.length;u<l;u++){var f=r[u];if(t&&!f.removed()){continue}if(f.isNode()){i.push(f)}else{o.push(f)}}s=i.concat(o);var c;var v=function e(){s.splice(c,1);c--};for(c=0;c<s.length;c++){var d=s[c];var h=d._private;var p=h.data;d.clearTraversalCache();if(!t&&!h.removed);else if(p.id===undefined){p.id=Ft()}else if(I(p.id)){p.id=""+p.id}else if(G(p.id)||!D(p.id)){Rt("Can not create element with invalid string ID `"+p.id+"`");v();continue}else if(n.hasElementWithId(p.id)){Rt("Can not create second element with ID `"+p.id+"`");v();continue}var g=p.id;if(d.isNode()){var y=h.position;if(y.x==null){y.x=0}if(y.y==null){y.y=0}}if(d.isEdge()){var m=d;var b=["source","target"];var x=b.length;var w=false;for(var E=0;E<x;E++){var k=b[E];var _=p[k];if(I(_)){_=p[k]=""+p[k]}if(_==null||_===""){Rt("Can not create edge `"+g+"` with unspecified "+k);w=true}else if(!n.hasElementWithId(_)){Rt("Can not create edge `"+g+"` with nonexistant "+k+" `"+_+"`");w=true}}if(w){v();continue}var T=n.getElementById(p.source);var C=n.getElementById(p.target);if(T.same(C)){T._private.edges.push(m)}else{T._private.edges.push(m);C._private.edges.push(m)}m._private.source=T;m._private.target=C}h.map=new $t;h.map.set(g,{ele:d,index:0});h.removed=false;if(t){n.addToPool(d)}}for(var S=0;S<i.length;S++){var P=i[S];var A=P._private.data;if(I(A.parent)){A.parent=""+A.parent}var M=A.parent;var B=M!=null;if(B||P._private.parent){var O=P._private.parent?n.collection().merge(P._private.parent):n.getElementById(M);if(O.empty()){A.parent=undefined}else if(O[0].removed()){Lt("Node added with missing parent, reference to parent removed");A.parent=undefined;P._private.parent=null}else{var R=false;var N=O;while(!N.empty()){if(P.same(N)){R=true;A.parent=undefined;break}N=N.parent()}if(!R){O[0]._private.children.push(P);P._private.parent=O[0];a.hasCompoundNodes=true}}}}if(s.length>0){var L=s.length===r.length?r:new zf(n,s);for(var z=0;z<L.length;z++){var j=L[z];if(j.isNode()){continue}j.parallelEdges().clearTraversalCache();j.source().clearTraversalCache();j.target().clearTraversalCache()}var V;if(a.hasCompoundNodes){V=n.collection().merge(L).merge(L.connectedNodes()).merge(L.parent())}else{V=L}V.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e);if(e){L.emitAndNotify("add")}else if(t){L.emit("add")}}return r};jf.removed=function(){var e=this[0];return e&&e._private.removed};jf.inside=function(){var e=this[0];return e&&!e._private.removed};jf.remove=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=this;var n=[];var a={};var i=r._private.cy;function o(e){var t=e._private.edges;for(var r=0;r<t.length;r++){u(t[r])}}function s(e){var t=e._private.children;for(var r=0;r<t.length;r++){u(t[r])}}function u(e){var r=a[e.id()];if(t&&e.removed()||r){return}else{a[e.id()]=true}if(e.isNode()){n.push(e);o(e);s(e)}else{n.unshift(e)}}for(var l=0,f=r.length;l<f;l++){var c=r[l];u(c)}function v(e,t){var r=e._private.edges;Xt(r,t);e.clearTraversalCache()}function d(e){e.clearTraversalCache()}var h=[];h.ids={};function p(e,t){t=t[0];e=e[0];var r=e._private.children;var n=e.id();Xt(r,t);t._private.parent=null;if(!h.ids[n]){h.ids[n]=true;h.push(e)}}r.dirtyCompoundBoundsCache();if(t){i.removeFromPool(n)}for(var g=0;g<n.length;g++){var y=n[g];if(y.isEdge()){var m=y.source()[0];var b=y.target()[0];v(m,y);v(b,y);var x=y.parallelEdges();for(var w=0;w<x.length;w++){var E=x[w];d(E);if(E.isBundledBezier()){E.dirtyBoundingBoxCache()}}}else{var k=y.parent();if(k.length!==0){p(k,y)}}if(t){y._private.removed=true}}var _=i._private.elements;i._private.hasCompoundNodes=false;for(var T=0;T<_.length;T++){var C=_[T];if(C.isParent()){i._private.hasCompoundNodes=true;break}}var S=new zf(this.cy(),n);if(S.size()>0){if(e){S.emitAndNotify("remove")}else if(t){S.emit("remove")}}for(var D=0;D<h.length;D++){var P=h[D];if(!t||!P.removed()){P.updateStyle()}}return S};jf.move=function(e){var t=this._private.cy;var r=this;var n=false;var a=false;var i=function e(t){return t==null?t:""+t};if(e.source!==undefined||e.target!==undefined){var o=i(e.source);var s=i(e.target);var u=o!=null&&t.hasElementWithId(o);var l=s!=null&&t.hasElementWithId(s);if(u||l){t.batch(function(){r.remove(n,a);r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e];var i=t._private.data;if(t.isEdge()){if(u){i.source=o}if(l){i.target=s}}}r.restore(n,a)});r.emitAndNotify("move")}}else if(e.parent!==undefined){var f=i(e.parent);var c=f===null||t.hasElementWithId(f);if(c){var v=f===null?undefined:f;t.batch(function(){var e=r.remove(n,a);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var i=r[t];var o=i._private.data;if(i.isNode()){o.parent=v}}e.restore(n,a)});r.emitAndNotify("move")}}return this};[ni,mu,bu,Uu,Ku,rl,nl,Xl,uf,lf,cf,df,gf,xf,Df,Mf].forEach(function(e){ue(jf,e)});var Vf={add:function e(t){var r;var n=this;if(N(t)){var a=t;if(a._private.cy===n){r=a.restore()}else{var i=[];for(var o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new zf(n,i)}}else if(A(t)){var u=t;r=new zf(n,u)}else if(M(t)&&(A(t.nodes)||A(t.edges))){var l=t;var f=[];var c=["nodes","edges"];for(var v=0,d=c.length;v<d;v++){var h=c[v];var p=l[h];if(A(p)){for(var g=0,y=p.length;g<y;g++){var m=ue({group:h},p[g]);f.push(m)}}}r=new zf(n,f)}else{var b=t;r=new tr(n,b).collection()}return r},remove:function e(t){if(N(t));else if(D(t)){var r=t;t=this.$(r)}return t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Ff(e,t,r,n){var a=4,i=.001,o=1e-7,s=10,u=11,l=1/(u-1),f=typeof Float32Array!=="undefined";if(arguments.length!==4){return false}for(var c=0;c<4;++c){if(typeof arguments[c]!=="number"||isNaN(arguments[c])||!isFinite(arguments[c])){return false}}e=Math.min(e,1);r=Math.min(r,1);e=Math.max(e,0);r=Math.max(r,0);var v=f?new Float32Array(u):new Array(u);function d(e,t){return 1-3*t+3*e}function h(e,t){return 3*t-6*e}function p(e){return 3*e}function g(e,t,r){return((d(t,r)*e+h(t,r))*e+p(t))*e}function y(e,t,r){return 3*d(t,r)*e*e+2*h(t,r)*e+p(t)}function m(t,n){for(var i=0;i<a;++i){var o=y(n,e,r);if(o===0){return n}var s=g(n,e,r)-t;n-=s/o}return n}function b(){for(var t=0;t<u;++t){v[t]=g(t*l,e,r)}}function x(t,n,a){var i,u,l=0;do{u=n+(a-n)/2;i=g(u,e,r)-t;if(i>0){a=u}else{n=u}}while(Math.abs(i)>o&&++l<s);return u}function w(t){var n=0,a=1,o=u-1;for(;a!==o&&v[a]<=t;++a){n+=l}--a;var s=(t-v[a])/(v[a+1]-v[a]),f=n+s*l,c=y(f,e,r);if(c>=i){return m(t,f)}else if(c===0){return f}else{return x(t,n,n+l)}}var E=false;function k(){E=true;if(e!==t||r!==n){b()}}var _=function a(i){if(!E){k()}if(e===t&&r===n){return i}if(i===0){return 0}if(i===1){return 1}return g(w(i),t,n)};_.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var T="generateBezier("+[e,t,r,n]+")";_.toString=function(){return T};return _}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Gf=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var a={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:a.v,dv:e(a)}}function r(r,n){var a={dx:r.v,dv:e(r)},i=t(r,n*.5,a),o=t(r,n*.5,i),s=t(r,n,o),u=1/6*(a.dx+2*(i.dx+o.dx)+s.dx),l=1/6*(a.dv+2*(i.dv+o.dv)+s.dv);r.x=r.x+u*n;r.v=r.v+l*n;return r}return function e(t,n,a){var i={x:-1,v:0,tension:null,friction:null},o=[0],s=0,u=1/1e4,l=16/1e3,f,c,v;t=parseFloat(t)||500;n=parseFloat(n)||20;a=a||null;i.tension=t;i.friction=n;f=a!==null;if(f){s=e(t,n);c=s/a*l}else{c=l}for(;;){v=r(v||i,c);o.push(1+v.x);s+=16;if(!(Math.abs(v.x)>u&&Math.abs(v.v)>u)){break}}return!f?s:function(e){return o[e*(o.length-1)|0]}}}();var Wf=function e(t,r,n,a){var i=Ff(t,r,n,a);return function(e,t,r){return e+(t-e)*i(r)}};var qf={linear:function e(t,r,n){return t+(r-t)*n},ease:Wf(.25,.1,.25,1),"ease-in":Wf(.42,0,1,1),"ease-out":Wf(0,0,.58,1),"ease-in-out":Wf(.42,0,.58,1),"ease-in-sine":Wf(.47,0,.745,.715),"ease-out-sine":Wf(.39,.575,.565,1),"ease-in-out-sine":Wf(.445,.05,.55,.95),"ease-in-quad":Wf(.55,.085,.68,.53),"ease-out-quad":Wf(.25,.46,.45,.94),"ease-in-out-quad":Wf(.455,.03,.515,.955),"ease-in-cubic":Wf(.55,.055,.675,.19),"ease-out-cubic":Wf(.215,.61,.355,1),"ease-in-out-cubic":Wf(.645,.045,.355,1),"ease-in-quart":Wf(.895,.03,.685,.22),"ease-out-quart":Wf(.165,.84,.44,1),"ease-in-out-quart":Wf(.77,0,.175,1),"ease-in-quint":Wf(.755,.05,.855,.06),"ease-out-quint":Wf(.23,1,.32,1),"ease-in-out-quint":Wf(.86,0,.07,1),"ease-in-expo":Wf(.95,.05,.795,.035),"ease-out-expo":Wf(.19,1,.22,1),"ease-in-out-expo":Wf(1,0,0,1),"ease-in-circ":Wf(.6,.04,.98,.335),"ease-out-circ":Wf(.075,.82,.165,1),"ease-in-out-circ":Wf(.785,.135,.15,.86),spring:function e(t,r,n){if(n===0){return qf.linear}var e=Gf(t,r,n);return function(t,r,n){return t+(r-t)*e(n)}},"cubic-bezier":Wf};function Xf(e,t,r,n,a){if(n===1){return r}if(t===r){return r}var i=a(t,r,n);if(e==null){return i}if(e.roundValue||e.color){i=Math.round(i)}if(e.min!==undefined){i=Math.max(i,e.min)}if(e.max!==undefined){i=Math.min(i,e.max)}return i}function Yf(e,t){if(e.pfValue!=null||e.value!=null){if(e.pfValue!=null&&(t==null||t.type.units!=="%")){return e.pfValue}else{return e.value}}else{return e}}function Uf(e,t,r,n,a){var i=a!=null?a.type:null;if(r<0){r=0}else if(r>1){r=1}var o=Yf(e,a);var s=Yf(t,a);if(I(o)&&I(s)){return Xf(i,o,s,r,n)}else if(A(o)&&A(s)){var u=[];for(var l=0;l<s.length;l++){var f=o[l];var c=s[l];if(f!=null&&c!=null){var v=Xf(i,f,c,r,n);u.push(v)}else{u.push(c)}}return u}return undefined}function Hf(e,t,r,n){var a=!n;var i=e._private;var o=t._private;var s=o.easing;var u=o.startTime;var l=n?e:e.cy();var f=l.style();if(!o.easingImpl){if(s==null){o.easingImpl=qf["linear"]}else{var c;if(D(s)){var v=f.parse("transition-timing-function",s);c=v.value}else{c=s}var d,h;if(D(c)){d=c;h=[]}else{d=c[1];h=c.slice(2).map(function(e){return+e})}if(h.length>0){if(d==="spring"){h.push(o.duration)}o.easingImpl=qf[d].apply(null,h)}else{o.easingImpl=qf[d]}}}var p=o.easingImpl;var g;if(o.duration===0){g=1}else{g=(r-u)/o.duration}if(o.applying){g=o.progress}if(g<0){g=0}else if(g>1){g=1}if(o.delay==null){var y=o.startPosition;var m=o.position;if(m&&a&&!e.locked()){var b={};if(Kf(y.x,m.x)){b.x=Uf(y.x,m.x,g,p)}if(Kf(y.y,m.y)){b.y=Uf(y.y,m.y,g,p)}e.position(b)}var x=o.startPan;var w=o.pan;var E=i.pan;var k=w!=null&&n;if(k){if(Kf(x.x,w.x)){E.x=Uf(x.x,w.x,g,p)}if(Kf(x.y,w.y)){E.y=Uf(x.y,w.y,g,p)}e.emit("pan")}var _=o.startZoom;var T=o.zoom;var C=T!=null&&n;if(C){if(Kf(_,T)){i.zoom=Xr(i.minZoom,Uf(_,T,g,p),i.maxZoom)}e.emit("zoom")}if(k||C){e.emit("viewport")}var S=o.style;if(S&&S.length>0&&a){for(var P=0;P<S.length;P++){var A=S[P];var M=A.name;var B=A;var I=o.startStyle[M];var O=f.properties[I.name];var R=Uf(I,B,g,p,O);f.overrideBypass(e,M,R)}e.emit("style")}}o.progress=g;return g}function Kf(e,t){if(e==null||t==null){return false}if(I(e)&&I(t)){return true}else if(e&&t){return true}return false}function Zf(e,t,r,n){var a=t._private;a.started=true;a.startTime=r-a.progress*a.duration}function $f(e,t){var r=t._private.aniEles;var n=[];function a(t,r){var a=t._private;var i=a.animation.current;var o=a.animation.queue;var s=false;if(i.length===0){var u=o.shift();if(u){i.push(u)}}var l=function e(t){for(var r=t.length-1;r>=0;r--){var n=t[r];n()}t.splice(0,t.length)};for(var f=i.length-1;f>=0;f--){var c=i[f];var v=c._private;if(v.stopped){i.splice(f,1);v.hooked=false;v.playing=false;v.started=false;l(v.frames);continue}if(!v.playing&&!v.applying){continue}if(v.playing&&v.applying){v.applying=false}if(!v.started){Zf(t,c,e)}Hf(t,c,e,r);if(v.applying){v.applying=false}l(v.frames);if(v.step!=null){v.step(e)}if(c.completed()){i.splice(f,1);v.hooked=false;v.playing=false;v.started=false;l(v.completes)}s=true}if(!r&&i.length===0&&o.length===0){n.push(t)}return s}var i=false;for(var o=0;o<r.length;o++){var s=r[o];var u=a(s);i=i||u}var l=a(t,true);if(i||l){if(r.length>0){t.notify("draw",r)}else{t.notify("draw")}}r.unmerge(n);t.emit("step")}var Qf={animate:yu.animate(),animation:yu.animation(),animated:yu.animated(),clearQueue:yu.clearQueue(),delay:yu.delay(),delayAnimation:yu.delayAnimation(),stop:yu.stop(),addToAnimationPool:function e(t){var r=this;if(!r.styleEnabled()){return}r._private.aniEles.merge(t)},stopAnimationLoop:function e(){this._private.animationsRunning=false},startAnimationLoop:function e(){var t=this;t._private.animationsRunning=true;if(!t.styleEnabled()){return}function r(){if(!t._private.animationsRunning){return}vt(function e(n){$f(n,t);r()})}var n=t.renderer();if(n&&n.beforeRender){n.beforeRender(function e(r,n){$f(n,t)},n.beforeRenderPriorities.animations)}else{r()}}};var Jf={qualifierCompare:function e(t,r){if(t==null||r==null){return t==null&&r==null}else{return t.sameText(r)}},eventMatches:function e(t,r,n){var a=r.qualifier;if(a!=null){return t!==n.target&&L(n.target)&&a.matches(n.target)}return true},addEventFields:function e(t,r){r.cy=t;r.target=t},callbackContext:function e(t,r,n){return r.qualifier!=null?n.target:t}};var ec=function e(t){if(D(t)){return new Xu(t)}else{return t}};var tc={createEmitter:function e(){var t=this._private;if(!t.emitter){t.emitter=new ef(Jf,this)}return this},emitter:function e(){return this._private.emitter},on:function e(t,r,n){this.emitter().on(t,ec(r),n);return this},removeListener:function e(t,r,n){this.emitter().removeListener(t,ec(r),n);return this},removeAllListeners:function e(){this.emitter().removeAllListeners();return this},one:function e(t,r,n){this.emitter().one(t,ec(r),n);return this},once:function e(t,r,n){this.emitter().one(t,ec(r),n);return this},emit:function e(t,r){this.emitter().emit(t,r);return this},emitAndNotify:function e(t,r){this.emit(t);this.notify(t,r);return this}};yu.eventAliasesOn(tc);var rc={png:function e(t){var r=this._private.renderer;t=t||{};return r.png(t)},jpg:function e(t){var r=this._private.renderer;t=t||{};t.bg=t.bg||"#fff";return r.jpg(t)}};rc.jpeg=rc.jpg;var nc={layout:function e(t){var r=this;if(t==null){Rt("Layout options must be specified to make a layout");return}if(t.name==null){Rt("A `name` must be specified to make a layout");return}var n=t.name;var a=r.extension("layout",n);if(a==null){Rt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;if(D(t.eles)){i=r.$(t.eles)}else{i=t.eles!=null?t.eles:r.$()}var e=new a(ue({},t,{cy:r,eles:i}));return e}};nc.createLayout=nc.makeLayout=nc.layout;var ac={notify:function e(t,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();if(r!=null){a.merge(r)}return}if(!n.notificationsEnabled){return}var i=this.renderer();if(this.destroyed()||!i){return}i.notify(t,r)},notifications:function e(t){var r=this._private;if(t===undefined){return r.notificationsEnabled}else{r.notificationsEnabled=t?true:false}return this},noNotifications:function e(t){this.notifications(false);t();this.notifications(true)},batching:function e(){return this._private.batchCount>0},startBatch:function e(){var t=this._private;if(t.batchCount==null){t.batchCount=0}if(t.batchCount===0){t.batchStyleEles=this.collection();t.batchNotifications={}}t.batchCount++;return this},endBatch:function e(){var t=this._private;if(t.batchCount===0){return this}t.batchCount--;if(t.batchCount===0){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(e){var n=t.batchNotifications[e];if(n.empty()){r.notify(e)}else{r.notify(e,n)}})}return this},batch:function e(t){this.startBatch();t();this.endBatch();return this},batchData:function e(t){var r=this;return this.batch(function(){var e=Object.keys(t);for(var n=0;n<e.length;n++){var a=e[n];var i=t[a];var o=r.getElementById(a);o.data(i)}})}};var ic=qt({hideEdgesOnViewport:false,textureOnViewport:false,motionBlur:false,motionBlurOpacity:.05,pixelRatio:undefined,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:false,showFps:false,webgl:false,webglDebug:false,webglDebugShowAtlases:false,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]});var oc={renderTo:function e(t,r,n,a){var i=this._private.renderer;i.renderTo(t,r,n,a);return this},renderer:function e(){return this._private.renderer},forceRender:function e(){this.notify("draw");return this},resize:function e(){this.invalidateSize();this.emitAndNotify("resize");return this},initRenderer:function e(t){var r=this;var n=r.extension("renderer",t.name);if(n==null){Rt("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}if(t.wheelSensitivity!==undefined){Lt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.")}var a=ic(t);a.cy=r;r._private.renderer=new n(a);this.notify("init")},destroyRenderer:function e(){var t=this;t.notify("destroy");var r=t.container();if(r){r._cyreg=null;while(r.childNodes.length>0){r.removeChild(r.childNodes[0])}}t._private.renderer=null;t.mutableElements().forEach(function(e){var t=e._private;t.rscratch={};t.rstyle={};t.animation.current=[];t.animation.queue=[]})},onRender:function e(t){return this.on("render",t)},offRender:function e(t){return this.off("render",t)}};oc.invalidateDimensions=oc.resize;var sc={collection:function e(t,r){if(D(t)){return this.$(t)}else if(N(t)){return t.collection()}else if(A(t)){if(!r){r={}}return new zf(this,t,r.unique,r.removed)}return new zf(this)},nodes:function e(t){var e=this.$(function(e){return e.isNode()});if(t){return e.filter(t)}return e},edges:function e(t){var e=this.$(function(e){return e.isEdge()});if(t){return e.filter(t)}return e},$:function e(t){var r=this._private.elements;if(t){return r.filter(t)}else{return r.spawnSelf()}},mutableElements:function e(){return this._private.elements}};sc.elements=sc.filter=sc.$;var uc={};var lc="t";var fc="f";uc.apply=function(e){var t=this;var r=t._private;var n=r.cy;var a=n.collection();for(var i=0;i<e.length;i++){var o=e[i];var s=t.getContextMeta(o);if(s.empty){continue}var u=t.getContextStyle(s);var l=t.applyContextStyle(s,u,o);if(o._private.appliedInitStyle){t.updateTransitions(o,l.diffProps)}else{o._private.appliedInitStyle=true}var f=t.updateStyleHints(o);if(f){a.push(o)}}return a};uc.getPropertiesDiff=function(e,t){var r=this;var n=r._private.propDiffs=r._private.propDiffs||{};var a=e+"-"+t;var i=n[a];if(i){return i}var o=[];var s={};for(var u=0;u<r.length;u++){var l=r[u];var f=e[u]===lc;var c=t[u]===lc;var v=f!==c;var d=l.mappedProperties.length>0;if(v||c&&d){var h=undefined;if(v&&d){h=l.properties}else if(v){h=l.properties}else if(d){h=l.mappedProperties}for(var p=0;p<h.length;p++){var g=h[p];var y=g.name;var m=false;for(var b=u+1;b<r.length;b++){var x=r[b];var w=t[b]===lc;if(!w){continue}m=x.properties[g.name]!=null;if(m){break}}if(!s[y]&&!m){s[y]=true;o.push(y)}}}}n[a]=o;return o};uc.getContextMeta=function(e){var t=this;var r="";var n;var a=e._private.styleCxtKey||"";for(var i=0;i<t.length;i++){var o=t[i];var s=o.selector&&o.selector.matches(e);if(s){r+=lc}else{r+=fc}}n=t.getPropertiesDiff(a,r);e._private.styleCxtKey=r;return{key:r,diffPropNames:n,empty:n.length===0}};uc.getContextStyle=function(e){var t=e.key;var r=this;var n=this._private.contextStyles=this._private.contextStyles||{};if(n[t]){return n[t]}var a={_private:{key:t}};for(var i=0;i<r.length;i++){var o=r[i];var s=t[i]===lc;if(!s){continue}for(var u=0;u<o.properties.length;u++){var l=o.properties[u];a[l.name]=l}}n[t]=a;return a};uc.applyContextStyle=function(e,t,r){var n=this;var a=e.diffPropNames;var i={};var o=n.types;for(var s=0;s<a.length;s++){var u=a[s];var l=t[u];var f=r.pstyle(u);if(!l){if(!f){continue}else if(f.bypass){l={name:u,deleteBypassed:true}}else{l={name:u,delete:true}}}if(f===l){continue}if(l.mapped===o.fn&&f!=null&&f.mapping!=null&&f.mapping.value===l.value){var c=f.mapping;var v=c.fnValue=l.value(r);if(v===c.prevFnValue){continue}}var d=i[u]={prev:f};n.applyParsedProperty(r,l);d.next=r.pstyle(u);if(d.next&&d.next.bypass){d.next=d.next.bypassed}}return{diffProps:i}};uc.updateStyleHints=function(e){var t=e._private;var r=this;var n=r.propertyGroupNames;var a=r.propertyGroupKeys;var i=function e(t,n,a){return r.getPropertiesHash(t,n,a)};var o=t.styleKey;if(e.removed()){return false}var s=t.group==="nodes";var u=e._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var f=a[l];t.styleKeys[f]=[ht,gt]}var c=function e(r,n){return t.styleKeys[n][0]=mt(r,t.styleKeys[n][0])};var v=function e(r,n){return t.styleKeys[n][1]=bt(r,t.styleKeys[n][1])};var d=function e(t,r){c(t,r);v(t,r)};var h=function e(t,r){for(var n=0;n<t.length;n++){var a=t.charCodeAt(n);c(a,r);v(a,r)}};var p=2e9;var g=function e(t){return-128<t&&t<128&&Math.floor(t)!==t?p-(t*1024|0):t};for(var y=0;y<n.length;y++){var m=n[y];var b=u[m];if(b==null){continue}var x=this.properties[m];var w=x.type;var E=x.groupKey;var k=undefined;if(x.hashOverride!=null){k=x.hashOverride(e,b)}else if(b.pfValue!=null){k=b.pfValue}var _=x.enums==null?b.value:null;var T=k!=null;var C=_!=null;var S=T||C;var D=b.units;if(w.number&&S&&!w.multiple){var P=T?k:_;d(g(P),E);if(!T&&D!=null){h(D,E)}}else{h(b.strValue,E)}}var A=[ht,gt];for(var M=0;M<a.length;M++){var B=a[M];var I=t.styleKeys[B];A[0]=mt(I[0],A[0]);A[1]=bt(I[1],A[1])}t.styleKey=xt(A[0],A[1]);var O=t.styleKeys;t.labelDimsKey=wt(O.labelDimensions);var R=i(e,["label"],O.labelDimensions);t.labelKey=wt(R);t.labelStyleKey=wt(Et(O.commonLabel,R));if(!s){var N=i(e,["source-label"],O.labelDimensions);t.sourceLabelKey=wt(N);t.sourceLabelStyleKey=wt(Et(O.commonLabel,N));var L=i(e,["target-label"],O.labelDimensions);t.targetLabelKey=wt(L);t.targetLabelStyleKey=wt(Et(O.commonLabel,L))}if(s){var z=t.styleKeys,j=z.nodeBody,V=z.nodeBorder,F=z.nodeOutline,G=z.backgroundImage,W=z.compound,q=z.pie,X=z.stripe;var Y=[j,V,F,G,W,q,X].filter(function(e){return e!=null}).reduce(Et,[ht,gt]);t.nodeKey=wt(Y);t.hasPie=q!=null&&q[0]!==ht&&q[1]!==gt;t.hasStripe=X!=null&&X[0]!==ht&&X[1]!==gt}return o!==t.styleKey};uc.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="";t.styleKeys={};t.styleKey=null;t.labelKey=null;t.labelStyleKey=null;t.sourceLabelKey=null;t.sourceLabelStyleKey=null;t.targetLabelKey=null;t.targetLabelStyleKey=null;t.nodeKey=null;t.hasPie=null;t.hasStripe=null};uc.applyParsedProperty=function(e,t){var r=this;var n=t;var a=e._private.style;var i;var o=r.types;var s=r.properties[n.name].type;var u=n.bypass;var l=a[n.name];var f=l&&l.bypass;var c=e._private;var v="mapping";var d=function e(t){if(t==null){return null}else if(t.pfValue!=null){return t.pfValue}else{return t.value}};var h=function t(){var a=d(l);var i=d(n);r.checkTriggers(e,n.name,a,i)};if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))){n=t=this.parse(t.name,"bezier",u)}if(n["delete"]){a[n.name]=undefined;h();return true}if(n.deleteBypassed){if(!l){h();return true}else if(l.bypass){l.bypassed=undefined;h();return true}else{return false}}if(n.deleteBypass){if(!l){h();return true}else if(l.bypass){a[n.name]=l.bypassed;h();return true}else{return false}}var p=function t(){Lt("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{var g=n.field.split(".");var y=c.data;for(var m=0;m<g.length&&y;m++){var b=g[m];y=y[b]}if(y==null){p();return false}var x;if(!I(y)){Lt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+e.id()+"` is non-numeric)");return false}else{var w=n.fieldMax-n.fieldMin;if(w===0){x=0}else{x=(y-n.fieldMin)/w}}if(x<0){x=0}else if(x>1){x=1}if(s.color){var E=n.valueMin[0];var k=n.valueMax[0];var _=n.valueMin[1];var T=n.valueMax[1];var C=n.valueMin[2];var S=n.valueMax[2];var D=n.valueMin[3]==null?1:n.valueMin[3];var P=n.valueMax[3]==null?1:n.valueMax[3];var A=[Math.round(E+(k-E)*x),Math.round(_+(T-_)*x),Math.round(C+(S-C)*x),Math.round(D+(P-D)*x)];i={bypass:n.bypass,name:n.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else if(s.number){var M=n.valueMin+(n.valueMax-n.valueMin)*x;i=this.parse(n.name,M,n.bypass,v)}else{return false}if(!i){p();return false}i.mapping=n;n=i;break}case o.data:{var B=n.field.split(".");var O=c.data;for(var R=0;R<B.length&&O;R++){var N=B[R];O=O[N]}if(O!=null){i=this.parse(n.name,O,n.bypass,v)}if(!i){p();return false}i.mapping=n;n=i;break}case o.fn:{var L=n.value;var z=n.fnValue!=null?n.fnValue:L(e);n.prevFnValue=z;if(z==null){Lt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+e.id()+"` is null)");return false}i=this.parse(n.name,z,n.bypass,v);if(!i){Lt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+e.id()+"` is invalid)");return false}i.mapping=jt(n);n=i;break}case undefined:break;default:return false}if(u){if(f){n.bypassed=l.bypassed}else{n.bypassed=l}a[n.name]=n}else{if(f){l.bypassed=n}else{a[n.name]=n}}h();return true};uc.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];this.clearStyleHints(n);n.dirtyCompoundBoundsCache();n.dirtyBoundingBoxCache();if(!t){n._private.style={}}else{var a=n._private.style;var i=Object.keys(a);for(var o=0;o<i.length;o++){var s=i[o];var u=a[s];if(u!=null){if(u.bypass){u.bypassed=null}else{a[s]=null}}}}}};uc.update=function(){var e=this._private.cy;var t=e.mutableElements();t.updateStyle()};uc.updateTransitions=function(e,t){var r=this;var n=e._private;var a=e.pstyle("transition-property").value;var i=e.pstyle("transition-duration").pfValue;var o=e.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){var s={};var u=false;for(var l=0;l<a.length;l++){var f=a[l];var c=e.pstyle(f);var v=t[f];if(!v){continue}var d=v.prev;var h=d;var p=v.next!=null?v.next:c;var g=false;var y=undefined;var m=1e-6;if(!h){continue}if(I(h.pfValue)&&I(p.pfValue)){g=p.pfValue-h.pfValue;y=h.pfValue+m*g}else if(I(h.value)&&I(p.value)){g=p.value-h.value;y=h.value+m*g}else if(A(h.value)&&A(p.value)){g=h.value[0]!==p.value[0]||h.value[1]!==p.value[1]||h.value[2]!==p.value[2];y=h.strValue}if(g){s[f]=p.strValue;this.applyBypass(e,f,y);u=true}}if(!u){return}n.transitioning=true;new di(function(t){if(o>0){e.delayAnimation(o).play().promise().then(t)}else{t()}}).then(function(){return e.animation({style:s,duration:i,easing:e.pstyle("transition-timing-function").value,queue:false}).play().promise()}).then(function(){r.removeBypasses(e,a);e.emitAndNotify("style");n.transitioning=false})}else if(n.transitioning){this.removeBypasses(e,a);e.emitAndNotify("style");n.transitioning=false}};uc.checkTrigger=function(e,t,r,n,a,i){var o=this.properties[t];var s=a(o);if(e.removed()){return}if(s!=null&&s(r,n,e)){i(o)}};uc.checkZOrderTrigger=function(e,t,r,n){var a=this;this.checkTrigger(e,t,r,n,function(e){return e.triggersZOrder},function(){a._private.cy.notify("zorder",e)})};uc.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(e){return e.triggersBounds},function(t){e.dirtyCompoundBoundsCache();e.dirtyBoundingBoxCache()})};uc.checkConnectedEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(e){return e.triggersBoundsOfConnectedEdges},function(t){e.connectedEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})};uc.checkParallelEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(e){return e.triggersBoundsOfParallelEdges},function(t){e.parallelEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})};uc.checkTriggers=function(e,t,r,n){e.dirtyStyleCache();this.checkZOrderTrigger(e,t,r,n);this.checkBoundsTrigger(e,t,r,n);this.checkConnectedEdgesBoundsTrigger(e,t,r,n);this.checkParallelEdgesBoundsTrigger(e,t,r,n)};var cc={};cc.applyBypass=function(e,t,r,n){var a=this;var i=[];var o=true;if(t==="*"||t==="**"){if(r!==undefined){for(var s=0;s<a.properties.length;s++){var u=a.properties[s];var l=u.name;var f=this.parse(l,r,true);if(f){i.push(f)}}}}else if(D(t)){var c=this.parse(t,r,true);if(c){i.push(c)}}else if(M(t)){var v=t;n=r;var d=Object.keys(v);for(var h=0;h<d.length;h++){var p=d[h];var g=v[p];if(g===undefined){g=v[K(p)]}if(g!==undefined){var y=this.parse(p,g,true);if(y){i.push(y)}}}}else{return false}if(i.length===0){return false}var m=false;for(var b=0;b<e.length;b++){var x=e[b];var w={};var E=undefined;for(var k=0;k<i.length;k++){var _=i[k];if(n){var T=x.pstyle(_.name);E=w[_.name]={prev:T}}m=this.applyParsedProperty(x,jt(_))||m;if(n){E.next=x.pstyle(_.name)}}if(m){this.updateStyleHints(x)}if(n){this.updateTransitions(x,w,o)}}return m};cc.overrideBypass=function(e,t,r){t=H(t);for(var n=0;n<e.length;n++){var a=e[n];var i=a._private.style[t];var o=this.properties[t].type;var s=o.color;var u=o.mutiple;var l=!i?null:i.pfValue!=null?i.pfValue:i.value;if(!i||!i.bypass){this.applyBypass(a,t,r)}else{i.value=r;if(i.pfValue!=null){i.pfValue=r}if(s){i.strValue="rgb("+r.join(",")+")"}else if(u){i.strValue=r.join(" ")}else{i.strValue=""+r}this.updateStyleHints(a)}this.checkTriggers(a,t,l,r)}};cc.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};cc.removeBypasses=function(e,t,r){var n=true;for(var a=0;a<e.length;a++){var i=e[a];var o={};for(var s=0;s<t.length;s++){var u=t[s];var l=this.properties[u];var f=i.pstyle(l.name);if(!f||!f.bypass){continue}var c="";var v=this.parse(u,c,true);var d=o[l.name]={prev:f};this.applyParsedProperty(i,v);d.next=i.pstyle(l.name)}this.updateStyleHints(i);if(r){this.updateTransitions(i,o,n)}}};var vc={};vc.getEmSizeInPixels=function(){var e=this.containerCss("font-size");if(e!=null){return parseFloat(e)}else{return 1}};vc.containerCss=function(e){var t=this._private.cy;var r=t.container();var n=t.window();if(n&&r&&n.getComputedStyle){return n.getComputedStyle(r).getPropertyValue(e)}};var dc={};dc.getRenderedStyle=function(e,t){if(t){return this.getStylePropertyValue(e,t,true)}else{return this.getRawStyle(e,true)}};dc.getRawStyle=function(e,t){var r=this;e=e[0];if(e){var n={};for(var a=0;a<r.properties.length;a++){var i=r.properties[a];var o=r.getStylePropertyValue(e,i.name,t);if(o!=null){n[i.name]=o;n[K(i.name)]=o}}return n}};dc.getIndexedStyle=function(e,t,r,n){var a=e.pstyle(t)[r][n];return a!=null?a:e.cy().style().getDefaultProperty(t)[r][0]};dc.getStylePropertyValue=function(e,t,r){var n=this;e=e[0];if(e){var a=n.properties[t];if(a.alias){a=a.pointsTo}var i=a.type;var o=e.pstyle(a.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(r&&i.number&&s!=null&&I(s)){var f=e.cy().zoom();var c=function e(t){return t*f};var v=function e(t,r){return c(t)+r};var d=A(s);var h=d?u.every(function(e){return e!=null}):u!=null;if(h){if(d){return s.map(function(e,t){return v(e,u[t])}).join(" ")}else{return v(s,u)}}else{if(d){return s.map(function(e){return D(e)?e:""+c(e)}).join(" ")}else{return""+c(s)}}}else if(l!=null){return l}}return null}};dc.getAnimationStartStyle=function(e,t){var r={};for(var n=0;n<t.length;n++){var a=t[n];var i=a.name;var o=e.pstyle(i);if(o!==undefined){if(M(o)){o=this.parse(i,o.strValue)}else{o=this.parse(i,o)}}if(o){r[i]=o}}return r};dc.getPropsList=function(e){var t=this;var r=[];var n=e;var a=t.properties;if(n){var i=Object.keys(n);for(var o=0;o<i.length;o++){var s=i[o];var u=n[s];var l=a[s]||a[H(s)];var f=this.parse(l.name,u);if(f){r.push(f)}}}return r};dc.getNonDefaultPropertiesHash=function(e,t,r){var n=r.slice();var a,i,o,s;var u,l;for(u=0;u<t.length;u++){a=t[u];i=e.pstyle(a,false);if(i==null){continue}else if(i.pfValue!=null){n[0]=mt(s,n[0]);n[1]=bt(s,n[1])}else{o=i.strValue;for(l=0;l<o.length;l++){s=o.charCodeAt(l);n[0]=mt(s,n[0]);n[1]=bt(s,n[1])}}}return n};dc.getPropertiesHash=dc.getNonDefaultPropertiesHash;var hc={};hc.appendFromJson=function(e){var t=this;for(var r=0;r<e.length;r++){var n=e[r];var a=n.selector;var i=n.style||n.css;var o=Object.keys(i);t.selector(a);for(var s=0;s<o.length;s++){var u=o[s];var l=i[u];t.css(u,l)}}return t};hc.fromJson=function(e){var t=this;t.resetToDefault();t.appendFromJson(e);return t};hc.json=function(){var e=[];for(var t=this.defaultLength;t<this.length;t++){var r=this[t];var n=r.selector;var a=r.properties;var i={};for(var o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}e.push({selector:!n?"core":n.toString(),style:i})}return e};var pc={};pc.appendFromString=function(e){var t=this;var r=this;var n=""+e;var a;var i;var o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){if(n.length>a.length){n=n.substr(a.length)}else{n=""}}function u(){if(i.length>o.length){i=i.substr(o.length)}else{i=""}}for(;;){var l=n.match(/^\s*$/);if(l){break}var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Lt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var v=new Xu(c);if(v.invalid){Lt("Skipping parsing of block: Invalid selector found in string stylesheet: "+c);s();continue}}var d=f[2];var h=false;i=d;var p=[];for(;;){var g=i.match(/^\s*$/);if(g){break}var y=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Lt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d);h=true;break}o=y[0];var m=y[1];var b=y[2];var x=t.properties[m];if(!x){Lt("Skipping property: Invalid property name in: "+o);u();continue}var w=r.parse(m,b);if(!w){Lt("Skipping property: Invalid property definition in: "+o);u();continue}p.push({name:m,val:b});u()}if(h){s();break}r.selector(c);for(var E=0;E<p.length;E++){var k=p[E];r.css(k.name,k.val)}s()}return r};pc.fromString=function(e){var t=this;t.resetToDefault();t.appendFromString(e);return t};var gc={};(function(){var e=J;var t=te;var r=ne;var n=ae;var a=ie;var i=function e(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"};var o=function i(o){var s=e+"|\\w+|"+t+"|"+r+"|"+n+"|"+a;return"^"+o+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+s+")\\s*\\,\\s*("+s+")\\)$"};var s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];gc.types={time:{number:true,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:true,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:true,min:0,max:100,units:"%",implicitUnits:"%",multiple:true},zeroOneNumber:{number:true,min:0,max:1,unitless:true},zeroOneNumbers:{number:true,min:0,max:1,unitless:true,multiple:true},nOneOneNumber:{number:true,min:-1,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},nonNegativeNumber:{number:true,min:0,unitless:true},position:{enums:["parent","origin"]},nodeSize:{number:true,min:0,enums:["label"]},number:{number:true,unitless:true},numbers:{number:true,unitless:true,multiple:true},positiveNumber:{number:true,unitless:true,min:0,strictMin:true},size:{number:true,min:0},bidirectionalSize:{number:true},bidirectionalSizeMaybePercent:{number:true,allowPercent:true},bidirectionalSizes:{number:true,multiple:true},sizeMaybePercent:{number:true,min:0,allowPercent:true},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:true,min:0,allowPercent:true,enums:["auto"],multiple:true},bgPos:{number:true,allowPercent:true,multiple:true},bgRelativeTo:{enums:["inner","include-padding"],multiple:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:true},bgFit:{enums:["none","contain","cover"],multiple:true},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:true},bgClip:{enums:["none","node"],multiple:true},bgContainment:{enums:["inside","over"],multiple:true},color:{color:true},colors:{color:true,multiple:true},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:true},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:true},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:true,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:true,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:true},data:{mapping:true,regex:i("data")},layoutData:{mapping:true,regex:i("layoutData")},scratch:{mapping:true,regex:i("scratch")},mapData:{mapping:true,regex:o("mapData")},mapLayoutData:{mapping:true,regex:o("mapLayoutData")},mapScratch:{mapping:true,regex:o("mapScratch")},fn:{mapping:true,fn:true},url:{regexes:s,singleRegexMatchValue:true},urls:{regexes:s,singleRegexMatchValue:true,multiple:true},propList:{propList:true},angle:{number:true,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:true,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:true,multiple:true,evenMultiple:true,min:-1,max:1,unitless:true},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:true,multiple:true,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:true,validate:function e(t,r){switch(t.length){case 2:return r[0]!=="deg"&&r[0]!=="rad"&&r[1]!=="deg"&&r[1]!=="rad";case 1:return D(t[0])||r[0]==="deg"||r[0]==="rad";default:return false}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:true,multiple:true,min:0,validate:function e(t){var r=t.length;return r===1||r===2||r===4}}};var u={zeroNonZero:function e(t,r){if((t==null||r==null)&&t!==r){return true}if(t==0&&r!=0){return true}else if(t!=0&&r==0){return true}else{return false}},any:function e(t,r){return t!=r},emptyNonEmpty:function e(t,r){var n=G(t);var a=G(r);return n&&!a||!n&&a}};var l=gc.types;var f=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}];var c=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}];var v=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}];var d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}];var h=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}];var p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}];var g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function e(t,r,n){if(t===r){return false}return n.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}];var y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}];var m=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}];var b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}];var x=function e(t,r){if(r.value==="label"){return-t.poolIndex()}else{return r.pfValue}};var w=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}];var E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}];var k=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}];var _=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}];var T=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}];var C=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function e(t,r){if(t===r){return false}return t==="bezier"||r==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}];var S=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}];var P=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}];var A=[];gc.pieBackgroundN=16;A.push({name:"pie-size",type:l.sizeMaybePercent});A.push({name:"pie-hole",type:l.sizeMaybePercent});A.push({name:"pie-start-angle",type:l.angle});for(var M=1;M<=gc.pieBackgroundN;M++){A.push({name:"pie-"+M+"-background-color",type:l.color});A.push({name:"pie-"+M+"-background-size",type:l.percent});A.push({name:"pie-"+M+"-background-opacity",type:l.zeroOneNumber})}var B=[];gc.stripeBackgroundN=16;B.push({name:"stripe-size",type:l.sizeMaybePercent});B.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var I=1;I<=gc.stripeBackgroundN;I++){B.push({name:"stripe-"+I+"-background-color",type:l.color});B.push({name:"stripe-"+I+"-background-size",type:l.percent});B.push({name:"stripe-"+I+"-background-opacity",type:l.zeroOneNumber})}var O=[];var R=gc.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(e){R.forEach(function(t){var r=t+"-"+e.name;var n=e.type,a=e.triggersBounds;O.push({name:r,type:n,triggersBounds:a})})},{});var N=gc.properties=[].concat(p,b,g,y,m,S,h,d,f,c,v,w,E,k,_,A,B,T,C,O,P);var L=gc.propertyGroups={behavior:p,transition:b,visibility:g,overlay:y,underlay:m,ghost:S,commonLabel:h,labelDimensions:d,mainLabel:f,sourceLabel:c,targetLabel:v,nodeBody:w,nodeBorder:E,nodeOutline:k,backgroundImage:_,pie:A,stripe:B,compound:T,edgeLine:C,edgeArrow:O,core:P};var z=gc.propertyGroupNames={};var j=gc.propertyGroupKeys=Object.keys(L);j.forEach(function(e){z[e]=L[e].map(function(e){return e.name});L[e].forEach(function(t){return t.groupKey=e})});var V=gc.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];gc.propertyNames=N.map(function(e){return e.name});for(var F=0;F<N.length;F++){var W=N[F];N[W.name]=W}for(var q=0;q<V.length;q++){var X=V[q];var Y=N[X.pointsTo];var U={name:X.name,alias:true,pointsTo:Y};N.push(U);N[X.name]=U}})();gc.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};gc.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null){return e.defaultProperties}var t=ue({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var r=1;r<=gc.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r);var a=t.value;e[n]=a}return e},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var r=1;r<=gc.stripeBackgroundN;r++){var n=t.name.replace("{{i}}",r);var a=t.value;e[n]=a}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(e,t){gc.arrowPrefixes.forEach(function(r){var n=r+"-"+t.name;var a=t.value;e[n]=a});return e},{}));var r={};for(var n=0;n<this.properties.length;n++){var a=this.properties[n];if(a.pointsTo){continue}var i=a.name;var o=t[i];var s=this.parse(i,o);r[i]=s}e.defaultProperties=r;return e.defaultProperties};gc.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25});this.defaultLength=this.length};var yc={};yc.parse=function(e,t,r,n){var a=this;if(P(t)){return a.parseImplWarn(e,t,r,n)}var i=n==="mapping"||n===true||n===false||n==null?"dontcare":n;var o=r?"t":"f";var s=""+t;var u=Tt(e,s,o,i);var l=a.propCache=a.propCache||[];var f;if(!(f=l[u])){f=l[u]=a.parseImplWarn(e,t,r,n)}if(r||n==="mapping"){f=jt(f);if(f){f.value=jt(f.value)}}return f};yc.parseImplWarn=function(e,t,r,n){var a=this.parseImpl(e,t,r,n);if(!a&&t!=null){Lt("The style property `".concat(e,": ").concat(t,"` is invalid"))}if(a&&(a.name==="width"||a.name==="height")&&t==="label"){Lt("The style value of `label` is deprecated for `"+a.name+"`")}return a};yc.parseImpl=function(e,t,r,n){var a=this;e=H(e);var i=a.properties[e];var o=t;var s=a.types;if(!i){return null}if(t===undefined){return null}if(i.alias){i=i.pointsTo;e=i.name}var u=D(t);if(u){t=t.trim()}var l=i.type;if(!l){return null}if(r&&(t===""||t===null)){return{name:e,value:t,bypass:true,deleteBypass:true}}if(P(t)){return{name:e,value:t,strValue:"fn",mapped:s.fn,bypass:r}}var f,c;if(!u||n||t.length<7||t[1]!=="a");else if(t.length>=7&&t[0]==="d"&&(f=new RegExp(s.data.regex).exec(t))){if(r){return false}var v=s.data;return{name:e,value:f,strValue:""+t,mapped:v,field:f[1],bypass:r}}else if(t.length>=10&&t[0]==="m"&&(c=new RegExp(s.mapData.regex).exec(t))){if(r){return false}if(l.multiple){return false}var d=s.mapData;if(!(l.color||l.number)){return false}var h=this.parse(e,c[4]);if(!h||h.mapped){return false}var p=this.parse(e,c[5]);if(!p||p.mapped){return false}if(h.pfValue===p.pfValue||h.strValue===p.strValue){Lt("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+h.strValue+"`");return this.parse(e,h.strValue)}else if(l.color){var g=h.value;var y=p.value;var m=g[0]===y[0]&&g[1]===y[1]&&g[2]===y[2]&&(g[3]===y[3]||(g[3]==null||g[3]===1)&&(y[3]==null||y[3]===1));if(m){return false}}return{name:e,value:c,strValue:""+t,mapped:d,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:p.value,bypass:r}}if(l.multiple&&n!=="multiple"){var b;if(u){b=t.split(/\s+/)}else if(A(t)){b=t}else{b=[t]}if(l.evenMultiple&&b.length%2!==0){return null}var x=[];var w=[];var E=[];var k="";var _=false;for(var T=0;T<b.length;T++){var C=a.parse(e,b[T],r,"multiple");_=_||D(C.value);x.push(C.value);E.push(C.pfValue!=null?C.pfValue:C.value);w.push(C.units);k+=(T>0?" ":"")+C.strValue}if(l.validate&&!l.validate(x,w)){return null}if(l.singleEnum&&_){if(x.length===1&&D(x[0])){return{name:e,value:x[0],strValue:x[0],bypass:r}}else{return null}}return{name:e,value:x,pfValue:E,strValue:k,bypass:r,units:w}}var S=function n(){for(var a=0;a<l.enums.length;a++){var i=l.enums[a];if(i===t){return{name:e,value:t,strValue:""+t,bypass:r}}}return null};if(l.number){var M;var B="px";if(l.units){M=l.units}if(l.implicitUnits){B=l.implicitUnits}if(!l.unitless){if(u){var I="px|em"+(l.allowPercent?"|\\%":"");if(M){I=M}var R=t.match("^("+J+")("+I+")?"+"$");if(R){t=R[1];M=R[2]||B}}else if(!M||l.implicitUnits){M=B}}t=parseFloat(t);if(isNaN(t)&&l.enums===undefined){return null}if(isNaN(t)&&l.enums!==undefined){t=o;return S()}if(l.integer&&!O(t)){return null}if(l.min!==undefined&&(t<l.min||l.strictMin&&t===l.min)||l.max!==undefined&&(t>l.max||l.strictMax&&t===l.max)){return null}var N={name:e,value:t,strValue:""+t+(M?M:""),units:M,bypass:r};if(l.unitless||M!=="px"&&M!=="em"){N.pfValue=t}else{N.pfValue=M==="px"||!M?t:this.getEmSizeInPixels()*t}if(M==="ms"||M==="s"){N.pfValue=M==="ms"?t:1e3*t}if(M==="deg"||M==="rad"){N.pfValue=M==="rad"?t:Rr(t)}if(M==="%"){N.pfValue=t/100}return N}else if(l.propList){var L=[];var z=""+t;if(z==="none");else{var j=z.split(/\s*,\s*|\s+/);for(var V=0;V<j.length;V++){var F=j[V].trim();if(a.properties[F]){L.push(F)}else{Lt("`"+F+"` is not a valid property name")}}if(L.length===0){return null}}return{name:e,value:L,strValue:L.length===0?"none":L.join(" "),bypass:r}}else if(l.color){var G=de(t);if(!G){return null}return{name:e,value:G,pfValue:G,strValue:"rgb("+G[0]+","+G[1]+","+G[2]+")",bypass:r}}else if(l.regex||l.regexes){if(l.enums){var W=S();if(W){return W}}var q=l.regexes?l.regexes:[l.regex];for(var X=0;X<q.length;X++){var Y=new RegExp(q[X]);var U=Y.exec(t);if(U){return{name:e,value:l.singleRegexMatchValue?U[1]:U,strValue:""+t,bypass:r}}}return null}else if(l.string){return{name:e,value:""+t,strValue:""+t,bypass:r}}else if(l.enums){return S()}else{return null}};var mc=function e(t){if(!(this instanceof mc)){return new mc(t)}if(!j(t)){Rt("A style must have a core reference");return}this._private={cy:t,coreStyle:{}};this.length=0;this.resetToDefault()};var bc=mc.prototype;bc.instanceString=function(){return"style"};bc.clear=function(){var e=this._private;var t=e.cy;var r=t.elements();for(var n=0;n<this.length;n++){this[n]=undefined}this.length=0;e.contextStyles={};e.propDiffs={};this.cleanElements(r,true);r.forEach(function(e){var t=e[0]._private;t.styleDirty=true;t.appliedInitStyle=false});return this};bc.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};bc.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};bc.selector=function(e){var t=e==="core"?null:new Xu(e);var r=this.length++;this[r]={selector:t,properties:[],mappedProperties:[],index:r};return this};bc.css=function(){var e=this;var t=arguments;if(t.length===1){var r=t[0];for(var n=0;n<e.properties.length;n++){var a=e.properties[n];var i=r[a.name];if(i===undefined){i=r[K(a.name)]}if(i!==undefined){this.cssRule(a.name,i)}}}else if(t.length===2){this.cssRule(t[0],t[1])}return this};bc.style=bc.css;bc.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r);this[n].properties[r.name]=r;if(r.name.match(/pie-(\d+)-background-size/)&&r.value){this._private.hasPie=true}if(r.name.match(/stripe-(\d+)-background-size/)&&r.value){this._private.hasStripe=true}if(r.mapped){this[n].mappedProperties.push(r)}var a=!this[n].selector;if(a){this._private.coreStyle[r.name]=r}}return this};bc.append=function(e){if(V(e)){e.appendToStyle(this)}else if(A(e)){this.appendFromJson(e)}else if(D(e)){this.appendFromString(e)}return this};mc.fromJson=function(e,t){var r=new mc(e);r.fromJson(t);return r};mc.fromString=function(e,t){return new mc(e).fromString(t)};[uc,cc,vc,dc,hc,pc,gc,yc].forEach(function(e){ue(bc,e)});mc.types=bc.types;mc.properties=bc.properties;mc.propertyGroups=bc.propertyGroups;mc.propertyGroupNames=bc.propertyGroupNames;mc.propertyGroupKeys=bc.propertyGroupKeys;var xc={style:function e(t){if(t){var r=this.setStyle(t);r.update()}return this._private.style},setStyle:function e(t){var r=this._private;if(V(t)){r.style=t.generateStyle(this)}else if(A(t)){r.style=mc.fromJson(this,t)}else if(D(t)){r.style=mc.fromString(this,t)}else{r.style=mc(this)}return r.style},updateStyle:function e(){this.mutableElements().updateStyle()}};var wc="single";var Ec={autolock:function e(t){if(t!==undefined){this._private.autolock=t?true:false}else{return this._private.autolock}return this},autoungrabify:function e(t){if(t!==undefined){this._private.autoungrabify=t?true:false}else{return this._private.autoungrabify}return this},autounselectify:function e(t){if(t!==undefined){this._private.autounselectify=t?true:false}else{return this._private.autounselectify}return this},selectionType:function e(t){var r=this._private;if(r.selectionType==null){r.selectionType=wc}if(t!==undefined){if(t==="additive"||t==="single"){r.selectionType=t}}else{return r.selectionType}return this},panningEnabled:function e(t){if(t!==undefined){this._private.panningEnabled=t?true:false}else{return this._private.panningEnabled}return this},userPanningEnabled:function e(t){if(t!==undefined){this._private.userPanningEnabled=t?true:false}else{return this._private.userPanningEnabled}return this},zoomingEnabled:function e(t){if(t!==undefined){this._private.zoomingEnabled=t?true:false}else{return this._private.zoomingEnabled}return this},userZoomingEnabled:function e(t){if(t!==undefined){this._private.userZoomingEnabled=t?true:false}else{return this._private.userZoomingEnabled}return this},boxSelectionEnabled:function e(t){if(t!==undefined){this._private.boxSelectionEnabled=t?true:false}else{return this._private.boxSelectionEnabled}return this},pan:function e(){var t=arguments;var e=this._private.pan;var r,n,a,i,o;switch(t.length){case 0:return e;case 1:if(D(t[0])){r=t[0];return e[r]}else if(M(t[0])){if(!this._private.panningEnabled){return this}a=t[0];i=a.x;o=a.y;if(I(i)){e.x=i}if(I(o)){e.y=o}this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled){return this}r=t[0];n=t[1];if((r==="x"||r==="y")&&I(n)){e[r]=n}this.emit("pan viewport");break}this.notify("viewport");return this},panBy:function e(t,r){var n=arguments;var a=this._private.pan;var i,o,s,u,l;if(!this._private.panningEnabled){return this}switch(n.length){case 1:if(M(t)){s=n[0];u=s.x;l=s.y;if(I(u)){a.x+=u}if(I(l)){a.y+=l}this.emit("pan viewport")}break;case 2:i=t;o=r;if((i==="x"||i==="y")&&I(o)){a[i]+=o}this.emit("pan viewport");break}this.notify("viewport");return this},gc:function e(){this.notify("gc")},fit:function e(t,r){var n=this.getFitViewport(t,r);if(n){var a=this._private;a.zoom=n.zoom;a.pan=n.pan;this.emit("pan zoom viewport");this.notify("viewport")}return this},getFitViewport:function e(t,r){if(I(t)&&r===undefined){r=t;t=undefined}if(!this._private.panningEnabled||!this._private.zoomingEnabled){return}var n;if(D(t)){var a=t;t=this.$(a)}else if(q(t)){var i=t;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2};n.w=n.x2-n.x1;n.h=n.y2-n.y1}else if(!N(t)){t=this.mutableElements()}if(N(t)&&t.empty()){return}n=n||t.boundingBox();var o=this.width();var s=this.height();var u;r=I(r)?r:0;if(!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*r)/n.w,(s-2*r)/n.h);u=u>this._private.maxZoom?this._private.maxZoom:u;u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}return},zoomRange:function e(t,r){var n=this._private;if(r==null){var a=t;t=a.min;r=a.max}if(I(t)&&I(r)&&t<=r){n.minZoom=t;n.maxZoom=r}else if(I(t)&&r===undefined&&t<=n.maxZoom){n.minZoom=t}else if(I(r)&&t===undefined&&r>=n.minZoom){n.maxZoom=r}return this},minZoom:function e(t){if(t===undefined){return this._private.minZoom}else{return this.zoomRange({min:t})}},maxZoom:function e(t){if(t===undefined){return this._private.maxZoom}else{return this.zoomRange({max:t})}},getZoomedViewport:function e(t){var r=this._private;var n=r.pan;var a=r.zoom;var i;var o;var s=false;if(!r.zoomingEnabled){s=true}if(I(t)){o=t}else if(M(t)){o=t.level;if(t.position!=null){i=Dr(t.position,a,n)}else if(t.renderedPosition!=null){i=t.renderedPosition}if(i!=null&&!r.panningEnabled){s=true}}o=o>r.maxZoom?r.maxZoom:o;o=o<r.minZoom?r.minZoom:o;if(s||!I(o)||o===a||i!=null&&(!I(i.x)||!I(i.y))){return null}if(i!=null){var u=n;var l=a;var f=o;var c={x:-f/l*(i.x-u.x)+i.x,y:-f/l*(i.y-u.y)+i.y};return{zoomed:true,panned:true,zoom:f,pan:c}}else{return{zoomed:true,panned:false,zoom:o,pan:n}}},zoom:function e(t){if(t===undefined){return this._private.zoom}else{var r=this.getZoomedViewport(t);var n=this._private;if(r==null||!r.zoomed){return this}n.zoom=r.zoom;if(r.panned){n.pan.x=r.pan.x;n.pan.y=r.pan.y}this.emit("zoom"+(r.panned?" pan":"")+" viewport");this.notify("viewport");return this}},viewport:function e(t){var r=this._private;var n=true;var a=true;var i=[];var o=false;var s=false;if(!t){return this}if(!I(t.zoom)){n=false}if(!M(t.pan)){a=false}if(!n&&!a){return this}if(n){var u=t.zoom;if(u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled){o=true}else{r.zoom=u;i.push("zoom")}}if(a&&(!o||!t.cancelOnFailedZoom)&&r.panningEnabled){var l=t.pan;if(I(l.x)){r.pan.x=l.x;s=false}if(I(l.y)){r.pan.y=l.y;s=false}if(!s){i.push("pan")}}if(i.length>0){i.push("viewport");this.emit(i.join(" "));this.notify("viewport")}return this},center:function e(t){var r=this.getCenterPan(t);if(r){this._private.pan=r;this.emit("pan viewport");this.notify("viewport")}return this},getCenterPan:function e(t,r){if(!this._private.panningEnabled){return}if(D(t)){var n=t;t=this.mutableElements().filter(n)}else if(!N(t)){t=this.mutableElements()}if(t.length===0){return}var a=t.boundingBox();var i=this.width();var o=this.height();r=r===undefined?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s},reset:function e(){if(!this._private.panningEnabled||!this._private.zoomingEnabled){return this}this.viewport({pan:{x:0,y:0},zoom:1});return this},invalidateSize:function e(){this._private.sizeCache=null},size:function e(){var t=this._private;var r=t.container;var n=this;return t.sizeCache=t.sizeCache||(r?function(){var e=n.window().getComputedStyle(r);var t=function t(r){return parseFloat(e.getPropertyValue(r))};return{width:r.clientWidth-t("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}}():{width:1,height:1})},width:function e(){return this.size().width},height:function e(){return this.size().height},extent:function e(){var t=this._private.pan;var r=this._private.zoom;var n=this.renderedExtent();var a={x1:(n.x1-t.x)/r,x2:(n.x2-t.x)/r,y1:(n.y1-t.y)/r,y2:(n.y2-t.y)/r};a.w=a.x2-a.x1;a.h=a.y2-a.y1;return a},renderedExtent:function e(){var t=this.width();var r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function e(t){if(t)this._private.multiClickDebounceTime=t;else return this._private.multiClickDebounceTime;return this}};Ec.centre=Ec.center;Ec.autolockNodes=Ec.autolock;Ec.autoungrabifyNodes=Ec.autoungrabify;var kc={data:yu.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,updateStyle:true}),removeData:yu.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,updateStyle:true}),scratch:yu.data({field:"scratch",bindingEvent:"scratch",allowBinding:true,allowSetting:true,settingEvent:"scratch",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,updateStyle:true}),removeScratch:yu.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:true,updateStyle:true})};kc.attr=kc.data;kc.removeAttr=kc.removeData;var _c=function e(t){var r=this;t=ue({},t);var n=t.container;if(n&&!R(n)&&R(n[0])){n=n[0]}var a=n?n._cyreg:null;a=a||{};if(a&&a.cy){a.cy.destroy();a={}}var i=a.readies=a.readies||[];if(n){n._cyreg=a}a.cy=r;var o=w!==undefined&&n!==undefined&&!t.headless;var s=t;s.layout=ue({name:o?"grid":"null"},s.layout);s.renderer=ue({name:o?"canvas":"null"},s.renderer);var u=function e(t,r,n){if(r!==undefined){return r}else if(n!==undefined){return n}else{return t}};var l=this._private={container:n,ready:false,options:s,elements:new zf(this),listeners:[],aniEles:new zf(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:false,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(true,s.zoomingEnabled),userZoomingEnabled:u(true,s.userZoomingEnabled),panningEnabled:u(true,s.panningEnabled),userPanningEnabled:u(true,s.userPanningEnabled),boxSelectionEnabled:u(true,s.boxSelectionEnabled),autolock:u(false,s.autolock,s.autolockNodes),autoungrabify:u(false,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(false,s.autounselectify),styleEnabled:s.styleEnabled===undefined?o:s.styleEnabled,zoom:I(s.zoom)?s.zoom:1,pan:{x:M(s.pan)&&I(s.pan.x)?s.pan.x:0,y:M(s.pan)&&I(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:false,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter();this.selectionType(s.selectionType);this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function e(t,r){var n=t.some(X);if(n){return di.all(t).then(r)}else{r(t)}};if(l.styleEnabled){r.setStyle([])}var c=ue({},s,s.renderer);r.initRenderer(c);var v=function e(t,n,a){r.notifications(false);var i=r.mutableElements();if(i.length>0){i.remove()}if(t!=null){if(M(t)||A(t)){r.add(t)}}r.one("layoutready",function(e){r.notifications(true);r.emit(e);r.one("load",n);r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",a);r.emit("done")});var o=ue({},r._private.options.layout);o.eles=r.elements();r.layout(o).run()};f([s.style,s.elements],function(e){var t=e[0];var n=e[1];if(l.styleEnabled){r.style().append(t)}v(n,function(){r.startAnimationLoop();l.ready=true;if(P(s.ready)){r.on("ready",s.ready)}for(var e=0;e<i.length;e++){var t=i[e];r.on("ready",t)}if(a){a.readies=[]}r.emit("ready")},s.done)})};var Tc=_c.prototype;ue(Tc,{instanceString:function e(){return"core"},isReady:function e(){return this._private.ready},destroyed:function e(){return this._private.destroyed},ready:function e(t){if(this.isReady()){this.emitter().emit("ready",[],t)}else{this.on("ready",t)}return this},destroy:function e(){var t=this;if(t.destroyed())return;t.stopAnimationLoop();t.destroyRenderer();this.emit("destroy");t._private.destroyed=true;return t},hasElementWithId:function e(t){return this._private.elements.hasElementWithId(t)},getElementById:function e(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function e(){return this._private.hasCompoundNodes},headless:function e(){return this._private.renderer.isHeadless()},styleEnabled:function e(){return this._private.styleEnabled},addToPool:function e(t){this._private.elements.merge(t);return this},removeFromPool:function e(t){this._private.elements.unmerge(t);return this},container:function e(){return this._private.container||null},window:function e(){var t=this._private.container;if(t==null)return w;var r=this._private.container.ownerDocument;if(r===undefined||r==null){return w}return r.defaultView||w},mount:function e(t){if(t==null){return}var r=this;var n=r._private;var a=n.options;if(!R(t)&&R(t[0])){t=t[0]}r.stopAnimationLoop();r.destroyRenderer();n.container=t;n.styleEnabled=true;r.invalidateSize();r.initRenderer(ue({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name}));r.startAnimationLoop();r.style(a.style);r.emit("mount");return r},unmount:function e(){var t=this;t.stopAnimationLoop();t.destroyRenderer();t.initRenderer({name:"null"});t.emit("unmount");return t},options:function e(){return jt(this._private.options)},json:function e(t){var r=this;var n=r._private;var a=r.mutableElements();var i=function e(t){return r.getElementById(t.id())};if(M(t)){r.startBatch();if(t.elements){var o={};var s=function e(t,n){var a=[];var i=[];for(var s=0;s<t.length;s++){var u=t[s];if(!u.data.id){Lt("cy.json() cannot handle elements without an ID attribute");continue}var l=""+u.data.id;var f=r.getElementById(l);o[l]=true;if(f.length!==0){i.push({ele:f,json:u})}else{if(n){u.group=n;a.push(u)}else{a.push(u)}}}r.add(a);for(var c=0;c<i.length;c++){var v=i[c],d=v.ele,h=v.json;d.json(h)}};if(A(t.elements)){s(t.elements)}else{var u=["nodes","edges"];for(var l=0;l<u.length;l++){var f=u[l];var c=t.elements[f];if(A(c)){s(c,f)}}}var v=r.collection();a.filter(function(e){return!o[e.id()]}).forEach(function(e){if(e.isParent()){v.merge(e)}else{e.remove()}});v.forEach(function(e){return e.children().move({parent:null})});v.forEach(function(e){return i(e).remove()})}if(t.style){r.style(t.style)}if(t.zoom!=null&&t.zoom!==n.zoom){r.zoom(t.zoom)}if(t.pan){if(t.pan.x!==n.pan.x||t.pan.y!==n.pan.y){r.pan(t.pan)}}if(t.data){r.data(t.data)}var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"];for(var h=0;h<d.length;h++){var p=d[h];if(t[p]!=null){r[p](t[p])}}r.endBatch();return this}else{var g=!!t;var e={};if(g){e.elements=this.elements().map(function(e){return e.json()})}else{e.elements={};a.forEach(function(t){var r=t.group();if(!e.elements[r]){e.elements[r]=[]}e.elements[r].push(t.json())})}if(this._private.styleEnabled){e.style=r.style().json()}e.data=jt(r.data());var y=n.options;e.zoomingEnabled=n.zoomingEnabled;e.userZoomingEnabled=n.userZoomingEnabled;e.zoom=n.zoom;e.minZoom=n.minZoom;e.maxZoom=n.maxZoom;e.panningEnabled=n.panningEnabled;e.userPanningEnabled=n.userPanningEnabled;e.pan=jt(n.pan);e.boxSelectionEnabled=n.boxSelectionEnabled;e.renderer=jt(y.renderer);e.hideEdgesOnViewport=y.hideEdgesOnViewport;e.textureOnViewport=y.textureOnViewport;e.wheelSensitivity=y.wheelSensitivity;e.motionBlur=y.motionBlur;e.multiClickDebounceTime=y.multiClickDebounceTime;return e}}});Tc.$id=Tc.getElementById;[Vf,Qf,tc,rc,nc,ac,oc,sc,xc,Ec,kc].forEach(function(e){ue(Tc,e)});var Cc={fit:true,directed:false,padding:30,circle:false,grid:false,spacingFactor:1.75,boundingBox:undefined,avoidOverlap:true,nodeDimensionsIncludeLabels:false,roots:undefined,depthSort:undefined,animate:false,animationDuration:500,animationEasing:undefined,animateFilter:function e(t,r){return true},ready:undefined,stop:undefined,transform:function e(t,r){return r}};var Sc={maximal:false,acyclic:false};var Dc=function e(t){return t.scratch("breadthfirst")};var Pc=function e(t,r){return t.scratch("breadthfirst",r)};function Ac(e){this.options=ue({},Cc,Sc,e)}Ac.prototype.run=function(){var e=this.options;var t=e.cy;var r=e.eles;var n=r.nodes().filter(function(e){return e.isChildless()});var a=r;var i=e.directed;var o=e.acyclic||e.maximal||e.maximalAdjustments>0;var s=!!e.boundingBox;var u=t.extent();var l=Yr(s?e.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h});var f;if(N(e.roots)){f=e.roots}else if(A(e.roots)){var c=[];for(var v=0;v<e.roots.length;v++){var d=e.roots[v];var h=t.getElementById(d);c.push(h)}f=t.collection(c)}else if(D(e.roots)){f=t.$(e.roots)}else{if(i){f=n.roots()}else{var p=r.components();f=t.collection();var g=function e(){var t=p[y];var r=t.maxDegree(false);var n=t.filter(function(e){return e.degree(false)===r});f=f.add(n)};for(var y=0;y<p.length;y++){g()}}}var m=[];var b={};var x=function e(t,r){if(m[r]==null){m[r]=[]}var n=m[r].length;m[r].push(t);Pc(t,{index:n,depth:r})};var w=function e(t,r){var n=Dc(t),a=n.depth,i=n.index;m[a][i]=null;if(t.isChildless())x(t,r)};a.bfs({roots:f,directed:e.directed,visit:function e(t,r,n,a,i){var o=t[0];var s=o.id();if(o.isChildless())x(o,i);b[s]=true}});var E=[];for(var k=0;k<n.length;k++){var _=n[k];if(b[_.id()]){continue}else{E.push(_)}}var T=function e(t){var r=m[t];for(var n=0;n<r.length;n++){var a=r[n];if(a==null){r.splice(n,1);n--;continue}Pc(a,{depth:t,index:n})}};var C=function t(n,a){var i=Dc(n);var o=n.incomers().filter(function(e){return e.isNode()&&r.has(e)});var s=-1;var u=n.id();for(var l=0;l<o.length;l++){var f=o[l];var c=Dc(f);s=Math.max(s,c.depth)}if(i.depth<=s){if(!e.acyclic&&a[u]){return null}var v=s+1;w(n,v);a[u]=v;return true}return false};if(i&&o){var S=[];var P={};var M=function e(t){return S.push(t)};var B=function e(){return S.shift()};n.forEach(function(e){return S.push(e)});while(S.length>0){var I=B();var O=C(I,P);if(O){I.outgoers().filter(function(e){return e.isNode()&&r.has(e)}).forEach(M)}else if(O===null){Lt("Detected double maximal shift for node `"+I.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var R=0;if(e.avoidOverlap){for(var L=0;L<n.length;L++){var z=n[L];var j=z.layoutDimensions(e);var V=j.w;var F=j.h;R=Math.max(R,V,F)}}var G={};var W=function e(t){if(G[t.id()]){return G[t.id()]}var r=Dc(t).depth;var a=t.neighborhood();var i=0;var o=0;for(var s=0;s<a.length;s++){var u=a[s];if(u.isEdge()||u.isParent()||!n.has(u)){continue}var l=Dc(u);if(l==null){continue}var f=l.index;var c=l.depth;if(f==null||c==null){continue}var v=m[c].length;if(c<r){i+=f/v;o++}}o=Math.max(1,o);i=i/o;if(o===0){i=0}G[t.id()]=i;return i};var q=function e(t,r){var n=W(t);var a=W(r);var i=n-a;if(i===0){return oe(t.id(),r.id())}else{return i}};if(e.depthSort!==undefined){q=e.depthSort}var X=m.length;for(var Y=0;Y<X;Y++){m[Y].sort(q);T(Y)}var U=[];for(var H=0;H<E.length;H++){U.push(E[H])}var K=function e(){for(var t=0;t<X;t++){T(t)}};if(U.length){m.unshift(U);X=m.length;K()}var Z=0;for(var $=0;$<X;$++){Z=Math.max(m[$].length,Z)}var Q={x:l.x1+l.w/2,y:l.y1+l.h/2};var J=n.reduce(function(t,r){return function(e){return{w:t.w===-1?e.w:(t.w+e.w)/2,h:t.h===-1?e.h:(t.h+e.h)/2}}(r.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}))},{w:-1,h:-1});var ee=Math.max(X===1?0:s?(l.h-e.padding*2-J.h)/(X-1):(l.h-e.padding*2-J.h)/(X+1),R);var te=m.reduce(function(e,t){return Math.max(e,t.length)},0);var re=function t(r){var n=Dc(r),a=n.depth,i=n.index;if(e.circle){var o=Math.min(l.w/2/X,l.h/2/X);o=Math.max(o,R);var u=o*a+o-(X>0&&m[0].length<=3?o/2:0);var f=2*Math.PI/m[a].length*i;if(a===0&&m[0].length===1){u=1}return{x:Q.x+u*Math.cos(f),y:Q.y+u*Math.sin(f)}}else{var c=m[a].length;var v=Math.max(c===1?0:s?(l.w-e.padding*2-J.w)/((e.grid?te:c)-1):(l.w-e.padding*2-J.w)/((e.grid?te:c)+1),R);var d={x:Q.x+(i+1-(c+1)/2)*v,y:Q.y+(a+1-(X+1)/2)*ee};return d}};r.nodes().layoutPositions(this,e,re);return this};var Mc={fit:true,padding:30,boundingBox:undefined,avoidOverlap:true,nodeDimensionsIncludeLabels:false,spacingFactor:undefined,radius:undefined,startAngle:3/2*Math.PI,sweep:undefined,clockwise:true,sort:undefined,animate:false,animationDuration:500,animationEasing:undefined,animateFilter:function e(t,r){return true},ready:undefined,stop:undefined,transform:function e(t,r){return r}};function Bc(e){this.options=ue({},Mc,e)}Bc.prototype.run=function(){var e=this.options;var t=e;var r=e.cy;var n=t.eles;var a=t.counterclockwise!==undefined?!t.counterclockwise:t.clockwise;var i=n.nodes().not(":parent");if(t.sort){i=i.sort(t.sort)}var o=Yr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});var s={x:o.x1+o.w/2,y:o.y1+o.h/2};var u=t.sweep===undefined?2*Math.PI-2*Math.PI/i.length:t.sweep;var l=u/Math.max(1,i.length-1);var f;var c=0;for(var v=0;v<i.length;v++){var d=i[v];var h=d.layoutDimensions(t);var p=h.w;var g=h.h;c=Math.max(c,p,g)}if(I(t.radius)){f=t.radius}else if(i.length<=1){f=0}else{f=Math.min(o.h,o.w)/2-c}if(i.length>1&&t.avoidOverlap){c*=1.75;var y=Math.cos(l)-Math.cos(0);var m=Math.sin(l)-Math.sin(0);var b=Math.sqrt(c*c/(y*y+m*m));f=Math.max(b,f)}var x=function e(r,n){var i=t.startAngle+n*l*(a?1:-1);var o=f*Math.cos(i);var u=f*Math.sin(i);var c={x:s.x+o,y:s.y+u};return c};n.nodes().layoutPositions(this,t,x);return this};var Ic={fit:true,padding:30,startAngle:3/2*Math.PI,sweep:undefined,clockwise:true,equidistant:false,minNodeSpacing:10,boundingBox:undefined,avoidOverlap:true,nodeDimensionsIncludeLabels:false,height:undefined,width:undefined,spacingFactor:undefined,concentric:function e(t){return t.degree()},levelWidth:function e(t){return t.maxDegree()/4},animate:false,animationDuration:500,animationEasing:undefined,animateFilter:function e(t,r){return true},ready:undefined,stop:undefined,transform:function e(t,r){return r}};function Oc(e){this.options=ue({},Ic,e)}Oc.prototype.run=function(){var e=this.options;var t=e;var r=t.counterclockwise!==undefined?!t.counterclockwise:t.clockwise;var n=e.cy;var a=t.eles;var i=a.nodes().not(":parent");var o=Yr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});var s={x:o.x1+o.w/2,y:o.y1+o.h/2};var u=[];var l=0;for(var f=0;f<i.length;f++){var c=i[f];var v=undefined;v=t.concentric(c);u.push({value:v,node:c});c._private.scratch.concentric=v}i.updateStyle();for(var d=0;d<i.length;d++){var h=i[d];var p=h.layoutDimensions(t);l=Math.max(l,p.w,p.h)}u.sort(function(e,t){return t.value-e.value});var g=t.levelWidth(i);var y=[[]];var m=y[0];for(var b=0;b<u.length;b++){var x=u[b];if(m.length>0){var w=Math.abs(m[0].value-x.value);if(w>=g){m=[];y.push(m)}}m.push(x)}var E=l+t.minNodeSpacing;if(!t.avoidOverlap){var k=y.length>0&&y[0].length>1;var _=Math.min(o.w,o.h)/2-E;var T=_/(y.length+k?1:0);E=Math.min(E,T)}var C=0;for(var S=0;S<y.length;S++){var D=y[S];var P=t.sweep===undefined?2*Math.PI-2*Math.PI/D.length:t.sweep;var A=D.dTheta=P/Math.max(1,D.length-1);if(D.length>1&&t.avoidOverlap){var M=Math.cos(A)-Math.cos(0);var B=Math.sin(A)-Math.sin(0);var I=Math.sqrt(E*E/(M*M+B*B));C=Math.max(I,C)}D.r=C;C+=E}if(t.equidistant){var O=0;var R=0;for(var N=0;N<y.length;N++){var L=y[N];var z=L.r-R;O=Math.max(O,z)}R=0;for(var j=0;j<y.length;j++){var V=y[j];if(j===0){R=V.r}V.r=R;R+=O}}var F={};for(var G=0;G<y.length;G++){var W=y[G];var q=W.dTheta;var X=W.r;for(var Y=0;Y<W.length;Y++){var U=W[Y];var H=t.startAngle+(r?1:-1)*q*Y;var K={x:s.x+X*Math.cos(H),y:s.y+X*Math.sin(H)};F[U.node.id()]=K}}a.nodes().layoutPositions(this,t,function(e){var t=e.id();return F[t]});return this};var Rc;var Nc={ready:function e(){},stop:function e(){},animate:true,animationEasing:undefined,animationDuration:undefined,animateFilter:function e(t,r){return true},animationThreshold:250,refresh:20,fit:true,padding:30,boundingBox:undefined,nodeDimensionsIncludeLabels:false,randomize:false,componentSpacing:40,nodeRepulsion:function e(t){return 2048},nodeOverlap:4,idealEdgeLength:function e(t){return 32},edgeElasticity:function e(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Lc(e){this.options=ue({},Nc,e);this.options.layout=this;var t=this.options.eles.nodes();var r=this.options.eles.edges();var n=r.filter(function(e){var r=e.source().data("id");var n=e.target().data("id");var a=t.some(function(e){return e.data("id")===r});var i=t.some(function(e){return e.data("id")===n});return!a||!i});this.options.eles=this.options.eles.not(n)}Lc.prototype.run=function(){var e=this.options;var t=e.cy;var r=this;r.stopped=false;if(e.animate===true||e.animate===false){r.emit({type:"layoutstart",layout:r})}if(true===e.debug){Rc=true}else{Rc=false}var n=zc(t,r,e);if(Rc){Fc(n)}if(e.randomize){Gc(n)}var a=dt();var i=function r(){qc(n,t,e);if(true===e.fit){t.fit(e.padding)}};var o=function t(a){if(r.stopped||a>=e.numIter){return false}Xc(n,e);n.temperature=n.temperature*e.coolingFactor;if(n.temperature<e.minTemp){return false}return true};var s=function t(){if(e.animate===true||e.animate===false){i();r.one("layoutstop",e.stop);r.emit({type:"layoutstop",layout:r})}else{var a=e.eles.nodes();var o=Wc(n,e,a);a.layoutPositions(r,e,o)}};var u=0;var l=true;if(e.animate===true){var f=function t(){var r=0;while(l&&r<e.refresh){l=o(u);u++;r++}if(!l){nv(n,e);s()}else{var c=dt();if(c-a>=e.animationThreshold){i()}vt(f)}};f()}else{while(l){l=o(u);u++}nv(n,e);s()}return this};Lc.prototype.stop=function(){this.stopped=true;if(this.thread){this.thread.stop()}this.emit("layoutstop");return this};Lc.prototype.destroy=function(){if(this.thread){this.thread.stop()}return this};var zc=function e(t,r,n){var a=n.eles.edges();var i=n.eles.nodes();var o=Yr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});var s={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o};var u=n.eles.components();var l={};for(var f=0;f<u.length;f++){var c=u[f];for(var v=0;v<c.length;v++){var d=c[v];l[d.id()]=f}}for(var f=0;f<s.nodeSize;f++){var h=i[f];var p=h.layoutDimensions(n);var g={};g.isLocked=h.locked();g.id=h.data("id");g.parentId=h.data("parent");g.cmptId=l[h.id()];g.children=[];g.positionX=h.position("x");g.positionY=h.position("y");g.offsetX=0;g.offsetY=0;g.height=p.w;g.width=p.h;g.maxX=g.positionX+g.width/2;g.minX=g.positionX-g.width/2;g.maxY=g.positionY+g.height/2;g.minY=g.positionY-g.height/2;g.padLeft=parseFloat(h.style("padding"));g.padRight=parseFloat(h.style("padding"));g.padTop=parseFloat(h.style("padding"));g.padBottom=parseFloat(h.style("padding"));g.nodeRepulsion=P(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion;s.layoutNodes.push(g);s.idToIndex[g.id]=f}var y=[];var m=0;var b=-1;var x=[];for(var f=0;f<s.nodeSize;f++){var h=s.layoutNodes[f];var w=h.parentId;if(null!=w){s.layoutNodes[s.idToIndex[w]].children.push(h.id)}else{y[++b]=h.id;x.push(h.id)}}s.graphSet.push(x);while(m<=b){var E=y[m++];var k=s.idToIndex[E];var d=s.layoutNodes[k];var _=d.children;if(_.length>0){s.graphSet.push(_);for(var f=0;f<_.length;f++){y[++b]=_[f]}}}for(var f=0;f<s.graphSet.length;f++){var T=s.graphSet[f];for(var v=0;v<T.length;v++){var C=s.idToIndex[T[v]];s.indexToGraph[C]=f}}for(var f=0;f<s.edgeSize;f++){var S=a[f];var D={};D.id=S.data("id");D.sourceId=S.data("source");D.targetId=S.data("target");var A=P(n.idealEdgeLength)?n.idealEdgeLength(S):n.idealEdgeLength;var M=P(n.edgeElasticity)?n.edgeElasticity(S):n.edgeElasticity;var B=s.idToIndex[D.sourceId];var I=s.idToIndex[D.targetId];var O=s.indexToGraph[B];var R=s.indexToGraph[I];if(O!=R){var N=jc(D.sourceId,D.targetId,s);var L=s.graphSet[N];var z=0;var g=s.layoutNodes[B];while(-1===L.indexOf(g.id)){g=s.layoutNodes[s.idToIndex[g.parentId]];z++}g=s.layoutNodes[I];while(-1===L.indexOf(g.id)){g=s.layoutNodes[s.idToIndex[g.parentId]];z++}A*=z*n.nestingFactor}D.idealLength=A;D.elasticity=M;s.layoutEdges.push(D)}return s};var jc=function e(t,r,n){var a=Vc(t,r,0,n);if(2>a.count){return 0}else{return a.graph}};var Vc=function e(t,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(t)&&-1<i.indexOf(r)){return{count:2,graph:n}}var o=0;for(var s=0;s<i.length;s++){var u=i[s];var l=a.idToIndex[u];var f=a.layoutNodes[l].children;if(0===f.length){continue}var c=a.indexToGraph[a.idToIndex[f[0]]];var v=Vc(t,r,c,a);if(0===v.count){continue}else if(1===v.count){o++;if(2===o){break}}else{return v}}return{count:o,graph:n}};var Fc;var Gc=function e(t,r){var n=t.clientWidth;var a=t.clientHeight;for(var i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];if(0===o.children.length&&!o.isLocked){o.positionX=Math.random()*n;o.positionY=Math.random()*a}}};var Wc=function e(t,r,n){var a=t.boundingBox;var i={x1:Infinity,x2:-Infinity,y1:Infinity,y2:-Infinity};if(r.boundingBox){n.forEach(function(e){var r=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,r.positionX);i.x2=Math.max(i.x2,r.positionX);i.y1=Math.min(i.y1,r.positionY);i.y2=Math.max(i.y2,r.positionY)});i.w=i.x2-i.x1;i.h=i.y2-i.y1}return function(e,n){var o=t.layoutNodes[t.idToIndex[e.data("id")]];if(r.boundingBox){var s=i.w===0?.5:(o.positionX-i.x1)/i.w;var u=i.h===0?.5:(o.positionY-i.y1)/i.h;return{x:a.x1+s*a.w,y:a.y1+u*a.h}}else{return{x:o.positionX,y:o.positionY}}}};var qc=function e(t,r,n){var a=n.layout;var i=n.eles.nodes();var o=Wc(t,n,i);i.positions(o);if(true!==t.ready){t.ready=true;a.one("layoutready",n.ready);a.emit({type:"layoutready",layout:this})}};var Xc=function e(t,r,n){Yc(t,r);$c(t);Qc(t,r);Jc(t);ev(t)};var Yc=function e(t,r){for(var n=0;n<t.graphSet.length;n++){var a=t.graphSet[n];var i=a.length;for(var o=0;o<i;o++){var s=t.layoutNodes[t.idToIndex[a[o]]];for(var u=o+1;u<i;u++){var l=t.layoutNodes[t.idToIndex[a[u]]];Hc(s,l,t,r)}}}};var Uc=function e(t){return-1+2*t*Math.random()};var Hc=function e(t,r,n,a){var i=t.cmptId;var o=r.cmptId;if(i!==o&&!n.isCompound){return}var s=r.positionX-t.positionX;var u=r.positionY-t.positionY;var l=1;if(0===s&&0===u){s=Uc(l);u=Uc(l)}var f=Kc(t,r,s,u);if(f>0){var c=a.nodeOverlap*f;var v=Math.sqrt(s*s+u*u);var d=c*s/v;var h=c*u/v}else{var p=Zc(t,s,u);var g=Zc(r,-1*s,-1*u);var y=g.x-p.x;var m=g.y-p.y;var b=y*y+m*m;var v=Math.sqrt(b);var c=(t.nodeRepulsion+r.nodeRepulsion)/b;var d=c*y/v;var h=c*m/v}if(!t.isLocked){t.offsetX-=d;t.offsetY-=h}if(!r.isLocked){r.offsetX+=d;r.offsetY+=h}return};var Kc=function e(t,r,n,a){if(n>0){var i=t.maxX-r.minX}else{var i=r.maxX-t.minX}if(a>0){var o=t.maxY-r.minY}else{var o=r.maxY-t.minY}if(i>=0&&o>=0){return Math.sqrt(i*i+o*o)}else{return 0}};var Zc=function e(t,r,n){var a=t.positionX;var i=t.positionY;var o=t.height||1;var s=t.width||1;var u=n/r;var l=o/s;var f={};if(0===r&&0<n){f.x=a;f.y=i+o/2;return f}if(0===r&&0>n){f.x=a;f.y=i+o/2;return f}if(0<r&&-1*l<=u&&u<=l){f.x=a+s/2;f.y=i+s*n/2/r;return f}if(0>r&&-1*l<=u&&u<=l){f.x=a-s/2;f.y=i-s*n/2/r;return f}if(0<n&&(u<=-1*l||u>=l)){f.x=a+o*r/2/n;f.y=i+o/2;return f}if(0>n&&(u<=-1*l||u>=l)){f.x=a-o*r/2/n;f.y=i-o/2;return f}return f};var $c=function e(t,r){for(var n=0;n<t.edgeSize;n++){var a=t.layoutEdges[n];var i=t.idToIndex[a.sourceId];var o=t.layoutNodes[i];var s=t.idToIndex[a.targetId];var u=t.layoutNodes[s];var l=u.positionX-o.positionX;var f=u.positionY-o.positionY;if(0===l&&0===f){continue}var c=Zc(o,l,f);var v=Zc(u,-1*l,-1*f);var d=v.x-c.x;var h=v.y-c.y;var p=Math.sqrt(d*d+h*h);var g=Math.pow(a.idealLength-p,2)/a.elasticity;if(0!==p){var y=g*d/p;var m=g*h/p}else{var y=0;var m=0}if(!o.isLocked){o.offsetX+=y;o.offsetY+=m}if(!u.isLocked){u.offsetX-=y;u.offsetY-=m}}};var Qc=function e(t,r){if(r.gravity===0){return}var n=1;for(var a=0;a<t.graphSet.length;a++){var i=t.graphSet[a];var o=i.length;if(0===a){var s=t.clientHeight/2;var u=t.clientWidth/2}else{var l=t.layoutNodes[t.idToIndex[i[0]]];var f=t.layoutNodes[t.idToIndex[l.parentId]];var s=f.positionX;var u=f.positionY}for(var c=0;c<o;c++){var v=t.layoutNodes[t.idToIndex[i[c]]];if(v.isLocked){continue}var d=s-v.positionX;var h=u-v.positionY;var p=Math.sqrt(d*d+h*h);if(p>n){var g=r.gravity*d/p;var y=r.gravity*h/p;v.offsetX+=g;v.offsetY+=y}}}};var Jc=function e(t,r){var n=[];var a=0;var i=-1;n.push.apply(n,t.graphSet[0]);i+=t.graphSet[0].length;while(a<=i){var o=n[a++];var s=t.idToIndex[o];var u=t.layoutNodes[s];var l=u.children;if(0<l.length&&!u.isLocked){var f=u.offsetX;var c=u.offsetY;for(var v=0;v<l.length;v++){var d=t.layoutNodes[t.idToIndex[l[v]]];d.offsetX+=f;d.offsetY+=c;n[++i]=l[v]}u.offsetX=0;u.offsetY=0}}};var ev=function e(t,r){for(var n=0;n<t.nodeSize;n++){var a=t.layoutNodes[n];if(0<a.children.length){a.maxX=undefined;a.minX=undefined;a.maxY=undefined;a.minY=undefined}}for(var n=0;n<t.nodeSize;n++){var a=t.layoutNodes[n];if(0<a.children.length||a.isLocked){continue}var i=tv(a.offsetX,a.offsetY,t.temperature);a.positionX+=i.x;a.positionY+=i.y;a.offsetX=0;a.offsetY=0;a.minX=a.positionX-a.width;a.maxX=a.positionX+a.width;a.minY=a.positionY-a.height;a.maxY=a.positionY+a.height;rv(a,t)}for(var n=0;n<t.nodeSize;n++){var a=t.layoutNodes[n];if(0<a.children.length&&!a.isLocked){a.positionX=(a.maxX+a.minX)/2;a.positionY=(a.maxY+a.minY)/2;a.width=a.maxX-a.minX;a.height=a.maxY-a.minY}}};var tv=function e(t,r,n){var a=Math.sqrt(t*t+r*r);if(a>n){var i={x:n*t/a,y:n*r/a}}else{var i={x:t,y:r}}return i};var rv=function e(t,r){var n=t.parentId;if(null==n){return}var a=r.layoutNodes[r.idToIndex[n]];var i=false;if(null==a.maxX||t.maxX+a.padRight>a.maxX){a.maxX=t.maxX+a.padRight;i=true}if(null==a.minX||t.minX-a.padLeft<a.minX){a.minX=t.minX-a.padLeft;i=true}if(null==a.maxY||t.maxY+a.padBottom>a.maxY){a.maxY=t.maxY+a.padBottom;i=true}if(null==a.minY||t.minY-a.padTop<a.minY){a.minY=t.minY-a.padTop;i=true}if(i){return rv(a,r)}return};var nv=function e(t,r){var n=t.layoutNodes;var a=[];for(var i=0;i<n.length;i++){var o=n[i];var s=o.cmptId;var u=a[s]=a[s]||[];u.push(o)}var l=0;for(var i=0;i<a.length;i++){var f=a[i];if(!f){continue}f.x1=Infinity;f.x2=-Infinity;f.y1=Infinity;f.y2=-Infinity;for(var c=0;c<f.length;c++){var v=f[c];f.x1=Math.min(f.x1,v.positionX-v.width/2);f.x2=Math.max(f.x2,v.positionX+v.width/2);f.y1=Math.min(f.y1,v.positionY-v.height/2);f.y2=Math.max(f.y2,v.positionY+v.height/2)}f.w=f.x2-f.x1;f.h=f.y2-f.y1;l+=f.w*f.h}a.sort(function(e,t){return t.w*t.h-e.w*e.h});var d=0;var h=0;var p=0;var g=0;var y=Math.sqrt(l)*t.clientWidth/t.clientHeight;for(var i=0;i<a.length;i++){var f=a[i];if(!f){continue}for(var c=0;c<f.length;c++){var v=f[c];if(!v.isLocked){v.positionX+=d-f.x1;v.positionY+=h-f.y1}}d+=f.w+r.componentSpacing;p+=f.w+r.componentSpacing;g=Math.max(g,f.h);if(p>y){h+=g+r.componentSpacing;d=0;p=0;g=0}}};var av={fit:true,padding:30,boundingBox:undefined,avoidOverlap:true,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:false,spacingFactor:undefined,condense:false,rows:undefined,cols:undefined,position:function e(t){},sort:undefined,animate:false,animationDuration:500,animationEasing:undefined,animateFilter:function e(t,r){return true},ready:undefined,stop:undefined,transform:function e(t,r){return r}};function iv(e){this.options=ue({},av,e)}iv.prototype.run=function(){var e=this.options;var t=e;var r=e.cy;var n=t.eles;var a=n.nodes().not(":parent");if(t.sort){a=a.sort(t.sort)}var i=Yr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0){n.nodes().layoutPositions(this,t,function(e){return{x:i.x1,y:i.y1}})}else{var o=a.size();var s=Math.sqrt(o*i.h/i.w);var u=Math.round(s);var l=Math.round(i.w/i.h*s);var f=function e(t){if(t==null){return Math.min(u,l)}else{var r=Math.min(u,l);if(r==u){u=t}else{l=t}}};var c=function e(t){if(t==null){return Math.max(u,l)}else{var r=Math.max(u,l);if(r==u){u=t}else{l=t}}};var v=t.rows;var d=t.cols!=null?t.cols:t.columns;if(v!=null&&d!=null){u=v;l=d}else if(v!=null&&d==null){u=v;l=Math.ceil(o/u)}else if(v==null&&d!=null){l=d;u=Math.ceil(o/l)}else if(l*u>o){var h=f();var p=c();if((h-1)*p>=o){f(h-1)}else if((p-1)*h>=o){c(p-1)}}else{while(l*u<o){var g=f();var y=c();if((y+1)*g>=o){c(y+1)}else{f(g+1)}}}var m=i.w/l;var b=i.h/u;if(t.condense){m=0;b=0}if(t.avoidOverlap){for(var x=0;x<a.length;x++){var w=a[x];var E=w._private.position;if(E.x==null||E.y==null){E.x=0;E.y=0}var k=w.layoutDimensions(t);var _=t.avoidOverlapPadding;var T=k.w+_;var C=k.h+_;m=Math.max(m,T);b=Math.max(b,C)}}var S={};var D=function e(t,r){return S["c-"+t+"-"+r]?true:false};var P=function e(t,r){S["c-"+t+"-"+r]=true};var A=0;var M=0;var B=function e(){M++;if(M>=l){M=0;A++}};var I={};for(var O=0;O<a.length;O++){var R=a[O];var N=t.position(R);if(N&&(N.row!==undefined||N.col!==undefined)){var L={row:N.row,col:N.col};if(L.col===undefined){L.col=0;while(D(L.row,L.col)){L.col++}}else if(L.row===undefined){L.row=0;while(D(L.row,L.col)){L.row++}}I[R.id()]=L;P(L.row,L.col)}}var z=function e(t,r){var n,a;if(t.locked()||t.isParent()){return false}var o=I[t.id()];if(o){n=o.col*m+m/2+i.x1;a=o.row*b+b/2+i.y1}else{while(D(A,M)){B()}n=M*m+m/2+i.x1;a=A*b+b/2+i.y1;P(A,M);B()}return{x:n,y:a}};a.layoutPositions(this,t,z)}return this};var ov={ready:function e(){},stop:function e(){}};function sv(e){this.options=ue({},ov,e)}sv.prototype.run=function(){var e=this.options;var t=e.eles;var r=this;e.cy;r.emit("layoutstart");t.nodes().positions(function(){return{x:0,y:0}});r.one("layoutready",e.ready);r.emit("layoutready");r.one("layoutstop",e.stop);r.emit("layoutstop");return this};sv.prototype.stop=function(){return this};var uv={positions:undefined,zoom:undefined,pan:undefined,fit:true,padding:30,spacingFactor:undefined,animate:false,animationDuration:500,animationEasing:undefined,animateFilter:function e(t,r){return true},ready:undefined,stop:undefined,transform:function e(t,r){return r}};function lv(e){this.options=ue({},uv,e)}lv.prototype.run=function(){var e=this.options;var t=e.eles;var r=t.nodes();var n=P(e.positions);function a(t){if(e.positions==null){return Sr(t.position())}if(n){return e.positions(t)}var r=e.positions[t._private.data.id];if(r==null){return null}return r}r.layoutPositions(this,e,function(e,t){var r=a(e);if(e.locked()||r==null){return false}return r});return this};var fv={fit:true,padding:30,boundingBox:undefined,animate:false,animationDuration:500,animationEasing:undefined,animateFilter:function e(t,r){return true},ready:undefined,stop:undefined,transform:function e(t,r){return r}};function cv(e){this.options=ue({},fv,e)}cv.prototype.run=function(){var e=this.options;var t=e.cy;var r=e.eles;var n=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});var a=function e(t,r){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};r.nodes().layoutPositions(this,e,a);return this};var vv=[{name:"breadthfirst",impl:Ac},{name:"circle",impl:Bc},{name:"concentric",impl:Oc},{name:"cose",impl:Lc},{name:"grid",impl:iv},{name:"null",impl:sv},{name:"preset",impl:lv},{name:"random",impl:cv}];function dv(e){this.options=e;this.notifications=0}var hv=function e(){};var pv=function e(){throw new Error("A headless instance can not render images")};dv.prototype={recalculateRenderedStyle:hv,notify:function e(){this.notifications++},init:hv,isHeadless:function e(){return true},png:pv,jpg:pv};var gv={};gv.arrowShapeWidth=.3;gv.registerArrowShapes=function(){var e=this.arrowShapes={};var t=this;var r=function e(t,r,n,a,i,o,s){var u=i.x-n/2-s;var l=i.x+n/2+s;var f=i.y-n/2-s;var c=i.y+n/2+s;var v=u<=t&&t<=l&&f<=r&&r<=c;return v};var n=function e(t,r,n,a,i){var o=t*Math.cos(a)-r*Math.sin(a);var s=t*Math.sin(a)+r*Math.cos(a);var u=o*n;var l=s*n;var f=u+i.x;var c=l+i.y;return{x:f,y:c}};var a=function e(t,r,a,i){var o=[];for(var s=0;s<t.length;s+=2){var u=t[s];var l=t[s+1];o.push(n(u,l,r,a,i))}return o};var i=function e(t){var r=[];for(var n=0;n<t.length;n++){var a=t[n];r.push(a.x,a.y)}return r};var o=function e(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2};var s=function n(s,u){if(D(u)){u=e[u]}e[s]=ue({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function e(t,r,n,o,s,u){var l=i(a(this.points,n+2*u,o,s));var f=pn(t,r,l);return f},roughCollide:r,draw:function e(r,n,i,o){var s=a(this.points,n,i,o);t.arrowShapeImpl("polygon")(r,s)},spacing:function e(t){return 0},gap:o},u)};s("none",{collide:Bt,roughCollide:Bt,draw:Ot,spacing:It,gap:It});s("triangle",{points:[-.15,-.3,0,0,.15,-.3]});s("arrow","triangle");s("triangle-backcurve",{points:e["triangle"].points,controlPoint:[0,-.15],roughCollide:r,draw:function e(r,i,o,s,u){var l=a(this.points,i,o,s);var f=this.controlPoint;var c=n(f[0],f[1],i,o,s);t.arrowShapeImpl(this.name)(r,l,c)},gap:function e(t){return o(t)*.8}});s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function e(t,r,n,o,s,u,l){var f=i(a(this.points,n+2*l,o,s));var c=i(a(this.pointsTee,n+2*l,o,s));var v=pn(t,r,f)||pn(t,r,c);return v},draw:function e(r,n,i,o,s){var u=a(this.points,n,i,o);var l=a(this.pointsTee,n,i,o);t.arrowShapeImpl(this.name)(r,u,l)}});s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function e(t,r,n,o,s,u,l){var f=s;var c=Math.pow(f.x-t,2)+Math.pow(f.y-r,2)<=Math.pow((n+2*l)*this.radius,2);var v=i(a(this.points,n+2*l,o,s));return pn(t,r,v)||c},draw:function e(r,n,i,o,s){var u=a(this.pointsTr,n,i,o);t.arrowShapeImpl(this.name)(r,u,o.x,o.y,this.radius*n)},spacing:function e(r){return t.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.radius}});s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function e(t,r){var n=this.baseCrossLinePts.slice();var a=r/t;var i=3;var o=5;n[i]=n[i]-a;n[o]=n[o]-a;return n},collide:function e(t,r,n,o,s,u,l){var f=i(a(this.points,n+2*l,o,s));var c=i(a(this.crossLinePts(n,u),n+2*l,o,s));var v=pn(t,r,f)||pn(t,r,c);return v},draw:function e(r,n,i,o,s){var u=a(this.points,n,i,o);var l=a(this.crossLinePts(n,s),n,i,o);t.arrowShapeImpl(this.name)(r,u,l)}});s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function e(t){return o(t)*.525}});s("circle",{radius:.15,collide:function e(t,r,n,a,i,o,s){var u=i;var l=Math.pow(u.x-t,2)+Math.pow(u.y-r,2)<=Math.pow((n+2*s)*this.radius,2);return l},draw:function e(r,n,a,i,o){t.arrowShapeImpl(this.name)(r,i.x,i.y,this.radius*n)},spacing:function e(r){return t.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.radius}});s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function e(t){return 1},gap:function e(t){return 1}});s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]});s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function e(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}});s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function e(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})};var yv={};yv.projectIntoViewport=function(e,t){var r=this.cy;var n=this.findContainerClientCoords();var a=n[0];var i=n[1];var o=n[4];var s=r.pan();var u=r.zoom();var l=((e-a)/o-s.x)/u;var f=((t-i)/o-s.y)/u;return[l,f]};yv.findContainerClientCoords=function(){if(this.containerBB){return this.containerBB}var e=this.container;var t=e.getBoundingClientRect();var r=this.cy.window().getComputedStyle(e);var n=function e(t){return parseFloat(r.getPropertyValue(t))};var a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")};var i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")};var o=e.clientWidth;var s=e.clientHeight;var u=a.left+a.right;var l=a.top+a.bottom;var f=i.left+i.right;var c=t.width/(o+f);var v=o-u;var d=s-l;var h=t.left+a.left+i.left;var p=t.top+a.top+i.top;return this.containerBB=[h,p,v,d,c]};yv.invalidateContainerClientCoordsCache=function(){this.containerBB=null};yv.findNearestElement=function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]};yv.findNearestElements=function(e,t,r,n){var a=this;var i=this;var o=i.getCachedZSortedEles();var s=[];var u=i.cy.zoom();var l=i.cy.hasCompoundNodes();var f=(n?24:8)/u;var c=(n?8:2)/u;var v=(n?8:2)/u;var d=Infinity;var h;var p;if(r){o=o.interactive}function g(e,t){if(e.isNode()){if(p){return}else{p=e;s.push(e)}}if(e.isEdge()&&(t==null||t<d)){if(h){if(h.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value){for(var r=0;r<s.length;r++){if(s[r].isEdge()){s[r]=e;h=e;d=t!=null?t:d;break}}}}else{s.push(e);h=e;d=t!=null?t:d}}}function y(r){var n=r.outerWidth()+2*c;var o=r.outerHeight()+2*c;var s=n/2;var u=o/2;var l=r.position();var f=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue;var v=r._private.rscratch;if(l.x-s<=e&&e<=l.x+s&&l.y-u<=t&&t<=l.y+u){var d=i.nodeShapes[a.getNodeShape(r)];if(d.checkPoint(e,t,0,n,o,l.x,l.y,f,v)){g(r,0);return true}}}function m(r){var n=r._private;var o=n.rscratch;var u=r.pstyle("width").pfValue;var c=r.pstyle("arrow-scale").value;var v=u/2+f;var d=v*v;var h=v*2;var p=n.source;var m=n.target;var b;if(o.edgeType==="segments"||o.edgeType==="straight"||o.edgeType==="haystack"){var x=o.allpts;for(var w=0;w+3<x.length;w+=2){if(ln(e,t,x[w],x[w+1],x[w+2],x[w+3],h)&&d>(b=hn(e,t,x[w],x[w+1],x[w+2],x[w+3]))){g(r,b);return true}}}else if(o.edgeType==="bezier"||o.edgeType==="multibezier"||o.edgeType==="self"||o.edgeType==="compound"){var x=o.allpts;for(var w=0;w+5<o.allpts.length;w+=4){if(fn(e,t,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5],h)&&d>(b=dn(e,t,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5]))){g(r,b);return true}}}var p=p||n.source;var m=m||n.target;var E=a.getArrowWidth(u,c);var k=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(var w=0;w<k.length;w++){var _=k[w];var T=i.arrowShapes[r.pstyle(_.name+"-arrow-shape").value];var C=r.pstyle("width").pfValue;if(T.roughCollide(e,t,E,_.angle,{x:_.x,y:_.y},C,f)&&T.collide(e,t,E,_.angle,{x:_.x,y:_.y},C,f)){g(r);return true}}if(l&&s.length>0){y(p);y(m)}}function b(e,t,r){return Ht(e,t,r)}function x(r,n){var a=r._private;var i=v;var o;if(n){o=n+"-"}else{o=""}r.boundingBox();var s=a.labelBounds[n||"main"];var u=r.pstyle(o+"label").value;var l=r.pstyle("text-events").strValue==="yes";if(!l||!u){return}var f=b(a.rscratch,"labelX",n);var c=b(a.rscratch,"labelY",n);var d=b(a.rscratch,"labelAngle",n);var h=r.pstyle(o+"text-margin-x").pfValue;var p=r.pstyle(o+"text-margin-y").pfValue;var y=s.x1-i-h;var m=s.x2+i-h;var x=s.y1-i-p;var w=s.y2+i-p;if(d){var E=Math.cos(d);var k=Math.sin(d);var _=function e(t,r){t=t-f;r=r-c;return{x:t*E-r*k+f,y:t*k+r*E+c}};var T=_(y,x);var C=_(y,w);var S=_(m,x);var D=_(m,w);var P=[T.x+h,T.y+p,S.x+h,S.y+p,D.x+h,D.y+p,C.x+h,C.y+p];if(pn(e,t,P)){g(r);return true}}else{if(tn(s,e,t)){g(r);return true}}}for(var w=o.length-1;w>=0;w--){var E=o[w];if(E.isNode()){y(E)||x(E)}else{m(E)||x(E)||x(E,"source")||x(E,"target")}}return s};yv.getAllInBox=function(e,t,r,n){var a=this.getCachedZSortedEles().interactive;var i=this.cy.zoom();var o=2/i;var s=[];var u=Math.min(e,r);var l=Math.max(e,r);var f=Math.min(t,n);var c=Math.max(t,n);e=u;r=l;t=f;n=c;var v=Yr({x1:e,y1:t,x2:r,y2:n});function d(e,t,r){return Ht(e,t,r)}function h(e,t){var r=e._private;var n=o;var a="";e.boundingBox();var i=r.labelBounds["main"];if(!i){return null}var s=d(r.rscratch,"labelX",t);var u=d(r.rscratch,"labelY",t);var l=d(r.rscratch,"labelAngle",t);var f=e.pstyle(a+"text-margin-x").pfValue;var c=e.pstyle(a+"text-margin-y").pfValue;var v=i.x1-n-f;var h=i.x2+n-f;var p=i.y1-n-c;var g=i.y2+n-c;if(l){var y=Math.cos(l);var m=Math.sin(l);var b=function e(t,r){t=t-s;r=r-u;return{x:t*y-r*m+s,y:t*m+r*y+u}};return[b(v,p),b(h,p),b(h,g),b(v,g)]}else{return[{x:v,y:p},{x:h,y:p},{x:h,y:g},{x:v,y:g}]}}for(var p=0;p<a.length;p++){var g=a[p];if(g.isNode()){var y=g;var m=y.pstyle("text-events").strValue==="yes";var b=y.pstyle("box-select-labels").strValue==="yes";var x=y.boundingBox({includeNodes:true,includeEdges:false,includeLabels:b&&m});if(en(v,x)){var w=h(y);var E=[{x:v.x1,y:v.y1},{x:v.x2,y:v.y1},{x:v.x2,y:v.y2},{x:v.x1,y:v.y2}];if(!w||Ln(w,E)){s.push(y)}}}else{var k=g;var _=k._private;var T=_.rscratch;if(T.startX!=null&&T.startY!=null&&!tn(v,T.startX,T.startY)){continue}if(T.endX!=null&&T.endY!=null&&!tn(v,T.endX,T.endY)){continue}if(T.edgeType==="bezier"||T.edgeType==="multibezier"||T.edgeType==="self"||T.edgeType==="compound"||T.edgeType==="segments"||T.edgeType==="haystack"){var C=_.rstyle.bezierPts||_.rstyle.linePts||_.rstyle.haystackPts;var S=true;for(var D=0;D<C.length;D++){if(!rn(v,C[D])){S=false;break}}if(S){s.push(k)}}else if(T.edgeType==="haystack"||T.edgeType==="straight"){s.push(k)}}}return s};var mv={};mv.calculateArrowAngles=function(e){var t=e._private.rscratch;var r=t.edgeType==="haystack";var n=t.edgeType==="bezier";var a=t.edgeType==="multibezier";var i=t.edgeType==="segments";var o=t.edgeType==="compound";var s=t.edgeType==="self";var u,l;var f,c,v,d,h,p;if(r){f=t.haystackPts[0];c=t.haystackPts[1];v=t.haystackPts[2];d=t.haystackPts[3]}else{f=t.arrowStartX;c=t.arrowStartY;v=t.arrowEndX;d=t.arrowEndY}h=t.midX;p=t.midY;if(i){u=f-t.segpts[0];l=c-t.segpts[1]}else if(a||o||s||n){var g=t.allpts;var y=Gr(g[0],g[2],g[4],.1);var m=Gr(g[1],g[3],g[5],.1);u=f-y;l=c-m}else{u=f-h;l=c-p}t.srcArrowAngle=Nr(u,l);var h=t.midX;var p=t.midY;if(r){h=(f+v)/2;p=(c+d)/2}u=v-f;l=d-c;if(i){var g=t.allpts;if(g.length/2%2===0){var b=g.length/2;var x=b-2;u=g[b]-g[x];l=g[b+1]-g[x+1]}else if(t.isRound){u=t.midVector[1];l=-t.midVector[0]}else{var b=g.length/2-1;var x=b-2;u=g[b]-g[x];l=g[b+1]-g[x+1]}}else if(a||o||s){var g=t.allpts;var w=t.ctrlpts;var E,k;var _,T;if(w.length/2%2===0){var C=g.length/2-1;var S=C+2;var D=S+2;E=Gr(g[C],g[S],g[D],0);k=Gr(g[C+1],g[S+1],g[D+1],0);_=Gr(g[C],g[S],g[D],1e-4);T=Gr(g[C+1],g[S+1],g[D+1],1e-4)}else{var S=g.length/2-1;var C=S-2;var D=S+2;E=Gr(g[C],g[S],g[D],.4999);k=Gr(g[C+1],g[S+1],g[D+1],.4999);_=Gr(g[C],g[S],g[D],.5);T=Gr(g[C+1],g[S+1],g[D+1],.5)}u=_-E;l=T-k}t.midtgtArrowAngle=Nr(u,l);t.midDispX=u;t.midDispY=l;u*=-1;l*=-1;if(i){var g=t.allpts;if(g.length/2%2===0);else if(!t.isRound){var b=g.length/2-1;var P=b+2;u=-(g[P]-g[b]);l=-(g[P+1]-g[b+1])}}t.midsrcArrowAngle=Nr(u,l);if(i){u=v-t.segpts[t.segpts.length-2];l=d-t.segpts[t.segpts.length-1]}else if(a||o||s||n){var g=t.allpts;var A=g.length;var y=Gr(g[A-6],g[A-4],g[A-2],.9);var m=Gr(g[A-5],g[A-3],g[A-1],.9);u=v-y;l=d-m}else{u=v-h;l=d-p}t.tgtArrowAngle=Nr(u,l)};mv.getArrowWidth=mv.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{};var n=r[e+", "+t];if(n){return n}n=Math.max(Math.pow(e*13.37,.9),29)*t;r[e+", "+t]=n;return n};var bv,xv,wv={},Ev={},kv,_v,Tv,Cv,Sv,Dv,Pv,Av,Mv,Bv;var Iv,Ov,Rv,Nv;var Lv;var zv=function e(t,r,n){n.x=r.x-t.x;n.y=r.y-t.y;n.len=Math.sqrt(n.x*n.x+n.y*n.y);n.nx=n.x/n.len;n.ny=n.y/n.len;n.ang=Math.atan2(n.ny,n.nx)};var jv=function e(t,r){r.x=t.x*-1;r.y=t.y*-1;r.nx=t.nx*-1;r.ny=t.ny*-1;r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang};var Vv=function e(t,r,n,a,i){t!==Lv?zv(r,t,wv):jv(Ev,wv);zv(r,n,Ev);kv=wv.nx*Ev.ny-wv.ny*Ev.nx;_v=wv.nx*Ev.nx-wv.ny*-Ev.ny;Sv=Math.asin(Math.max(-1,Math.min(1,kv)));if(Math.abs(Sv)<1e-6){bv=r.x;xv=r.y;Pv=Mv=0;return}Tv=1;Cv=false;if(_v<0){if(Sv<0){Sv=Math.PI+Sv}else{Sv=Math.PI-Sv;Tv=-1;Cv=true}}else{if(Sv>0){Tv=-1;Cv=true}}if(r.radius!==undefined){Mv=r.radius}else{Mv=a}Dv=Sv/2;Bv=Math.min(wv.len/2,Ev.len/2);if(i){Av=Math.abs(Math.cos(Dv)*Mv/Math.sin(Dv));if(Av>Bv){Av=Bv;Pv=Math.abs(Av*Math.sin(Dv)/Math.cos(Dv))}else{Pv=Mv}}else{Av=Math.min(Bv,Mv);Pv=Math.abs(Av*Math.sin(Dv)/Math.cos(Dv))}Rv=r.x+Ev.nx*Av;Nv=r.y+Ev.ny*Av;bv=Rv-Ev.ny*Pv*Tv;xv=Nv+Ev.nx*Pv*Tv;Iv=r.x+wv.nx*Av;Ov=r.y+wv.ny*Av;Lv=r};function Fv(e,t){if(t.radius===0)e.lineTo(t.cx,t.cy);else e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Gv(e,t,r,n){var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(n===0||t.radius===0)return{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:undefined,endAngle:undefined,counterClockwise:undefined};Vv(e,t,r,n,a);return{cx:bv,cy:xv,radius:Pv,startX:Iv,startY:Ov,stopX:Rv,stopY:Nv,startAngle:wv.ang+Math.PI/2*Tv,endAngle:Ev.ang-Math.PI/2*Tv,counterClockwise:Cv}}var Wv=.01;var qv=Math.sqrt(2*Wv);var Xv={};Xv.findMidptPtsEtc=function(e,t){var r=t.posPts,n=t.intersectionPts,a=t.vectorNormInverse;var i;var o=e.pstyle("source-endpoint");var s=e.pstyle("target-endpoint");var u=o.units!=null&&s.units!=null;var l=function e(t,r,n,a){var i=a-r;var o=n-t;var s=Math.sqrt(o*o+i*i);return{x:-i/s,y:o/s}};var f=e.pstyle("edge-distances").value;switch(f){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var c=this.manualEndptToPx(e.source()[0],o),v=p(c,2),d=v[0],h=v[1];var g=this.manualEndptToPx(e.target()[0],s),y=p(g,2),m=y[0],b=y[1];var x={x1:d,y1:h,x2:m,y2:b};a=l(d,h,m,b);i=x}else{Lt("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default)."));i=n}break}}return{midptPts:i,vectorNormInverse:a}};Xv.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t];var n=r._private;var a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)};i=Math.random()*2*Math.PI;a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source;var s=n.target;var u=o.position();var l=s.position();var f=o.width();var c=s.width();var v=o.height();var d=s.height();var h=r.pstyle("haystack-radius").value;var p=h/2;a.haystackPts=a.allpts=[a.source.x*f*p+u.x,a.source.y*v*p+u.y,a.target.x*c*p+l.x,a.target.y*d*p+l.y];a.midX=(a.allpts[0]+a.allpts[2])/2;a.midY=(a.allpts[1]+a.allpts[3])/2;a.edgeType="haystack";a.haystack=true;this.storeEdgeProjections(r);this.calculateArrowAngles(r);this.recalculateEdgeLabelProjections(r);this.calculateLabelAngles(r)}};Xv.findSegmentsPoints=function(e,t){var r=e._private.rscratch;var n=e.pstyle("segment-weights");var a=e.pstyle("segment-distances");var i=e.pstyle("segment-radii");var o=e.pstyle("radius-type");var s=Math.min(n.pfValue.length,a.pfValue.length);var u=i.pfValue[i.pfValue.length-1];var l=o.pfValue[o.pfValue.length-1];r.edgeType="segments";r.segpts=[];r.radii=[];r.isArcRadius=[];for(var f=0;f<s;f++){var c=n.pfValue[f];var v=a.pfValue[f];var d=1-c;var h=c;var p=this.findMidptPtsEtc(e,t),g=p.midptPts,y=p.vectorNormInverse;var m={x:g.x1*d+g.x2*h,y:g.y1*d+g.y2*h};r.segpts.push(m.x+y.x*v,m.y+y.y*v);r.radii.push(i.pfValue[f]!==undefined?i.pfValue[f]:u);r.isArcRadius.push((o.pfValue[f]!==undefined?o.pfValue[f]:l)==="arc-radius")}};Xv.findLoopPoints=function(e,t,r,n){var a=e._private.rscratch;var i=t.dirCounts,o=t.srcPos;var s=e.pstyle("control-point-distances");var u=s?s.pfValue[0]:undefined;var l=e.pstyle("loop-direction").pfValue;var f=e.pstyle("loop-sweep").pfValue;var c=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var v=r;var d=c;if(n){v=0;d=u}var h=l-Math.PI/2;var p=h-f/2;var g=h+f/2;var y=String(l+"_"+f);v=i[y]===undefined?i[y]=0:++i[y];a.ctrlpts=[o.x+Math.cos(p)*1.4*d*(v/3+1),o.y+Math.sin(p)*1.4*d*(v/3+1),o.x+Math.cos(g)*1.4*d*(v/3+1),o.y+Math.sin(g)*1.4*d*(v/3+1)]};Xv.findCompoundLoopPoints=function(e,t,r,n){var a=e._private.rscratch;a.edgeType="compound";var i=t.srcPos,o=t.tgtPos,s=t.srcW,u=t.srcH,l=t.tgtW,f=t.tgtH;var c=e.pstyle("control-point-step-size").pfValue;var v=e.pstyle("control-point-distances");var d=v?v.pfValue[0]:undefined;var h=r;var p=c;if(n){h=0;p=d}var g=50;var y={x:i.x-s/2,y:i.y-u/2};var m={x:o.x-l/2,y:o.y-f/2};var b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)};var x=.5;var w=Math.max(x,Math.log(s*Wv));var E=Math.max(x,Math.log(l*Wv));a.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*p*(h/3+1)*w,b.x-(1+Math.pow(g,1.12)/100)*p*(h/3+1)*E,b.y]};Xv.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};Xv.findBezierPoints=function(e,t,r,n,a){var i=e._private.rscratch;var o=e.pstyle("control-point-step-size").pfValue;var s=e.pstyle("control-point-distances");var u=e.pstyle("control-point-weights");var l=s&&u?Math.min(s.value.length,u.value.length):1;var f=s?s.pfValue[0]:undefined;var c=u.value[0];var v=n;i.edgeType=v?"multibezier":"bezier";i.ctrlpts=[];for(var d=0;d<l;d++){var h=(.5-t.eles.length/2+r)*o*(a?-1:1);var p=undefined;var g=zr(h);if(v){f=s?s.pfValue[d]:o;c=u.value[d]}if(n){p=f}else{p=f!==undefined?g*f:undefined}var y=p!==undefined?p:h;var m=1-c;var b=c;var x=this.findMidptPtsEtc(e,t),w=x.midptPts,E=x.vectorNormInverse;var k={x:w.x1*m+w.x2*b,y:w.y1*m+w.y2*b};i.ctrlpts.push(k.x+E.x*y,k.y+E.y*y)}};Xv.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical";var a="horizontal";var i="leftward";var o="rightward";var s="downward";var u="upward";var l="auto";var f=t.posPts,c=t.srcW,v=t.srcH,d=t.tgtW,h=t.tgtH;var p=e.pstyle("edge-distances").value;var g=p!=="node-position";var y=e.pstyle("taxi-direction").value;var m=y;var b=e.pstyle("taxi-turn");var x=b.units==="%";var w=b.pfValue;var E=w<0;var k=e.pstyle("taxi-turn-min-distance").pfValue;var _=g?(c+d)/2:0;var T=g?(v+h)/2:0;var C=f.x2-f.x1;var S=f.y2-f.y1;var D=function e(t,r){if(t>0){return Math.max(t-r,0)}else{return Math.min(t+r,0)}};var P=D(C,_);var A=D(S,T);var M=false;if(m===l){y=Math.abs(P)>Math.abs(A)?a:n}else if(m===u||m===s){y=n;M=true}else if(m===i||m===o){y=a;M=true}var B=y===n;var I=B?A:P;var O=B?S:C;var R=zr(O);var N=false;if(!(M&&(x||E))&&(m===s&&O<0||m===u&&O>0||m===i&&O>0||m===o&&O<0)){R*=-1;I=R*Math.abs(I);N=true}var L;if(x){var z=w<0?1+w:w;L=z*I}else{var j=w<0?I:0;L=j+w*R}var V=function e(t){return Math.abs(t)<k||Math.abs(t)>=Math.abs(I)};var F=V(L);var G=V(Math.abs(I)-Math.abs(L));var W=F||G;if(W&&!N){if(B){var q=Math.abs(O)<=v/2;var X=Math.abs(C)<=d/2;if(q){var Y=(f.x1+f.x2)/2;var U=f.y1,H=f.y2;r.segpts=[Y,U,Y,H]}else if(X){var K=(f.y1+f.y2)/2;var Z=f.x1,$=f.x2;r.segpts=[Z,K,$,K]}else{r.segpts=[f.x1,f.y2]}}else{var Q=Math.abs(O)<=c/2;var J=Math.abs(S)<=h/2;if(Q){var ee=(f.y1+f.y2)/2;var te=f.x1,re=f.x2;r.segpts=[te,ee,re,ee]}else if(J){var ne=(f.x1+f.x2)/2;var ae=f.y1,ie=f.y2;r.segpts=[ne,ae,ne,ie]}else{r.segpts=[f.x2,f.y1]}}}else{if(B){var oe=f.y1+L+(g?v/2*R:0);var se=f.x1,ue=f.x2;r.segpts=[se,oe,ue,oe]}else{var le=f.x1+L+(g?c/2*R:0);var fe=f.y1,ce=f.y2;r.segpts=[le,fe,le,ce]}}if(r.isRound){var ve=e.pstyle("taxi-radius").value;var de=e.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(ve);r.isArcRadius=new Array(r.segpts.length/2).fill(de)}};Xv.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if(r.edgeType==="bezier"){var n=t.srcPos,a=t.tgtPos,i=t.srcW,o=t.srcH,s=t.tgtW,u=t.tgtH,l=t.srcShape,f=t.tgtShape,c=t.srcCornerRadius,v=t.tgtCornerRadius,d=t.srcRs,h=t.tgtRs;var p=!I(r.startX)||!I(r.startY);var g=!I(r.arrowStartX)||!I(r.arrowStartY);var y=!I(r.endX)||!I(r.endY);var m=!I(r.arrowEndX)||!I(r.arrowEndY);var b=3;var x=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth;var w=b*x;var E=jr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY});var k=E<w;var _=jr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY});var T=_<w;var C=false;if(p||g||k){C=true;var S={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y};var D=Math.sqrt(S.x*S.x+S.y*S.y);var P={x:S.x/D,y:S.y/D};var A=Math.max(i,o);var M={x:r.ctrlpts[0]+P.x*2*A,y:r.ctrlpts[1]+P.y*2*A};var B=l.intersectLine(n.x,n.y,i,o,M.x,M.y,0,c,d);if(k){r.ctrlpts[0]=r.ctrlpts[0]+P.x*(w-E);r.ctrlpts[1]=r.ctrlpts[1]+P.y*(w-E)}else{r.ctrlpts[0]=B[0]+P.x*w;r.ctrlpts[1]=B[1]+P.y*w}}if(y||m||T){C=true;var O={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y};var R=Math.sqrt(O.x*O.x+O.y*O.y);var N={x:O.x/R,y:O.y/R};var L=Math.max(i,o);var z={x:r.ctrlpts[0]+N.x*2*L,y:r.ctrlpts[1]+N.y*2*L};var j=f.intersectLine(a.x,a.y,s,u,z.x,z.y,0,v,h);if(T){r.ctrlpts[0]=r.ctrlpts[0]+N.x*(w-_);r.ctrlpts[1]=r.ctrlpts[1]+N.y*(w-_)}else{r.ctrlpts[0]=j[0]+N.x*w;r.ctrlpts[1]=j[1]+N.y*w}}if(C){this.findEndpoints(e)}}};Xv.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[];t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2){t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]);if(r+3<t.ctrlpts.length){t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2)}}t.allpts.push(t.endX,t.endY);var n,a;if(t.ctrlpts.length/2%2===0){n=t.allpts.length/2-1;t.midX=t.allpts[n];t.midY=t.allpts[n+1]}else{n=t.allpts.length/2-3;a=.5;t.midX=Gr(t.allpts[n],t.allpts[n+2],t.allpts[n+4],a);t.midY=Gr(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],a)}}else if(t.edgeType==="straight"){t.allpts=[t.startX,t.startY,t.endX,t.endY];t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4;t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4}else if(t.edgeType==="segments"){t.allpts=[];t.allpts.push(t.startX,t.startY);t.allpts.push.apply(t.allpts,t.segpts);t.allpts.push(t.endX,t.endY);if(t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var o=t.radii[i/2-1];var s=t.isArcRadius[i/2-1];t.roundCorners.push(Gv({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:o},{x:t.allpts[i+2],y:t.allpts[i+3]},o,s))}}if(t.segpts.length%4===0){var u=t.segpts.length/2;var l=u-2;t.midX=(t.segpts[l]+t.segpts[u])/2;t.midY=(t.segpts[l+1]+t.segpts[u+1])/2}else{var f=t.segpts.length/2-1;if(!t.isRound){t.midX=t.segpts[f];t.midY=t.segpts[f+1]}else{var c={x:t.segpts[f],y:t.segpts[f+1]};var v=t.roundCorners[f/2];if(v.radius===0){var d={x:t.segpts[f+2],y:t.segpts[f+3]};t.midX=c.x;t.midY=c.y;t.midVector=[c.y-d.y,d.x-c.x]}else{var h=[c.x-v.cx,c.y-v.cy];var p=v.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(e){return e*p});t.midX=v.cx+h[0];t.midY=v.cy+h[1];t.midVector=h}}}}};Xv.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;if(t.nodesOverlap||I(t.startX)&&I(t.startY)&&I(t.endX)&&I(t.endY)){t.loggedErr=false}else{if(!t.loggedErr){t.loggedErr=true;Lt("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap.")}}};Xv.findEdgeControlPoints=function(e){var t=this;if(!e||e.length===0){return}var r=this;var n=r.cy;var a=n.hasCompoundNodes();var i=new $t;var o=function e(t,r){return[].concat(g(t),[r?1:0]).join("-")};var s=[];var u=[];for(var l=0;l<e.length;l++){var f=e[l];var c=f._private;var v=f.pstyle("curve-style").value;if(f.removed()||!f.takesUpSpace()){continue}if(v==="haystack"){u.push(f);continue}var d=v==="unbundled-bezier"||Q(v,"segments")||v==="straight"||v==="straight-triangle"||Q(v,"taxi");var h=v==="unbundled-bezier"||v==="bezier";var p=c.source;var y=c.target;var m=p.poolIndex();var b=y.poolIndex();var x=[m,b].sort();var w=o(x,d);var E=i.get(w);if(E==null){E={eles:[]};s.push({pairId:x,edgeIsUnbundled:d});i.set(w,E)}E.eles.push(f);if(d){E.hasUnbundled=true}if(h){E.hasBezier=true}}var k=function e(){var n=s[_],u=n.pairId,l=n.edgeIsUnbundled;var f=o(u,l);var c=i.get(f);var v;if(!c.hasUnbundled){var d=c.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});Yt(c.eles);d.forEach(function(e){return c.eles.push(e)});c.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var h=c.eles[0];var p=h.source();var g=h.target();if(p.poolIndex()>g.poolIndex()){var y=p;p=g;g=y}var m=c.srcPos=p.position();var b=c.tgtPos=g.position();var x=c.srcW=p.outerWidth();var w=c.srcH=p.outerHeight();var E=c.tgtW=g.outerWidth();var k=c.tgtH=g.outerHeight();var T=c.srcShape=r.nodeShapes[t.getNodeShape(p)];var C=c.tgtShape=r.nodeShapes[t.getNodeShape(g)];var S=c.srcCornerRadius=p.pstyle("corner-radius").value==="auto"?"auto":p.pstyle("corner-radius").pfValue;var D=c.tgtCornerRadius=g.pstyle("corner-radius").value==="auto"?"auto":g.pstyle("corner-radius").pfValue;var P=c.tgtRs=g._private.rscratch;var A=c.srcRs=p._private.rscratch;c.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var M=0;M<c.eles.length;M++){var B=c.eles[M];var O=B[0]._private.rscratch;var R=B.pstyle("curve-style").value;var N=R==="unbundled-bezier"||Q(R,"segments")||Q(R,"taxi");var L=!p.same(B.source());if(!c.calculatedIntersection&&p!==g&&(c.hasBezier||c.hasUnbundled)){c.calculatedIntersection=true;var z=T.intersectLine(m.x,m.y,x,w,b.x,b.y,0,S,A);var j=c.srcIntn=z;var V=C.intersectLine(b.x,b.y,E,k,m.x,m.y,0,D,P);var F=c.tgtIntn=V;var G=c.intersectionPts={x1:z[0],x2:V[0],y1:z[1],y2:V[1]};var W=c.posPts={x1:m.x,x2:b.x,y1:m.y,y2:b.y};var q=V[1]-z[1];var X=V[0]-z[0];var Y=Math.sqrt(X*X+q*q);if(I(Y)&&Y>=qv);else{Y=Math.sqrt(Math.max(X*X,Wv)+Math.max(q*q,Wv))}var U=c.vector={x:X,y:q};var H=c.vectorNorm={x:U.x/Y,y:U.y/Y};var K={x:-H.y,y:H.x};c.nodesOverlap=!I(Y)||C.checkPoint(z[0],z[1],0,E,k,b.x,b.y,D,P)||T.checkPoint(V[0],V[1],0,x,w,m.x,m.y,S,A);c.vectorNormInverse=K;v={nodesOverlap:c.nodesOverlap,dirCounts:c.dirCounts,calculatedIntersection:true,hasBezier:c.hasBezier,hasUnbundled:c.hasUnbundled,eles:c.eles,srcPos:b,srcRs:P,tgtPos:m,tgtRs:A,srcW:E,srcH:k,tgtW:x,tgtH:w,srcIntn:F,tgtIntn:j,srcShape:C,tgtShape:T,posPts:{x1:W.x2,y1:W.y2,x2:W.x1,y2:W.y1},intersectionPts:{x1:G.x2,y1:G.y2,x2:G.x1,y2:G.y1},vector:{x:-U.x,y:-U.y},vectorNorm:{x:-H.x,y:-H.y},vectorNormInverse:{x:-K.x,y:-K.y}}}var Z=L?v:c;O.nodesOverlap=Z.nodesOverlap;O.srcIntn=Z.srcIntn;O.tgtIntn=Z.tgtIntn;O.isRound=R.startsWith("round");if(a&&(p.isParent()||p.isChild()||g.isParent()||g.isChild())&&(p.parents().anySame(g)||g.parents().anySame(p)||p.same(g)&&p.isParent())){t.findCompoundLoopPoints(B,Z,M,N)}else if(p===g){t.findLoopPoints(B,Z,M,N)}else if(R.endsWith("segments")){t.findSegmentsPoints(B,Z)}else if(R.endsWith("taxi")){t.findTaxiPoints(B,Z)}else if(R==="straight"||!N&&c.eles.length%2===1&&M===Math.floor(c.eles.length/2)){t.findStraightEdgePoints(B)}else{t.findBezierPoints(B,Z,M,N,L)}t.findEndpoints(B);t.tryToCorrectInvalidPoints(B,Z);t.checkForInvalidEdgeWarning(B);t.storeAllpts(B);t.storeEdgeProjections(B);t.calculateArrowAngles(B);t.recalculateEdgeLabelProjections(B);t.calculateLabelAngles(B)}};for(var _=0;_<s.length;_++){k()}this.findHaystackPoints(u)};function Yv(e){var t=[];if(e==null){return}for(var r=0;r<e.length;r+=2){var n=e[r];var a=e[r+1];t.push({x:n,y:a})}return t}Xv.getSegmentPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="segments"){return Yv(t.segpts)}};Xv.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound"){return Yv(t.ctrlpts)}};Xv.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);return{x:t.midX,y:t.midY}};var Uv={};Uv.manualEndptToPx=function(e,t){var r=this;var n=e.position();var a=e.outerWidth();var i=e.outerHeight();var o=e._private.rscratch;if(t.value.length===2){var s=[t.pfValue[0],t.pfValue[1]];if(t.units[0]==="%"){s[0]=s[0]*a}if(t.units[1]==="%"){s[1]=s[1]*i}s[0]+=n.x;s[1]+=n.y;return s}else{var u=t.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i);var f=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,a,i,f[0],f[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,o)}};Uv.findEndpoints=function(e){var t,r,n,a;var i=this;var o;var s=e.source()[0];var u=e.target()[0];var l=s.position();var f=u.position();var c=e.pstyle("target-arrow-shape").value;var v=e.pstyle("source-arrow-shape").value;var d=e.pstyle("target-distance-from-node").pfValue;var h=e.pstyle("source-distance-from-node").pfValue;var p=s._private.rscratch;var g=u._private.rscratch;var y=e.pstyle("curve-style").value;var m=e._private.rscratch;var b=m.edgeType;var x=Q(y,"taxi");var w=b==="self"||b==="compound";var E=b==="bezier"||b==="multibezier"||w;var k=b!=="bezier";var _=b==="straight"||b==="segments";var T=b==="segments";var C=E||k||_;var S=w||x;var D=e.pstyle("source-endpoint");var P=S?"outside-to-node":D.value;var A=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue;var M=e.pstyle("target-endpoint");var B=S?"outside-to-node":M.value;var O=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;m.srcManEndpt=D;m.tgtManEndpt=M;var R;var N;var L;var z;var j=(t=(M===null||M===undefined||(r=M.pfValue)===null||r===undefined?undefined:r.length)===2?M.pfValue:null)!==null&&t!==undefined?t:[0,0];var V=(n=(D===null||D===undefined||(a=D.pfValue)===null||a===undefined?undefined:a.length)===2?D.pfValue:null)!==null&&n!==undefined?n:[0,0];if(E){var F=[m.ctrlpts[0],m.ctrlpts[1]];var G=k?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:F;R=G;N=F}else if(_){var W=!T?[f.x+j[0],f.y+j[1]]:m.segpts.slice(0,2);var q=!T?[l.x+V[0],l.y+V[1]]:m.segpts.slice(m.segpts.length-2);R=q;N=W}if(B==="inside-to-node"){o=[f.x,f.y]}else if(M.units){o=this.manualEndptToPx(u,M)}else if(B==="outside-to-line"){o=m.tgtIntn}else{if(B==="outside-to-node"||B==="outside-to-node-or-label"){L=R}else if(B==="outside-to-line"||B==="outside-to-line-or-label"){L=[l.x,l.y]}o=i.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),L[0],L[1],0,O,g);if(B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var X=u._private.rscratch;var Y=X.labelWidth;var U=X.labelHeight;var H=X.labelX;var K=X.labelY;var Z=Y/2;var $=U/2;var J=u.pstyle("text-valign").value;if(J==="top"){K-=$}else if(J==="bottom"){K+=$}var ee=u.pstyle("text-halign").value;if(ee==="left"){H-=Z}else if(ee==="right"){H+=Z}var te=Cn(L[0],L[1],[H-Z,K-$,H+Z,K-$,H+Z,K+$,H-Z,K+$],f.x,f.y);if(te.length>0){var re=l;var ne=Vr(re,Ar(o));var ae=Vr(re,Ar(te));var ie=ne;if(ae<ne){o=te;ie=ae}if(te.length>2){var oe=Vr(re,{x:te[2],y:te[3]});if(oe<ie){o=[te[2],te[3]]}}}}}var se=Dn(o,R,i.arrowShapes[c].spacing(e)+d);var ue=Dn(o,R,i.arrowShapes[c].gap(e)+d);m.endX=ue[0];m.endY=ue[1];m.arrowEndX=se[0];m.arrowEndY=se[1];if(P==="inside-to-node"){o=[l.x,l.y]}else if(D.units){o=this.manualEndptToPx(s,D)}else if(P==="outside-to-line"){o=m.srcIntn}else{if(P==="outside-to-node"||P==="outside-to-node-or-label"){z=N}else if(P==="outside-to-line"||P==="outside-to-line-or-label"){z=[f.x,f.y]}o=i.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),z[0],z[1],0,A,p);if(P==="outside-to-node-or-label"||P==="outside-to-line-or-label"){var le=s._private.rscratch;var fe=le.labelWidth;var ce=le.labelHeight;var ve=le.labelX;var de=le.labelY;var he=fe/2;var pe=ce/2;var ge=s.pstyle("text-valign").value;if(ge==="top"){de-=pe}else if(ge==="bottom"){de+=pe}var ye=s.pstyle("text-halign").value;if(ye==="left"){ve-=he}else if(ye==="right"){ve+=he}var me=Cn(z[0],z[1],[ve-he,de-pe,ve+he,de-pe,ve+he,de+pe,ve-he,de+pe],l.x,l.y);if(me.length>0){var be=f;var xe=Vr(be,Ar(o));var we=Vr(be,Ar(me));var Ee=xe;if(we<xe){o=[me[0],me[1]];Ee=we}if(me.length>2){var ke=Vr(be,{x:me[2],y:me[3]});if(ke<Ee){o=[me[2],me[3]]}}}}}var _e=Dn(o,N,i.arrowShapes[v].spacing(e)+h);var Te=Dn(o,N,i.arrowShapes[v].gap(e)+h);m.startX=Te[0];m.startY=Te[1];m.arrowStartX=_e[0];m.arrowStartY=_e[1];if(C){if(!I(m.startX)||!I(m.startY)||!I(m.endX)||!I(m.endY)){m.badLine=true}else{m.badLine=false}}};Uv.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);switch(t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};Uv.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);switch(t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var Hv={};function Kv(e,t,r){var n=function e(t,r,n,a){return Gr(t,r,n,a)};var a=t._private;var i=a.rstyle.bezierPts;for(var o=0;o<e.bezierProjPcts.length;o++){var s=e.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}Hv.storeEdgeProjections=function(e){var t=e._private;var r=t.rscratch;var n=r.edgeType;t.rstyle.bezierPts=null;t.rstyle.linePts=null;t.rstyle.haystackPts=null;if(n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){t.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4){Kv(this,e,r.allpts.slice(a,a+6))}}else if(n==="segments"){var i=t.rstyle.linePts=[];for(var a=0;a+1<r.allpts.length;a+=2){i.push({x:r.allpts[a],y:r.allpts[a+1]})}}else if(n==="haystack"){var o=r.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};Hv.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Zv={};Zv.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(G(t)){return}var r,n;var a=e._private;var i=e.width();var o=e.height();var s=e.padding();var u=e.position();var l=e.pstyle("text-halign").strValue;var f=e.pstyle("text-valign").strValue;var c=a.rscratch;var v=a.rstyle;switch(l){case"left":r=u.x-i/2-s;break;case"right":r=u.x+i/2+s;break;default:r=u.x}switch(f){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}c.labelX=r;c.labelY=n;v.labelX=r;v.labelY=n;this.calculateLabelAngles(e);this.applyLabelDimensions(e)};var $v=function e(t,r){var n=Math.atan(r/t);if(t===0&&n<0){n=n*-1}return n};var Qv=function e(t,r){var n=r.x-t.x;var a=r.y-t.y;return $v(n,a)};var Jv=function e(t,r,n,a){var i=Xr(0,a-.001,1);var o=Xr(0,a+.001,1);var s=Wr(t,r,n,i);var u=Wr(t,r,n,o);return Qv(s,u)};Zv.recalculateEdgeLabelProjections=function(e){var t;var r=e._private;var n=r.rscratch;var a=this;var i={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(i.mid||i.source||i.target);else{return}t={x:n.midX,y:n.midY};var o=function e(t,n,a){Kt(r.rscratch,t,n,a);Kt(r.rstyle,t,n,a)};o("labelX",null,t.x);o("labelY",null,t.y);var s=$v(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function e(){if(u.cache){return u.cache}var t=[];for(var i=0;i+5<n.allpts.length;i+=4){var o={x:n.allpts[i],y:n.allpts[i+1]};var s={x:n.allpts[i+2],y:n.allpts[i+3]};var l={x:n.allpts[i+4],y:n.allpts[i+5]};t.push({p0:o,p1:s,p2:l,startDist:0,length:0,segments:[]})}var f=r.rstyle.bezierPts;var c=a.bezierProjPcts.length;function v(e,t,r,n,a){var i=jr(t,r);var o=e.segments[e.segments.length-1];var s={p0:t,p1:r,t0:n,t1:a,startDist:o?o.startDist+o.length:0,length:i};e.segments.push(s);e.length+=i}for(var d=0;d<t.length;d++){var h=t[d];var p=t[d-1];if(p){h.startDist=p.startDist+p.length}v(h,h.p0,f[d*c],0,a.bezierProjPcts[0]);for(var g=0;g<c-1;g++){v(h,f[d*c+g],f[d*c+g+1],a.bezierProjPcts[g],a.bezierProjPcts[g+1])}v(h,f[d*c+c-1],h.p2,a.bezierProjPcts[c-1],1)}return u.cache=t};var l=function r(a){var s;var l=a==="source";if(!i[a]){return}var f=e.pstyle(a+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{var c=u();var v;var d=0;var h=0;for(var p=0;p<c.length;p++){var g=c[l?p:c.length-1-p];for(var y=0;y<g.segments.length;y++){var m=g.segments[l?y:g.segments.length-1-y];var b=p===c.length-1&&y===g.segments.length-1;d=h;h+=m.length;if(h>=f||b){v={cp:g,segment:m};break}}if(v){break}}var x=v.cp;var w=v.segment;var E=(f-d)/w.length;var k=w.t1-w.t0;var _=l?w.t0+k*E:w.t1-k*E;_=Xr(0,_,1);t=Wr(x.p0,x.p1,x.p2,_);s=Jv(x.p0,x.p1,x.p2,_);break}case"straight":case"segments":case"haystack":{var T=0,C,S;var D,P;var A=n.allpts.length;for(var M=0;M+3<A;M+=2){if(l){D={x:n.allpts[M],y:n.allpts[M+1]};P={x:n.allpts[M+2],y:n.allpts[M+3]}}else{D={x:n.allpts[A-2-M],y:n.allpts[A-1-M]};P={x:n.allpts[A-4-M],y:n.allpts[A-3-M]}}C=jr(D,P);S=T;T+=C;if(T>=f){break}}var B=f-S;var I=B/C;I=Xr(0,I,1);t=qr(D,P,I);s=Qv(D,P);break}}o("labelX",a,t.x);o("labelY",a,t.y);o("labelAutoAngle",a,s)};l("source");l("target");this.applyLabelDimensions(e)};Zv.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e);if(e.isEdge()){this.applyPrefixedLabelDimensions(e,"source");this.applyPrefixedLabelDimensions(e,"target")}};Zv.applyPrefixedLabelDimensions=function(e,t){var r=e._private;var n=this.getLabelText(e,t);var a=_t(n,e._private.labelDimsKey);if(Ht(r.rscratch,"prefixedLabelDimsKey",t)===a){return}Kt(r.rscratch,"prefixedLabelDimsKey",t,a);var i=this.calculateLabelDimensions(e,n);var o=e.pstyle("line-height").pfValue;var s=e.pstyle("text-wrap").strValue;var u=Ht(r.rscratch,"labelWrapCachedLines",t)||[];var l=s!=="wrap"?1:Math.max(u.length,1);var f=i.height/l;var c=f*o;var v=i.width;var d=i.height+(l-1)*(o-1)*f;Kt(r.rstyle,"labelWidth",t,v);Kt(r.rscratch,"labelWidth",t,v);Kt(r.rstyle,"labelHeight",t,d);Kt(r.rscratch,"labelHeight",t,d);Kt(r.rscratch,"labelLineHeight",t,c)};Zv.getLabelText=function(e,t){var r=e._private;var n=t?t+"-":"";var a=e.pstyle(n+"label").strValue;var i=e.pstyle("text-transform").value;var o=function e(n,a){if(a){Kt(r.rscratch,n,t,a);return a}else{return Ht(r.rscratch,n,t)}};if(!a){return""}if(i=="none");else if(i=="uppercase"){a=a.toUpperCase()}else if(i=="lowercase"){a=a.toLowerCase()}var s=e.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u){return o("labelWrapCachedText")}var f="";var c=a.split("\n");var v=e.pstyle("text-max-width").pfValue;var d=e.pstyle("text-overflow-wrap").value;var h=d==="anywhere";var p=[];var g=/[\s\u200b]+|$/g;for(var y=0;y<c.length;y++){var m=c[y];var b=this.calculateLabelDimensions(e,m);var x=b.width;if(h){var w=m.split("").join(f);m=w}if(x>v){var E=m.matchAll(g);var k="";var _=0;var T=l(E),C;try{for(T.s();!(C=T.n()).done;){var S=C.value;var D=S[0];var P=m.substring(_,S.index);_=S.index+D.length;var A=k.length===0?P:k+P+D;var M=this.calculateLabelDimensions(e,A);var B=M.width;if(B<=v){k+=P+D}else{if(k){p.push(k)}k=P+D}}}catch(e){T.e(e)}finally{T.f()}if(!k.match(/^[\s\u200b]+$/)){p.push(k)}}else{p.push(m)}}o("labelWrapCachedLines",p);a=o("labelWrapCachedText",p.join("\n"));o("labelWrapKey",u)}else if(s==="ellipsis"){var I=e.pstyle("text-max-width").pfValue;var O="";var R="";var N=false;if(this.calculateLabelDimensions(e,a).width<I){return a}for(var L=0;L<a.length;L++){var z=this.calculateLabelDimensions(e,O+a[L]+R).width;if(z>I){break}O+=a[L];if(L===a.length-1){N=true}}if(!N){O+=R}return O}return a};Zv.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue;var r=e.pstyle("text-halign").strValue;if(t==="auto"){if(e.isNode()){switch(r){case"left":return"right";case"right":return"left";default:return"center"}}else{return"center"}}else{return t}};Zv.calculateLabelDimensions=function(e,t){var r=this;var n=r.cy.window();var a=n.document;var i=0;var o=e.pstyle("font-style").strValue;var s=e.pstyle("font-size").pfValue;var u=e.pstyle("font-family").strValue;var l=e.pstyle("font-weight").strValue;var f=this.labelCalcCanvas;var c=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=a.createElement("canvas");c=this.labelCalcCanvasContext=f.getContext("2d");var v=f.style;v.position="absolute";v.left="-9999px";v.top="-9999px";v.zIndex="-1";v.visibility="hidden";v.pointerEvents="none"}c.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(u);var d=0;var h=0;var p=t.split("\n");for(var g=0;g<p.length;g++){var y=p[g];var m=c.measureText(y);var b=Math.ceil(m.width);var x=s;d=Math.max(b,d);h+=x}d+=i;h+=i;return{width:d,height:h}};Zv.calculateLabelAngle=function(e,t){var r=e._private;var n=r.rscratch;var a=e.isEdge();var i=t?t+"-":"";var o=e.pstyle(i+"text-rotation");var s=o.strValue;if(s==="none"){return 0}else if(a&&s==="autorotate"){return n.labelAutoAngle}else if(s==="autorotate"){return 0}else{return o.pfValue}};Zv.calculateLabelAngles=function(e){var t=this;var r=e.isEdge();var n=e._private;var a=n.rscratch;a.labelAngle=t.calculateLabelAngle(e);if(r){a.sourceLabelAngle=t.calculateLabelAngle(e,"source");a.targetLabelAngle=t.calculateLabelAngle(e,"target")}};var ed={};var td=28;var rd=false;ed.getNodeShape=function(e){var t=this;var r=e.pstyle("shape").value;if(r==="cutrectangle"&&(e.width()<td||e.height()<td)){if(!rd){Lt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead");rd=true}return"rectangle"}if(e.isParent()){if(r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"){return r}else{return"rectangle"}}if(r==="polygon"){var n=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(n).name}return r};var nd={};nd.registerCalculationListeners=function(){var e=this.cy;var t=e.collection();var r=this;var n=function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;t.merge(r);if(n){for(var a=0;a<r.length;a++){var i=r[a];var o=i._private;var s=o.rstyle;s.clean=false;s.cleanConnected=false}}};r.binder(e).on("bounds.* dirty.*",function e(t){var r=t.target;n(r)}).on("style.* background.*",function e(t){var r=t.target;n(r,false)});var a=function a(i){if(i){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var s=0;s<t.length;s++){var u=t[s];var l=u._private.rstyle;if(u.isNode()&&!l.cleanConnected){n(u.connectedEdges());l.cleanConnected=true}}if(o){for(var f=0;f<o.length;f++){var c=o[f];c(i,t)}}r.recalculateRenderedStyle(t);t=e.collection()}};r.flushRenderedStyleQueue=function(){a(true)};r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};nd.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};nd.recalculateRenderedStyle=function(e,t){var r=function e(t){return t._private.rstyle.cleanConnected};if(e.length===0){return}var n=[];var a=[];if(this.destroyed){return}if(t===undefined){t=true}for(var i=0;i<e.length;i++){var o=e[i];var s=o._private;var u=s.rstyle;if(o.isEdge()&&(!r(o.source())||!r(o.target()))){u.clean=false}if(o.isEdge()&&o.isBundledBezier()){if(o.parallelEdges().some(function(e){return!e._private.rstyle.clean&&e.isBundledBezier()})){u.clean=false}}if(t&&u.clean||o.removed()){continue}if(o.pstyle("display").value==="none"){continue}if(s.group==="nodes"){a.push(o)}else{n.push(o)}u.clean=true}for(var l=0;l<a.length;l++){var f=a[l];var c=f._private;var v=c.rstyle;var d=f.position();this.recalculateNodeLabelProjection(f);v.nodeX=d.x;v.nodeY=d.y;v.nodeW=f.pstyle("width").pfValue;v.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var p=n[h];var g=p._private;var y=g.rstyle;var m=g.rscratch;y.srcX=m.arrowStartX;y.srcY=m.arrowStartY;y.tgtX=m.arrowEndX;y.tgtY=m.arrowEndY;y.midX=m.midX;y.midY=m.midY;y.labelAngle=m.labelAngle;y.sourceLabelAngle=m.sourceLabelAngle;y.targetLabelAngle=m.targetLabelAngle}};var ad={};ad.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(!e){return}e.drag=[];e.nondrag=[];var t=[];for(var r=0;r<e.length;r++){var n=e[r];var a=n._private.rscratch;if(n.grabbed()&&!n.isParent()){t.push(n)}else if(a.inDragLayer){e.drag.push(n)}else{e.nondrag.push(n)}}for(var r=0;r<t.length;r++){var n=t[r];e.drag.push(n)}};ad.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};ad.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(vf);t.interactive=t.filter(function(e){return e.interactive()});this.cachedZSortedEles=t;this.updateCachedGrabbedEles()}else{t=this.cachedZSortedEles}return t};var id={};[yv,mv,Xv,Uv,Hv,Zv,ed,nd,ad].forEach(function(e){ue(id,e)});var od={};od.getCachedImage=function(e,t,r){var n=this;var a=n.imageCache=n.imageCache||{};var i=a[e];if(i){if(!i.image.complete){i.image.addEventListener("load",r)}return i.image}else{i=a[e]=a[e]||{};var o=i.image=new Image;o.addEventListener("load",r);o.addEventListener("error",function(){o.error=true});var s="data:";var u=e.substring(0,s.length).toLowerCase()===s;if(!u){t=t==="null"?null:t;o.crossOrigin=t}o.src=e;return o}};var sd={};sd.registerBinding=function(e,t,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){var i=[];for(var o=0;o<e.length;o++){var s=e[o];if(s!==undefined){var u=this.binder(s);i.push(u.on.apply(u,a))}}return i}var u=this.binder(e);return u.on.apply(u,a)};sd.binder=function(e){var t=this;var r=t.cy.window();var n=e===r||e===r.document||e===r.document.body||W(e);if(t.supportsPassiveEvents==null){var a=false;try{var i=Object.defineProperty({},"passive",{get:function e(){a=true;return true}});r.addEventListener("test",null,i)}catch(e){}t.supportsPassiveEvents=a}var o=function r(a,i,o){var s=Array.prototype.slice.call(arguments);if(n&&t.supportsPassiveEvents){s[2]={capture:o!=null?o:false,passive:false,once:false}}t.bindings.push({target:e,args:s});(e.addEventListener||e.on).apply(e,s);return this};return{on:o,addEventListener:o,addListener:o,bind:o}};sd.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};sd.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};sd.load=function(){var e=this;var t=e.cy.window();var r=function e(t){return t.selected()};var n=function e(t){var r=t.getRootNode();if(r&&r.nodeType===11&&r.host!==undefined){return r}};var a=function t(r,n,a,i){if(r==null){r=e.cy}for(var o=0;o<n.length;o++){var s=n[o];r.emit({originalEvent:a,type:s,position:i})}};var i=function e(t){return t.shiftKey||t.metaKey||t.ctrlKey};var o=function t(r,n){var a=true;if(e.cy.hasCompoundNodes()&&r&&r.pannable()){for(var i=0;n&&i<n.length;i++){var r=n[i];if(r.isNode()&&r.isParent()&&!r.pannable()){a=false;break}}}else{a=true}return a};var s=function e(t){t[0]._private.grabbed=true};var u=function e(t){t[0]._private.grabbed=false};var l=function e(t){t[0]._private.rscratch.inDragLayer=true};var f=function e(t){t[0]._private.rscratch.inDragLayer=false};var c=function e(t){t[0]._private.rscratch.isGrabTarget=true};var v=function e(t){t[0]._private.rscratch.isGrabTarget=false};var d=function e(t,r){var n=r.addToList;var a=n.has(t);if(!a&&t.grabbable()&&!t.locked()){n.merge(t);s(t)}};var h=function e(t,r){if(!t.cy().hasCompoundNodes()){return}if(r.inDragLayer==null&&r.addToList==null){return}var n=t.descendants();if(r.inDragLayer){n.forEach(l);n.connectedEdges().forEach(l)}if(r.addToList){d(n,r)}};var p=function t(r,n){n=n||{};var a=r.cy().hasCompoundNodes();if(n.inDragLayer){r.forEach(l);r.neighborhood().stdFilter(function(e){return!a||e.isEdge()}).forEach(l)}if(n.addToList){r.forEach(function(e){d(e,n)})}h(r,n);m(r,{inDragLayer:n.inDragLayer});e.updateCachedGrabbedEles()};var g=p;var y=function t(r){if(!r){return}e.getCachedZSortedEles().forEach(function(e){u(e);f(e);v(e)});e.updateCachedGrabbedEles()};var m=function e(t,r){if(r.inDragLayer==null&&r.addToList==null){return}if(!t.cy().hasCompoundNodes()){return}var n=t.ancestors().orphans();if(n.same(t)){return}var a=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants());var i=a.connectedEdges();if(r.inDragLayer){i.forEach(l);a.forEach(l)}if(r.addToList){a.forEach(function(e){d(e,r)})}};var b=function e(){if(document.activeElement!=null&&document.activeElement.blur!=null){document.activeElement.blur()}};var x=typeof MutationObserver!=="undefined";var w=typeof ResizeObserver!=="undefined";if(x){e.removeObserver=new MutationObserver(function(t){for(var r=0;r<t.length;r++){var n=t[r];var a=n.removedNodes;if(a){for(var i=0;i<a.length;i++){var o=a[i];if(o===e.container){e.destroy();break}}}}});if(e.container.parentNode){e.removeObserver.observe(e.container.parentNode,{childList:true})}}else{e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()})}var E=ut(function(){e.cy.resize()},100);if(x){e.styleObserver=new MutationObserver(E);e.styleObserver.observe(e.container,{attributes:true})}e.registerBinding(t,"resize",E);if(w){e.resizeObserver=new ResizeObserver(E);e.resizeObserver.observe(e.container)}var k=function e(t,r){while(t!=null){r(t);t=t.parentNode}};var _=function t(){e.invalidateContainerClientCoordsCache()};k(e.container,function(t){e.registerBinding(t,"transitionend",_);e.registerBinding(t,"animationend",_);e.registerBinding(t,"scroll",_)});e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var T=function t(){return e.selection[4]!==0};var C=function t(r){var n=e.findContainerClientCoords();var a=n[0];var i=n[1];var o=n[2];var s=n[3];var u=r.touches?r.touches:[r];var l=false;for(var f=0;f<u.length;f++){var c=u[f];if(a<=c.clientX&&c.clientX<=a+o&&i<=c.clientY&&c.clientY<=i+s){l=true;break}}if(!l){return false}var v=e.container;var d=r.target;var h=d.parentNode;var p=false;while(h){if(h===v){p=true;break}h=h.parentNode}if(!p){return false}return true};e.registerBinding(e.container,"mousedown",function t(r){if(!C(r)){return}if(e.hoverData.which===1&&r.which!==1){return}r.preventDefault();b();e.hoverData.capture=true;e.hoverData.which=r.which;var n=e.cy;var i=[r.clientX,r.clientY];var o=e.projectIntoViewport(i[0],i[1]);var s=e.selection;var u=e.findNearestElements(o[0],o[1],true,false);var l=u[0];var f=e.dragData.possibleDragElements;e.hoverData.mdownPos=o;e.hoverData.mdownGPos=i;var v=function e(t){return{originalEvent:r,type:t,position:{x:o[0],y:o[1]}}};var d=function t(){e.hoverData.tapholdCancelled=false;clearTimeout(e.hoverData.tapholdTimeout);e.hoverData.tapholdTimeout=setTimeout(function(){if(e.hoverData.tapholdCancelled){return}else{var t=e.hoverData.down;if(t){t.emit(v("taphold"))}else{n.emit(v("taphold"))}}},e.tapholdDuration)};if(r.which==3){e.hoverData.cxtStarted=true;var h={originalEvent:r,type:"cxttapstart",position:{x:o[0],y:o[1]}};if(l){l.activate();l.emit(h);e.hoverData.down=l}else{n.emit(h)}e.hoverData.downTime=(new Date).getTime();e.hoverData.cxtDragged=false}else if(r.which==1){if(l){l.activate()}{if(l!=null){if(e.nodeIsGrabbable(l)){var y=function e(t){t.emit(v("grab"))};c(l);if(!l.selected()){f=e.dragData.possibleDragElements=n.collection();g(l,{addToList:f});l.emit(v("grabon")).emit(v("grab"))}else{f=e.dragData.possibleDragElements=n.collection();var m=n.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});p(m,{addToList:f});l.emit(v("grabon"));m.forEach(y)}e.redrawHint("eles",true);e.redrawHint("drag",true)}}e.hoverData.down=l;e.hoverData.downs=u;e.hoverData.downTime=(new Date).getTime()}a(l,["mousedown","tapstart","vmousedown"],r,{x:o[0],y:o[1]});if(l==null){s[4]=1;e.data.bgActivePosistion={x:o[0],y:o[1]};e.redrawHint("select",true);e.redraw()}else if(l.pannable()){s[4]=1}d()}s[0]=s[2]=o[0];s[1]=s[3]=o[1]},false);var S=n(e.container);e.registerBinding([t,S],"mousemove",function t(r){var n=e.hoverData.capture;if(!n&&!C(r)){return}var s=false;var u=e.cy;var l=u.zoom();var f=[r.clientX,r.clientY];var c=e.projectIntoViewport(f[0],f[1]);var v=e.hoverData.mdownPos;var d=e.hoverData.mdownGPos;var h=e.selection;var g=null;if(!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting){g=e.findNearestElement(c[0],c[1],true,false)}var m=e.hoverData.last;var b=e.hoverData.down;var x=[c[0]-h[2],c[1]-h[3]];var w=e.dragData.possibleDragElements;var E;if(d){var k=f[0]-d[0];var _=k*k;var T=f[1]-d[1];var S=T*T;var D=_+S;e.hoverData.isOverThresholdDrag=E=D>=e.desktopTapThreshold2}var P=i(r);if(E){e.hoverData.tapholdCancelled=true}var A=function t(){var r=e.hoverData.dragDelta=e.hoverData.dragDelta||[];if(r.length===0){r.push(x[0]);r.push(x[1])}else{r[0]+=x[0];r[1]+=x[1]}};s=true;a(g,["mousemove","vmousemove","tapdrag"],r,{x:c[0],y:c[1]});var M=function e(t){return{originalEvent:r,type:t,position:{x:c[0],y:c[1]}}};var B=function t(){e.data.bgActivePosistion=undefined;if(!e.hoverData.selecting){u.emit(M("boxstart"))}h[4]=1;e.hoverData.selecting=true;e.redrawHint("select",true);e.redraw()};if(e.hoverData.which===3){if(E){var O=M("cxtdrag");if(b){b.emit(O)}else{u.emit(O)}e.hoverData.cxtDragged=true;if(!e.hoverData.cxtOver||g!==e.hoverData.cxtOver){if(e.hoverData.cxtOver){e.hoverData.cxtOver.emit(M("cxtdragout"))}e.hoverData.cxtOver=g;if(g){g.emit(M("cxtdragover"))}}}}else if(e.hoverData.dragging){s=true;if(u.panningEnabled()&&u.userPanningEnabled()){var R;if(e.hoverData.justStartedPan){var N=e.hoverData.mdownPos;R={x:(c[0]-N[0])*l,y:(c[1]-N[1])*l};e.hoverData.justStartedPan=false}else{R={x:x[0]*l,y:x[1]*l}}u.panBy(R);u.emit(M("dragpan"));e.hoverData.dragged=true}c=e.projectIntoViewport(r.clientX,r.clientY)}else if(h[4]==1&&(b==null||b.pannable())){if(E){if(!e.hoverData.dragging&&u.boxSelectionEnabled()&&(P||!u.panningEnabled()||!u.userPanningEnabled())){B()}else if(!e.hoverData.selecting&&u.panningEnabled()&&u.userPanningEnabled()){var L=o(b,e.hoverData.downs);if(L){e.hoverData.dragging=true;e.hoverData.justStartedPan=true;h[4]=0;e.data.bgActivePosistion=Ar(v);e.redrawHint("select",true);e.redraw()}}if(b&&b.pannable()&&b.active()){b.unactivate()}}}else{if(b&&b.pannable()&&b.active()){b.unactivate()}if((!b||!b.grabbed())&&g!=m){if(m){a(m,["mouseout","tapdragout"],r,{x:c[0],y:c[1]})}if(g){a(g,["mouseover","tapdragover"],r,{x:c[0],y:c[1]})}e.hoverData.last=g}if(b){if(E){if(u.boxSelectionEnabled()&&P){if(b&&b.grabbed()){y(w);b.emit(M("freeon"));w.emit(M("free"));if(e.dragData.didDrag){b.emit(M("dragfreeon"));w.emit(M("dragfree"))}}B()}else if(b&&b.grabbed()&&e.nodeIsDraggable(b)){var z=!e.dragData.didDrag;if(z){e.redrawHint("eles",true)}e.dragData.didDrag=true;if(!e.hoverData.draggingEles){p(w,{inDragLayer:true})}var j={x:0,y:0};if(I(x[0])&&I(x[1])){j.x+=x[0];j.y+=x[1];if(z){var V=e.hoverData.dragDelta;if(V&&I(V[0])&&I(V[1])){j.x+=V[0];j.y+=V[1]}}}e.hoverData.draggingEles=true;w.silentShift(j).emit(M("position")).emit(M("drag"));e.redrawHint("drag",true);e.redraw()}}else{A()}}s=true}h[2]=c[0];h[3]=c[1];if(s){if(r.stopPropagation)r.stopPropagation();if(r.preventDefault)r.preventDefault();return false}},false);var D,P,A;e.registerBinding(t,"mouseup",function t(n){if(e.hoverData.which===1&&n.which!==1&&e.hoverData.capture){return}var o=e.hoverData.capture;if(!o){return}e.hoverData.capture=false;var s=e.cy;var u=e.projectIntoViewport(n.clientX,n.clientY);var l=e.selection;var f=e.findNearestElement(u[0],u[1],true,false);var c=e.dragData.possibleDragElements;var v=e.hoverData.down;var d=i(n);if(e.data.bgActivePosistion){e.redrawHint("select",true);e.redraw()}e.hoverData.tapholdCancelled=true;e.data.bgActivePosistion=undefined;if(v){v.unactivate()}var h=function e(t){return{originalEvent:n,type:t,position:{x:u[0],y:u[1]}}};if(e.hoverData.which===3){var p=h("cxttapend");if(v){v.emit(p)}else{s.emit(p)}if(!e.hoverData.cxtDragged){var g=h("cxttap");if(v){v.emit(g)}else{s.emit(g)}}e.hoverData.cxtDragged=false;e.hoverData.which=null}else if(e.hoverData.which===1){a(f,["mouseup","tapend","vmouseup"],n,{x:u[0],y:u[1]});if(!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag){a(v,["click","tap","vclick"],n,{x:u[0],y:u[1]});P=false;if(n.timeStamp-A<=s.multiClickDebounceTime()){D&&clearTimeout(D);P=true;A=null;a(v,["dblclick","dbltap","vdblclick"],n,{x:u[0],y:u[1]})}else{D=setTimeout(function(){if(P)return;a(v,["oneclick","onetap","voneclick"],n,{x:u[0],y:u[1]})},s.multiClickDebounceTime());A=n.timeStamp}}if(v==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!i(n)){s.$(r).unselect(["tapunselect"]);if(c.length>0){e.redrawHint("eles",true)}e.dragData.possibleDragElements=c=s.collection()}if(f==v&&!e.dragData.didDrag&&!e.hoverData.selecting){if(f!=null&&f._private.selectable){if(e.hoverData.dragging);else if(s.selectionType()==="additive"||d){if(f.selected()){f.unselect(["tapunselect"])}else{f.select(["tapselect"])}}else{if(!d){s.$(r).unmerge(f).unselect(["tapunselect"]);f.select(["tapselect"])}}e.redrawHint("eles",true)}}if(e.hoverData.selecting){var m=s.collection(e.getAllInBox(l[0],l[1],l[2],l[3]));e.redrawHint("select",true);if(m.length>0){e.redrawHint("eles",true)}s.emit(h("boxend"));var b=function e(t){return t.selectable()&&!t.selected()};if(s.selectionType()==="additive"){m.emit(h("box")).stdFilter(b).select().emit(h("boxselect"))}else{if(!d){s.$(r).unmerge(m).unselect()}m.emit(h("box")).stdFilter(b).select().emit(h("boxselect"))}e.redraw()}if(e.hoverData.dragging){e.hoverData.dragging=false;e.redrawHint("select",true);e.redrawHint("eles",true);e.redraw()}if(!l[4]){e.redrawHint("drag",true);e.redrawHint("eles",true);var x=v&&v.grabbed();y(c);if(x){v.emit(h("freeon"));c.emit(h("free"));if(e.dragData.didDrag){v.emit(h("dragfreeon"));c.emit(h("dragfree"))}}}}l[4]=0;e.hoverData.down=null;e.hoverData.cxtStarted=false;e.hoverData.draggingEles=false;e.hoverData.selecting=false;e.hoverData.isOverThresholdDrag=false;e.dragData.didDrag=false;e.hoverData.dragged=false;e.hoverData.dragDelta=[];e.hoverData.mdownPos=null;e.hoverData.mdownGPos=null;e.hoverData.which=null},false);var M=[];var B=4;var O;var R=1e5;var N=function e(t,r){for(var n=0;n<t.length;n++){if(t[n]%r!==0){return false}}return true};var L=function e(t){var r=Math.abs(t[0]);for(var n=1;n<t.length;n++){if(Math.abs(t[n])!==r){return false}}return true};var z=function t(r){var n=false;var a=r.deltaY;if(a==null){if(r.wheelDeltaY!=null){a=r.wheelDeltaY/4}else if(r.wheelDelta!=null){a=r.wheelDelta/4}}if(a===0){return}if(O==null){if(M.length>=B){var i=M;O=N(i,5);if(!O){var o=Math.abs(i[0]);O=L(i)&&o>5}if(O){for(var s=0;s<i.length;s++){R=Math.min(Math.abs(i[s]),R)}}}else{M.push(a);n=true}}else if(O){R=Math.min(Math.abs(a),R)}if(e.scrollingPage){return}var u=e.cy;var l=u.zoom();var f=u.pan();var c=e.projectIntoViewport(r.clientX,r.clientY);var v=[c[0]*l+f.x,c[1]*l+f.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||T()){r.preventDefault();return}if(u.panningEnabled()&&u.userPanningEnabled()&&u.zoomingEnabled()&&u.userZoomingEnabled()){r.preventDefault();e.data.wheelZooming=true;clearTimeout(e.data.wheelTimeout);e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=false;e.redrawHint("eles",true);e.redraw()},150);var d;if(n&&Math.abs(a)>5){a=zr(a)*5}d=a/-250;if(O){d/=R;d*=3}d=d*e.wheelSensitivity;var h=r.deltaMode===1;if(h){d*=33}var p=u.zoom()*Math.pow(10,d);if(r.type==="gesturechange"){p=e.gestureStartZoom*r.scale}u.zoom({level:p,renderedPosition:{x:v[0],y:v[1]}});u.emit({type:r.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:r,position:{x:c[0],y:c[1]}})}};e.registerBinding(e.container,"wheel",z,true);e.registerBinding(t,"scroll",function t(r){e.scrollingPage=true;clearTimeout(e.scrollingPageTimeout);e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=false},250)},true);e.registerBinding(e.container,"gesturestart",function t(r){e.gestureStartZoom=e.cy.zoom();if(!e.hasTouchStarted){r.preventDefault()}},true);e.registerBinding(e.container,"gesturechange",function(t){if(!e.hasTouchStarted){z(t)}},true);e.registerBinding(e.container,"mouseout",function t(r){var n=e.projectIntoViewport(r.clientX,r.clientY);e.cy.emit({originalEvent:r,type:"mouseout",position:{x:n[0],y:n[1]}})},false);e.registerBinding(e.container,"mouseover",function t(r){var n=e.projectIntoViewport(r.clientX,r.clientY);e.cy.emit({originalEvent:r,type:"mouseover",position:{x:n[0],y:n[1]}})},false);var j,V,F,G;var W,q;var X,Y;var U,H;var K,Z;var $;var Q=function e(t,r,n,a){return Math.sqrt((n-t)*(n-t)+(a-r)*(a-r))};var J=function e(t,r,n,a){return(n-t)*(n-t)+(a-r)*(a-r)};var ee;e.registerBinding(e.container,"touchstart",ee=function t(r){e.hasTouchStarted=true;if(!C(r)){return}b();e.touchData.capture=true;e.data.bgActivePosistion=undefined;var n=e.cy;var i=e.touchData.now;var o=e.touchData.earlier;if(r.touches[0]){var s=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);i[0]=s[0];i[1]=s[1]}if(r.touches[1]){var s=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);i[2]=s[0];i[3]=s[1]}if(r.touches[2]){var s=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);i[4]=s[0];i[5]=s[1]}var u=function e(t){return{originalEvent:r,type:t,position:{x:i[0],y:i[1]}}};if(r.touches[1]){e.touchData.singleTouchMoved=true;y(e.dragData.touchDragEles);var l=e.findContainerClientCoords();U=l[0];H=l[1];K=l[2];Z=l[3];j=r.touches[0].clientX-U;V=r.touches[0].clientY-H;F=r.touches[1].clientX-U;G=r.touches[1].clientY-H;$=0<=j&&j<=K&&0<=F&&F<=K&&0<=V&&V<=Z&&0<=G&&G<=Z;var f=n.pan();var v=n.zoom();W=Q(j,V,F,G);q=J(j,V,F,G);X=[(j+F)/2,(V+G)/2];Y=[(X[0]-f.x)/v,(X[1]-f.y)/v];var d=200;var h=d*d;if(q<h&&!r.touches[2]){var m=e.findNearestElement(i[0],i[1],true,true);var x=e.findNearestElement(i[2],i[3],true,true);if(m&&m.isNode()){m.activate().emit(u("cxttapstart"));e.touchData.start=m}else if(x&&x.isNode()){x.activate().emit(u("cxttapstart"));e.touchData.start=x}else{n.emit(u("cxttapstart"))}if(e.touchData.start){e.touchData.start._private.grabbed=false}e.touchData.cxt=true;e.touchData.cxtDragged=false;e.data.bgActivePosistion=undefined;e.redraw();return}}if(r.touches[2]){if(n.boxSelectionEnabled()){r.preventDefault()}}else if(r.touches[1]);else if(r.touches[0]){var w=e.findNearestElements(i[0],i[1],true,true);var E=w[0];if(E!=null){E.activate();e.touchData.start=E;e.touchData.starts=w;if(e.nodeIsGrabbable(E)){var k=e.dragData.touchDragEles=n.collection();var _=null;e.redrawHint("eles",true);e.redrawHint("drag",true);if(E.selected()){_=n.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)});p(_,{addToList:k})}else{g(E,{addToList:k})}c(E);E.emit(u("grabon"));if(_){_.forEach(function(e){e.emit(u("grab"))})}else{E.emit(u("grab"))}}}a(E,["touchstart","tapstart","vmousedown"],r,{x:i[0],y:i[1]});if(E==null){e.data.bgActivePosistion={x:s[0],y:s[1]};e.redrawHint("select",true);e.redraw()}e.touchData.singleTouchMoved=false;e.touchData.singleTouchStartTime=+new Date;clearTimeout(e.touchData.tapholdTimeout);e.touchData.tapholdTimeout=setTimeout(function(){if(e.touchData.singleTouchMoved===false&&!e.pinching&&!e.touchData.selecting){a(e.touchData.start,["taphold"],r,{x:i[0],y:i[1]})}},e.tapholdDuration)}if(r.touches.length>=1){var T=e.touchData.startPosition=[null,null,null,null,null,null];for(var S=0;S<i.length;S++){T[S]=o[S]=i[S]}var D=r.touches[0];e.touchData.startGPosition=[D.clientX,D.clientY]}},false);var te;e.registerBinding(t,"touchmove",te=function t(r){var n=e.touchData.capture;if(!n&&!C(r)){return}var i=e.selection;var s=e.cy;var u=e.touchData.now;var l=e.touchData.earlier;var f=s.zoom();if(r.touches[0]){var c=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=c[0];u[1]=c[1]}if(r.touches[1]){var c=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=c[0];u[3]=c[1]}if(r.touches[2]){var c=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=c[0];u[5]=c[1]}var v=function e(t){return{originalEvent:r,type:t,position:{x:u[0],y:u[1]}}};var d=e.touchData.startGPosition;var h;if(n&&r.touches[0]&&d){var g=[];for(var m=0;m<u.length;m++){g[m]=u[m]-l[m]}var b=r.touches[0].clientX-d[0];var x=b*b;var w=r.touches[0].clientY-d[1];var E=w*w;var k=x+E;h=k>=e.touchTapThreshold2}if(n&&e.touchData.cxt){r.preventDefault();var _=r.touches[0].clientX-U,T=r.touches[0].clientY-H;var S=r.touches[1].clientX-U,D=r.touches[1].clientY-H;var P=J(_,T,S,D);var A=P/q;var M=150;var B=M*M;var O=1.5;var R=O*O;if(A>=R||P>=B){e.touchData.cxt=false;e.data.bgActivePosistion=undefined;e.redrawHint("select",true);var N=v("cxttapend");if(e.touchData.start){e.touchData.start.unactivate().emit(N);e.touchData.start=null}else{s.emit(N)}}}if(n&&e.touchData.cxt){var N=v("cxtdrag");e.data.bgActivePosistion=undefined;e.redrawHint("select",true);if(e.touchData.start){e.touchData.start.emit(N)}else{s.emit(N)}if(e.touchData.start){e.touchData.start._private.grabbed=false}e.touchData.cxtDragged=true;var L=e.findNearestElement(u[0],u[1],true,true);if(!e.touchData.cxtOver||L!==e.touchData.cxtOver){if(e.touchData.cxtOver){e.touchData.cxtOver.emit(v("cxtdragout"))}e.touchData.cxtOver=L;if(L){L.emit(v("cxtdragover"))}}}else if(n&&r.touches[2]&&s.boxSelectionEnabled()){r.preventDefault();e.data.bgActivePosistion=undefined;this.lastThreeTouch=+new Date;if(!e.touchData.selecting){s.emit(v("boxstart"))}e.touchData.selecting=true;e.touchData.didSelect=true;i[4]=1;if(!i||i.length===0||i[0]===undefined){i[0]=(u[0]+u[2]+u[4])/3;i[1]=(u[1]+u[3]+u[5])/3;i[2]=(u[0]+u[2]+u[4])/3+1;i[3]=(u[1]+u[3]+u[5])/3+1}else{i[2]=(u[0]+u[2]+u[4])/3;i[3]=(u[1]+u[3]+u[5])/3}e.redrawHint("select",true);e.redraw()}else if(n&&r.touches[1]&&!e.touchData.didSelect&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){r.preventDefault();e.data.bgActivePosistion=undefined;e.redrawHint("select",true);var z=e.dragData.touchDragEles;if(z){e.redrawHint("drag",true);for(var X=0;X<z.length;X++){var K=z[X]._private;K.grabbed=false;K.rscratch.inDragLayer=false}}var Z=e.touchData.start;var _=r.touches[0].clientX-U,T=r.touches[0].clientY-H;var S=r.touches[1].clientX-U,D=r.touches[1].clientY-H;var ee=Q(_,T,S,D);var te=ee/W;if($){var re=_-j;var ne=T-V;var ae=S-F;var ie=D-G;var oe=(re+ae)/2;var se=(ne+ie)/2;var ue=s.zoom();var le=ue*te;var fe=s.pan();var ce=Y[0]*ue+fe.x;var ve=Y[1]*ue+fe.y;var de={x:-le/ue*(ce-fe.x-oe)+ce,y:-le/ue*(ve-fe.y-se)+ve};if(Z&&Z.active()){var z=e.dragData.touchDragEles;y(z);e.redrawHint("drag",true);e.redrawHint("eles",true);Z.unactivate().emit(v("freeon"));z.emit(v("free"));if(e.dragData.didDrag){Z.emit(v("dragfreeon"));z.emit(v("dragfree"))}}s.viewport({zoom:le,pan:de,cancelOnFailedZoom:true});s.emit(v("pinchzoom"));W=ee;j=_;V=T;F=S;G=D;e.pinching=true}if(r.touches[0]){var c=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=c[0];u[1]=c[1]}if(r.touches[1]){var c=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=c[0];u[3]=c[1]}if(r.touches[2]){var c=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=c[0];u[5]=c[1]}}else if(r.touches[0]&&!e.touchData.didSelect){var he=e.touchData.start;var pe=e.touchData.last;var L;if(!e.hoverData.draggingEles&&!e.swipePanning){L=e.findNearestElement(u[0],u[1],true,true)}if(n&&he!=null){r.preventDefault()}if(n&&he!=null&&e.nodeIsDraggable(he)){if(h){var z=e.dragData.touchDragEles;var ge=!e.dragData.didDrag;if(ge){p(z,{inDragLayer:true})}e.dragData.didDrag=true;var ye={x:0,y:0};if(I(g[0])&&I(g[1])){ye.x+=g[0];ye.y+=g[1];if(ge){e.redrawHint("eles",true);var me=e.touchData.dragDelta;if(me&&I(me[0])&&I(me[1])){ye.x+=me[0];ye.y+=me[1]}}}e.hoverData.draggingEles=true;z.silentShift(ye).emit(v("position")).emit(v("drag"));e.redrawHint("drag",true);if(e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]){e.redrawHint("eles",true)}e.redraw()}else{var me=e.touchData.dragDelta=e.touchData.dragDelta||[];if(me.length===0){me.push(g[0]);me.push(g[1])}else{me[0]+=g[0];me[1]+=g[1]}}}{a(he||L,["touchmove","tapdrag","vmousemove"],r,{x:u[0],y:u[1]});if((!he||!he.grabbed())&&L!=pe){if(pe){pe.emit(v("tapdragout"))}if(L){L.emit(v("tapdragover"))}}e.touchData.last=L}if(n){for(var X=0;X<u.length;X++){if(u[X]&&e.touchData.startPosition[X]&&h){e.touchData.singleTouchMoved=true}}}if(n&&(he==null||he.pannable())&&s.panningEnabled()&&s.userPanningEnabled()){var be=o(he,e.touchData.starts);if(be){r.preventDefault();if(!e.data.bgActivePosistion){e.data.bgActivePosistion=Ar(e.touchData.startPosition)}if(e.swipePanning){s.panBy({x:g[0]*f,y:g[1]*f});s.emit(v("dragpan"))}else if(h){e.swipePanning=true;s.panBy({x:b*f,y:w*f});s.emit(v("dragpan"));if(he){he.unactivate();e.redrawHint("select",true);e.touchData.start=null}}}var c=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=c[0];u[1]=c[1]}}for(var m=0;m<u.length;m++){l[m]=u[m]}if(n&&r.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null){e.data.bgActivePosistion=undefined;e.redrawHint("select",true);e.redraw()}},false);var re;e.registerBinding(t,"touchcancel",re=function t(r){var n=e.touchData.start;e.touchData.capture=false;if(n){n.unactivate()}});var ne,ae,ie,oe;e.registerBinding(t,"touchend",ne=function t(n){var i=e.touchData.start;var o=e.touchData.capture;if(o){if(n.touches.length===0){e.touchData.capture=false}n.preventDefault()}else{return}var s=e.selection;e.swipePanning=false;e.hoverData.draggingEles=false;var u=e.cy;var l=u.zoom();var f=e.touchData.now;var c=e.touchData.earlier;if(n.touches[0]){var v=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);f[0]=v[0];f[1]=v[1]}if(n.touches[1]){var v=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);f[2]=v[0];f[3]=v[1]}if(n.touches[2]){var v=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);f[4]=v[0];f[5]=v[1]}var d=function e(t){return{originalEvent:n,type:t,position:{x:f[0],y:f[1]}}};if(i){i.unactivate()}var h;if(e.touchData.cxt){h=d("cxttapend");if(i){i.emit(h)}else{u.emit(h)}if(!e.touchData.cxtDragged){var p=d("cxttap");if(i){i.emit(p)}else{u.emit(p)}}if(e.touchData.start){e.touchData.start._private.grabbed=false}e.touchData.cxt=false;e.touchData.start=null;e.redraw();return}if(!n.touches[2]&&u.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=false;var g=u.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));s[0]=undefined;s[1]=undefined;s[2]=undefined;s[3]=undefined;s[4]=0;e.redrawHint("select",true);u.emit(d("boxend"));var m=function e(t){return t.selectable()&&!t.selected()};g.emit(d("box")).stdFilter(m).select().emit(d("boxselect"));if(g.nonempty()){e.redrawHint("eles",true)}e.redraw()}if(i!=null){i.unactivate()}if(n.touches[2]){e.data.bgActivePosistion=undefined;e.redrawHint("select",true)}else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=undefined;e.redrawHint("select",true);var b=e.dragData.touchDragEles;if(i!=null){var x=i._private.grabbed;y(b);e.redrawHint("drag",true);e.redrawHint("eles",true);if(x){i.emit(d("freeon"));b.emit(d("free"));if(e.dragData.didDrag){i.emit(d("dragfreeon"));b.emit(d("dragfree"))}}a(i,["touchend","tapend","vmouseup","tapdragout"],n,{x:f[0],y:f[1]});i.unactivate();e.touchData.start=null}else{var w=e.findNearestElement(f[0],f[1],true,true);a(w,["touchend","tapend","vmouseup","tapdragout"],n,{x:f[0],y:f[1]})}var E=e.touchData.startPosition[0]-f[0];var k=E*E;var _=e.touchData.startPosition[1]-f[1];var T=_*_;var C=k+T;var S=C*l*l;if(!e.touchData.singleTouchMoved){if(!i){u.$(":selected").unselect(["tapunselect"])}a(i,["tap","vclick"],n,{x:f[0],y:f[1]});ae=false;if(n.timeStamp-oe<=u.multiClickDebounceTime()){ie&&clearTimeout(ie);ae=true;oe=null;a(i,["dbltap","vdblclick"],n,{x:f[0],y:f[1]})}else{ie=setTimeout(function(){if(ae)return;a(i,["onetap","voneclick"],n,{x:f[0],y:f[1]})},u.multiClickDebounceTime());oe=n.timeStamp}}if(i!=null&&!e.dragData.didDrag&&i._private.selectable&&S<e.touchTapThreshold2&&!e.pinching){if(u.selectionType()==="single"){u.$(r).unmerge(i).unselect(["tapunselect"]);i.select(["tapselect"])}else{if(i.selected()){i.unselect(["tapunselect"])}else{i.select(["tapselect"])}}e.redrawHint("eles",true)}e.touchData.singleTouchMoved=true}for(var D=0;D<f.length;D++){c[D]=f[D]}e.dragData.didDrag=false;if(n.touches.length===0){e.touchData.dragDelta=[];e.touchData.startPosition=[null,null,null,null,null,null];e.touchData.startGPosition=null;e.touchData.didSelect=false}if(n.touches.length<2){if(n.touches.length===1){e.touchData.startGPosition=[n.touches[0].clientX,n.touches[0].clientY]}e.pinching=false;e.redrawHint("eles",true);e.redraw()}},false);if(typeof TouchEvent==="undefined"){var se=[];var ue=function e(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}};var le=function e(t){return{event:t,touch:ue(t)}};var fe=function e(t){se.push(le(t))};var ce=function e(t){for(var r=0;r<se.length;r++){var n=se[r];if(n.event.pointerId===t.pointerId){se.splice(r,1);return}}};var ve=function e(t){var r=se.filter(function(e){return e.event.pointerId===t.pointerId})[0];r.event=t;r.touch=ue(t)};var de=function e(t){t.touches=se.map(function(e){return e.touch})};var he=function e(t){return t.pointerType==="mouse"||t.pointerType===4};e.registerBinding(e.container,"pointerdown",function(e){if(he(e)){return}e.preventDefault();fe(e);de(e);ee(e)});e.registerBinding(e.container,"pointerup",function(e){if(he(e)){return}ce(e);de(e);ne(e)});e.registerBinding(e.container,"pointercancel",function(e){if(he(e)){return}ce(e);de(e);re(e)});e.registerBinding(e.container,"pointermove",function(e){if(he(e)){return}e.preventDefault();ve(e);de(e);te(e)})}};var ud={};ud.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function e(t,r,n,a,i,o){this.renderer.nodeShapeImpl("polygon",t,r,n,a,i,this.points)},intersectLine:function e(t,r,n,a,i,o,s,u){return Cn(i,o,this.points,t,r,n/2,a/2,s)},checkPoint:function e(t,r,n,a,i,o,s,u){return gn(t,r,this.points,o,s,a,i,[0,-1],n)},hasMiterBounds:e!=="rectangle",miterBounds:function e(t,r,n,a,i,o){return sn(this.points,t,r,n,a,i)}}};ud.generateEllipse=function(){return this.nodeShapes["ellipse"]={renderer:this,name:"ellipse",draw:function e(t,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},intersectLine:function e(t,r,n,a,i,o,s,u){return xn(i,o,t,r,n/2+s,a/2+s)},checkPoint:function e(t,r,n,a,i,o,s,u){return wn(t,r,a,i,o,s,n)}}};ud.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function e(r,n,a,i,o,s,u){if(s[u]!==undefined&&s[u+"-cx"]===r&&s[u+"-cy"]===n){return s[u]}s[u]=new Array(t.length/2);s[u+"-cx"]=r;s[u+"-cy"]=n;var l=a/2;var f=i/2;o=o==="auto"?In(a,i):o;var c=new Array(t.length/2);for(var v=0;v<t.length/2;v++){c[v]={x:r+l*t[v*2],y:n+f*t[v*2+1]}}var d,h,p,g,y=c.length;h=c[y-1];for(d=0;d<y;d++){p=c[d%y];g=c[(d+1)%y];s[u][d]=Gv(h,p,g,o);h=p;p=g}return s[u]},draw:function e(t,r,n,a,i,o,s){this.renderer.nodeShapeImpl("round-polygon",t,r,n,a,i,this.points,this.getOrCreateCorners(r,n,a,i,o,s,"drawCorners"))},intersectLine:function e(t,r,n,a,i,o,s,u,l){return Sn(i,o,this.points,t,r,n,a,s,this.getOrCreateCorners(t,r,n,a,u,l,"corners"))},checkPoint:function e(t,r,n,a,i,o,s,u,l){return yn(t,r,this.points,o,s,a,i,this.getOrCreateCorners(o,s,a,i,u,l,"corners"))}}};ud.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes["roundrectangle"]={renderer:this,name:"round-rectangle",points:Pn(4,0),draw:function e(t,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i,this.points,o)},intersectLine:function e(t,r,n,a,i,o,s,u){return un(i,o,t,r,n,a,s,u)},checkPoint:function e(t,r,n,a,i,o,s,u){var l=a/2;var f=i/2;u=u==="auto"?Bn(a,i):u;u=Math.min(l,f,u);var c=u*2;if(gn(t,r,this.points,o,s,a,i-c,[0,-1],n)){return true}if(gn(t,r,this.points,o,s,a-c,i,[0,-1],n)){return true}if(wn(t,r,c,c,o-l+u,s-f+u,n)){return true}if(wn(t,r,c,c,o+l-u,s-f+u,n)){return true}if(wn(t,r,c,c,o+l-u,s+f-u,n)){return true}if(wn(t,r,c,c,o-l+u,s+f-u,n)){return true}return false}}};ud.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes["cutrectangle"]={renderer:this,name:"cut-rectangle",cornerLength:On(),points:Pn(4,0),draw:function e(t,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i,null,o)},generateCutTrianglePts:function e(t,r,n,a,i){var o=i==="auto"?this.cornerLength:i;var s=r/2;var u=t/2;var l=n-u;var f=n+u;var c=a-s;var v=a+s;return{topLeft:[l,c+o,l+o,c,l+o,c+o],topRight:[f-o,c,f,c+o,f-o,c+o],bottomRight:[f,v-o,f-o,v,f-o,v-o],bottomLeft:[l+o,v,l,v-o,l+o,v-o]}},intersectLine:function e(t,r,n,a,i,o,s,u){var l=this.generateCutTrianglePts(n+2*s,a+2*s,t,r,u);var f=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Cn(i,o,f,t,r)},checkPoint:function e(t,r,n,a,i,o,s,u){var l=u==="auto"?this.cornerLength:u;if(gn(t,r,this.points,o,s,a,i-2*l,[0,-1],n)){return true}if(gn(t,r,this.points,o,s,a-2*l,i,[0,-1],n)){return true}var f=this.generateCutTrianglePts(a,i,o,s);return pn(t,r,f.topLeft)||pn(t,r,f.topRight)||pn(t,r,f.bottomRight)||pn(t,r,f.bottomLeft)}}};ud.generateBarrel=function(){return this.nodeShapes["barrel"]={renderer:this,name:"barrel",points:Pn(4,0),draw:function e(t,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i)},intersectLine:function e(t,r,n,a,i,o,s,u){var l=.15;var f=.5;var c=.85;var v=this.generateBarrelBezierPts(n+2*s,a+2*s,t,r);var d=function e(t){var r=Wr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},l);var n=Wr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},f);var a=Wr({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},c);return[t[0],t[1],r.x,r.y,n.x,n.y,a.x,a.y,t[4],t[5]]};var h=[].concat(d(v.topLeft),d(v.topRight),d(v.bottomRight),d(v.bottomLeft));return Cn(i,o,h,t,r)},generateBarrelBezierPts:function e(t,r,n,a){var i=r/2;var o=t/2;var s=n-o;var u=n+o;var l=a-i;var f=a+i;var c=Nn(t,r);var v=c.heightOffset;var d=c.widthOffset;var h=c.ctrlPtOffsetPct*t;var p={topLeft:[s,l+v,s+h,l,s+d,l],topRight:[u-d,l,u-h,l,u,l+v],bottomRight:[u,f-v,u-h,f,u-d,f],bottomLeft:[s+d,f,s+h,f,s,f-v]};p.topLeft.isTop=true;p.topRight.isTop=true;p.bottomLeft.isBottom=true;p.bottomRight.isBottom=true;return p},checkPoint:function e(t,r,n,a,i,o,s,u){var l=Nn(a,i);var f=l.heightOffset;var c=l.widthOffset;if(gn(t,r,this.points,o,s,a,i-2*f,[0,-1],n)){return true}if(gn(t,r,this.points,o,s,a-2*c,i,[0,-1],n)){return true}var v=this.generateBarrelBezierPts(a,i,o,s);var d=function e(t,r,n){var a=n[4];var i=n[2];var o=n[0];var s=n[5];var u=n[1];var l=Math.min(a,o);var f=Math.max(a,o);var c=Math.min(s,u);var v=Math.max(s,u);if(l<=t&&t<=f&&c<=r&&r<=v){var d=Rn(a,i,o);var h=cn(d[0],d[1],d[2],t);var p=h.filter(function(e){return 0<=e&&e<=1});if(p.length>0){return p[0]}}return null};var h=Object.keys(v);for(var p=0;p<h.length;p++){var g=h[p];var y=v[g];var m=d(t,r,y);if(m==null){continue}var b=y[5];var x=y[3];var w=y[1];var E=Gr(b,x,w,m);if(y.isTop&&E<=r){return true}if(y.isBottom&&r<=E){return true}}return false}}};ud.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes["bottomroundrectangle"]={renderer:this,name:"bottom-round-rectangle",points:Pn(4,0),draw:function e(t,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,t,r,n,a,i,this.points,o)},intersectLine:function e(t,r,n,a,i,o,s,u){var l=t-(n/2+s);var f=r-(a/2+s);var c=f;var v=t+(n/2+s);var d=_n(i,o,t,r,l,f,v,c,false);if(d.length>0){return d}return un(i,o,t,r,n,a,s,u)},checkPoint:function e(t,r,n,a,i,o,s,u){u=u==="auto"?Bn(a,i):u;var l=2*u;if(gn(t,r,this.points,o,s,a,i-l,[0,-1],n)){return true}if(gn(t,r,this.points,o,s,a-l,i,[0,-1],n)){return true}var f=a/2+2*n;var c=i/2+2*n;var v=[o-f,s-c,o-f,s,o+f,s,o+f,s-c];if(pn(t,r,v)){return true}if(wn(t,r,l,l,o+a/2-u,s+i/2-u,n)){return true}if(wn(t,r,l,l,o-a/2+u,s+i/2-u,n)){return true}return false}}};ud.registerNodeShapes=function(){var e=this.nodeShapes={};var t=this;this.generateEllipse();this.generatePolygon("triangle",Pn(3,0));this.generateRoundPolygon("round-triangle",Pn(3,0));this.generatePolygon("rectangle",Pn(4,0));e["square"]=e["rectangle"];this.generateRoundRectangle();this.generateCutRectangle();this.generateBarrel();this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r);this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Pn(5,0));this.generateRoundPolygon("round-pentagon",Pn(5,0));this.generatePolygon("hexagon",Pn(6,0));this.generateRoundPolygon("round-hexagon",Pn(6,0));this.generatePolygon("heptagon",Pn(7,0));this.generateRoundPolygon("round-heptagon",Pn(7,0));this.generatePolygon("octagon",Pn(8,0));this.generateRoundPolygon("round-octagon",Pn(8,0));var n=new Array(20);{var a=Mn(5,0);var i=Mn(5,Math.PI/5);var o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++){i[s*2]*=o;i[s*2+1]*=o}for(var s=0;s<20/4;s++){n[s*4]=a[s*2];n[s*4+1]=a[s*2+1];n[s*4+2]=i[s*2];n[s*4+3]=i[s*2+1]}}n=An(n);this.generatePolygon("star",n);this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]);this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]);this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]);this.nodeShapes["concavehexagon"]=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u);this.generateRoundPolygon("round-tag",u)}e.makePolygon=function(e){var r=e.join("$");var n="polygon-"+r;var a;if(a=this[n]){return a}return t.generatePolygon(n,e)}};var ld={};ld.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};ld.redraw=function(e){e=e||Wt();var t=this;if(t.averageRedrawTime===undefined){t.averageRedrawTime=0}if(t.lastRedrawTime===undefined){t.lastRedrawTime=0}if(t.lastDrawTime===undefined){t.lastDrawTime=0}t.requestedFrame=true;t.renderOptions=e};ld.beforeRender=function(e,t){if(this.destroyed){return}if(t==null){Rt("Priority is not optional for beforeRender")}var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t});r.sort(function(e,t){return t.priority-e.priority})};var fd=function e(t,r,n){var a=t.beforeRenderCallbacks;for(var i=0;i<a.length;i++){a[i].fn(r,n)}};ld.startRenderLoop=function(){var e=this;var t=e.cy;if(e.renderLoopStarted){return}else{e.renderLoopStarted=true}var r=function n(a){if(e.destroyed){return}if(t.batching());else if(e.requestedFrame&&!e.skipFrame){fd(e,true,a);var i=dt();e.render(e.renderOptions);var o=e.lastDrawTime=dt();if(e.averageRedrawTime===undefined){e.averageRedrawTime=o-i}if(e.redrawCount===undefined){e.redrawCount=0}e.redrawCount++;if(e.redrawTotalTime===undefined){e.redrawTotalTime=0}var s=o-i;e.redrawTotalTime+=s;e.lastRedrawTime=s;e.averageRedrawTime=e.averageRedrawTime/2+s/2;e.requestedFrame=false}else{fd(e,false,a)}e.skipFrame=false;vt(r)};vt(r)};var cd=function e(t){this.init(t)};var vd=cd;var dd=vd.prototype;dd.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];dd.init=function(e){var t=this;t.options=e;t.cy=e.cy;var r=t.container=e.cy.container();var n=t.cy.window();if(n){var a=n.document;var i=a.head;var o="__________cytoscape_stylesheet";var s="__________cytoscape_container";var u=a.getElementById(o)!=null;if(r.className.indexOf(s)<0){r.className=(r.className||"")+" "+s}if(!u){var l=a.createElement("style");l.id=o;l.textContent="."+s+" { position: relative; }";i.insertBefore(l,i.children[0])}var f=n.getComputedStyle(r);var c=f.getPropertyValue("position");if(c==="static"){Lt("A Cytoscape container has style position:static and so can not use UI extensions properly")}}t.selection=[undefined,undefined,undefined,undefined,0];t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95];t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};t.dragData={possibleDragElements:[]};t.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};t.redraws=0;t.showFps=e.showFps;t.debug=e.debug;t.webgl=e.webgl;t.hideEdgesOnViewport=e.hideEdgesOnViewport;t.textureOnViewport=e.textureOnViewport;t.wheelSensitivity=e.wheelSensitivity;t.motionBlurEnabled=e.motionBlur;t.forcedPixelRatio=I(e.pixelRatio)?e.pixelRatio:null;t.motionBlur=e.motionBlur;t.motionBlurOpacity=e.motionBlurOpacity;t.motionBlurTransparency=1-t.motionBlurOpacity;t.motionBlurPxRatio=1;t.mbPxRBlurry=1;t.minMbLowQualFrames=4;t.fullQualityMb=false;t.clearedForMotionBlur=[];t.desktopTapThreshold=e.desktopTapThreshold;t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold;t.touchTapThreshold=e.touchTapThreshold;t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold;t.tapholdDuration=500;t.bindings=[];t.beforeRenderCallbacks=[];t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100};t.registerNodeShapes();t.registerArrowShapes();t.registerCalculationListeners()};dd.notify=function(e,t){var r=this;var n=r.cy;if(this.destroyed){return}if(e==="init"){r.load();return}if(e==="destroy"){r.destroy();return}if(e==="add"||e==="remove"||e==="move"&&n.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount"){r.invalidateCachedZSortedEles()}if(e==="viewport"){r.redrawHint("select",true)}if(e==="gc"){r.redrawHint("gc",true)}if(e==="load"||e==="resize"||e==="mount"){r.invalidateContainerClientCoordsCache();r.matchCanvasSize(r.container)}r.redrawHint("eles",true);r.redrawHint("drag",true);this.startRenderLoop();this.redraw()};dd.destroy=function(){var e=this;e.destroyed=true;e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t];var n=r;var a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}e.bindings=[];e.beforeRenderCallbacks=[];e.onUpdateEleCalcsFns=[];if(e.removeObserver){e.removeObserver.disconnect()}if(e.styleObserver){e.styleObserver.disconnect()}if(e.resizeObserver){e.resizeObserver.disconnect()}if(e.labelCalcDiv){try{document.body.removeChild(e.labelCalcDiv)}catch(e){}}};dd.isHeadless=function(){return false};[gv,id,od,sd,ud,ld].forEach(function(e){ue(dd,e)});var hd=1e3/60;var pd={setupDequeueing:function e(t){return function e(){var r=this;var n=this.renderer;if(r.dequeueingSetup){return}else{r.dequeueingSetup=true}var a=ut(function(){n.redrawHint("eles",true);n.redrawHint("drag",true);n.redraw()},t.deqRedrawThreshold);var i=function e(i,o){var s=dt();var u=n.averageRedrawTime;var l=n.lastRedrawTime;var f=[];var c=n.cy.extent();var v=n.getPixelRatio();if(!i){n.flushRenderedStyleQueue()}while(true){var d=dt();var h=d-s;var p=d-o;if(l<hd){var g=hd-(i?u:0);if(p>=t.deqFastCost*g){break}}else{if(i){if(h>=t.deqCost*l||h>=t.deqAvgCost*u){break}}else if(p>=t.deqNoDrawCost*hd){break}}var y=t.deq(r,v,c);if(y.length>0){for(var m=0;m<y.length;m++){f.push(y[m])}}else{break}}if(f.length>0){t.onDeqd(r,f);if(!i&&t.shouldRedraw(r,f,v,c)){a()}}};var o=t.priority||Ot;n.beforeRender(i,o(r))}}};var gd=function(){function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Bt;o(this,e);this.idsByKey=new $t;this.keyForId=new $t;this.cachesByLvl=new $t;this.lvls=[];this.getKey=t;this.doesEleInvalidateKey=r}return u(e,[{key:"getIdsFor",value:function e(t){if(t==null){Rt("Can not get id list for null key")}var r=this.idsByKey;var n=this.idsByKey.get(t);if(!n){n=new er;r.set(t,n)}return n}},{key:"addIdForKey",value:function e(t,r){if(t!=null){this.getIdsFor(t).add(r)}}},{key:"deleteIdForKey",value:function e(t,r){if(t!=null){this.getIdsFor(t)["delete"](r)}}},{key:"getNumberOfIdsForKey",value:function e(t){if(t==null){return 0}else{return this.getIdsFor(t).size}}},{key:"updateKeyMappingFor",value:function e(t){var r=t.id();var n=this.keyForId.get(r);var a=this.getKey(t);this.deleteIdForKey(n,r);this.addIdForKey(a,r);this.keyForId.set(r,a)}},{key:"deleteKeyMappingFor",value:function e(t){var r=t.id();var n=this.keyForId.get(r);this.deleteIdForKey(n,r);this.keyForId["delete"](r)}},{key:"keyHasChangedFor",value:function e(t){var r=t.id();var n=this.keyForId.get(r);var a=this.getKey(t);return n!==a}},{key:"isInvalid",value:function e(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function e(t){var r=this.cachesByLvl,n=this.lvls;var a=r.get(t);if(!a){a=new $t;r.set(t,a);n.push(t)}return a}},{key:"getCache",value:function e(t,r){return this.getCachesAt(r).get(t)}},{key:"get",value:function e(t,r){var n=this.getKey(t);var a=this.getCache(n,r);if(a!=null){this.updateKeyMappingFor(t)}return a}},{key:"getForCachedKey",value:function e(t,r){var n=this.keyForId.get(t.id());var a=this.getCache(n,r);return a}},{key:"hasCache",value:function e(t,r){return this.getCachesAt(r).has(t)}},{key:"has",value:function e(t,r){var n=this.getKey(t);return this.hasCache(n,r)}},{key:"setCache",value:function e(t,r,n){n.key=t;this.getCachesAt(r).set(t,n)}},{key:"set",value:function e(t,r,n){var a=this.getKey(t);this.setCache(a,r,n);this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function e(t,r){this.getCachesAt(r)["delete"](t)}},{key:"delete",value:function e(t,r){var n=this.getKey(t);this.deleteCache(n,r)}},{key:"invalidateKey",value:function e(t){var r=this;this.lvls.forEach(function(e){return r.deleteCache(t,e)})}},{key:"invalidate",value:function e(t){var r=t.id();var n=this.keyForId.get(r);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);if(a){this.invalidateKey(n)}return a||this.getNumberOfIdsForKey(n)===0}}])}();var yd=25;var md=50;var bd=-4;var xd=3;var wd=7.99;var Ed=8;var kd=1024;var _d=1024;var Td=1024;var Cd=.2;var Sd=.8;var Dd=10;var Pd=.15;var Ad=.1;var Md=.9;var Bd=.9;var Id=100;var Od=1;var Rd={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"};var Nd=qt({getKey:null,doesEleInvalidateKey:Bt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Mt,allowEdgeTxrCaching:true,allowParentTxrCaching:true});var Ld=function e(t,r){var n=this;n.renderer=t;n.onDequeues=[];var a=Nd(r);ue(n,a);n.lookup=new gd(a.getKey,a.doesEleInvalidateKey);n.setupDequeueing()};var zd=Ld.prototype;zd.reasons=Rd;zd.getTextureQueue=function(e){var t=this;t.eleImgCaches=t.eleImgCaches||{};return t.eleImgCaches[e]=t.eleImgCaches[e]||[]};zd.getRetiredTextureQueue=function(e){var t=this;var r=t.eleImgCaches.retired=t.eleImgCaches.retired||{};var n=r[e]=r[e]||[];return n};zd.getElementQueue=function(){var e=this;var t=e.eleCacheQueue=e.eleCacheQueue||new vr(function(e,t){return t.reqs-e.reqs});return t};zd.getElementKeyToQueue=function(){var e=this;var t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};zd.getElement=function(e,t,r,n,a){var i=this;var o=this.renderer;var s=o.cy.zoom();var u=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()){return null}if(!i.allowEdgeTxrCaching&&e.isEdge()||!i.allowParentTxrCaching&&e.isParent()){return null}if(n==null){n=Math.ceil(Lr(s*r))}if(n<bd){n=bd}else if(s>=wd||n>xd){return null}var l=Math.pow(2,n);var f=t.h*l;var c=t.w*l;var v=o.eleTextBiggerThanMin(e,l);if(!this.isVisible(e,v)){return null}var d=u.get(e,n);if(d&&d.invalidated){d.invalidated=false;d.texture.invalidatedWidth-=d.width}if(d){return d}var h;if(f<=yd){h=yd}else if(f<=md){h=md}else{h=Math.ceil(f/md)*md}if(f>Td||c>_d){return null}var p=i.getTextureQueue(h);var g=p[p.length-2];var y=function e(){return i.recycleTexture(h,c)||i.addTexture(h,c)};if(!g){g=p[p.length-1]}if(!g){g=y()}if(g.width-g.usedWidth<c){g=y()}var m=function e(t){return t&&t.scaledLabelShown===v};var b=a&&a===Rd.dequeue;var x=a&&a===Rd.highQuality;var w=a&&a===Rd.downscale;var E;for(var k=n+1;k<=xd;k++){var _=u.get(e,k);if(_){E=_;break}}var T=E&&E.level===n+1?E:null;var C=function e(){g.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,g.usedWidth,0,c,f)};g.context.setTransform(1,0,0,1,0,0);g.context.clearRect(g.usedWidth,0,c,h);if(m(T)){C()}else if(m(E)){if(x){for(var S=E.level;S>n;S--){T=i.getElement(e,t,r,S,Rd.downscale)}C()}else{i.queueElement(e,E.level-1);return E}}else{var D;if(!b&&!x&&!w){for(var P=n-1;P>=bd;P--){var A=u.get(e,P);if(A){D=A;break}}}if(m(D)){i.queueElement(e,n);return D}g.context.translate(g.usedWidth,0);g.context.scale(l,l);this.drawElement(g.context,e,t,v,false);g.context.scale(1/l,1/l);g.context.translate(-g.usedWidth,0)}d={x:g.usedWidth,texture:g,level:n,scale:l,width:c,height:f,scaledLabelShown:v};g.usedWidth+=Math.ceil(c+Ed);g.eleCaches.push(d);u.set(e,n,d);i.checkTextureFullness(g);return d};zd.invalidateElements=function(e){for(var t=0;t<e.length;t++){this.invalidateElement(e[t])}};zd.invalidateElement=function(e){var t=this;var r=t.lookup;var n=[];var a=r.isInvalid(e);if(!a){return}for(var i=bd;i<=xd;i++){var o=r.getForCachedKey(e,i);if(o){n.push(o)}}var s=r.invalidate(e);if(s){for(var u=0;u<n.length;u++){var l=n[u];var f=l.texture;f.invalidatedWidth+=l.width;l.invalidated=true;t.checkTextureUtility(f)}}t.removeFromQueue(e)};zd.checkTextureUtility=function(e){if(e.invalidatedWidth>=Cd*e.width){this.retireTexture(e)}};zd.checkTextureFullness=function(e){var t=this;var r=t.getTextureQueue(e.height);if(e.usedWidth/e.width>Sd&&e.fullnessChecks>=Dd){Xt(r,e)}else{e.fullnessChecks++}};zd.retireTexture=function(e){var t=this;var r=e.height;var n=t.getTextureQueue(r);var a=this.lookup;Xt(n,e);e.retired=true;var i=e.eleCaches;for(var o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Yt(i);var u=t.getRetiredTextureQueue(r);u.push(e)};zd.addTexture=function(e,t){var r=this;var n=r.getTextureQueue(e);var a={};n.push(a);a.eleCaches=[];a.height=e;a.width=Math.max(kd,t);a.usedWidth=0;a.invalidatedWidth=0;a.fullnessChecks=0;a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height);a.context=a.canvas.getContext("2d");return a};zd.recycleTexture=function(e,t){var r=this;var n=r.getTextureQueue(e);var a=r.getRetiredTextureQueue(e);for(var i=0;i<a.length;i++){var o=a[i];if(o.width>=t){o.retired=false;o.usedWidth=0;o.invalidatedWidth=0;o.fullnessChecks=0;Yt(o.eleCaches);o.context.setTransform(1,0,0,1,0,0);o.context.clearRect(0,0,o.width,o.height);Xt(a,o);n.push(o);return o}}};zd.queueElement=function(e,t){var r=this;var n=r.getElementQueue();var a=r.getElementKeyToQueue();var i=this.getKey(e);var o=a[i];if(o){o.level=Math.max(o.level,t);o.eles.merge(e);o.reqs++;n.updateItem(o)}else{var s={eles:e.spawn().merge(e),level:t,reqs:1,key:i};n.push(s);a[i]=s}};zd.dequeue=function(e){var t=this;var r=t.getElementQueue();var n=t.getElementKeyToQueue();var a=[];var i=t.lookup;for(var o=0;o<Od;o++){if(r.size()>0){var s=r.pop();var u=s.key;var l=s.eles[0];var f=i.hasCache(l,s.level);n[u]=null;if(f){continue}a.push(s);var c=t.getBoundingBox(l);t.getElement(l,c,e,s.level,Rd.dequeue)}else{break}}return a};zd.removeFromQueue=function(e){var t=this;var r=t.getElementQueue();var n=t.getElementKeyToQueue();var a=this.getKey(e);var i=n[a];if(i!=null){if(i.eles.length===1){i.reqs=At;r.updateItem(i);r.pop();n[a]=null}else{i.eles.unmerge(e)}}};zd.onDequeue=function(e){this.onDequeues.push(e)};zd.offDequeue=function(e){Xt(this.onDequeues,e)};zd.setupDequeueing=pd.setupDequeueing({deqRedrawThreshold:Id,deqCost:Pd,deqAvgCost:Ad,deqNoDrawCost:Md,deqFastCost:Bd,deq:function e(t,r,n){return t.dequeue(r,n)},onDeqd:function e(t,r){for(var n=0;n<t.onDequeues.length;n++){var a=t.onDequeues[n];a(r)}},shouldRedraw:function e(t,r,n,a){for(var i=0;i<r.length;i++){var o=r[i].eles;for(var s=0;s<o.length;s++){var u=o[s].boundingBox();if(en(u,a)){return true}}}return false},priority:function e(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var jd=1;var Vd=-4;var Fd=2;var Gd=3.99;var Wd=50;var qd=50;var Xd=.15;var Yd=.1;var Ud=.9;var Hd=.9;var Kd=1;var Zd=250;var $d=4e3*4e3;var Qd=32767;var Jd=true;var eh=function e(t){var r=this;var n=r.renderer=t;var a=n.cy;r.layersByLevel={};r.firstGet=true;r.lastInvalidationTime=dt()-2*Zd;r.skipping=false;r.eleTxrDeqs=a.collection();r.scheduleElementRefinement=ut(function(){r.refineElementTextures(r.eleTxrDeqs);r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},qd);n.beforeRender(function(e,t){if(t-r.lastInvalidationTime<=Zd){r.skipping=true}else{r.skipping=false}},n.beforeRenderPriorities.lyrTxrSkip);var i=function e(t,r){return r.reqs-t.reqs};r.layersQueue=new vr(i);r.setupDequeueing()};var th=eh.prototype;var rh=0;var nh=Math.pow(2,53)-1;th.makeLayer=function(e,t){var r=Math.pow(2,t);var n=Math.ceil(e.w*r);var a=Math.ceil(e.h*r);var i=this.renderer.makeOffscreenCanvas(n,a);var o={id:rh=++rh%nh,bb:e,level:t,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0};var s=o.context;var u=-o.bb.x1;var l=-o.bb.y1;s.scale(r,r);s.translate(u,l);return o};th.getLayers=function(e,t,r){var n=this;var a=n.renderer;var i=a.cy;var o=i.zoom();var s=n.firstGet;n.firstGet=false;if(r==null){r=Math.ceil(Lr(o*t));if(r<Vd){r=Vd}else if(o>=Gd||r>Fd){return null}}n.validateLayersElesOrdering(r,e);var u=n.layersByLevel;var l=Math.pow(2,r);var f=u[r]=u[r]||[];var c;var v=n.levelIsComplete(r,e);var d;var h=function t(){var a=function t(r){n.validateLayersElesOrdering(r,e);if(n.levelIsComplete(r,e)){d=u[r];return true}};var i=function e(t){if(d){return}for(var n=r+t;Vd<=n&&n<=Fd;n+=t){if(a(n)){break}}};i(1);i(-1);for(var o=f.length-1;o>=0;o--){var s=f[o];if(s.invalid){Xt(f,s)}}};if(!v){h()}else{return f}var p=function t(){if(!c){c=Yr();for(var r=0;r<e.length;r++){Kr(c,e[r].boundingBox())}}return c};var g=function e(t){t=t||{};var a=t.after;p();var i=Math.ceil(c.w*l);var o=Math.ceil(c.h*l);if(i>Qd||o>Qd){return null}var s=i*o;if(s>$d){return null}var u=n.makeLayer(c,r);if(a!=null){var v=f.indexOf(a)+1;f.splice(v,0,u)}else if(t.insert===undefined||t.insert){f.unshift(u)}return u};if(n.skipping&&!s){return null}var y=null;var m=e.length/jd;var b=!s;for(var x=0;x<e.length;x++){var w=e[x];var E=w._private.rscratch;var k=E.imgLayerCaches=E.imgLayerCaches||{};var _=k[r];if(_){y=_;continue}if(!y||y.eles.length>=m||!nn(y.bb,w.boundingBox())){y=g({insert:true,after:y});if(!y){return null}}if(d||b){n.queueLayer(y,w)}else{n.drawEleInLayer(y,w,r,t)}y.eles.push(w);k[r]=y}if(d){return d}if(b){return null}return f};th.getEleLevelForLayerLevel=function(e,t){return e};th.drawEleInLayer=function(e,t,r,n){var a=this;var i=this.renderer;var o=e.context;var s=t.boundingBox();if(s.w===0||s.h===0||!t.visible()){return}r=a.getEleLevelForLayerLevel(r,n);{i.setImgSmoothing(o,false)}{i.drawCachedElement(o,t,null,null,r,Jd)}{i.setImgSmoothing(o,true)}};th.levelIsComplete=function(e,t){var r=this;var n=r.layersByLevel[e];if(!n||n.length===0){return false}var a=0;for(var i=0;i<n.length;i++){var o=n[i];if(o.reqs>0){return false}if(o.invalid){return false}a+=o.eles.length}if(a!==t.length){return false}return true};th.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(!r){return}for(var n=0;n<r.length;n++){var a=r[n];var i=-1;for(var o=0;o<t.length;o++){if(a.eles[0]===t[o]){i=o;break}}if(i<0){this.invalidateLayer(a);continue}var s=i;for(var o=0;o<a.eles.length;o++){if(a.eles[o]!==t[s+o]){this.invalidateLayer(a);break}}}};th.updateElementsInLayers=function(e,t){var r=this;var n=L(e[0]);for(var a=0;a<e.length;a++){var i=n?null:e[a];var o=n?e[a]:e[a].ele;var s=o._private.rscratch;var u=s.imgLayerCaches=s.imgLayerCaches||{};for(var l=Vd;l<=Fd;l++){var f=u[l];if(!f){continue}if(i&&r.getEleLevelForLayerLevel(f.level)!==i.level){continue}t(f,o,i)}}};th.haveLayers=function(){var e=this;var t=false;for(var r=Vd;r<=Fd;r++){var n=e.layersByLevel[r];if(n&&n.length>0){t=true;break}}return t};th.invalidateElements=function(e){var t=this;if(e.length===0){return}t.lastInvalidationTime=dt();if(e.length===0||!t.haveLayers()){return}t.updateElementsInLayers(e,function e(r,n,a){t.invalidateLayer(r)})};th.invalidateLayer=function(e){this.lastInvalidationTime=dt();if(e.invalid){return}var t=e.level;var r=e.eles;var n=this.layersByLevel[t];Xt(n,e);e.elesQueue=[];e.invalid=true;if(e.replacement){e.replacement.invalid=true}for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;if(i){i[t]=null}}};th.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function e(r,n,a){var i=r.replacement;if(!i){i=r.replacement=t.makeLayer(r.bb,r.level);i.replaces=r;i.eles=r.eles}if(!i.reqs){for(var o=0;o<i.eles.length;o++){t.queueLayer(i,i.eles[o])}}})};th.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e);this.scheduleElementRefinement()};th.queueLayer=function(e,t){var r=this;var n=r.layersQueue;var a=e.elesQueue;var i=a.hasId=a.hasId||{};if(e.replacement){return}if(t){if(i[t.id()]){return}a.push(t);i[t.id()]=true}if(e.reqs){e.reqs++;n.updateItem(e)}else{e.reqs=1;n.push(e)}};th.dequeue=function(e){var t=this;var r=t.layersQueue;var n=[];var a=0;while(a<Kd){if(r.size()===0){break}var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();if(o){t.drawEleInLayer(i,o,i.level,e);a++}if(n.length===0){n.push(true)}if(i.elesQueue.length===0){r.pop();i.reqs=0;if(i.replaces){t.applyLayerReplacement(i)}t.requestRedraw()}}return n};th.applyLayerReplacement=function(e){var t=this;var r=t.layersByLevel[e.level];var n=e.replaces;var a=r.indexOf(n);if(a<0||n.invalid){return}r[a]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private;var s=o.imgLayerCaches=o.imgLayerCaches||{};if(s){s[e.level]=e}}t.requestRedraw()};th.requestRedraw=ut(function(){var e=this.renderer;e.redrawHint("eles",true);e.redrawHint("drag",true);e.redraw()},100);th.setupDequeueing=pd.setupDequeueing({deqRedrawThreshold:Wd,deqCost:Xd,deqAvgCost:Yd,deqNoDrawCost:Ud,deqFastCost:Hd,deq:function e(t,r){return t.dequeue(r)},onDeqd:Ot,shouldRedraw:Mt,priority:function e(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var ah={};var ih;function oh(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function sh(e,t,r){var n;for(var a=0;a<t.length;a++){var i=t[a];if(a===0){n=i}e.lineTo(i.x,i.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function uh(e,t,r){if(e.beginPath){e.beginPath()}var n=t;for(var a=0;a<n.length;a++){var i=n[a];e.lineTo(i.x,i.y)}var o=r;var s=r[0];e.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];e.lineTo(i.x,i.y)}if(e.closePath){e.closePath()}}function lh(e,t,r,n,a){if(e.beginPath){e.beginPath()}e.arc(r,n,a,0,Math.PI*2,false);var i=t;var o=i[0];e.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var u=i[s];e.lineTo(u.x,u.y)}if(e.closePath){e.closePath()}}function fh(e,t,r,n){e.arc(t,r,n,0,Math.PI*2,false)}ah.arrowShapeImpl=function(e){return(ih||(ih={polygon:oh,"triangle-backcurve":sh,"triangle-tee":uh,"circle-triangle":lh,"triangle-cross":uh,circle:fh}))[e]};var ch={};ch.drawElement=function(e,t,r,n,a,i){var o=this;if(t.isNode()){o.drawNode(e,t,r,n,a,i)}else{o.drawEdge(e,t,r,n,a,i)}};ch.drawElementOverlay=function(e,t){var r=this;if(t.isNode()){r.drawNodeOverlay(e,t)}else{r.drawEdgeOverlay(e,t)}};ch.drawElementUnderlay=function(e,t){var r=this;if(t.isNode()){r.drawNodeUnderlay(e,t)}else{r.drawEdgeUnderlay(e,t)}};ch.drawCachedElementPortion=function(e,t,r,n,a,i,o,s){var u=this;var l=r.getBoundingBox(t);if(l.w===0||l.h===0){return}var f=r.getElement(t,l,n,a,i);if(f!=null){var c=s(u,t);if(c===0){return}var v=o(u,t);var d=l.x1,h=l.y1,p=l.w,g=l.h;var y,m,b,x,w;if(v!==0){var E=r.getRotationPoint(t);b=E.x;x=E.y;e.translate(b,x);e.rotate(v);w=u.getImgSmoothing(e);if(!w){u.setImgSmoothing(e,true)}var k=r.getRotationOffset(t);y=k.x;m=k.y}else{y=d;m=h}var _;if(c!==1){_=e.globalAlpha;e.globalAlpha=_*c}e.drawImage(f.texture.canvas,f.x,0,f.width,f.height,y,m,p,g);if(c!==1){e.globalAlpha=_}if(v!==0){e.rotate(-v);e.translate(-b,-x);if(!w){u.setImgSmoothing(e,false)}}}else{r.drawElement(e,t)}};var vh=function e(){return 0};var dh=function e(t,r){return t.getTextAngle(r,null)};var hh=function e(t,r){return t.getTextAngle(r,"source")};var ph=function e(t,r){return t.getTextAngle(r,"target")};var gh=function e(t,r){return r.effectiveOpacity()};var yh=function e(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};ch.drawCachedElement=function(e,t,r,n,a,i){var o=this;var s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,f=s.slbTxrCache,c=s.tlbTxrCache;var v=t.boundingBox();var d=i===true?u.reasons.highQuality:null;if(v.w===0||v.h===0||!t.visible()){return}if(!n||en(v,n)){var h=t.isEdge();var p=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t);o.drawCachedElementPortion(e,t,u,r,a,d,vh,gh);if(!h||!p){o.drawCachedElementPortion(e,t,l,r,a,d,dh,yh)}if(h&&!p){o.drawCachedElementPortion(e,t,f,r,a,d,hh,yh);o.drawCachedElementPortion(e,t,c,r,a,d,ph,yh)}o.drawElementOverlay(e,t)}};ch.drawElements=function(e,t){var r=this;for(var n=0;n<t.length;n++){var a=t[n];r.drawElement(e,a)}};ch.drawCachedElements=function(e,t,r,n){var a=this;for(var i=0;i<t.length;i++){var o=t[i];a.drawCachedElement(e,o,r,n)}};ch.drawCachedNodes=function(e,t,r,n){var a=this;for(var i=0;i<t.length;i++){var o=t[i];if(!o.isNode()){continue}a.drawCachedElement(e,o,r,n)}};ch.drawLayeredElements=function(e,t,r,n){var a=this;var i=a.data.lyrTxrCache.getLayers(t,r);if(i){for(var o=0;o<i.length;o++){var s=i[o];var u=s.bb;if(u.w===0||u.h===0){continue}e.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}}else{a.drawCachedElements(e,t,r,n)}};var mh={};mh.drawEdge=function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var i=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;var o=this;var s=t._private.rscratch;if(i&&!t.visible()){return}if(s.badLine||s.allpts==null||isNaN(s.allpts[0])){return}var u;if(r){u=r;e.translate(-u.x1,-u.y1)}var l=i?t.pstyle("opacity").value:1;var f=i?t.pstyle("line-opacity").value:1;var c=t.pstyle("curve-style").value;var v=t.pstyle("line-style").value;var d=t.pstyle("width").pfValue;var h=t.pstyle("line-cap").value;var p=t.pstyle("line-outline-width").value;var g=t.pstyle("line-outline-color").value;var y=l*f;var m=l*f;var b=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:y;if(c==="straight-triangle"){o.eleStrokeStyle(e,t,n);o.drawEdgeTrianglePath(t,e,s.allpts)}else{e.lineWidth=d;e.lineCap=h;o.eleStrokeStyle(e,t,n);o.drawEdgePath(t,e,s.allpts,v);e.lineCap="butt"}};var x=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:y;e.lineWidth=d+p;e.lineCap=h;if(p>0){o.colorStrokeStyle(e,g[0],g[1],g[2],n)}else{e.lineCap="butt";return}if(c==="straight-triangle"){o.drawEdgeTrianglePath(t,e,s.allpts)}else{o.drawEdgePath(t,e,s.allpts,v);e.lineCap="butt"}};var w=function r(){if(!a){return}o.drawEdgeOverlay(e,t)};var E=function r(){if(!a){return}o.drawEdgeUnderlay(e,t)};var k=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:m;o.drawArrowheads(e,t,n)};var _=function r(){o.drawElementText(e,t,null,n)};e.lineJoin="round";var T=t.pstyle("ghost").value==="yes";if(T){var C=t.pstyle("ghost-offset-x").pfValue;var S=t.pstyle("ghost-offset-y").pfValue;var D=t.pstyle("ghost-opacity").value;var P=y*D;e.translate(C,S);b(P);k(P);e.translate(-C,-S)}else{x()}E();b();k();w();_();if(r){e.translate(u.x1,u.y1)}};var bh=function e(t){if(!["overlay","underlay"].includes(t)){throw new Error("Invalid state")}return function(e,r){if(!r.visible()){return}var n=r.pstyle("".concat(t,"-opacity")).value;if(n===0){return}var a=this;var i=a.usePaths();var o=r._private.rscratch;var s=r.pstyle("".concat(t,"-padding")).pfValue;var u=2*s;var l=r.pstyle("".concat(t,"-color")).value;e.lineWidth=u;if(o.edgeType==="self"&&!i){e.lineCap="butt"}else{e.lineCap="round"}a.colorStrokeStyle(e,l[0],l[1],l[2],n);a.drawEdgePath(r,e,o.allpts,"solid")}};mh.drawEdgeOverlay=bh("overlay");mh.drawEdgeUnderlay=bh("underlay");mh.drawEdgePath=function(e,t,r,n){var a=e._private.rscratch;var i=t;var o;var s=false;var u=this.usePaths();var f=e.pstyle("line-dash-pattern").pfValue;var c=e.pstyle("line-dash-offset").pfValue;if(u){var v=r.join("$");var d=a.pathCacheKey&&a.pathCacheKey===v;if(d){o=t=a.pathCache;s=true}else{o=t=new Path2D;a.pathCacheKey=v;a.pathCache=o}}if(i.setLineDash){switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(f);i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}}if(!s&&!a.badLine){if(t.beginPath){t.beginPath()}t.moveTo(r[0],r[1]);switch(a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<r.length;h+=4){t.quadraticCurveTo(r[h],r[h+1],r[h+2],r[h+3])}break;case"straight":case"haystack":for(var p=2;p+1<r.length;p+=2){t.lineTo(r[p],r[p+1])}break;case"segments":if(a.isRound){var g=l(a.roundCorners),y;try{for(g.s();!(y=g.n()).done;){var m=y.value;Fv(t,m)}}catch(e){g.e(e)}finally{g.f()}t.lineTo(r[r.length-2],r[r.length-1])}else{for(var b=2;b+1<r.length;b+=2){t.lineTo(r[b],r[b+1])}}break}}t=i;if(u){t.stroke(o)}else{t.stroke()}if(t.setLineDash){t.setLineDash([])}};mh.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;var n=e.pstyle("width").pfValue;for(var a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]];var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var s=[i[1]/o,-i[0]/o];var u=[s[0]*n/2,s[1]*n/2];t.beginPath();t.moveTo(r[a]-u[0],r[a+1]-u[1]);t.lineTo(r[a]+u[0],r[a+1]+u[1]);t.lineTo(r[a+2],r[a+3]);t.closePath();t.fill()}};mh.drawArrowheads=function(e,t,r){var n=t._private.rscratch;var a=n.edgeType==="haystack";if(!a){this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r)}this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r);this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r);if(!a){this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)}};mh.drawArrowhead=function(e,t,r,n,a,i,o){if(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null){return}var s=this;var u=t.pstyle(r+"-arrow-shape").value;if(u==="none"){return}var l=t.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled";var f=t.pstyle(r+"-arrow-fill").value;var c=t.pstyle("width").pfValue;var v=t.pstyle(r+"-arrow-width");var d=v.value==="match-line"?c:v.pfValue;if(v.units==="%")d*=c;var h=t.pstyle("opacity").value;if(o===undefined){o=h}var p=e.globalCompositeOperation;if(o!==1||f==="hollow"){e.globalCompositeOperation="destination-out";s.colorFillStyle(e,255,255,255,1);s.colorStrokeStyle(e,255,255,255,1);s.drawArrowShape(t,e,l,c,u,d,n,a,i);e.globalCompositeOperation=p}var g=t.pstyle(r+"-arrow-color").value;s.colorFillStyle(e,g[0],g[1],g[2],o);s.colorStrokeStyle(e,g[0],g[1],g[2],o);s.drawArrowShape(t,e,f,c,u,d,n,a,i)};mh.drawArrowShape=function(e,t,r,n,a,i,o,s,u){var l=this;var f=this.usePaths()&&a!=="triangle-cross";var c=false;var v;var d=t;var h={x:o,y:s};var p=e.pstyle("arrow-scale").value;var g=this.getArrowWidth(n,p);var y=l.arrowShapes[a];if(f){var m=l.arrowPathCache=l.arrowPathCache||[];var b=_t(a);var x=m[b];if(x!=null){v=t=x;c=true}else{v=t=new Path2D;m[b]=v}}if(!c){if(t.beginPath){t.beginPath()}if(f){y.draw(t,1,0,{x:0,y:0},1)}else{y.draw(t,g,u,h,n)}if(t.closePath){t.closePath()}}t=d;if(f){t.translate(o,s);t.rotate(u);t.scale(g,g)}if(r==="filled"||r==="both"){if(f){t.fill(v)}else{t.fill()}}if(r==="hollow"||r==="both"){t.lineWidth=i/(f?g:1);t.lineJoin="miter";if(f){t.stroke(v)}else{t.stroke()}}if(f){t.scale(1/g,1/g);t.rotate(-u);t.translate(-o,-s)}};var xh={};xh.safeDrawImage=function(e,t,r,n,a,i,o,s,u,l){if(a<=0||i<=0||u<=0||l<=0){return}try{e.drawImage(t,r,n,a,i,o,s,u,l)}catch(e){Lt(e)}};xh.drawInscribedImage=function(e,t,r,n,a){var i=this;var o=r.position();var s=o.x;var u=o.y;var l=r.cy().style();var f=l.getIndexedStyle.bind(l);var c=f(r,"background-fit","value",n);var v=f(r,"background-repeat","value",n);var d=r.width();var h=r.height();var p=r.padding()*2;var g=d+(f(r,"background-width-relative-to","value",n)==="inner"?0:p);var y=h+(f(r,"background-height-relative-to","value",n)==="inner"?0:p);var m=r._private.rscratch;var b=f(r,"background-clip","value",n);var x=b==="node";var w=f(r,"background-image-opacity","value",n)*a;var E=f(r,"background-image-smoothing","value",n);var k=r.pstyle("corner-radius").value;if(k!=="auto")k=r.pstyle("corner-radius").pfValue;var _=t.width||t.cachedW;var T=t.height||t.cachedH;if(null==_||null==T){document.body.appendChild(t);_=t.cachedW=t.width||t.offsetWidth;T=t.cachedH=t.height||t.offsetHeight;document.body.removeChild(t)}var C=_;var S=T;if(f(r,"background-width","value",n)!=="auto"){if(f(r,"background-width","units",n)==="%"){C=f(r,"background-width","pfValue",n)*g}else{C=f(r,"background-width","pfValue",n)}}if(f(r,"background-height","value",n)!=="auto"){if(f(r,"background-height","units",n)==="%"){S=f(r,"background-height","pfValue",n)*y}else{S=f(r,"background-height","pfValue",n)}}if(C===0||S===0){return}if(c==="contain"){var D=Math.min(g/C,y/S);C*=D;S*=D}else if(c==="cover"){var D=Math.max(g/C,y/S);C*=D;S*=D}var P=s-g/2;var A=f(r,"background-position-x","units",n);var M=f(r,"background-position-x","pfValue",n);if(A==="%"){P+=(g-C)*M}else{P+=M}var B=f(r,"background-offset-x","units",n);var I=f(r,"background-offset-x","pfValue",n);if(B==="%"){P+=(g-C)*I}else{P+=I}var O=u-y/2;var R=f(r,"background-position-y","units",n);var N=f(r,"background-position-y","pfValue",n);if(R==="%"){O+=(y-S)*N}else{O+=N}var L=f(r,"background-offset-y","units",n);var z=f(r,"background-offset-y","pfValue",n);if(L==="%"){O+=(y-S)*z}else{O+=z}if(m.pathCache){P-=s;O-=u;s=0;u=0}var j=e.globalAlpha;e.globalAlpha=w;var V=i.getImgSmoothing(e);var F=false;if(E==="no"&&V){i.setImgSmoothing(e,false);F=true}else if(E==="yes"&&!V){i.setImgSmoothing(e,true);F=true}if(v==="no-repeat"){if(x){e.save();if(m.pathCache){e.clip(m.pathCache)}else{i.nodeShapes[i.getNodeShape(r)].draw(e,s,u,g,y,k,m);e.clip()}}i.safeDrawImage(e,t,0,0,_,T,P,O,C,S);if(x){e.restore()}}else{var G=e.createPattern(t,v);e.fillStyle=G;i.nodeShapes[i.getNodeShape(r)].draw(e,s,u,g,y,k,m);e.translate(P,O);e.fill();e.translate(-P,-O)}e.globalAlpha=j;if(F){i.setImgSmoothing(e,V)}};var wh={};wh.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom();var n=this.getPixelRatio();var a=Math.ceil(Lr(r*n));t=Math.pow(2,a)}var i=e.pstyle("font-size").pfValue*t;var o=e.pstyle("min-zoomed-font-size").pfValue;if(i<o){return false}return true};wh.drawElementText=function(e,t,r,n,a){var i=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;var o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(t)){return}}else if(n===false){return}if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value){return}var u=o.getLabelJustification(t);e.textAlign=u;e.textBaseline="bottom"}else{var l=t.element()._private.rscratch.badLine;var f=t.pstyle("label");var c=t.pstyle("source-label");var v=t.pstyle("target-label");if(l||(!f||!f.value)&&(!c||!c.value)&&(!v||!v.value)){return}e.textAlign="center";e.textBaseline="bottom"}var d=!r;var h;if(r){h=r;e.translate(-h.x1,-h.y1)}if(a==null){o.drawText(e,t,null,d,i);if(t.isEdge()){o.drawText(e,t,"source",d,i);o.drawText(e,t,"target",d,i)}}else{o.drawText(e,t,a,d,i)}if(r){e.translate(h.x1,h.y1)}};wh.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++){t=this.fontCaches[r];if(t.context===e){return t}}t={context:e};this.fontCaches.push(t);return t};wh.setupTextStyle=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var n=t.pstyle("font-style").strValue;var a=t.pstyle("font-size").pfValue+"px";var i=t.pstyle("font-family").strValue;var o=t.pstyle("font-weight").strValue;var s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1;var u=t.pstyle("text-outline-opacity").value*s;var l=t.pstyle("color").value;var f=t.pstyle("text-outline-color").value;e.font=n+" "+o+" "+a+" "+i;e.lineJoin="round";this.colorFillStyle(e,l[0],l[1],l[2],s);this.colorStrokeStyle(e,f[0],f[1],f[2],u)};function Eh(e,t,r,n,a){var i=arguments.length>5&&arguments[5]!==undefined?arguments[5]:5;var o=arguments.length>6?arguments[6]:undefined;e.beginPath();e.moveTo(t+i,r);e.lineTo(t+n-i,r);e.quadraticCurveTo(t+n,r,t+n,r+i);e.lineTo(t+n,r+a-i);e.quadraticCurveTo(t+n,r+a,t+n-i,r+a);e.lineTo(t+i,r+a);e.quadraticCurveTo(t,r+a,t,r+a-i);e.lineTo(t,r+i);e.quadraticCurveTo(t,r,t+i,r);e.closePath();if(o)e.stroke();else e.fill()}wh.getTextAngle=function(e,t){var r;var n=e._private;var a=n.rscratch;var i=t?t+"-":"";var o=e.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var s=Ht(a,"labelAngle",t);r=e.isEdge()?s:0}else if(o.strValue==="none"){r=0}else{r=o.pfValue}return r};wh.drawText=function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var i=t._private;var o=i.rscratch;var s=a?t.effectiveOpacity():1;if(a&&(s===0||t.pstyle("text-opacity").value===0)){return}if(r==="main"){r=null}var u=Ht(o,"labelX",r);var l=Ht(o,"labelY",r);var f,c;var v=this.getLabelText(t,r);if(v!=null&&v!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(e,t,a);var d=r?r+"-":"";var h=Ht(o,"labelWidth",r);var p=Ht(o,"labelHeight",r);var g=t.pstyle(d+"text-margin-x").pfValue;var y=t.pstyle(d+"text-margin-y").pfValue;var m=t.isEdge();var b=t.pstyle("text-halign").value;var x=t.pstyle("text-valign").value;if(m){b="center";x="center"}u+=g;l+=y;var w;if(!n){w=0}else{w=this.getTextAngle(t,r)}if(w!==0){f=u;c=l;e.translate(f,c);e.rotate(w);u=0;l=0}switch(x){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var E=t.pstyle("text-background-opacity").value;var k=t.pstyle("text-border-opacity").value;var _=t.pstyle("text-border-width").pfValue;var T=t.pstyle("text-background-padding").pfValue;var C=t.pstyle("text-background-shape").strValue;var S=C.indexOf("round")===0;var D=2;if(E>0||_>0&&k>0){var P=u-T;switch(b){case"left":P-=h;break;case"center":P-=h/2;break}var A=l-p-T;var M=h+2*T;var B=p+2*T;if(E>0){var I=e.fillStyle;var O=t.pstyle("text-background-color").value;e.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+E*s+")";if(S){Eh(e,P,A,M,B,D)}else{e.fillRect(P,A,M,B)}e.fillStyle=I}if(_>0&&k>0){var R=e.strokeStyle;var N=e.lineWidth;var L=t.pstyle("text-border-color").value;var z=t.pstyle("text-border-style").value;e.strokeStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+k*s+")";e.lineWidth=_;if(e.setLineDash){switch(z){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=_/4;e.setLineDash([]);break;case"solid":e.setLineDash([]);break}}if(S){Eh(e,P,A,M,B,D,"stroke")}else{e.strokeRect(P,A,M,B)}if(z==="double"){var j=_/2;if(S){Eh(e,P+j,A+j,M-j*2,B-j*2,D,"stroke")}else{e.strokeRect(P+j,A+j,M-j*2,B-j*2)}}if(e.setLineDash){e.setLineDash([])}e.lineWidth=N;e.strokeStyle=R}}var V=2*t.pstyle("text-outline-width").pfValue;if(V>0){e.lineWidth=V}if(t.pstyle("text-wrap").value==="wrap"){var F=Ht(o,"labelWrapCachedLines",r);var G=Ht(o,"labelLineHeight",r);var W=h/2;var q=this.getLabelJustification(t);if(q==="auto");else if(b==="left"){if(q==="left"){u+=-h}else if(q==="center"){u+=-W}}else if(b==="center"){if(q==="left"){u+=-W}else if(q==="right"){u+=W}}else if(b==="right"){if(q==="center"){u+=W}else if(q==="right"){u+=h}}switch(x){case"top":l-=(F.length-1)*G;break;case"center":case"bottom":l-=(F.length-1)*G;break}for(var X=0;X<F.length;X++){if(V>0){e.strokeText(F[X],u,l)}e.fillText(F[X],u,l);l+=G}}else{if(V>0){e.strokeText(v,u,l)}e.fillText(v,u,l)}if(w!==0){e.rotate(-w);e.translate(-f,-c)}}};var kh={};kh.drawNode=function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var i=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;var o=this;var s,u;var l=t._private;var f=l.rscratch;var c=t.position();if(!I(c.x)||!I(c.y)){return}if(i&&!t.visible()){return}var v=i?t.effectiveOpacity():1;var d=o.usePaths();var h;var p=false;var g=t.padding();s=t.width()+2*g;u=t.height()+2*g;var y;if(r){y=r;e.translate(-y.x1,-y.y1)}var m=t.pstyle("background-image");var b=m.value;var x=new Array(b.length);var w=new Array(b.length);var E=0;for(var k=0;k<b.length;k++){var _=b[k];var T=x[k]=_!=null&&_!=="none";if(T){var C=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",k);E++;w[k]=o.getCachedImage(_,C,function(){l.backgroundTimestamp=Date.now();t.emitAndNotify("background")})}}var S=t.pstyle("background-blacken").value;var D=t.pstyle("border-width").pfValue;var P=t.pstyle("background-opacity").value*v;var A=t.pstyle("border-color").value;var M=t.pstyle("border-style").value;var B=t.pstyle("border-join").value;var O=t.pstyle("border-cap").value;var R=t.pstyle("border-position").value;var N=t.pstyle("border-dash-pattern").pfValue;var L=t.pstyle("border-dash-offset").pfValue;var z=t.pstyle("border-opacity").value*v;var j=t.pstyle("outline-width").pfValue;var V=t.pstyle("outline-color").value;var F=t.pstyle("outline-style").value;var G=t.pstyle("outline-opacity").value*v;var W=t.pstyle("outline-offset").value;var q=t.pstyle("corner-radius").value;if(q!=="auto")q=t.pstyle("corner-radius").pfValue;var X=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:P;o.eleFillStyle(e,t,n)};var Y=function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:z;o.colorStrokeStyle(e,A[0],A[1],A[2],r)};var U=function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:G;o.colorStrokeStyle(e,V[0],V[1],V[2],r)};var H=function e(t,r,n,a){var i=o.nodePathCache=o.nodePathCache||[];var s=Tt(n==="polygon"?n+","+a.join(","):n,""+r,""+t,""+q);var u=i[s];var l;var c=false;if(u!=null){l=u;c=true;f.pathCache=l}else{l=new Path2D;i[s]=f.pathCache=l}return{path:l,cacheHit:c}};var K=t.pstyle("shape").strValue;var Z=t.pstyle("shape-polygon-points").pfValue;if(d){e.translate(c.x,c.y);var $=H(s,u,K,Z);h=$.path;p=$.cacheHit}var Q=function r(){if(!p){var n=c;if(d){n={x:0,y:0}}o.nodeShapes[o.getNodeShape(t)].draw(h||e,n.x,n.y,s,u,q,f)}if(d){e.fill(h)}else{e.fill()}};var J=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:v;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=l.backgrounding;var s=0;for(var u=0;u<w.length;u++){var f=t.cy().style().getIndexedStyle(t,"background-image-containment","value",u);if(a&&f==="over"||!a&&f==="inside"){s++;continue}if(x[u]&&w[u].complete&&!w[u].error){s++;o.drawInscribedImage(e,w[u],t,u,n)}}l.backgrounding=!(s===E);if(i!==l.backgrounding){t.updateStyle(false)}};var ee=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:v;if(o.hasPie(t)){o.drawPie(e,t,a);if(n){if(!d){o.nodeShapes[o.getNodeShape(t)].draw(e,c.x,c.y,s,u,q,f)}}}};var te=function r(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:v;if(o.hasStripe(t)){e.save();if(d){e.clip(f.pathCache)}else{o.nodeShapes[o.getNodeShape(t)].draw(e,c.x,c.y,s,u,q,f);e.clip()}o.drawStripe(e,t,a);e.restore();if(n){if(!d){o.nodeShapes[o.getNodeShape(t)].draw(e,c.x,c.y,s,u,q,f)}}}};var re=function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:v;var n=(S>0?S:-S)*r;var a=S>0?0:255;if(S!==0){o.colorFillStyle(e,a,a,a,n);if(d){e.fill(h)}else{e.fill()}}};var ne=function t(){if(D>0){e.lineWidth=D;e.lineCap=O;e.lineJoin=B;if(e.setLineDash){switch(M){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(N);e.lineDashOffset=L;break;case"solid":case"double":e.setLineDash([]);break}}if(R!=="center"){e.save();e.lineWidth*=2;if(R==="inside"){d?e.clip(h):e.clip()}else{var r=new Path2D;r.rect(-s/2-D,-u/2-D,s+2*D,u+2*D);r.addPath(h);e.clip(r,"evenodd")}d?e.stroke(h):e.stroke();e.restore()}else{d?e.stroke(h):e.stroke()}if(M==="double"){e.lineWidth=D/3;var n=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";if(d){e.stroke(h)}else{e.stroke()}e.globalCompositeOperation=n}if(e.setLineDash){e.setLineDash([])}}};var ae=function r(){if(j>0){e.lineWidth=j;e.lineCap="butt";if(e.setLineDash){switch(F){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}}var n=c;if(d){n={x:0,y:0}}var a=o.getNodeShape(t);var i=D;if(R==="inside")i=0;if(R==="outside")i*=2;var l=(s+i+(j+W))/s;var f=(u+i+(j+W))/u;var v=s*l;var h=u*f;var p=o.nodeShapes[a].points;var g;if(d){var y=H(v,h,a,p);g=y.path}if(a==="ellipse"){o.drawEllipsePath(g||e,n.x,n.y,v,h)}else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var m=0;var b=0;var x=0;if(a==="round-diamond"){m=(i+W+j)*1.4}else if(a==="round-heptagon"){m=(i+W+j)*1.075;x=-(i/2+W+j)/35}else if(a==="round-hexagon"){m=(i+W+j)*1.12}else if(a==="round-pentagon"){m=(i+W+j)*1.13;x=-(i/2+W+j)/15}else if(a==="round-tag"){m=(i+W+j)*1.12;b=(i/2+j+W)*.07}else if(a==="round-triangle"){m=(i+W+j)*(Math.PI/2);x=-(i+W/2+j)/Math.PI}if(m!==0){l=(s+m)/s;v=s*l;if(!["round-hexagon","round-tag"].includes(a)){f=(u+m)/u;h=u*f}}q=q==="auto"?In(v,h):q;var w=v/2;var E=h/2;var k=q+(i+j+W)/2;var _=new Array(p.length/2);var T=new Array(p.length/2);for(var C=0;C<p.length/2;C++){_[C]={x:n.x+b+w*p[C*2],y:n.y+x+E*p[C*2+1]}}var S,P,A,M,B=_.length;P=_[B-1];for(S=0;S<B;S++){A=_[S%B];M=_[(S+1)%B];T[S]=Gv(P,A,M,k);P=A;A=M}o.drawRoundPolygonPath(g||e,n.x+b,n.y+x,s*l,u*f,p,T)}else if(["roundrectangle","round-rectangle"].includes(a)){q=q==="auto"?Bn(v,h):q;o.drawRoundRectanglePath(g||e,n.x,n.y,v,h,q+(i+j+W)/2)}else if(["cutrectangle","cut-rectangle"].includes(a)){q=q==="auto"?On():q;o.drawCutRectanglePath(g||e,n.x,n.y,v,h,null,q+(i+j+W)/4)}else if(["bottomroundrectangle","bottom-round-rectangle"].includes(a)){q=q==="auto"?Bn(v,h):q;o.drawBottomRoundRectanglePath(g||e,n.x,n.y,v,h,q+(i+j+W)/2)}else if(a==="barrel"){o.drawBarrelPath(g||e,n.x,n.y,v,h)}else if(a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)){var I=(i+j+W)/s;p=mn(bn(p,I));o.drawPolygonPath(g||e,n.x,n.y,s,u,p)}else{var O=(i+j+W)/s;p=mn(bn(p,-O));o.drawPolygonPath(g||e,n.x,n.y,s,u,p)}if(d){e.stroke(g)}else{e.stroke()}if(F==="double"){e.lineWidth=i/3;var N=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";if(d){e.stroke(g)}else{e.stroke()}e.globalCompositeOperation=N}if(e.setLineDash){e.setLineDash([])}}};var ie=function r(){if(a){o.drawNodeOverlay(e,t,c,s,u)}};var oe=function r(){if(a){o.drawNodeUnderlay(e,t,c,s,u)}};var se=function r(){o.drawElementText(e,t,null,n)};var ue=t.pstyle("ghost").value==="yes";if(ue){var le=t.pstyle("ghost-offset-x").pfValue;var fe=t.pstyle("ghost-offset-y").pfValue;var ce=t.pstyle("ghost-opacity").value;var ve=ce*v;e.translate(le,fe);U();ae();X(ce*P);Q();J(ve,true);Y(ce*z);ne();ee(S!==0||D!==0);te(S!==0||D!==0);J(ve,false);re(ve);e.translate(-le,-fe)}if(d){e.translate(-c.x,-c.y)}oe();if(d){e.translate(c.x,c.y)}U();ae();X();Q();J(v,true);Y();ne();ee(S!==0||D!==0);te(S!==0||D!==0);J(v,false);re();if(d){e.translate(-c.x,-c.y)}se();ie();if(r){e.translate(y.x1,y.y1)}};var _h=function e(t){if(!["overlay","underlay"].includes(t)){throw new Error("Invalid state")}return function(e,r,n,a,i){var o=this;if(!r.visible()){return}var s=r.pstyle("".concat(t,"-padding")).pfValue;var u=r.pstyle("".concat(t,"-opacity")).value;var l=r.pstyle("".concat(t,"-color")).value;var f=r.pstyle("".concat(t,"-shape")).value;var c=r.pstyle("".concat(t,"-corner-radius")).value;if(u>0){n=n||r.position();if(a==null||i==null){var v=r.padding();a=r.width()+2*v;i=r.height()+2*v}o.colorFillStyle(e,l[0],l[1],l[2],u);o.nodeShapes[f].draw(e,n.x,n.y,a+s*2,i+s*2,c);e.fill()}}};kh.drawNodeOverlay=_h("overlay");kh.drawNodeUnderlay=_h("underlay");kh.hasPie=function(e){e=e[0];return e._private.hasPie};kh.hasStripe=function(e){e=e[0];return e._private.hasStripe};kh.drawPie=function(e,t,r,n){t=t[0];n=n||t.position();var a=t.cy().style();var i=t.pstyle("pie-size");var o=t.pstyle("pie-hole");var s=t.pstyle("pie-start-angle").pfValue;var u=n.x;var l=n.y;var f=t.width();var c=t.height();var v=Math.min(f,c)/2;var d;var h=0;var p=this.usePaths();if(p){u=0;l=0}if(i.units==="%"){v=v*i.pfValue}else if(i.pfValue!==undefined){v=i.pfValue/2}if(o.units==="%"){d=v*o.pfValue}else if(o.pfValue!==undefined){d=o.pfValue/2}if(d>=v){return}for(var g=1;g<=a.pieBackgroundN;g++){var y=t.pstyle("pie-"+g+"-background-size").value;var m=t.pstyle("pie-"+g+"-background-color").value;var b=t.pstyle("pie-"+g+"-background-opacity").value*r;var x=y/100;if(x+h>1){x=1-h}var w=1.5*Math.PI+2*Math.PI*h;w+=s;var E=2*Math.PI*x;var k=w+E;if(y===0||h>=1||h+x>1){continue}if(d===0){e.beginPath();e.moveTo(u,l);e.arc(u,l,v,w,k);e.closePath()}else{e.beginPath();e.arc(u,l,v,w,k);e.arc(u,l,d,k,w,true);e.closePath()}this.colorFillStyle(e,m[0],m[1],m[2],b);e.fill();h+=x}};kh.drawStripe=function(e,t,r,n){t=t[0];n=n||t.position();var a=t.cy().style();var i=n.x;var o=n.y;var s=t.width();var u=t.height();var l=0;var f=this.usePaths();e.save();var c=t.pstyle("stripe-direction").value;var v=t.pstyle("stripe-size");switch(c){case"vertical":break;case"righward":e.rotate(-Math.PI/2);break}var d=s;var h=u;if(v.units==="%"){d=d*v.pfValue;h=h*v.pfValue}else if(v.pfValue!==undefined){d=v.pfValue;h=v.pfValue}if(f){i=0;o=0}o-=d/2;i-=h/2;for(var p=1;p<=a.stripeBackgroundN;p++){var g=t.pstyle("stripe-"+p+"-background-size").value;var y=t.pstyle("stripe-"+p+"-background-color").value;var m=t.pstyle("stripe-"+p+"-background-opacity").value*r;var b=g/100;if(b+l>1){b=1-l}if(g===0||l>=1||l+b>1){continue}e.beginPath();e.rect(i,o+h*l,d,h*b);e.closePath();this.colorFillStyle(e,y[0],y[1],y[2],m);e.fill();l+=b}e.restore()};var Th={};var Ch=100;Th.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null){return this.forcedPixelRatio}var t=this.cy.window();var r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r};Th.paintCache=function(e){var t=this.paintCaches=this.paintCaches||[];var r=true;var n;for(var a=0;a<t.length;a++){n=t[a];if(n.context===e){r=false;break}}if(r){n={context:e};t.push(n)}return n};Th.createGradientStyleFor=function(e,t,r,n,a){var i;var o=this.usePaths();var s=r.pstyle(t+"-gradient-stop-colors").value,u=r.pstyle(t+"-gradient-stop-positions").pfValue;if(n==="radial-gradient"){if(r.isEdge()){var l=r.sourceEndpoint(),f=r.targetEndpoint(),c=r.midpoint();var v=jr(l,c);var d=jr(f,c);i=e.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(v,d))}else{var h=o?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();i=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,g))}}else{if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();i=e.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=o?{x:0,y:0}:r.position(),x=r.paddedWidth(),w=r.paddedHeight(),E=x/2,k=w/2;var _=r.pstyle("background-gradient-direction").value;switch(_){case"to-bottom":i=e.createLinearGradient(b.x,b.y-k,b.x,b.y+k);break;case"to-top":i=e.createLinearGradient(b.x,b.y+k,b.x,b.y-k);break;case"to-left":i=e.createLinearGradient(b.x+E,b.y,b.x-E,b.y);break;case"to-right":i=e.createLinearGradient(b.x-E,b.y,b.x+E,b.y);break;case"to-bottom-right":case"to-right-bottom":i=e.createLinearGradient(b.x-E,b.y-k,b.x+E,b.y+k);break;case"to-top-right":case"to-right-top":i=e.createLinearGradient(b.x-E,b.y+k,b.x+E,b.y-k);break;case"to-bottom-left":case"to-left-bottom":i=e.createLinearGradient(b.x+E,b.y-k,b.x-E,b.y+k);break;case"to-top-left":case"to-left-top":i=e.createLinearGradient(b.x+E,b.y+k,b.x-E,b.y-k);break}}}if(!i)return null;var T=u.length===s.length;var C=s.length;for(var S=0;S<C;S++){i.addColorStop(T?u[S]:S/(C-1),"rgba("+s[S][0]+","+s[S][1]+","+s[S][2]+","+a+")")}return i};Th.gradientFillStyle=function(e,t,r,n){var a=this.createGradientStyleFor(e,"background",t,r,n);if(!a)return null;e.fillStyle=a};Th.colorFillStyle=function(e,t,r,n,a){e.fillStyle="rgba("+t+","+r+","+n+","+a+")"};Th.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient"){this.gradientFillStyle(e,t,n,r)}else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],r)}};Th.gradientStrokeStyle=function(e,t,r,n){var a=this.createGradientStyleFor(e,"line",t,r,n);if(!a)return null;e.strokeStyle=a};Th.colorStrokeStyle=function(e,t,r,n,a){e.strokeStyle="rgba("+t+","+r+","+n+","+a+")"};Th.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient"){this.gradientStrokeStyle(e,t,n,r)}else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],r)}};Th.matchCanvasSize=function(e){var t=this;var r=t.data;var n=t.findContainerClientCoords();var a=n[2];var i=n[3];var o=t.getPixelRatio();var s=t.motionBlurPxRatio;if(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]){o=s}var u=a*o;var l=i*o;var f;if(u===t.canvasWidth&&l===t.canvasHeight){return}t.fontCaches=null;var c=r.canvasContainer;c.style.width=a+"px";c.style.height=i+"px";for(var v=0;v<t.CANVAS_LAYERS;v++){f=r.canvases[v];f.width=u;f.height=l;f.style.width=a+"px";f.style.height=i+"px"}for(var v=0;v<t.BUFFER_COUNT;v++){f=r.bufferCanvases[v];f.width=u;f.height=l;f.style.width=a+"px";f.style.height=i+"px"}t.textureMult=1;if(o<=1){f=r.bufferCanvases[t.TEXTURE_BUFFER];t.textureMult=2;f.width=u*t.textureMult;f.height=l*t.textureMult}t.canvasWidth=u;t.canvasHeight=l;t.pixelRatio=o};Th.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:true,forcedPxRatio:n})};Th.clearCanvas=function(){var e=this;var t=e.data;function r(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]);r(t.contexts[e.DRAG])};Th.render=function(e){var t=this;e=e||Wt();var r=t.cy;var n=e.forcedContext;var a=e.drawAllLayers;var i=e.drawOnlyNodeLayer;var o=e.forcedZoom;var s=e.forcedPan;var u=e.forcedPxRatio===undefined?this.getPixelRatio():e.forcedPxRatio;var l=t.data;var f=l.canvasNeedsRedraw;var c=t.textureOnViewport&&!n&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming);var v=e.motionBlur!==undefined?e.motionBlur:t.motionBlur;var d=t.motionBlurPxRatio;var h=r.hasCompoundNodes();var p=t.hoverData.draggingEles;var g=t.hoverData.selecting||t.touchData.selecting?true:false;v=v&&!n&&t.motionBlurEnabled&&!g;var y=v;if(!n){if(t.prevPxRatio!==u){t.invalidateContainerClientCoordsCache();t.matchCanvasSize(t.container);t.redrawHint("eles",true);t.redrawHint("drag",true)}t.prevPxRatio=u}if(!n&&t.motionBlurTimeout){clearTimeout(t.motionBlurTimeout)}if(v){if(t.mbFrames==null){t.mbFrames=0}t.mbFrames++;if(t.mbFrames<3){y=false}if(t.mbFrames>t.minMbLowQualFrames){t.motionBlurPxRatio=t.mbPxRBlurry}}if(t.clearingMotionBlur){t.motionBlurPxRatio=1}if(t.textureDrawLastFrame&&!c){f[t.NODE]=true;f[t.SELECT_BOX]=true}var m=r.style();var b=r.zoom();var x=o!==undefined?o:b;var w=r.pan();var E={x:w.x,y:w.y};var k={zoom:b,pan:{x:w.x,y:w.y}};var _=t.prevViewport;var T=_===undefined||k.zoom!==_.zoom||k.pan.x!==_.pan.x||k.pan.y!==_.pan.y;if(!T&&!(p&&!h)){t.motionBlurPxRatio=1}if(s){E=s}x*=u;E.x*=u;E.y*=u;var C=t.getCachedZSortedEles();function S(e,r,n,a,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";t.colorFillStyle(e,255,255,255,t.motionBlurTransparency);e.fillRect(r,n,a,i);e.globalCompositeOperation=o}function D(e,r){var i,u,f,c;if(!t.clearingMotionBlur&&(e===l.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]||e===l.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG])){i={x:w.x*d,y:w.y*d};u=b*d;f=t.canvasWidth*d;c=t.canvasHeight*d}else{i=E;u=x;f=t.canvasWidth;c=t.canvasHeight}e.setTransform(1,0,0,1,0,0);if(r==="motionBlur"){S(e,0,0,f,c)}else if(!n&&(r===undefined||r)){e.clearRect(0,0,f,c)}if(!a){e.translate(i.x,i.y);e.scale(u,u)}if(s){e.translate(s.x,s.y)}if(o){e.scale(o,o)}}if(!c){t.textureDrawLastFrame=false}if(c){t.textureDrawLastFrame=true;if(!t.textureCache){t.textureCache={};t.textureCache.bb=r.mutableElements().boundingBox();t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var P=t.data.bufferContexts[t.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0);P.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult);t.render({forcedContext:P,drawOnlyNodeLayer:true,forcedPxRatio:u*t.textureMult});var k=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight};k.mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}f[t.DRAG]=false;f[t.NODE]=false;var A=l.contexts[t.NODE];var M=t.textureCache.texture;var k=t.textureCache.viewport;A.setTransform(1,0,0,1,0,0);if(v){S(A,0,0,k.width,k.height)}else{A.clearRect(0,0,k.width,k.height)}var B=m.core("outside-texture-bg-color").value;var I=m.core("outside-texture-bg-opacity").value;t.colorFillStyle(A,B[0],B[1],B[2],I);A.fillRect(0,0,k.width,k.height);var b=r.zoom();D(A,false);A.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/u,k.height/k.zoom/u);A.drawImage(M,k.mpan.x,k.mpan.y,k.width/k.zoom/u,k.height/k.zoom/u)}else if(t.textureOnViewport&&!n){t.textureCache=null}var O=r.extent();var R=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated();var N=t.hideEdgesOnViewport&&R;var L=[];L[t.NODE]=!f[t.NODE]&&v&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur;if(L[t.NODE]){t.clearedForMotionBlur[t.NODE]=true}L[t.DRAG]=!f[t.DRAG]&&v&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur;if(L[t.DRAG]){t.clearedForMotionBlur[t.DRAG]=true}if(f[t.NODE]||a||i||L[t.NODE]){var z=v&&!L[t.NODE]&&d!==1;var A=n||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:l.contexts[t.NODE]);var j=v&&!z?"motionBlur":undefined;D(A,j);if(N){t.drawCachedNodes(A,C.nondrag,u,O)}else{t.drawLayeredElements(A,C.nondrag,u,O)}if(t.debug){t.drawDebugPoints(A,C.nondrag)}if(!a&&!v){f[t.NODE]=false}}if(!i&&(f[t.DRAG]||a||L[t.DRAG])){var z=v&&!L[t.DRAG]&&d!==1;var A=n||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:l.contexts[t.DRAG]);D(A,v&&!z?"motionBlur":undefined);if(N){t.drawCachedNodes(A,C.drag,u,O)}else{t.drawCachedElements(A,C.drag,u,O)}if(t.debug){t.drawDebugPoints(A,C.drag)}if(!a&&!v){f[t.DRAG]=false}}this.drawSelectionRectangle(e,D);if(v&&d!==1){var V=l.contexts[t.NODE];var F=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE];var G=l.contexts[t.DRAG];var W=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG];var q=function e(r,n,a){r.setTransform(1,0,0,1,0,0);if(a||!y){r.clearRect(0,0,t.canvasWidth,t.canvasHeight)}else{S(r,0,0,t.canvasWidth,t.canvasHeight)}var i=d;r.drawImage(n,0,0,t.canvasWidth*i,t.canvasHeight*i,0,0,t.canvasWidth,t.canvasHeight)};if(f[t.NODE]||L[t.NODE]){q(V,F,L[t.NODE]);f[t.NODE]=false}if(f[t.DRAG]||L[t.DRAG]){q(G,W,L[t.DRAG]);f[t.DRAG]=false}}t.prevViewport=k;if(t.clearingMotionBlur){t.clearingMotionBlur=false;t.motionBlurCleared=true;t.motionBlur=true}if(v){t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null;t.clearedForMotionBlur[t.NODE]=false;t.clearedForMotionBlur[t.DRAG]=false;t.motionBlur=false;t.clearingMotionBlur=!c;t.mbFrames=0;f[t.NODE]=true;f[t.DRAG]=true;t.redraw()},Ch)}if(!n){r.emit("render")}};var Sh;Th.drawSelectionRectangle=function(e,t){var r=this;var n=r.cy;var a=r.data;var i=n.style();var o=e.drawOnlyNodeLayer;var s=e.drawAllLayers;var u=a.canvasNeedsRedraw;var l=e.forcedContext;if(r.showFps||!o&&u[r.SELECT_BOX]&&!s){var f=l||a.contexts[r.SELECT_BOX];t(f);if(r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var c=r.cy.zoom();var v=i.core("selection-box-border-width").value/c;f.lineWidth=v;f.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")";f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]);if(v>0){f.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")";f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1])}}if(a.bgActivePosistion&&!r.hoverData.selecting){var c=r.cy.zoom();var d=a.bgActivePosistion;f.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")";f.beginPath();f.arc(d.x,d.y,i.core("active-bg-size").pfValue/c,0,2*Math.PI);f.fill()}var h=r.lastRedrawTime;if(r.showFps&&h){h=Math.round(h);var p=Math.round(1e3/h);var g="1 frame = "+h+" ms = "+p+" fps";f.setTransform(1,0,0,1,0,0);f.fillStyle="rgba(255, 0, 0, 0.75)";f.strokeStyle="rgba(255, 0, 0, 0.75)";f.font="30px Arial";if(!Sh){var y=f.measureText(g);Sh=y.actualBoundingBoxAscent}f.fillText(g,0,Sh);var m=60;f.strokeRect(0,Sh+10,250,20);f.fillRect(0,Sh+10,250*Math.min(p/m,1),20)}if(!s){u[r.SELECT_BOX]=false}}};function Dh(e,t,r){var n=e.createShader(t);e.shaderSource(n,r);e.compileShader(n);if(!e.getShaderParameter(n,e.COMPILE_STATUS)){throw new Error(e.getShaderInfoLog(n))}return n}function Ph(e,t,r){var n=Dh(e,e.VERTEX_SHADER,t);var a=Dh(e,e.FRAGMENT_SHADER,r);var i=e.createProgram();e.attachShader(i,n);e.attachShader(i,a);e.linkProgram(i);if(!e.getProgramParameter(i,e.LINK_STATUS)){throw new Error("Could not initialize shaders")}return i}function Ah(e,t,r){if(r===undefined){r=t}var n=e.makeOffscreenCanvas(t,r);var a=n.context=n.getContext("2d");n.clear=function(){return a.clearRect(0,0,n.width,n.height)};n.clear();return n}function Mh(e){var t=e.pixelRatio;var r=e.cy.zoom();var n=e.cy.pan();return{zoom:r*t,pan:{x:n.x*t,y:n.y*t}}}function Bh(e){var t=e.pixelRatio;var r=e.cy.zoom();return r*t}function Ih(e,t,r,n,a){var i=n*r+t.x;var o=a*r+t.y;o=Math.round(e.canvasHeight-o);return[i,o]}function Oh(e){if(e.pstyle("background-fill").value!=="solid")return false;if(e.pstyle("background-image").strValue!=="none")return false;if(e.pstyle("border-width").value===0)return true;if(e.pstyle("border-opacity").value===0)return true;if(e.pstyle("border-style").value!=="solid")return false;return true}function Rh(e,t){if(e.length!==t.length){return false}for(var r=0;r<e.length;r++){if(e[r]!==t[r]){return false}}return true}function Nh(e,t,r){var n=e[0]/255;var a=e[1]/255;var i=e[2]/255;var o=t;var s=r||new Array(4);s[0]=n*o;s[1]=a*o;s[2]=i*o;s[3]=o;return s}function Lh(e,t){var r=t||new Array(4);r[0]=(e>>0&255)/255;r[1]=(e>>8&255)/255;r[2]=(e>>16&255)/255;r[3]=(e>>24&255)/255;return r}function zh(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function jh(e,t){var r=e.createTexture();r.buffer=function(t){e.bindTexture(e.TEXTURE_2D,r);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)};r.deleteTexture=function(){e.deleteTexture(r)};return r}function Vh(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function Fh(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function Gh(e,t,r,n,a,i){switch(t){case e.FLOAT:return new Float32Array(r.buffer,i*n,a);case e.INT:return new Int32Array(r.buffer,i*n,a)}}function Wh(e,t,r,n){var a=Vh(e,t),i=p(a,2),o=i[0],s=i[1];var u=Fh(e,s,n);var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l);e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW);if(s===e.FLOAT){e.vertexAttribPointer(r,o,s,false,0,0)}else if(s===e.INT){e.vertexAttribIPointer(r,o,s,0,0)}e.enableVertexAttribArray(r);e.bindBuffer(e.ARRAY_BUFFER,null);return l}function qh(e,t,r,n){var a=Vh(e,r),i=p(a,3),o=i[0],s=i[1],u=i[2];var l=Fh(e,s,t*o);var f=o*u;var c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);e.bufferData(e.ARRAY_BUFFER,t*f,e.DYNAMIC_DRAW);e.enableVertexAttribArray(n);if(s===e.FLOAT){e.vertexAttribPointer(n,o,s,false,f,0)}else if(s===e.INT){e.vertexAttribIPointer(n,o,s,f,0)}e.vertexAttribDivisor(n,1);e.bindBuffer(e.ARRAY_BUFFER,null);var v=new Array(t);for(var d=0;d<t;d++){v[d]=Gh(e,s,l,f,o,d)}c.dataArray=l;c.stride=f;c.size=o;c.getView=function(e){return v[e]};c.setPoint=function(e,t,r){var n=v[e];n[0]=t;n[1]=r};c.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,c);if(t){e.bufferSubData(e.ARRAY_BUFFER,0,l,0,t*o)}else{e.bufferSubData(e.ARRAY_BUFFER,0,l)}};return c}function Xh(e,t,r){var n=9;var a=new Float32Array(t*n);var i=new Array(t);for(var o=0;o<t;o++){var s=o*n*4;i[o]=new Float32Array(a.buffer,s,n)}var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u);e.bufferData(e.ARRAY_BUFFER,a.byteLength,e.DYNAMIC_DRAW);for(var l=0;l<3;l++){var f=r+l;e.enableVertexAttribArray(f);e.vertexAttribPointer(f,3,e.FLOAT,false,3*12,l*12);e.vertexAttribDivisor(f,1)}e.bindBuffer(e.ARRAY_BUFFER,null);u.getMatrixView=function(e){return i[e]};u.setData=function(e,t){i[t].set(e,0)};u.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,u);e.bufferSubData(e.ARRAY_BUFFER,0,a)};return u}function Yh(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);e.bindFramebuffer(e.FRAMEBUFFER,null);t.setFramebufferAttachmentSizes=function(t,n){e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null)};return t}var Uh=typeof Float32Array!=="undefined"?Float32Array:Array;if(!Math.hypot)Math.hypot=function(){var e=0,t=arguments.length;while(t--){e+=arguments[t]*arguments[t]}return Math.sqrt(e)};function Hh(){var e=new Uh(9);if(Uh!=Float32Array){e[1]=0;e[2]=0;e[3]=0;e[5]=0;e[6]=0;e[7]=0}e[0]=1;e[4]=1;e[8]=1;return e}function Kh(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e}function Zh(e,t,r){var n=t[0],a=t[1],i=t[2];var o=t[3],s=t[4],u=t[5];var l=t[6],f=t[7],c=t[8];var v=r[0],d=r[1],h=r[2];var p=r[3],g=r[4],y=r[5];var m=r[6],b=r[7],x=r[8];e[0]=v*n+d*o+h*l;e[1]=v*a+d*s+h*f;e[2]=v*i+d*u+h*c;e[3]=p*n+g*o+y*l;e[4]=p*a+g*s+y*f;e[5]=p*i+g*u+y*c;e[6]=m*n+b*o+x*l;e[7]=m*a+b*s+x*f;e[8]=m*i+b*u+x*c;return e}function $h(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=t[8],v=r[0],d=r[1];e[0]=n;e[1]=a;e[2]=i;e[3]=o;e[4]=s;e[5]=u;e[6]=v*n+d*o+l;e[7]=v*a+d*s+f;e[8]=v*i+d*u+c;return e}function Qh(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=t[8],v=Math.sin(r),d=Math.cos(r);e[0]=d*n+v*o;e[1]=d*a+v*s;e[2]=d*i+v*u;e[3]=d*o-v*n;e[4]=d*s-v*a;e[5]=d*u-v*i;e[6]=l;e[7]=f;e[8]=c;return e}function Jh(e,t,r){var n=r[0],a=r[1];e[0]=n*t[0];e[1]=n*t[1];e[2]=n*t[2];e[3]=a*t[3];e[4]=a*t[4];e[5]=a*t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];return e}function ep(e,t,r){e[0]=2/t;e[1]=0;e[2]=0;e[3]=0;e[4]=-2/r;e[5]=0;e[6]=-1;e[7]=1;e[8]=1;return e}var tp=function(){function e(t,r,n,a){o(this,e);this.debugID=Math.floor(Math.random()*1e4);this.r=t;this.texSize=r;this.texRows=n;this.texHeight=Math.floor(r/n);this.enableWrapping=true;this.locked=false;this.texture=null;this.needsBuffer=true;this.freePointer={x:0,row:0};this.keyToLocation=new Map;this.canvas=a(t,r,r);this.scratch=a(t,r,this.texHeight,"scratch")}return u(e,[{key:"lock",value:function e(){this.locked=true}},{key:"getKeys",value:function e(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function e(t){var r=t.w,n=t.h;var a=this.texHeight,i=this.texSize;var o=a/n;var s=r*o;var u=n*o;if(s>i){o=i/r;s=r*o;u=n*o}return{scale:o,texW:s,texH:u}}},{key:"draw",value:function e(t,r,n){var a=this;if(this.locked)throw new Error("can't draw, atlas is locked");var i=this.texSize,o=this.texRows,s=this.texHeight;var u=this.getScale(r),l=u.scale,f=u.texW,c=u.texH;var v=function e(t,a){if(n&&a){var i=a.context;var o=t.x,u=t.row;var f=o;var c=s*u;i.save();i.translate(f,c);i.scale(l,l);n(i,r);i.restore()}};var d=[null,null];var h=function e(){v(a.freePointer,a.canvas);d[0]={x:a.freePointer.x,y:a.freePointer.row*s,w:f,h:c};d[1]={x:a.freePointer.x+f,y:a.freePointer.row*s,w:0,h:c};a.freePointer.x+=f;if(a.freePointer.x==i){a.freePointer.x=0;a.freePointer.row++}};var p=function e(){var t=a.scratch,r=a.canvas;t.clear();v({x:0,row:0},t);var n=i-a.freePointer.x;var o=f-n;var u=s;{var l=a.freePointer.x;var h=a.freePointer.row*s;var p=n;r.context.drawImage(t,0,0,p,u,l,h,p,u);d[0]={x:l,y:h,w:p,h:c}}{var g=n;var y=(a.freePointer.row+1)*s;var m=o;if(r){r.context.drawImage(t,g,0,m,u,0,y,m,u)}d[1]={x:0,y:y,w:m,h:c}}a.freePointer.x=o;a.freePointer.row++};var g=function e(){a.freePointer.x=0;a.freePointer.row++};if(this.freePointer.x+f<=i){h()}else if(this.freePointer.row>=o-1){return false}else if(this.freePointer.x===i){g();h()}else if(this.enableWrapping){p()}else{g();h()}this.keyToLocation.set(t,d);this.needsBuffer=true;return d}},{key:"getOffsets",value:function e(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function e(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function e(t){if(this.locked)return false;var r=this.texSize,n=this.texRows;var a=this.getScale(t),i=a.texW;if(this.freePointer.x+i>r){return this.freePointer.row<n-1}return true}},{key:"bufferIfNeeded",value:function e(t){if(!this.texture){this.texture=jh(t,this.debugID)}if(this.needsBuffer){this.texture.buffer(this.canvas);this.needsBuffer=false;if(this.locked){this.canvas=null;this.scratch=null}}}},{key:"dispose",value:function e(){if(this.texture){this.texture.deleteTexture();this.texture=null}this.canvas=null;this.scratch=null;this.locked=true}}])}();var rp=function(){function e(t,r,n,a){o(this,e);this.r=t;this.texSize=r;this.texRows=n;this.createTextureCanvas=a;this.atlases=[];this.styleKeyToAtlas=new Map;this.markedKeys=new Set}return u(e,[{key:"getKeys",value:function e(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function e(){var t=this.r,r=this.texSize,n=this.texRows,a=this.createTextureCanvas;return new tp(t,r,n,a)}},{key:"_getScratchCanvas",value:function e(){if(!this.scratch){var t=this.r,r=this.texSize,n=this.texRows,a=this.createTextureCanvas;var i=Math.floor(r/n);this.scratch=a(t,r,i,"scratch")}return this.scratch}},{key:"draw",value:function e(t,r,n){var a=this.styleKeyToAtlas.get(t);if(!a){a=this.atlases[this.atlases.length-1];if(!a||!a.canFit(r)){if(a)a.lock();a=this._createAtlas();this.atlases.push(a)}a.draw(t,r,n);this.styleKeyToAtlas.set(t,a)}return a}},{key:"getAtlas",value:function e(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function e(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function e(t){this.markedKeys.add(t)}},{key:"gc",value:function e(){var t=this;var r=this.markedKeys;if(r.size===0){console.log("nothing to garbage collect");return}var n=[];var a=new Map;var i=null;var o=l(this.atlases),s;try{var u=function e(){var o=s.value;var u=o.getKeys();var f=np(r,u);if(f.size===0){n.push(o);u.forEach(function(e){return a.set(e,o)});return 1}if(!i){i=t._createAtlas();n.push(i)}var c=l(u),v;try{for(c.s();!(v=c.n()).done;){var d=v.value;if(!f.has(d)){var h=o.getOffsets(d),g=p(h,2),y=g[0],m=g[1];if(!i.canFit({w:y.w+m.w,h:y.h})){i.lock();i=t._createAtlas();n.push(i)}if(o.canvas){t._copyTextureToNewAtlas(d,o,i);a.set(d,i)}}}}catch(e){c.e(e)}finally{c.f()}o.dispose()};for(o.s();!(s=o.n()).done;){if(u())continue}}catch(e){o.e(e)}finally{o.f()}this.atlases=n;this.styleKeyToAtlas=a;this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function e(t,r,n){var a=r.getOffsets(t),i=p(a,2),o=i[0],s=i[1];if(s.w===0){n.draw(t,o,function(e){e.drawImage(r.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)})}else{var u=this._getScratchCanvas();u.clear();u.context.drawImage(r.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h);u.context.drawImage(r.canvas,s.x,s.y,s.w,s.h,o.w,0,s.w,s.h);var l=o.w+s.w;var f=o.h;n.draw(t,{w:l,h:f},function(e){e.drawImage(u,0,0,l,f,0,0,l,f)})}}},{key:"getCounts",value:function e(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function np(e,t){if(e.intersection)return e.intersection(t);else return new Set(g(e).filter(function(e){return t.has(e)}))}var ap=function(){function e(t,r){o(this,e);this.r=t;this.globalOptions=r;this.atlasSize=r.webglTexSize;this.maxAtlasesPerBatch=r.webglTexPerBatch;this.renderTypes=new Map;this.collections=new Map;this.typeAndIdToKey=new Map}return u(e,[{key:"getAtlasSize",value:function e(){return this.atlasSize}},{key:"addAtlasCollection",value:function e(t,r){var n=this.globalOptions,a=n.webglTexSize,i=n.createTextureCanvas;var o=r.texRows;var s=this._cacheScratchCanvas(i);var u=new rp(this.r,a,o,s);this.collections.set(t,u)}},{key:"addRenderType",value:function e(t,r){var n=r.collection;if(!this.collections.has(n))throw new Error("invalid atlas collection name '".concat(n,"'"));var a=this.collections.get(n);var i=ue({type:t,atlasCollection:a},r);this.renderTypes.set(t,i)}},{key:"getRenderTypeOpts",value:function e(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function e(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function e(t){var r=-1;var n=-1;var a=null;return function(e,i,o,s){if(s){if(!a||i!=r||o!=n){r=i;n=o;a=t(e,i,o)}return a}else{return t(e,i,o)}}}},{key:"_key",value:function e(t,r){return"".concat(t,"-").concat(r)}},{key:"invalidate",value:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},a=n.forceRedraw,i=a===undefined?false:a,o=n.filterEle,s=o===undefined?function(){return true}:o,u=n.filterType,f=u===undefined?function(){return true}:u;var c=false;var v=false;var d=l(t),h;try{for(d.s();!(h=d.n()).done;){var p=h.value;if(s(p)){var g=l(this.renderTypes.values()),y;try{var m=function e(){var t=y.value;var n=t.type;if(f(n)){var a=r.collections.get(t.collection);var o=t.getKey(p);var s=Array.isArray(o)?o:[o];if(i){s.forEach(function(e){return a.markKeyForGC(e)});v=true}else{var u=t.getID?t.getID(p):p.id();var l=r._key(n,u);var d=r.typeAndIdToKey.get(l);if(d!==undefined&&!Rh(s,d)){c=true;r.typeAndIdToKey["delete"](l);d.forEach(function(e){return a.markKeyForGC(e)})}}}};for(g.s();!(y=g.n()).done;){m()}}catch(e){g.e(e)}finally{g.f()}}}}catch(e){d.e(e)}finally{d.f()}if(v){this.gc();c=false}return c}},{key:"gc",value:function e(){var t=l(this.collections.values()),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.gc()}}catch(e){t.e(e)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function e(t,r,n,a){var i=this.renderTypes.get(r);var o=this.collections.get(i.collection);var s=false;var u=o.draw(a,n,function(e){if(i.drawClipped){e.save();e.beginPath();e.rect(0,0,n.w,n.h);e.clip();i.drawElement(e,t,n,true,true);e.restore()}else{i.drawElement(e,t,n,true,true)}s=true});if(s){var l=i.getID?i.getID(t):t.id();var f=this._key(r,l);if(this.typeAndIdToKey.has(f)){this.typeAndIdToKey.get(f).push(a)}else{this.typeAndIdToKey.set(f,[a])}}return u}},{key:"getAtlasInfo",value:function e(t,r){var n=this;var a=this.renderTypes.get(r);var i=a.getKey(t);var o=Array.isArray(i)?i:[i];return o.map(function(e){var i=a.getBoundingBox(t,e);var o=n.getOrCreateAtlas(t,r,i,e);var s=o.getOffsets(e),u=p(s,2),l=u[0],f=u[1];return{atlas:o,tex:l,tex1:l,tex2:f,bb:i}})}},{key:"getDebugInfo",value:function e(){var t=[];var r=l(this.collections),n;try{for(r.s();!(n=r.n()).done;){var a=p(n.value,2),i=a[0],o=a[1];var s=o.getCounts(),u=s.keyCount,f=s.atlasCount;t.push({type:i,keyCount:u,atlasCount:f})}}catch(e){r.e(e)}finally{r.f()}return t}}])}();var ip=function(){function e(t){o(this,e);this.globalOptions=t;this.atlasSize=t.webglTexSize;this.maxAtlasesPerBatch=t.webglTexPerBatch;this.batchAtlases=[]}return u(e,[{key:"getMaxAtlasesPerBatch",value:function e(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function e(){return this.atlasSize}},{key:"getIndexArray",value:function e(){return Array.from({length:this.maxAtlasesPerBatch},function(e,t){return t})}},{key:"startBatch",value:function e(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function e(){return this.batchAtlases.length}},{key:"getAtlases",value:function e(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function e(t){if(this.batchAtlases.length===this.maxAtlasesPerBatch){return this.batchAtlases.includes(t)}return true}},{key:"getAtlasIndexForBatch",value:function e(t){var r=this.batchAtlases.indexOf(t);if(r<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch){throw new Error("cannot add more atlases to batch")}this.batchAtlases.push(t);r=this.batchAtlases.length-1}return r}}])}();var op="\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n";var sp="\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n";var up="\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n";var lp="\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n";var fp={SCREEN:{name:"screen",screen:true},PICKING:{name:"picking",picking:true}};var cp={IGNORE:1,USE_BB:2};var vp=0;var dp=1;var hp=2;var pp=3;var gp=4;var yp=5;var mp=6;var bp=7;var xp=function(){function e(t,r,n){o(this,e);this.r=t;this.gl=r;this.maxInstances=n.webglBatchSize;this.atlasSize=n.webglTexSize;this.bgColor=n.bgColor;this.debug=n.webglDebug;this.batchDebugInfo=[];n.enableWrapping=true;n.createTextureCanvas=Ah;this.atlasManager=new ap(t,n);this.batchManager=new ip(n);this.simpleShapeOptions=new Map;this.program=this._createShaderProgram(fp.SCREEN);this.pickingProgram=this._createShaderProgram(fp.PICKING);this.vao=this._createVAO()}return u(e,[{key:"addAtlasCollection",value:function e(t,r){this.atlasManager.addAtlasCollection(t,r)}},{key:"addTextureAtlasRenderType",value:function e(t,r){this.atlasManager.addRenderType(t,r)}},{key:"addSimpleShapeRenderType",value:function e(t,r){this.simpleShapeOptions.set(t,r)}},{key:"invalidate",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.type;var a=this.atlasManager;if(n){return a.invalidate(t,{filterType:function e(t){return t===n},forceRedraw:true})}else{return a.invalidate(t)}}},{key:"gc",value:function e(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function e(t){var r=this.gl;var n="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(vp,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(gp," || aVertType == ").concat(bp," \n             || aVertType == ").concat(yp," || aVertType == ").concat(mp,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(dp,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(hp,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(pp," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    ");var a=this.batchManager.getIndexArray();var i="#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(a.map(function(e){return"uniform sampler2D uTexture".concat(e,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat(op,"\n      ").concat(sp,"\n      ").concat(up,"\n      ").concat(lp,"\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(vp,") {\n          // look up the texel from the texture unit\n          ").concat(a.map(function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(pp,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(gp," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(gp," || vVertType == ").concat(bp," \n          || vVertType == ").concat(yp," || vVertType == ").concat(mp,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(gp,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(bp," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(bp,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(t.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    ");var o=Ph(r,n,i);o.aPosition=r.getAttribLocation(o,"aPosition");o.aIndex=r.getAttribLocation(o,"aIndex");o.aVertType=r.getAttribLocation(o,"aVertType");o.aTransform=r.getAttribLocation(o,"aTransform");o.aAtlasId=r.getAttribLocation(o,"aAtlasId");o.aTex=r.getAttribLocation(o,"aTex");o.aPointAPointB=r.getAttribLocation(o,"aPointAPointB");o.aPointCPointD=r.getAttribLocation(o,"aPointCPointD");o.aLineWidth=r.getAttribLocation(o,"aLineWidth");o.aColor=r.getAttribLocation(o,"aColor");o.aCornerRadius=r.getAttribLocation(o,"aCornerRadius");o.aBorderColor=r.getAttribLocation(o,"aBorderColor");o.uPanZoomMatrix=r.getUniformLocation(o,"uPanZoomMatrix");o.uAtlasSize=r.getUniformLocation(o,"uAtlasSize");o.uBGColor=r.getUniformLocation(o,"uBGColor");o.uZoom=r.getUniformLocation(o,"uZoom");o.uTextures=[];for(var s=0;s<this.batchManager.getMaxAtlasesPerBatch();s++){o.uTextures.push(r.getUniformLocation(o,"uTexture".concat(s)))}return o}},{key:"_createVAO",value:function e(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var r=this.maxInstances;var n=this.gl,a=this.program;var i=n.createVertexArray();n.bindVertexArray(i);Wh(n,"vec2",a.aPosition,t);this.transformBuffer=Xh(n,r,a.aTransform);this.indexBuffer=qh(n,r,"vec4",a.aIndex);this.vertTypeBuffer=qh(n,r,"int",a.aVertType);this.atlasIdBuffer=qh(n,r,"int",a.aAtlasId);this.texBuffer=qh(n,r,"vec4",a.aTex);this.pointAPointBBuffer=qh(n,r,"vec4",a.aPointAPointB);this.pointCPointDBuffer=qh(n,r,"vec4",a.aPointCPointD);this.lineWidthBuffer=qh(n,r,"vec2",a.aLineWidth);this.colorBuffer=qh(n,r,"vec4",a.aColor);this.cornerRadiusBuffer=qh(n,r,"vec4",a.aCornerRadius);this.borderColorBuffer=qh(n,r,"vec4",a.aBorderColor);n.bindVertexArray(null);return i}},{key:"buffers",get:function e(){var t=this;if(!this._buffers){this._buffers=Object.keys(this).filter(function(e){return Q(e,"Buffer")}).map(function(e){return t[e]})}return this._buffers}},{key:"startFrame",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:fp.SCREEN;this.panZoomMatrix=t;this.renderTarget=r;this.batchDebugInfo=[];this.wrappedCount=0;this.simpleCount=0;this.startBatch()}},{key:"startBatch",value:function e(){this.instanceCount=0;this.batchManager.startBatch()}},{key:"endFrame",value:function e(){this.endBatch()}},{key:"_isVisible",value:function e(t,r){if(t.visible()){if(r&&r.isVisible){return r.isVisible(t)}return true}return false}},{key:"drawTexture",value:function e(t,r,n){var a=this.atlasManager,i=this.batchManager;var o=a.getRenderTypeOpts(n);if(!this._isVisible(t,o)){return}if(this.renderTarget.picking&&o.getTexPickingMode){var s=o.getTexPickingMode(t);if(s===cp.IGNORE){return}else if(s==cp.USE_BB){this.drawPickingRectangle(t,r,n);return}}var u=a.getAtlasInfo(t,n);var f=l(u),c;try{for(f.s();!(c=f.n()).done;){var v=c.value;var d=v.atlas,h=v.tex1,g=v.tex2;if(!i.canAddToCurrentBatch(d)){this.endBatch()}var y=i.getAtlasIndexForBatch(d);for(var m=0,b=[[h,true],[g,false]];m<b.length;m++){var x=p(b[m],2),w=x[0],E=x[1];if(w.w!=0){var k=this.instanceCount;this.vertTypeBuffer.getView(k)[0]=vp;var _=this.indexBuffer.getView(k);Lh(r,_);var T=this.atlasIdBuffer.getView(k);T[0]=y;var C=this.texBuffer.getView(k);C[0]=w.x;C[1]=w.y;C[2]=w.w;C[3]=w.h;var S=this.transformBuffer.getMatrixView(k);this.setTransformMatrix(t,S,o,v,E);this.instanceCount++;if(!E)this.wrappedCount++;if(this.instanceCount>=this.maxInstances){this.endBatch()}}}}}catch(e){f.e(e)}finally{f.f()}}},{key:"setTransformMatrix",value:function e(t,r,n,a){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=0;if(n.shapeProps&&n.shapeProps.padding){o=t.pstyle(n.shapeProps.padding).pfValue}if(a){var s=a.bb,u=a.tex1,l=a.tex2;var f=u.w/(u.w+l.w);if(!i){f=1-f}var c=this._getAdjustedBB(s,o,i,f);this._applyTransformMatrix(r,c,n,t)}else{var v=n.getBoundingBox(t);var d=this._getAdjustedBB(v,o,true,1);this._applyTransformMatrix(r,d,n,t)}}},{key:"_applyTransformMatrix",value:function e(t,r,n,a){var i,o;Kh(t);var s=n.getRotation?n.getRotation(a):0;if(s!==0){var u=n.getRotationPoint(a),l=u.x,f=u.y;$h(t,t,[l,f]);Qh(t,t,s);var c=n.getRotationOffset(a);i=c.x+(r.xOffset||0);o=c.y+(r.yOffset||0)}else{i=r.x1;o=r.y1}$h(t,t,[i,o]);Jh(t,t,[r.w,r.h])}},{key:"_getAdjustedBB",value:function e(t,r,n,a){var i=t.x1,o=t.y1,s=t.w,u=t.h,l=t.yOffset;if(r){i-=r;o-=r;s+=2*r;u+=2*r}var f=0;var c=s*a;if(n&&a<1){s=c}else if(!n&&a<1){f=s-c;i+=f;s=c}return{x1:i,y1:o,w:s,h:u,xOffset:f,yOffset:l}}},{key:"drawPickingRectangle",value:function e(t,r,n){var a=this.atlasManager.getRenderTypeOpts(n);var i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=gp;var o=this.indexBuffer.getView(i);Lh(r,o);var s=this.colorBuffer.getView(i);Nh([0,0,0],1,s);var u=this.transformBuffer.getMatrixView(i);this.setTransformMatrix(t,u,a);this.simpleCount++;this.instanceCount++;if(this.instanceCount>=this.maxInstances){this.endBatch()}}},{key:"drawNode",value:function e(t,r,n){var a=this.simpleShapeOptions.get(n);if(!this._isVisible(t,a)){return}var i=a.shapeProps;var o=this._getVertTypeForShape(t,i.shape);if(o===undefined||a.isSimple&&!a.isSimple(t)){this.drawTexture(t,r,n);return}var s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=o;if(o===yp||o===mp){var u=a.getBoundingBox(t);var l=this._getCornerRadius(t,i.radius,u);var f=this.cornerRadiusBuffer.getView(s);f[0]=l;f[1]=l;f[2]=l;f[3]=l;if(o===mp){f[0]=0;f[2]=0}}var c=this.indexBuffer.getView(s);Lh(r,c);var v=t.pstyle(i.color).value;var d=t.pstyle(i.opacity).value;var h=this.colorBuffer.getView(s);Nh(v,d,h);var p=this.lineWidthBuffer.getView(s);p[0]=0;p[1]=0;if(i.border){var g=t.pstyle("border-width").value;if(g>0){var y=t.pstyle("border-color").value;var m=t.pstyle("border-opacity").value;var b=this.borderColorBuffer.getView(s);Nh(y,m,b);var x=t.pstyle("border-position").value;if(x==="inside"){p[0]=0;p[1]=-g}else if(x==="outside"){p[0]=g;p[1]=0}else{var w=g/2;p[0]=w;p[1]=-w}}}var E=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(t,E,a);this.simpleCount++;this.instanceCount++;if(this.instanceCount>=this.maxInstances){this.endBatch()}}},{key:"_getVertTypeForShape",value:function e(t,r){var n=t.pstyle(r).value;switch(n){case"rectangle":return gp;case"ellipse":return bp;case"roundrectangle":case"round-rectangle":return yp;case"bottom-round-rectangle":return mp;default:return undefined}}},{key:"_getCornerRadius",value:function e(t,r,n){var a=n.w,i=n.h;if(t.pstyle(r).value==="auto"){return Bn(a,i)}else{var o=t.pstyle(r).pfValue;var s=a/2;var u=i/2;return Math.min(o,u,s)}}},{key:"drawEdgeArrow",value:function e(t,r,n){if(!t.visible()){return}var a=t._private.rscratch;var i,o,s;if(n==="source"){i=a.arrowStartX;o=a.arrowStartY;s=a.srcArrowAngle}else{i=a.arrowEndX;o=a.arrowEndY;s=a.tgtArrowAngle}if(isNaN(i)||i==null||isNaN(o)||o==null||isNaN(s)||s==null){return}var u=t.pstyle(n+"-arrow-shape").value;if(u==="none"){return}var l=t.pstyle(n+"-arrow-color").value;var f=t.pstyle("opacity").value;var c=t.pstyle("line-opacity").value;var v=f*c;var d=t.pstyle("width").pfValue;var h=t.pstyle("arrow-scale").value;var p=this.r.getArrowWidth(d,h);var g=this.instanceCount;var y=this.transformBuffer.getMatrixView(g);Kh(y);$h(y,y,[i,o]);Jh(y,y,[p,p]);Qh(y,y,s);this.vertTypeBuffer.getView(g)[0]=pp;var m=this.indexBuffer.getView(g);Lh(r,m);var b=this.colorBuffer.getView(g);Nh(l,v,b);this.instanceCount++;if(this.instanceCount>=this.maxInstances){this.endBatch()}}},{key:"drawEdgeLine",value:function e(t,r){if(!t.visible()){return}var n=this._getEdgePoints(t);if(!n){return}var a=t.pstyle("opacity").value;var i=t.pstyle("line-opacity").value;var o=t.pstyle("width").pfValue;var s=t.pstyle("line-color").value;var u=a*i;if(n.length/2+this.instanceCount>this.maxInstances){this.endBatch()}if(n.length==4){var l=this.instanceCount;this.vertTypeBuffer.getView(l)[0]=dp;var f=this.indexBuffer.getView(l);Lh(r,f);var c=this.colorBuffer.getView(l);Nh(s,u,c);var v=this.lineWidthBuffer.getView(l);v[0]=o;var d=this.pointAPointBBuffer.getView(l);d[0]=n[0];d[1]=n[1];d[2]=n[2];d[3]=n[3];this.instanceCount++;if(this.instanceCount>=this.maxInstances){this.endBatch()}}else{for(var h=0;h<n.length-2;h+=2){var p=this.instanceCount;this.vertTypeBuffer.getView(p)[0]=hp;var g=this.indexBuffer.getView(p);Lh(r,g);var y=this.colorBuffer.getView(p);Nh(s,u,y);var m=this.lineWidthBuffer.getView(p);m[0]=o;var b=n[h-2],x=n[h-1];var w=n[h],E=n[h+1];var k=n[h+2],_=n[h+3];var T=n[h+4],C=n[h+5];if(h==0){b=2*w-k+.001;x=2*E-_+.001}if(h==n.length-4){T=2*k-w+.001;C=2*_-E+.001}var S=this.pointAPointBBuffer.getView(p);S[0]=b;S[1]=x;S[2]=w;S[3]=E;var D=this.pointCPointDBuffer.getView(p);D[0]=k;D[1]=_;D[2]=T;D[3]=C;this.instanceCount++;if(this.instanceCount>=this.maxInstances){this.endBatch()}}}}},{key:"_getEdgePoints",value:function e(t){var r=t._private.rscratch;if(r.badLine||r.allpts==null||isNaN(r.allpts[0])){return}var n=r.allpts;if(n.length==4){return n}var a=this._getNumSegments(t);return this._getCurveSegmentPoints(n,a)}},{key:"_getNumSegments",value:function e(t){var r=15;return Math.min(Math.max(r,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function e(t,r){if(t.length==4){return t}var n=Array((r+1)*2);for(var a=0;a<=r;a++){if(a==0){n[0]=t[0];n[1]=t[1]}else if(a==r){n[a*2]=t[t.length-2];n[a*2+1]=t[t.length-1]}else{var i=a/r;this._setCurvePoint(t,i,n,a*2)}}return n}},{key:"_setCurvePoint",value:function e(t,r,n,a){if(t.length<=2){n[a]=t[0];n[a+1]=t[1]}else{var i=Array(t.length-2);for(var o=0;o<i.length;o+=2){var s=(1-r)*t[o]+r*t[o+2];var u=(1-r)*t[o+1]+r*t[o+3];i[o]=s;i[o+1]=u}return this._setCurvePoint(i,r,n,a)}}},{key:"endBatch",value:function e(){var t=this.gl,r=this.vao,n=this.vertexCount,a=this.instanceCount;if(a===0)return;var i=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(i);t.bindVertexArray(r);var o=l(this.buffers),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;u.bufferSubData(a)}}catch(e){o.e(e)}finally{o.f()}var f=this.batchManager.getAtlases();for(var c=0;c<f.length;c++){f[c].bufferIfNeeded(t)}for(var v=0;v<f.length;v++){t.activeTexture(t.TEXTURE0+v);t.bindTexture(t.TEXTURE_2D,f[v].texture);t.uniform1i(i.uTextures[v],v)}t.uniform1f(i.uZoom,Bh(this.r));t.uniformMatrix3fv(i.uPanZoomMatrix,false,this.panZoomMatrix);t.uniform1i(i.uAtlasSize,this.batchManager.getAtlasSize());var d=Nh(this.bgColor,1);t.uniform4fv(i.uBGColor,d);t.drawArraysInstanced(t.TRIANGLES,0,n,a);t.bindVertexArray(null);t.bindTexture(t.TEXTURE_2D,null);if(this.debug){this.batchDebugInfo.push({count:a,atlasCount:f.length})}this.startBatch()}},{key:"getDebugInfo",value:function e(){var t=this.atlasManager.getDebugInfo();var r=t.reduce(function(e,t){return e+t.atlasCount},0);var n=this.batchDebugInfo;var a=n.reduce(function(e,t){return e+t.count},0);return{atlasInfo:t,totalAtlases:r,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:n.length,batchInfo:n,totalInstances:a}}}])}();var wp={};wp.initWebgl=function(e,t){var r=this;var n=r.data.contexts[r.WEBGL];e.bgColor=Ep(r);e.webglTexSize=Math.min(e.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE));e.webglTexRows=Math.min(e.webglTexRows,54);e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54);e.webglBatchSize=Math.min(e.webglBatchSize,16384);e.webglTexPerBatch=Math.min(e.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));r.webglDebug=e.webglDebug;r.webglDebugShowAtlases=e.webglDebugShowAtlases;r.pickingFrameBuffer=Yh(n);r.pickingFrameBuffer.needsDraw=true;r.drawing=new xp(r,n,e);var a=function e(t){return function(e){return r.getTextAngle(e,t)}};var i=function e(t){return function(e){var r=e.pstyle(t);return r&&r.value}};var o=function e(t){return function(e){return e.pstyle("".concat(t,"-opacity")).value>0}};var s=function e(t){var r=t.pstyle("text-events").strValue==="yes";return r?cp.USE_BB:cp.IGNORE};var u=function e(t){var r=t.position(),n=r.x,a=r.y;var i=t.outerWidth();var o=t.outerHeight();return{w:i,h:o,x1:n-i/2,y1:a-o/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes});r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows});r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement});r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:Oh,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:true}});r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}});r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}});r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:_p(t.getLabelKey,null),getBoundingBox:Tp(t.getLabelBox,null),drawClipped:true,drawElement:t.drawLabel,getRotation:a(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:i("label")});r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:_p(t.getSourceLabelKey,"source"),getBoundingBox:Tp(t.getSourceLabelBox,"source"),drawClipped:true,drawElement:t.drawSourceLabel,getRotation:a("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:i("source-label")});r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:_p(t.getTargetLabelKey,"target"),getBoundingBox:Tp(t.getTargetLabelBox,"target"),drawClipped:true,drawElement:t.drawTargetLabel,getRotation:a("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=ut(function(){console.log("garbage collect flag set");r.data.gc=true},1e4);r.onUpdateEleCalcs(function(e,t){var n=false;if(t&&t.length>0){n|=r.drawing.invalidate(t)}if(n){l()}});Cp(r)};function Ep(e){var t=e.cy.container();var r=t&&t.style&&t.style.backgroundColor||"white";return de(r)}function kp(e,t){var r=e._private.rscratch;return Ht(r,"labelWrapCachedLines",t)||[]}var _p=function e(t,r){return function(e){var n=t(e);var a=kp(e,r);if(a.length>1){return a.map(function(e,t){return"".concat(n,"_").concat(t)})}return n}};var Tp=function e(t,r){return function(e,n){var a=t(e);if(typeof n==="string"){var i=n.indexOf("_");if(i>0){var o=Number(n.substring(i+1));var s=kp(e,r);var u=a.h/s.length;var l=u*o;var f=a.y1+l;return{x1:a.x1,w:a.w,y1:f,h:u,yOffset:l}}}return a}};function Cp(e){{var t=e.render;e.render=function(r){r=r||{};var n=e.cy;if(e.webgl){if(n.zoom()>wd){Sp(e);t.call(e,r)}else{Dp(e);Lp(e,r,fp.SCREEN)}}}}{var r=e.matchCanvasSize;e.matchCanvasSize=function(t){r.call(e,t);e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight);e.pickingFrameBuffer.needsDraw=true}}{e.findNearestElements=function(t,r,n,a){return Rp(e,t,r)}}{var n=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){n.call(e);e.pickingFrameBuffer.needsDraw=true}}{var a=e.notify;e.notify=function(t,r){a.call(e,t,r);if(t==="viewport"||t==="bounds"){e.pickingFrameBuffer.needsDraw=true}else if(t==="background"){e.drawing.invalidate(r,{type:"node-body"})}}}}function Sp(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}function Dp(e){var t=function t(r){r.save();r.setTransform(1,0,0,1,0,0);r.clearRect(0,0,e.canvasWidth,e.canvasHeight);r.restore()};t(e.data.contexts[e.NODE]);t(e.data.contexts[e.DRAG])}function Pp(e){var t=e.canvasWidth;var r=e.canvasHeight;var n=Mh(e),a=n.pan,i=n.zoom;var o=Hh();$h(o,o,[a.x,a.y]);Jh(o,o,[i,i]);var s=Hh();ep(s,t,r);var u=Hh();Zh(u,s,o);return u}function Ap(e,t){var r=e.canvasWidth;var n=e.canvasHeight;var a=Mh(e),i=a.pan,o=a.zoom;t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,r,n);t.translate(i.x,i.y);t.scale(o,o)}function Mp(e,t){e.drawSelectionRectangle(t,function(t){return Ap(e,t)})}function Bp(e){var t=e.data.contexts[e.NODE];t.save();Ap(e,t);t.strokeStyle="rgba(0, 0, 0, 0.3)";t.beginPath();t.moveTo(-1e3,0);t.lineTo(1e3,0);t.stroke();t.beginPath();t.moveTo(0,-1e3);t.lineTo(0,1e3);t.stroke();t.restore()}function Ip(e){var t=function t(r,n,a){var i=r.atlasManager.getAtlasCollection(n);var o=e.data.contexts[e.NODE];var s=i.atlases;for(var u=0;u<s.length;u++){var l=s[u];var f=l.canvas;if(f){var c=f.width;var v=f.height;var d=c*u;var h=f.height*a;var p=.4;o.save();o.scale(p,p);o.drawImage(f,d,h);o.strokeStyle="black";o.rect(d,h,c,v);o.stroke();o.restore()}}};var r=0;t(e.drawing,"node",r++);t(e.drawing,"label",r++)}function Op(e,t,r,n,a){var i,o,s,u;var l=Mh(e),f=l.pan,c=l.zoom;{var v=Ih(e,f,c,t,r),d=p(v,2),h=d[0],g=d[1];var y=6;i=h-y/2;o=g-y/2;s=y;u=y}if(s===0||u===0){return[]}var m=e.data.contexts[e.WEBGL];m.bindFramebuffer(m.FRAMEBUFFER,e.pickingFrameBuffer);if(e.pickingFrameBuffer.needsDraw){m.viewport(0,0,m.canvas.width,m.canvas.height);Lp(e,null,fp.PICKING);e.pickingFrameBuffer.needsDraw=false}var b=s*u;var x=new Uint8Array(b*4);m.readPixels(i,o,s,u,m.RGBA,m.UNSIGNED_BYTE,x);m.bindFramebuffer(m.FRAMEBUFFER,null);var w=new Set;for(var E=0;E<b;E++){var k=x.slice(E*4,E*4+4);var _=zh(k)-1;if(_>=0){w.add(_)}}return w}function Rp(e,t,r){var n=Op(e,t,r);var a=e.getCachedZSortedEles();var i,o;var s=l(n),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;var c=a[f];if(!i&&c.isNode()){i=c}if(!o&&c.isEdge()){o=c}if(i&&o){break}}}catch(e){s.e(e)}finally{s.f()}return[i,o].filter(Boolean)}function Np(e,t,r){var n=e.drawing;t+=1;if(r.isNode()){n.drawNode(r,t,"node-underlay");n.drawNode(r,t,"node-body");n.drawTexture(r,t,"label");n.drawNode(r,t,"node-overlay")}else{n.drawEdgeLine(r,t);n.drawEdgeArrow(r,t,"source");n.drawEdgeArrow(r,t,"target");n.drawTexture(r,t,"label");n.drawTexture(r,t,"edge-source-label");n.drawTexture(r,t,"edge-target-label")}}function Lp(e,t,r){var n;if(e.webglDebug){n=performance.now()}var a=e.drawing;var i=0;if(r.screen){if(e.data.canvasNeedsRedraw[e.SELECT_BOX]){Mp(e,t)}}if(e.data.canvasNeedsRedraw[e.NODE]||r.picking){var o=e.data.contexts[e.WEBGL];if(r.screen){o.clearColor(0,0,0,0);o.enable(o.BLEND);o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)}else{o.disable(o.BLEND)}o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);o.viewport(0,0,o.canvas.width,o.canvas.height);var s=Pp(e);var u=e.getCachedZSortedEles();i=u.length;a.startFrame(s,r);if(r.screen){for(var f=0;f<u.nondrag.length;f++){Np(e,f,u.nondrag[f])}for(var c=0;c<u.drag.length;c++){Np(e,c,u.drag[c])}}else if(r.picking){for(var v=0;v<u.length;v++){Np(e,v,u[v])}}a.endFrame();if(r.screen&&e.webglDebugShowAtlases){Bp(e);Ip(e)}e.data.canvasNeedsRedraw[e.NODE]=false;e.data.canvasNeedsRedraw[e.DRAG]=false}if(e.webglDebug){var d=performance.now();var h=false;var p=Math.ceil(d-n);var g=a.getDebugInfo();var y=["".concat(i," elements"),"".concat(g.totalInstances," instances"),"".concat(g.batchCount," batches"),"".concat(g.totalAtlases," atlases"),"".concat(g.wrappedCount," wrapped textures"),"".concat(g.simpleCount," simple shapes")].join(", ");if(h){console.log("WebGL (".concat(r.name,") - time ").concat(p,"ms, ").concat(y))}else{console.log("WebGL (".concat(r.name,") - frame time ").concat(p,"ms"));console.log("Totals:");console.log("  ".concat(y));console.log("Texture Atlases Used:");var m=g.atlasInfo;var b=l(m),x;try{for(b.s();!(x=b.n()).done;){var w=x.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(e){b.e(e)}finally{b.f()}console.log("")}}if(e.data.gc){console.log("Garbage Collect!");e.data.gc=false;a.gc()}}var zp={};zp.drawPolygonPath=function(e,t,r,n,a,i){var o=n/2;var s=a/2;if(e.beginPath){e.beginPath()}e.moveTo(t+o*i[0],r+s*i[1]);for(var u=1;u<i.length/2;u++){e.lineTo(t+o*i[u*2],r+s*i[u*2+1])}e.closePath()};zp.drawRoundPolygonPath=function(e,t,r,n,a,i,o){o.forEach(function(t){return Fv(e,t)});e.closePath()};zp.drawRoundRectanglePath=function(e,t,r,n,a,i){var o=n/2;var s=a/2;var u=i==="auto"?Bn(n,a):Math.min(i,s,o);if(e.beginPath){e.beginPath()}e.moveTo(t,r-s);e.arcTo(t+o,r-s,t+o,r,u);e.arcTo(t+o,r+s,t,r+s,u);e.arcTo(t-o,r+s,t-o,r,u);e.arcTo(t-o,r-s,t,r-s,u);e.lineTo(t,r-s);e.closePath()};zp.drawBottomRoundRectanglePath=function(e,t,r,n,a,i){var o=n/2;var s=a/2;var u=i==="auto"?Bn(n,a):i;if(e.beginPath){e.beginPath()}e.moveTo(t,r-s);e.lineTo(t+o,r-s);e.lineTo(t+o,r);e.arcTo(t+o,r+s,t,r+s,u);e.arcTo(t-o,r+s,t-o,r,u);e.lineTo(t-o,r-s);e.lineTo(t,r-s);e.closePath()};zp.drawCutRectanglePath=function(e,t,r,n,a,i,o){var s=n/2;var u=a/2;var l=o==="auto"?On():o;if(e.beginPath){e.beginPath()}e.moveTo(t-s+l,r-u);e.lineTo(t+s-l,r-u);e.lineTo(t+s,r-u+l);e.lineTo(t+s,r+u-l);e.lineTo(t+s-l,r+u);e.lineTo(t-s+l,r+u);e.lineTo(t-s,r+u-l);e.lineTo(t-s,r-u+l);e.closePath()};zp.drawBarrelPath=function(e,t,r,n,a){var i=n/2;var o=a/2;var s=t-i;var u=t+i;var l=r-o;var f=r+o;var c=Nn(n,a);var v=c.widthOffset;var d=c.heightOffset;var h=c.ctrlPtOffsetPct*v;if(e.beginPath){e.beginPath()}e.moveTo(s,l+d);e.lineTo(s,f-d);e.quadraticCurveTo(s+h,f,s+v,f);e.lineTo(u-v,f);e.quadraticCurveTo(u-h,f,u,f-d);e.lineTo(u,l+d);e.quadraticCurveTo(u-h,l,u-v,l);e.lineTo(s+v,l);e.quadraticCurveTo(s+h,l,s,l+d);e.closePath()};var jp=Math.sin(0);var Vp=Math.cos(0);var Fp={};var Gp={};var Wp=Math.PI/40;for(var qp=0*Math.PI;qp<2*Math.PI;qp+=Wp){Fp[qp]=Math.sin(qp);Gp[qp]=Math.cos(qp)}zp.drawEllipsePath=function(e,t,r,n,a){if(e.beginPath){e.beginPath()}if(e.ellipse){e.ellipse(t,r,n/2,a/2,0,0,2*Math.PI)}else{var i,o;var s=n/2;var u=a/2;for(var l=0*Math.PI;l<2*Math.PI;l+=Wp){i=t-s*Fp[l]*jp+s*Gp[l]*Vp;o=r+u*Gp[l]*jp+u*Fp[l]*Vp;if(l===0){e.moveTo(i,o)}else{e.lineTo(i,o)}}}e.closePath()};var Xp={};Xp.createBuffer=function(e,t){var r=document.createElement("canvas");r.width=e;r.height=t;return[r,r.getContext("2d")]};Xp.bufferCanvasImage=function(e){var t=this.cy;var r=t.mutableElements();var n=r.boundingBox();var a=this.findContainerClientCoords();var i=e.full?Math.ceil(n.w):a[2];var o=e.full?Math.ceil(n.h):a[3];var s=I(e.maxWidth)||I(e.maxHeight);var u=this.getPixelRatio();var l=1;if(e.scale!==undefined){i*=e.scale;o*=e.scale;l=e.scale}else if(s){var f=Infinity;var c=Infinity;if(I(e.maxWidth)){f=l*e.maxWidth/i}if(I(e.maxHeight)){c=l*e.maxHeight/o}l=Math.min(f,c);i*=l;o*=l}if(!s){i*=u;o*=u;l*=u}var v=document.createElement("canvas");v.width=i;v.height=o;v.style.width=i+"px";v.style.height=o+"px";var d=v.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o);d.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(e.full){d.translate(-n.x1*l,-n.y1*l);d.scale(l,l);this.drawElements(d,h);d.scale(1/l,1/l);d.translate(n.x1*l,n.y1*l)}else{var p=t.pan();var g={x:p.x*l,y:p.y*l};l*=t.zoom();d.translate(g.x,g.y);d.scale(l,l);this.drawElements(d,h);d.scale(1/l,1/l);d.translate(-g.x,-g.y)}if(e.bg){d.globalCompositeOperation="destination-over";d.fillStyle=e.bg;d.rect(0,0,i,o);d.fill()}}return v};function Yp(e,t){var r=atob(e);var n=new ArrayBuffer(r.length);var a=new Uint8Array(n);for(var i=0;i<r.length;i++){a[i]=r.charCodeAt(i)}return new Blob([n],{type:t})}function Up(e){var t=e.indexOf(",");return e.substr(t+1)}function Hp(e,t,r){var n=function n(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new di(function(n,a){try{t.toBlob(function(e){if(e!=null){n(e)}else{a(new Error("`canvas.toBlob()` sent a null value in its callback"))}},r,e.quality)}catch(e){a(e)}});case"blob":return Yp(Up(n()),r);case"base64":return Up(n());case"base64uri":default:return n()}}Xp.png=function(e){return Hp(e,this.bufferCanvasImage(e),"image/png")};Xp.jpg=function(e){return Hp(e,this.bufferCanvasImage(e),"image/jpeg")};var Kp={};Kp.nodeShapeImpl=function(e,t,r,n,a,i,o,s){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,a,i);case"polygon":return this.drawPolygonPath(t,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,a,i,s);case"barrel":return this.drawBarrelPath(t,r,n,a,i)}};var Zp=Qp;var $p=Qp.prototype;$p.CANVAS_LAYERS=3;$p.SELECT_BOX=0;$p.DRAG=1;$p.NODE=2;$p.WEBGL=3;$p.CANVAS_TYPES=["2d","2d","2d","webgl2"];$p.BUFFER_COUNT=3;$p.TEXTURE_BUFFER=0;$p.MOTIONBLUR_BUFFER_NODE=1;$p.MOTIONBLUR_BUFFER_DRAG=2;function Qp(e){var t=this;var r=t.cy.window();var n=r.document;if(e.webgl){$p.CANVAS_LAYERS=t.CANVAS_LAYERS=4;console.log("webgl rendering enabled")}t.data={canvases:new Array($p.CANVAS_LAYERS),contexts:new Array($p.CANVAS_LAYERS),canvasNeedsRedraw:new Array($p.CANVAS_LAYERS),bufferCanvases:new Array($p.BUFFER_COUNT),bufferContexts:new Array($p.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color";var i="rgba(0,0,0,0)";t.data.canvasContainer=n.createElement("div");var o=t.data.canvasContainer.style;t.data.canvasContainer.style[a]=i;o.position="relative";o.zIndex="0";o.overflow="hidden";var s=e.cy.container();s.appendChild(t.data.canvasContainer);s.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};if(Y()){u["-ms-touch-action"]="none";u["touch-action"]="none"}for(var l=0;l<$p.CANVAS_LAYERS;l++){var f=t.data.canvases[l]=n.createElement("canvas");var c=$p.CANVAS_TYPES[l];t.data.contexts[l]=f.getContext(c);if(!t.data.contexts[l]){Rt("Could not create canvas of type "+c)}Object.keys(u).forEach(function(e){f.style[e]=u[e]});f.style.position="absolute";f.setAttribute("data-id","layer"+l);f.style.zIndex=String($p.CANVAS_LAYERS-l);t.data.canvasContainer.appendChild(f);t.data.canvasNeedsRedraw[l]=false}t.data.topCanvas=t.data.canvases[0];t.data.canvases[$p.NODE].setAttribute("data-id","layer"+$p.NODE+"-node");t.data.canvases[$p.SELECT_BOX].setAttribute("data-id","layer"+$p.SELECT_BOX+"-selectbox");t.data.canvases[$p.DRAG].setAttribute("data-id","layer"+$p.DRAG+"-drag");if(t.data.canvases[$p.WEBGL]){t.data.canvases[$p.WEBGL].setAttribute("data-id","layer"+$p.WEBGL+"-webgl")}for(var l=0;l<$p.BUFFER_COUNT;l++){t.data.bufferCanvases[l]=n.createElement("canvas");t.data.bufferContexts[l]=t.data.bufferCanvases[l].getContext("2d");t.data.bufferCanvases[l].style.position="absolute";t.data.bufferCanvases[l].setAttribute("data-id","buffer"+l);t.data.bufferCanvases[l].style.zIndex=String(-l-1);t.data.bufferCanvases[l].style.visibility="hidden"}t.pathsEnabled=true;var v=Yr();var d=function e(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}};var h=function e(t){return{x:-t.w/2,y:-t.h/2}};var p=function e(t){var r=t[0]._private;var n=r.oldBackgroundTimestamp===r.backgroundTimestamp;return!n};var g=function e(t){return t[0]._private.nodeKey};var y=function e(t){return t[0]._private.labelStyleKey};var m=function e(t){return t[0]._private.sourceLabelStyleKey};var b=function e(t){return t[0]._private.targetLabelStyleKey};var x=function e(r,n,a,i,o){return t.drawElement(r,n,a,false,false,o)};var w=function e(r,n,a,i,o){return t.drawElementText(r,n,a,i,"main",o)};var E=function e(r,n,a,i,o){return t.drawElementText(r,n,a,i,"source",o)};var k=function e(r,n,a,i,o){return t.drawElementText(r,n,a,i,"target",o)};var _=function e(t){t.boundingBox();return t[0]._private.bodyBounds};var T=function e(t){t.boundingBox();return t[0]._private.labelBounds.main||v};var C=function e(t){t.boundingBox();return t[0]._private.labelBounds.source||v};var S=function e(t){t.boundingBox();return t[0]._private.labelBounds.target||v};var D=function e(t,r){return r};var P=function e(t){return d(_(t))};var A=function e(t,r,n){var a=t?t+"-":"";return{x:r.x+n.pstyle(a+"text-margin-x").pfValue,y:r.y+n.pstyle(a+"text-margin-y").pfValue}};var M=function e(t,r,n){var a=t[0]._private.rscratch;return{x:a[r],y:a[n]}};var B=function e(t){return A("",M(t,"labelX","labelY"),t)};var I=function e(t){return A("source",M(t,"sourceLabelX","sourceLabelY"),t)};var O=function e(t){return A("target",M(t,"targetLabelX","targetLabelY"),t)};var R=function e(t){return h(_(t))};var N=function e(t){return h(C(t))};var L=function e(t){return h(S(t))};var z=function e(t){var r=T(t);var n=h(T(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-r.w-(r.leftPad||0);break;case"right":n.x=-(r.rightPad||0);break}switch(t.pstyle("text-valign").value){case"top":n.y=-r.h-(r.topPad||0);break;case"bottom":n.y=-(r.botPad||0);break}}return n};var j=t.data.eleTxrCache=new Ld(t,{getKey:g,doesEleInvalidateKey:p,drawElement:x,getBoundingBox:_,getRotationPoint:P,getRotationOffset:R,allowEdgeTxrCaching:false,allowParentTxrCaching:false});var V=t.data.lblTxrCache=new Ld(t,{getKey:y,drawElement:w,getBoundingBox:T,getRotationPoint:B,getRotationOffset:z,isVisible:D});var F=t.data.slbTxrCache=new Ld(t,{getKey:m,drawElement:E,getBoundingBox:C,getRotationPoint:I,getRotationOffset:N,isVisible:D});var G=t.data.tlbTxrCache=new Ld(t,{getKey:b,drawElement:k,getBoundingBox:S,getRotationPoint:O,getRotationOffset:L,isVisible:D});var W=t.data.lyrTxrCache=new eh(t);t.onUpdateEleCalcs(function e(t,r){j.invalidateElements(r);V.invalidateElements(r);F.invalidateElements(r);G.invalidateElements(r);W.invalidateElements(r);for(var n=0;n<r.length;n++){var a=r[n]._private;a.oldBackgroundTimestamp=a.backgroundTimestamp}});var q=function e(t){for(var r=0;r<t.length;r++){W.enqueueElementRefinement(t[r].ele)}};j.onDequeue(q);V.onDequeue(q);F.onDequeue(q);G.onDequeue(q);if(e.webgl){t.initWebgl(e,{getStyleKey:g,getLabelKey:y,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:x,drawLabel:w,drawSourceLabel:E,drawTargetLabel:k,getElementBox:_,getLabelBox:T,getSourceLabelBox:C,getTargetLabelBox:S,getElementRotationPoint:P,getElementRotationOffset:R,getLabelRotationPoint:B,getSourceLabelRotationPoint:I,getTargetLabelRotationPoint:O,getLabelRotationOffset:z,getSourceLabelRotationOffset:N,getTargetLabelRotationOffset:L})}}$p.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[$p.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[$p.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[$p.SELECT_BOX]=t;break;case"gc":r.data.gc=true;break}};var Jp=typeof Path2D!=="undefined";$p.path2dEnabled=function(e){if(e===undefined){return this.pathsEnabled}this.pathsEnabled=e?true:false};$p.usePaths=function(){return Jp&&this.pathsEnabled};$p.setImgSmoothing=function(e,t){if(e.imageSmoothingEnabled!=null){e.imageSmoothingEnabled=t}else{e.webkitImageSmoothingEnabled=t;e.mozImageSmoothingEnabled=t;e.msImageSmoothingEnabled=t}};$p.getImgSmoothing=function(e){if(e.imageSmoothingEnabled!=null){return e.imageSmoothingEnabled}else{return e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled}};$p.makeOffscreenCanvas=function(e,t){var r;if((typeof OffscreenCanvas==="undefined"?"undefined":b(OffscreenCanvas))!=="undefined"){r=new OffscreenCanvas(e,t)}else{var n=this.cy.window();var a=n.document;r=a.createElement("canvas");r.width=e;r.height=t}return r};[ah,ch,mh,xh,wh,kh,Th,wp,zp,Xp,Kp].forEach(function(e){ue($p,e)});var eg=[{name:"null",impl:dv},{name:"base",impl:vd},{name:"canvas",impl:Zp}];var tg=[{type:"layout",extensions:vv},{type:"renderer",extensions:eg}];var rg={};var ng={};function ag(e,t,r){var n=r;var a=function r(n){Lt("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(_c.prototype[t]){return a(t)}else{_c.prototype[t]=r}}else if(e==="collection"){if(zf.prototype[t]){return a(t)}else{zf.prototype[t]=r}}else if(e==="layout"){var i=function e(t){this.options=t;r.call(this,t);if(!M(this._private)){this._private={}}this._private.cy=t.cy;this._private.listeners=[];this.createEmitter()};var o=i.prototype=Object.create(r.prototype);var s=[];for(var u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}if(o.start&&!o.run){o.run=function(){this.start();return this}}else if(!o.start&&o.run){o.start=function(){this.run();return this}}var f=r.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t){for(var r=0;r<t.length;r++){t[r].stop()}}}if(f){f.call(this)}else{this.emit("layoutstop")}return this};if(!o.destroy){o.destroy=function(){return this}}o.cy=function(){return this._private.cy};var c=function e(t){return t._private.cy};var v={addEventFields:function e(t,r){r.layout=t;r.cy=c(t);r.target=t},bubble:function e(){return true},parent:function e(t){return c(t)}};ue(o,{createEmitter:function e(){this._private.emitter=new ef(v,this);return this},emitter:function e(){return this._private.emitter},on:function e(t,r){this.emitter().on(t,r);return this},one:function e(t,r){this.emitter().one(t,r);return this},once:function e(t,r){this.emitter().one(t,r);return this},removeListener:function e(t,r){this.emitter().removeListener(t,r);return this},removeAllListeners:function e(){this.emitter().removeAllListeners();return this},emit:function e(t,r){this.emitter().emit(t,r);return this}});yu.eventAliasesOn(o);n=i}else if(e==="renderer"&&t!=="null"&&t!=="base"){var d=ig("renderer","base");var h=d.prototype;var p=r;var g=r.prototype;var y=function e(){d.apply(this,arguments);p.apply(this,arguments)};var m=y.prototype;for(var b in h){var x=h[b];var w=g[b]!=null;if(w){return a(b)}m[b]=x}for(var E in g){m[E]=g[E]}h.clientFunctions.forEach(function(e){m[e]=m[e]||function(){Rt("Renderer does not implement `renderer."+e+"()` on its prototype")}});n=y}else if(e==="__proto__"||e==="constructor"||e==="prototype"){return Rt(e+" is an illegal type to be registered, possibly lead to prototype pollutions")}return pe({map:rg,keys:[e,t],value:n})}function ig(e,t){return ge({map:rg,keys:[e,t]})}function og(e,t,r,n,a){return pe({map:ng,keys:[e,t,r,n],value:a})}function sg(e,t,r,n){return ge({map:ng,keys:[e,t,r,n]})}var ug=function e(){if(arguments.length===2){return ig.apply(null,arguments)}else if(arguments.length===3){return ag.apply(null,arguments)}else if(arguments.length===4){return sg.apply(null,arguments)}else if(arguments.length===5){return og.apply(null,arguments)}else{Rt("Invalid extension access syntax")}};_c.prototype.extension=ug;tg.forEach(function(e){e.extensions.forEach(function(t){ag(e.type,t.name,t.impl)})});var lg=function e(){if(!(this instanceof lg)){return new lg}this.length=0};var fg=lg.prototype;fg.instanceString=function(){return"stylesheet"};fg.selector=function(e){var t=this.length++;this[t]={selector:e,properties:[]};return this};fg.css=function(e,t){var r=this.length-1;if(D(e)){this[r].properties.push({name:e,value:t})}else if(M(e)){var n=e;var a=Object.keys(n);for(var i=0;i<a.length;i++){var o=a[i];var s=n[o];if(s==null){continue}var u=mc.properties[o]||mc.properties[K(o)];if(u==null){continue}var l=u.name;var f=s;this[r].properties.push({name:l,value:f})}}return this};fg.style=fg.css;fg.generateStyle=function(e){var t=new mc(e);return this.appendToStyle(t)};fg.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t];var n=r.selector;var a=r.properties;e.selector(n);for(var i=0;i<a.length;i++){var o=a[i];e.css(o.name,o.value)}}return e};var cg="3.32.2";var vg=function e(t){if(t===undefined){t={}}if(M(t)){return new _c(t)}else if(D(t)){return ug.apply(ug,arguments)}};vg.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(vg);e.apply(null,t);return this};vg.warnings=function(e){return Nt(e)};vg.version=cg;vg.stylesheet=vg.Stylesheet=lg;e.exports=vg},(e,t,r)=>{r(1049)(r(1115))},e=>{e.exports='!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cytoscapeContextMenus=t():e.cytoscapeContextMenus=t()}(this,(function(){return(()=>{var e={621:(e,t,n)=>{"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){var n={};for(var i in e)n[i]=e[i];for(var o in t)n[o]instanceof Array?n[o]=n[o].concat(t[o]):n[o]=t[o];return n}function r(e){for(var t="",n=0;n<e.length;n++)t+=e[n],n!==e.length-1&&(t+=" ");return t}function u(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function s(e,t,n){void 0===customElements.get(e)&&customElements.define(e,t,{extends:n})}n.r(t),n.d(t,{contextMenus:()=>_});var a="cy-context-menus-divider",c={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,r=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function p(e){var t=I();return function(){var n,i=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function x(e){var t="function"==typeof Map?new Map:void 0;return(x=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return C(e,arguments,k(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),M(i,e)})(e)}function C(e,t,n){return(C=I()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&M(o,n.prototype),o}).apply(null,arguments)}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){e.preventDefault(),e.stopPropagation()}var S=function(e){y(n,e);var t=p(n);function n(e,i,o){var r,s,a,c,l,f,d,m,v,y;h(this,n),w((s=g(y=t.call(this)),k(n.prototype)),"setAttribute",s).call(s,"id",e.id);var p=y._getMenuItemClassStr(o.cxtMenuItemClasses,e.hasTrailingDivider);if(w((a=g(y),k(n.prototype)),"setAttribute",a).call(a,"class",p),w((c=g(y),k(n.prototype)),"setAttribute",c).call(c,"title",null!==(r=e.tooltipText)&&void 0!==r?r:""),e.disabled&&u(g(y),"disabled",!0),e.image){var b=document.createElement("img");b.src=e.image.src,b.width=e.image.width,b.height=e.image.height,b.style.position="absolute",b.style.top=e.image.y+"px",b.style.left=e.image.x+"px",w((l=g(y),k(n.prototype)),"appendChild",l).call(l,b)}if(y.innerHTML+=e.content,y.onMenuItemClick=i,y.data={},y.clickFns=[],y.selector=e.selector,y.hasTrailingDivider=e.hasTrailingDivider,y.show=void 0===e.show||e.show,y.coreAsWell=e.coreAsWell||!1,y.scratchpad=o,void 0===e.onClickFunction&&void 0===e.submenu)throw new Error("A menu item must either have click function or a submenu or both");return y.onClickFunction=e.onClickFunction,e.submenu instanceof Array&&y._createSubmenu(e.submenu),w((f=g(y),k(n.prototype)),"addEventListener",f).call(f,"mousedown",E),w((d=g(y),k(n.prototype)),"addEventListener",d).call(d,"mouseup",E),w((m=g(y),k(n.prototype)),"addEventListener",m).call(m,"touchstart",E),w((v=g(y),k(n.prototype)),"addEventListener",v).call(v,"touchend",E),y}return v(n,[{key:"bindOnClickFunction",value:function(e){this.clickFns.push(e),w(k(n.prototype),"addEventListener",this).call(this,"click",e)}},{key:"unbindOnClickFunctions",value:function(){var e,t=f(this.clickFns);try{for(t.s();!(e=t.n()).done;){var i=e.value;w(k(n.prototype),"removeEventListener",this).call(this,"click",i)}}catch(e){t.e(e)}finally{t.f()}this.clickFns=[]}},{key:"enable",value:function(){u(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){u(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(e){this.hasTrailingDivider=e}},{key:"hasSubmenu",value:function(){return this.submenu instanceof T}},{key:"appendSubmenuItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(e,t)}},{key:"isClickable",value:function(){return void 0!==this.onClickFunction}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return!0===this.show&&"none"!==this.style.display}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(e){var t=this.getBoundingClientRect(),i=function(e){e.style.opacity="0",e.style.display="block";var t=e.getBoundingClientRect();return e.style.opacity="1",e.style.display="none",t}(this.submenu),o=t.right+i.width>window.innerWidth,r=t.top+i.height>window.innerHeight;o||r?o&&!r?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):o&&r?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var u=Array.from(this.submenu.children).filter((function(e){if(e instanceof n)return e.isVisible()})),s=u.length;u.forEach((function(e,t){e instanceof n&&(t<s-1&&e.getHasTrailingDivider()?e.classList.add(a):e.getHasTrailingDivider()&&e.classList.remove(a))}))}},{key:"_onMouseLeave",value:function(e){var t,n,i,o,r;t={x:e.clientX,y:e.clientY},n=this.submenu,o=t.y,(i=t.x)>=(r=n.getBoundingClientRect()).left&&i<=r.right&&o>=r.top&&o<=r.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new T(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var t,i=f(e);try{for(i.s();!(t=i.n()).done;){var o=t.value,r=new n(o,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(r)}}catch(e){i.e(e)}finally{i.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(e,t){return t?e+" "+a:e}}],[{key:"define",value:function(){s("ctx-menu-item",n,"button")}}]),n}(x(HTMLButtonElement)),T=function(e){y(n,e);var t=p(n);function n(e,i){var o,r;return h(this,n),w((o=g(r=t.call(this)),k(n.prototype)),"setAttribute",o).call(o,"class",i.cxtMenuClasses),r.style.position="absolute",r.onMenuItemClick=e,r.scratchpad=i,r}return v(n,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return"none"!==this.style.display}},{key:"hideMenuItems",value:function(){var e,t=f(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n instanceof HTMLElement?n.style.display="none":console.warn("".concat(n," is not a HTMLElement"))}}catch(e){t.e(e)}finally{t.f()}}},{key:"hideSubmenus",value:function(){var e,t=f(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n instanceof S&&n.submenu&&n.submenu.hide()}}catch(e){t.e(e)}finally{t.f()}}},{key:"appendMenuItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==t){if(t.parentNode!==this)throw new Error("The item with id=\'".concat(t.id,"\' is not a child of the context menu"));this.insertBefore(e,t)}else this.appendChild(e);e.isClickable()&&this._performBindings(e)}},{key:"moveBefore",value:function(e,t){if(e.parentNode!==this)throw new Error("The item with id=\'".concat(e.id,"\' is not a child of context menu"));if(t.parentNode!==this)throw new Error("The item with id=\'".concat(t.id,"\' is not a child of context menu"));this.removeChild(e),this.insertBefore(e,t)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var e=this.lastChild;e instanceof S?this._removeImmediateMenuItem(e):(console.warn("Found non menu item in the context menu: ",e),this.removeChild(e))}}},{key:"_removeImmediateMenuItem",value:function(e){if(!this._detachImmediateMenuItem(e))throw new Error("menu item(id=".concat(e.id,") is not in the context menu"));e.detachSubmenu(),e.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(e){if(e.parentNode===this){if(this.removeChild(e),this.children.length<=0){var t=this.parentNode;t instanceof S&&t.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(e){var t=this._bindOnClick(e.onClickFunction);e.bindOnClickFunction(t),e.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(e){var t=this;return function(){var n=t.scratchpad.currentCyEvent;e(n)}}}],[{key:"define",value:function(){s("menu-item-list",n,"div")}}]),n}(x(HTMLDivElement)),A=function(e){y(n,e);var t=p(n);function n(e,i){var o;return h(this,n),(o=t.call(this,e,i)).onMenuItemClick=function(t){E(t),o.hide(),e()},o}return v(n,[{key:"removeMenuItem",value:function(e){var t=e.parentElement;t instanceof T&&this.contains(t)&&t._removeImmediateMenuItem(e)}},{key:"appendMenuItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.ensureDoesntContain(e.id),w(k(n.prototype),"appendMenuItem",this).call(this,e,t)}},{key:"insertMenuItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.before,i=t.parent;if(this.ensureDoesntContain(e.id),void 0!==n){if(!this.contains(n))throw new Error("before(id=".concat(n.id,") is not in the context menu"));var o=n.parentNode;if(!(o instanceof T))throw new Error("Parent of before(id=".concat(n.id,") is not a submenu"));o.appendMenuItem(e,n)}else if(void 0!==i){if(!this.contains(i))throw new Error("parent(id=".concat(i.id,") is not a descendant of the context menu"));i.appendSubmenuItem(e)}else this.appendMenuItem(e)}},{key:"moveBefore",value:function(e,t){var n=e.parentElement;if(!this.contains(n))throw new Error("parent(id=".concat(n.id,") is not in the contex menu"));if(!this.contains(t))throw new Error("before(id=".concat(t.id,") is not in the context menu"));n.removeChild(e),this.insertMenuItem(e,{before:t})}},{key:"moveToSubmenu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.parentElement;if(!(i instanceof T))throw new Error("current parent(id=".concat(i.id,") is not a submenu"));if(!this.contains(i))throw new Error("parent of the menu item(id=".concat(i.id,") is not in the context menu"));if(null!==t){if(!this.contains(t))throw new Error("parent(id=".concat(t.id,") is not in the context menu"));i._detachImmediateMenuItem(e),t.appendSubmenuItem(e)}else null!==n&&(e.selector=n.selector,e.coreAsWell=n.coreAsWell),i._detachImmediateMenuItem(e),this.appendMenuItem(e)}},{key:"ensureDoesntContain",value:function(e){var t=document.getElementById(e);if(void 0!==t&&this.contains(t))throw new Error("There is already an element with id=".concat(e," in the context menu"))}},{key:"ensureContains",value:function(e){var t=document.getElementById(e);if(null==t||null==t||!this.contains(t))throw new Error("An element with id \'".concat(e,"\' does not exist!"))}}],[{key:"define",value:function(){s("ctx-menu",n,"div")}}]),n}(T);function O(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,r=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw r}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(e){var t=this;t.scratch("cycontextmenus")||t.scratch("cycontextmenus",{});var n,u,s=function(e){return t.scratch("cycontextmenus")[e]},l=function(e,n){return t.scratch("cycontextmenus")[e]=n},f=s("options"),d=s("cxtMenu"),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=v(e);if(void 0!==t){var i=p(t);d.insertMenuItem(n,{parent:i})}else d.insertMenuItem(n)},m=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=0;n<e.length;n++)h(e[n],t)},v=function(e){var n=t.scratch("cycontextmenus");return new S(e,d.onMenuItemClick,n)},y=function(){s("active")&&(d.removeAllMenuItems(),t.off("tapstart",s("eventCyTapStart")),t.off(f.evtType,s("onCxttap")),t.off("viewport",s("onViewport")),document.removeEventListener("mouseup",s("hideOnNonCyClick")),d.parentNode.removeChild(d),d=void 0,l("cxtMenu",void 0),l("active",!1),l("anyVisibleChild",!1),l("onCxttap",void 0),l("onViewport",void 0),l("hideOnNonCyClick",void 0))},p=function(e){var t=document.getElementById(e);if(t instanceof S)return t;throw new Error("The item with id=".concat(e," is not a menu item"))},b=function(){var e,t=!1,n=O(d.children);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i instanceof S&&i.show&&"none"!=i.style.display){t=!0;break}}}catch(e){n.e(e)}finally{n.f()}t?d.display():d.hide()};if("get"!==e){S.define(),T.define(),A.define(),f=o(c,e),l("options",f),s("active")&&y(),l("active",!0),l("submenuIndicatorGen",function(e){var t=document.createElement("img");return t.src=e.src,t.width=e.width,t.height=e.height,t.classList.add("cy-context-menus-submenu-indicator"),t}.bind(void 0,f.submenuIndicator));var g=r(f.contextMenuClasses);l("cxtMenuClasses",g);var w=t.scratch("cycontextmenus");d=new A((function(){return l("cxtMenuPosition",void 0)}),w),l("cxtMenu",d),t.container().appendChild(d),l("cxtMenuItemClasses",r(f.menuItemClasses));var x=f.menuItems;m(x),u=function(e){l("currentCyEvent",e),function(e){var n,i=t.container(),o=s("cxtMenuPosition"),r=e.position||e.cyPosition;if(o!=r){d.hideMenuItems(),l("anyVisibleChild",!1),l("cxtMenuPosition",r);var u={top:(n=i.getBoundingClientRect()).top,left:n.left},a=e.renderedPosition||e.cyRenderedPosition,c=getComputedStyle(i)["border-width"],f=parseInt(c.replace("px",""))||0;f>0&&(u.top+=f,u.left+=f);var h=i.clientHeight,m=i.clientWidth,v=h/2,y=m/2;a.y>v&&a.x<=y?(d.style.left=a.x+"px",d.style.bottom=h-a.y+"px",d.style.right="auto",d.style.top="auto"):a.y>v&&a.x>y?(d.style.right=m-a.x+"px",d.style.bottom=h-a.y+"px",d.style.left="auto",d.style.top="auto"):a.y<=v&&a.x<=y?(d.style.left=a.x+"px",d.style.top=a.y+"px",d.style.right="auto",d.style.bottom="auto"):(d.style.right=m-a.x+"px",d.style.top=a.y+"px",d.style.left="auto",d.style.bottom="auto")}}(e);var n,i=e.target||e.cyTarget,o=O(d.children);try{for(o.s();!(n=o.n()).done;){var r=n.value;r instanceof S&&(i===t?r.coreAsWell:i.is(r.selector))&&r.show&&(d.display(),l("anyVisibleChild",!0),r.display())}}catch(e){o.e(e)}finally{o.f()}var u=Array.from(d.children).filter((function(e){if(e instanceof S)return e.isVisible()})),c=u.length;u.forEach((function(e,t){e instanceof S&&(t<c-1&&e.getHasTrailingDivider()?e.classList.add(a):e.getHasTrailingDivider()&&e.classList.remove(a))})),!s("anyVisibleChild")&&!function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||e.style&&e.style.display||getComputedStyle(e).display}(d)&&d.hide()},t.on(f.evtType,u),l("onCxttap",u),function(){var e=function(e){if(d.contains(e.originalEvent.target))return!1;d.hide(),l("cxtMenuPosition",void 0),l("currentCyEvent",void 0)};t.on("tapstart",e),l("eventCyTapStart",e);var n=function(){d.hide()};t.on("viewport",n),l("onViewport",n)}(),n=function(e){t.container().contains(e.target)||d.contains(e.target)||(d.hide(),l("cxtMenuPosition",void 0))},document.addEventListener("mouseup",n),l("hideOnNonCyClick",n),function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,u=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw u}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}catch(e){t.e(e)}finally{t.f()}}()}return function(e){return{isActive:function(){return s("active")},appendMenuItem:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return h(t,n),e},appendMenuItems:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return m(t,n),e},removeMenuItem:function(t){var n=p(t);return d.removeMenuItem(n),e},setTrailingDivider:function(t,n){var i=p(t);return i.setHasTrailingDivider(n),n?i.classList.add(a):i.classList.remove(a),e},insertBeforeMenuItem:function(t,n){var i=v(t),o=p(n);return d.insertMenuItem(i,{before:o}),e},moveToSubmenu:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=p(t);if(null===n)d.moveToSubmenu(i);else if("string"==typeof n){var o=p(n.toString());d.moveToSubmenu(i,o)}else void 0!==n.coreAsWell||void 0!==n.selector?d.moveToSubmenu(i,null,n):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return e},moveBeforeOtherMenuItem:function(t,n){var i=p(t),o=p(n);return d.moveBefore(i,o),e},disableMenuItem:function(t){return p(t).disable(),e},enableMenuItem:function(t){return p(t).enable(),e},hideMenuItem:function(t){return p(t).hide(),b(),e},showMenuItem:function(t){return p(t).display(),b(),e},destroy:function(){return y(),e},getOptions:function(){return o(c,f)},swapItems:function(e,t){d.ensureContains(e),d.ensureContains(t);var n=document.getElementById(e),i=document.getElementById(t),o=n.nextSibling,r=i.nextSibling,u=n.parentNode,s=i.parentNode;if(!u.isSameNode(s))throw new Error("To swap, the items should have the same parent!");o&&o.isSameNode(i)?u.insertBefore(i,n):r&&r.isSameNode(n)?u.insertBefore(n,i):(u.insertBefore(i,n),u.insertBefore(n,r))}}}(this)}},579:(e,t,n)=>{var i=n(621).contextMenus,o=function(e){e&&e("core","contextMenus",i)};"undefined"!=typeof cytoscape&&o(cytoscape),e.exports=o}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(579)})()}));'},(e,t,r)=>{"use strict";r.r(t)},(e,t,r)=>{var n;(function(){"use strict";var a=function(e){if(!e){return}r(1118);var t=false;var n={snapToGridOnRelease:true,snapToGridDuringDrag:false,snapToAlignmentLocationOnRelease:false,snapToAlignmentLocationDuringDrag:false,distributionGuidelines:false,geometricGuideline:false,initPosAlignment:false,centerToEdgeAlignment:false,resize:false,parentPadding:false,drawGrid:true,gridSpacing:20,snapToGridCenter:true,zoomDash:true,panGrid:false,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};var a=r(1119);var i=r(1120);var o=r(1121);var s=r(1122);var u=r(1123);var l=r(1124);var f=r(1126);var c=r(1127);var v=r(1128);function d(e){if(!e.scratch("_gridGuide")){e.scratch("_gridGuide",{})}return e.scratch("_gridGuide")}e("core","gridGuide",function(r){var h=this;var p=d(h);var g=Object.extend({},p.options||n,r);p.options=g;if(!p.initialized){var y,m,b,x,w,E,k,_;y=a(h,g.gridSpacing,g.snapToGridCenter);m=s(g.gridSpacing);b=i(h,y);x=o(g,h,v);E=l(g,h,v);k=f(g,h);w=u(h,y,m,b,x,E,k,g);_=c(e,h,t);t=true;w.init(g);p.initialized=true;p.eventsController=w}else{var w=p.eventsController;w.syncWithOptions(g)}return this})};if(true&&e.exports){e.exports=a}if(true){!(n=function(){return a}.call(t,r,t,e),n!==undefined&&(e.exports=n))}if(typeof cytoscape!=="undefined"){a(cytoscape)}})()},()=>{Object.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(!r)continue;for(var n in r){if(r.hasOwnProperty(n)){if(Array.isArray(r[n])){e[n]=r[n].slice()}else if(typeof r[n]==="object"){e[n]=Object.extend(e[n],r[n])}else{e[n]=r[n]}}}}return e}},e=>{e.exports=function(e,t,r){var n={};n.changeOptions=function(e){t=e.gridSpacing;r=e.snapToGridCenter?.5:0};var a=function(e){if(!e.scratch("_gridGuide"))e.scratch("_gridGuide",{});return e.scratch("_gridGuide")};n.snapPos=function(e){var n=r?Math.floor(e.x/t):Math.round(e.x/t);var a=r?Math.floor(e.y/t):Math.round(e.y/t);var i={x:(n+r)*t,y:(a+r)*t};return i};n.snapNode=function(e){var t=e.position();var r=n.snapPos(t);e.position(r)};n.snapNodesTopDown=function(t){e.startBatch();t.union(t.descendants()).filter(":childless").positions(function(e,t){if(typeof e==="number"){e=t}var r=e.position();return n.snapPos(r)});e.endBatch()};n.onFreeNode=function(e){var t;var r=e.target||e.cyTarget;if(r.selected())t=e.cy.$(":selected");else t=r;n.snapNodesTopDown(t)};n.recoverSnapNode=function(e){var t=a(e).snap;if(t){e.position(t.oldPos)}};return n}},e=>{e.exports=function(e,t){var r={};var n;var a;var i;var o;r.onTapStartNode=function(t){if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey){return}var r=t.target||t.cyTarget;if(r.selected())a=t.cy.$(":selected");else a=r;i=t.position||t.cyPosition;if(r.grabbable()&&!r.locked()){n=r;n.lock();e.on("tapdrag",l);e.on("tapend",s)}};var s=function(t){e.off("tapdrag",l);e.off("tapend",s);n.unlock();t.preventDefault()};var u=function(){return{x:o.x-i.x,y:o.y-i.y}};var l=function(e){var r=n.position();o=e.position||e.cyPosition;o=t.snapPos(o);var s=u();if(s.x!=0||s.y!=0){n.unlock();var l=a.union(a.descendants());l.filter(":childless").positions(function(e,r){if(typeof e==="number"){e=r}var n=e.position();return t.snapPos({x:n.x+s.x,y:n.y+s.y})});i=o;n.lock();n.trigger("drag")}};return r}},e=>{e.exports=function(e,t,r){var n=e;var a=function(e){n=e};var i=function(e){var t=e.getBoundingClientRect();return{top:t.top+document.documentElement.scrollTop,left:t.left+document.documentElement.scrollLeft}};var o=document.createElement("canvas");var s=t.container();var u=o.getContext("2d");s.appendChild(o);var l=function(){o.height=0;o.width=0;o.style.position="absolute";o.style.top=0;o.style.left=0;o.style.zIndex=n.gridStackOrder};l();var f=function(){var e=t.zoom();var r=t.width();var a=t.height();var i=n.gridSpacing*e;var o=t.pan();var s=o.x%i;var l=o.y%i;u.strokeStyle=n.gridColor;u.lineWidth=n.lineWidth;var f='\t<svg width="'+r+'" height="'+a+'" xmlns="http://www.w3.org/2000/svg">\n            <defs>\n                <pattern id="horizontalLines" width="'+i+'" height="'+i+'" patternUnits="userSpaceOnUse">\n                    <path d="M '+i+" 0 L 0 0 0 "+0+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+'" />\n                </pattern>\n                <pattern id="verticalLines" width="'+i+'" height="'+i+'" patternUnits="userSpaceOnUse">\n                    <path d="M '+0+" 0 L 0 0 0 "+i+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+'" />\n                </pattern>\n            </defs>\n            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate('+0+", "+l+')" />\n            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate('+s+", "+0+')" />\n        </svg>\n';var v=new Image;f=encodeURIComponent(f);v.onload=function(){c();u.drawImage(v,0,0)};v.src="data:image/svg+xml,"+f};var c=function(){var e=t.width();var r=t.height();u.clearRect(0,0,e,r)};var v=r(function(){o.height=t.height();o.width=t.width();o.style.position="absolute";o.style.top=0;o.style.left=0;o.style.zIndex=n.gridStackOrder;setTimeout(function(){o.height=t.height();o.width=t.width();var e=i(o);var r=i(s);o.style.top=-(e.top-r.top);o.style.left=-(e.left-r.left);f()},0)},250);return{initCanvas:v,resizeCanvas:v,resetCanvas:l,clearCanvas:c,drawGrid:f,changeOptions:a,sizeCanvas:f}}},e=>{e.exports=function(e){var t=function(t){e=Number(t.gridSpacing)};var r=function(e){if(!e.scratch("_gridGuide"))e.scratch("_gridGuide",{});return e.scratch("_gridGuide")};function n(t){var n=t.width();var a=t.height();var i=Math.round((n-e)/(e*2))*(e*2);var o=Math.round((a-e)/(e*2))*(e*2);i=i>0?i+e:e;o=o>0?o+e:e;if(n!=i||a!=o){t.style({width:i,height:o});r(t).resize={oldWidth:n,oldHeight:a}}}function a(e){var t=r(e).resize;if(t)e.style({width:t.oldWidth,height:t.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:t}}},e=>{e.exports=function(e,t,r,n,a,i,o,s){var u=function(e){return function(t){e(t)}};var l={snapToGridDuringDrag:new u(h),resize:new u(m),snapToGridOnRelease:new u(E),drawGrid:new u(T),guidelines:new u(I),parentPadding:new u(N)};function f(e,t){return function(r){var n=r.target||r.cyTarget;if(!n.is(":parent")||t)e(n)}}function c(t){return function(){e.nodes().not(":parent").each(function(e,r){if(typeof e==="number"){e=r}t(e)})}}function v(t){return function(){e.nodes().each(function(e,r){if(typeof e==="number"){e=r}t(e)})}}function d(e){return e?"on":"off"}function h(t){e[d(t)]("tapstart","node",n.onTapStartNode)}var p=c(r.resizeNode);var g=f(r.resizeNode);var y=c(r.recoverNodeDimensions);function m(t){e[d(t)]("ready",p);t?p():y()}var b=v(t.snapNodesTopDown);var x=v(t.recoverSnapNode);var w=f(t.snapNode,true);function E(r){e[d(r)]("add","node",w);e[d(r)]("ready",b);e[d(r)]("free","node",t.onFreeNode);if(r){b()}else{x()}}var k=function(){if(z.zoomDash)a.drawGrid()};var _=function(){if(z.panGrid)a.drawGrid()};function T(t){e[d(t)]("zoom",k);e[d(t)]("pan",_);if(t){a.initCanvas();e.on("resize",a.resizeCanvas)}else{a.clearCanvas();a.resetCanvas();e.off("resize",a.resizeCanvas)}}var C=null;var S=function(e){var t=e.target||e.cyTarget;var r=t.selected()?e.cy.$(":selected"):t;C=i.getTopMostNodes(r.nodes());i.lines.init(C)};var D=function(e){if(this.id()==C.id()){i.lines.update(C);if(z.snapToAlignmentLocationDuringDrag)i.lines.snapToAlignmentLocation(C)}};var P=function(e){if(z.snapToAlignmentLocationOnRelease)i.lines.snapToAlignmentLocation(C);i.lines.destroy();C=null};var A=function(e){i.lines.resize()};var M=function(e){i.getMousePos(e)};var B=function(t){if(C){i.setMousePos(e.pan());i.lines.init(C)}};function I(t){if(t){i.resizeCanvas();e.on("tapstart","node",M);e.on("grab",S);e.on("pan",B);e.on("drag","node",D);e.on("free",P);window.addEventListener("resize",A)}else{e.off("tapstart","node",M);e.off("grab",S);e.off("pan",B);e.off("drag","node",D);e.off("free",P);i.resetCanvas();window.removeEventListener("resize",A)}}var O=function(t){o.setPaddingOfParent(e.nodes(":parent"),t)};var R=function(e){o.setPaddingOfParent(e,true)};function N(t){O(t);e[d(t)]("ready",O);e[d(t)]("add","node:parent",f(R,true))}var L={};var z;var j={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function V(e){z=Object.extend({},e);e.guidelines=e.initPosAlignment||e.distributionGuidelines||e.geometricGuideline;for(var n in e)if(L[n]!=e[n])if(l.hasOwnProperty(n)){l[n](e[n])}else{for(var s in j){var u=j[s];if(u.indexOf(n)>=0){if(s=="drawGrid"){a.changeOptions(e);if(e.drawGrid)a.resizeCanvas()}if(s=="snapToGridOnRelease"){t.changeOptions(e);if(e.snapToGridOnRelease)b()}if(s=="guidelines")i.changeOptions(e);if(s=="resize"){r.changeOptions(e);if(e.resize)p()}if(s=="parentPadding")o.changeOptions(e)}}}L=Object.extend({},L,e)}return{init:V,syncWithOptions:V}}},(e,t,r)=>{e.exports=function(e,t,n){var a=r(1125);var i=e;var o=function(e){i=e;if(i.guidelinesTolerance==0)i.guidelinesTolerance=.001};var s=function(e){var t=e.getBoundingClientRect();return{top:t.top+document.documentElement.scrollTop,left:t.left+document.documentElement.scrollLeft}};var u=function(){var e=t.scratch("_guidelines");if(!e)e=t.scratch("_guidelines",{});return e};var l=n(function(){f();c.height=t.height();c.width=t.width();c.style.position="absolute";c.style.top=0;c.style.left=0;c.style.zIndex=i.guidelinesStackOrder;setTimeout(function(){c.height=t.height();c.width=t.width();var e=s(c);var r=s(v);c.style.top=-(e.top-r.top);c.style.left=-(e.left-r.left)},0)},250);var f=function(){var e=t.width();var r=t.height();d.clearRect(0,0,e,r)};var c=document.createElement("canvas");var v=t.container();var d=c.getContext("2d");v.appendChild(c);var h=function(){c.height=0;c.width=0;c.style.position="absolute";c.style.top=0;c.style.left=0;c.style.zIndex=i.guidelinesStackOrder};h();var p=null;var g=null;var y;var m;var b={};var x={};var w={h:null,v:null};b.getDims=function(e){var t=e.renderedPosition();var r=e.renderedWidth();var n=e.renderedHeight();var a={left:Number(e.renderedStyle("padding-left").replace("px","")),right:Number(e.renderedStyle("padding-right").replace("px","")),top:Number(e.renderedStyle("padding-top").replace("px","")),bottom:Number(e.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:t.x,left:Math.round(t.x-(a.left+r/2)),right:Math.round(t.x+(a.right+r/2))},vertical:{center:t.y,top:Math.round(t.y-(a.top+n/2)),bottom:Math.round(t.y+(a.bottom+n/2))}}};b.init=function(e){p=a();g=a();if(!y){x.x=t.pan("x");x.y=t.pan("y");y=e.renderedPosition()}var r=t.nodes(":visible");m=e.union(e.ancestors());m=m.union(e.descendants());r.not(m).each(function(e,t){if(typeof e==="number"){e=t}var r=b.getDims(e);["left","center","right"].forEach(function(t){var n=r.horizontal[t];if(g.get(n))g.get(n).push(e);else g=g.insert(n,[e])});["top","center","bottom"].forEach(function(t){var n=r.vertical[t];if(p.get(n))p.get(n).push(e);else p=p.insert(n,[e])})});d.lineWidth=i.lineWidth;b.update(e)};b.destroy=function(){b.clear();p=null;g=null;y=null;_={};w={h:null,v:null};if(I){I.unlock();I=undefined}};b.clear=f;b.drawLine=function(e,t,r,n){d.setLineDash(n);d.beginPath();d.moveTo(e.x,e.y);d.lineTo(t.x,t.y);d.strokeStyle=r;d.stroke()};b.drawArrow=function(e,t){if(t=="right"){d.setLineDash([]);d.beginPath();d.moveTo(e.x-5,e.y-5);d.lineTo(e.x,e.y);d.lineTo(e.x-5,e.y+5);d.stroke()}else if(t=="left"){d.setLineDash([]);d.beginPath();d.moveTo(e.x+5,e.y-5);d.lineTo(e.x,e.y);d.lineTo(e.x+5,e.y+5);d.stroke()}else if(t=="top"){d.setLineDash([]);d.beginPath();d.moveTo(e.x-5,e.y+5);d.lineTo(e.x,e.y);d.lineTo(e.x+5,e.y+5);d.stroke()}else if(t=="bottom"){d.setLineDash([]);d.beginPath();d.moveTo(e.x-5,e.y-5);d.lineTo(e.x,e.y);d.lineTo(e.x+5,e.y-5);d.stroke()}};b.drawCross=function(e){d.setLineDash([]);d.beginPath();d.moveTo(e.x-5,e.y+5);d.lineTo(e.x+5,e.y-5);d.moveTo(e.x-5,e.y-5);d.lineTo(e.x+5,e.y+5);d.stroke()};var E=function(e,r){var n=e[0],a=b.getDims(n)[r]["center"];var o=e[0],s=b.getDims(o)[r]["center"];for(var u=0;u<e.length;u++){var l=e[u];if(b.getDims(l)[r]["center"]<a){a=b.getDims(l)[r]["center"];n=l}if(b.getDims(l)[r]["center"]>s){s=b.getDims(l)[r]["center"];o=l}}if(r=="horizontal")var f=(a+s)/2<b.getDims(e[1])[r]["center"]?s+(.5*o.width()+i.guidelinesStyle.distGuidelineOffset)*t.zoom():a-(.5*n.width()+i.guidelinesStyle.distGuidelineOffset)*t.zoom();else var f=(a+s)/2<b.getDims(e[1])[r]["center"]?s+(.5*o.height()+i.guidelinesStyle.distGuidelineOffset)*t.zoom():a-(.5*n.height()+i.guidelinesStyle.distGuidelineOffset)*t.zoom();return f};b.horizontalDistribution=function(e){var r=null,n=null;var a=b.getDims(e);var o=a["horizontal"]["center"];var s=a["vertical"]["center"];g.forEach(function(e,u){for(var l=0;l<u.length;l++){var f=u[l];var c=b.getDims(f);if(Math.abs(c["vertical"]["center"]-a["vertical"]["center"])<i.guidelinesStyle.range*t.zoom()){if(c["horizontal"]["right"]==e&&a["horizontal"]["left"]-c["horizontal"]["right"]>i.guidelinesStyle.minDistRange){var v=Math.round(2*o)-e;g.forEach(function(e,a){for(var o=0;o<a.length;o++){var u=a[o];if(Math.abs(b.getDims(u)["vertical"]["center"]-s)<i.guidelinesStyle.range*t.zoom()){if(Math.abs(v-b.getDims(u)["horizontal"]["left"])<2*i.guidelinesTolerance){r=f;n=u}}}},v-i.guidelinesTolerance,v+i.guidelinesTolerance)}}}},o-i.guidelinesStyle.range*t.zoom(),o);if(r){w.hd=o-(b.getDims(n)["horizontal"]["left"]+b.getDims(r)["horizontal"]["right"])/2;if(!i.geometricGuideline||w.h==null||Math.abs(w.h)>Math.abs(w.hd)){w.h=w.hd}var u=E([r,e,n],"vertical");b.drawLine({x:b.getDims(r)["horizontal"]["right"],y:u},{x:a["horizontal"]["left"],y:u},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(n)["horizontal"]["left"],y:u},{x:a["horizontal"]["right"],y:u},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(r)["horizontal"]["right"],y:u},{x:b.getDims(r)["horizontal"]["right"],y:b.getDims(r)["vertical"]["center"]},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(n)["horizontal"]["left"],y:u},{x:b.getDims(n)["horizontal"]["left"],y:b.getDims(n)["vertical"]["center"]},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:a["horizontal"]["left"],y:u},{x:a["horizontal"]["left"],y:s},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:a["horizontal"]["right"],y:u},{x:a["horizontal"]["right"],y:s},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawArrow({x:b.getDims(r)["horizontal"]["right"],y:u},"left");b.drawArrow({x:a["horizontal"]["left"],y:u},"right");b.drawArrow({x:a["horizontal"]["right"],y:u},"left");b.drawArrow({x:b.getDims(n)["horizontal"]["left"],y:u},"right")}else{var l=b.horizontalDistributionNext(e,"left");if(!l)b.horizontalDistributionNext(e,"right")}};b.verticalDistribution=function(e){var r=null,n=null;var a=b.getDims(e);var o=a["horizontal"]["center"];var s=a["vertical"]["center"];p.forEach(function(e,u){for(var l=0;l<u.length;l++){var f=u[l];var c=b.getDims(f);if(Math.abs(c["horizontal"]["center"]-a["horizontal"]["center"])<i.guidelinesStyle.range*t.zoom()){if(c["vertical"]["bottom"]==e&&a["vertical"]["top"]-c["vertical"]["bottom"]>i.guidelinesStyle.minDistRange){var v=Math.round(2*s-e);p.forEach(function(e,a){for(var s=0;s<a.length;s++){var u=a[s];if(Math.abs(b.getDims(u)["horizontal"]["center"]-o)<i.guidelinesStyle.range*t.zoom()){if(Math.abs(v-b.getDims(u)["vertical"]["top"])<2*i.guidelinesTolerance){r=f;n=u}}}},v-i.guidelinesTolerance,v+i.guidelinesTolerance)}}}},s-i.guidelinesStyle.range*t.zoom(),s);if(r){w.vd=s-(b.getDims(r)["vertical"]["bottom"]+b.getDims(n)["vertical"]["top"])/2;if(!i.geometricGuideline||w.v==null||Math.abs(w.v)>Math.abs(w.vd)){w.v=w.vd}var u=E([r,e,n],"horizontal");b.drawLine({y:b.getDims(r)["vertical"]["bottom"],x:u},{y:a["vertical"]["top"],x:u},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({y:b.getDims(n)["vertical"]["top"],x:u},{y:a["vertical"]["bottom"],x:u},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({y:b.getDims(r)["vertical"]["bottom"],x:u},{y:b.getDims(r)["vertical"]["bottom"],x:b.getDims(r)["horizontal"]["center"]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({y:b.getDims(n)["vertical"]["top"],x:u},{y:b.getDims(n)["vertical"]["top"],x:b.getDims(n)["horizontal"]["center"]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({y:a["vertical"]["bottom"],x:u},{y:a["vertical"]["bottom"],x:o},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({y:a["vertical"]["top"],x:u},{y:a["vertical"]["top"],x:o},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawArrow({x:u,y:b.getDims(r)["vertical"]["bottom"]},"top");b.drawArrow({x:u,y:a["vertical"]["top"]},"bottom");b.drawArrow({x:u,y:b.getDims(n)["vertical"]["top"]},"bottom");b.drawArrow({x:u,y:a["vertical"]["bottom"]},"top")}else{var l=b.verticalDistributionNext(e,"below");if(!l)b.verticalDistributionNext(e,"above")}};b.searchForLine=function(e,r){var n,a,o,s,u,l,f;var c=b.getDims(r)[e];var v=Number.MAX_SAFE_INTEGER;if(e=="horizontal"){l=g;s="y";u="x";w.h=null}else{l=p;s="x";u="y";w.v=null}o=r.renderedPosition(s);for(var d in c){n=c[d];l.forEach(function(e,r){for(var n=0;n<r.length;n++){var l=r[n];if(i.centerToEdgeAlignment||d!="center"&&l.renderedPosition(u)!=e||d=="center"&&l.renderedPosition(u)==e){var c=Math.abs(o-l.renderedPosition(s));if(c<v&&c<i.guidelinesStyle.geometricGuidelineRange*t.zoom()){a=l;v=c;f=e}}}},n-Number(i.guidelinesTolerance),n+Number(i.guidelinesTolerance));if(a){v=b.getDims(r)[e][d];if(e=="horizontal"){w.h=v-f;b.drawLine({x:v,y:r.renderedPosition("y")},{x:v,y:a.renderedPosition("y")},i.guidelinesStyle.strokeStyle,i.guidelinesStyle.lineDash)}else{w.v=v-f;b.drawLine({x:r.renderedPosition("x"),y:v},{x:a.renderedPosition("x"),y:v},i.guidelinesStyle.strokeStyle,i.guidelinesStyle.lineDash)}break}}};b.horizontalDistributionNext=function(e,r){var n=null,a=null;var o=b.getDims(e);var s=o["horizontal"]["center"];var u=o["vertical"]["center"];var l="right",f="left";var c=s;if(r=="left"){l="left";f="right";var c=s-i.guidelinesStyle.range*t.zoom()}var v={left:function(e,t){return t-e>i.guidelinesStyle.minDistRange},right:function(e,t){return e-t>i.guidelinesStyle.minDistRange}};g.forEach(function(e,s){for(var c=0;c<s.length;c++){var d=s[c];var h=b.getDims(d);if(Math.abs(h["vertical"]["center"]-o["vertical"]["center"])<i.guidelinesStyle.range*t.zoom()){if(h["horizontal"][f]==e&&v[r](h["horizontal"][f],o["horizontal"][l])){var p=h["horizontal"][l]-(o["horizontal"][l]-e);g.forEach(function(e,r){for(var o=0;o<r.length;o++){var s=r[o];if(Math.abs(b.getDims(s)["vertical"]["center"]-u)<i.guidelinesStyle.range*t.zoom()){if(Math.abs(p-b.getDims(s)["horizontal"][f])<2*i.guidelinesTolerance){n=d;a=s}}}},p-i.guidelinesTolerance,p+i.guidelinesTolerance)}}}},c,c+i.guidelinesStyle.range*t.zoom());if(n){w.hd=b.getDims(e)["horizontal"][l]-b.getDims(n)["horizontal"][f]-(b.getDims(n)["horizontal"][l]-b.getDims(a)["horizontal"][f]);if(!i.geometricGuideline||w.h==null||Math.abs(w.h)>Math.abs(w.hd)){w.h=w.hd}b.drawDH(e,n,a,r);return true}else if(!i.geometricGuideline){w.h=null}return false};b.drawDH=function(e,t,r,n){var a=b.getDims(e)["vertical"]["center"];var o="right",s="left";if(n=="left"){o="left";s="right"}var u=E([t,e,r],"vertical");b.drawLine({x:b.getDims(t)["horizontal"][s],y:u},{x:b.getDims(e)["horizontal"][o],y:u},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(e)["horizontal"][o],y:u},{x:b.getDims(e)["horizontal"][o],y:a},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(r)["horizontal"][s],y:u},{x:b.getDims(t)["horizontal"][o],y:u},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(r)["horizontal"][s],y:u},{x:b.getDims(r)["horizontal"][s],y:b.getDims(r)["vertical"]["center"]},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(t)["horizontal"][s],y:u},{x:b.getDims(t)["horizontal"][s],y:b.getDims(t)["vertical"]["center"]},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawLine({x:b.getDims(t)["horizontal"][o],y:u},{x:b.getDims(t)["horizontal"][o],y:b.getDims(t)["vertical"]["center"]},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine);b.drawArrow({x:b.getDims(e)["horizontal"][o],y:u},s);b.drawArrow({x:b.getDims(t)["horizontal"][s],y:u},o);b.drawArrow({x:b.getDims(t)["horizontal"][o],y:u},s);b.drawArrow({x:b.getDims(r)["horizontal"][s],y:u},o)};b.verticalDistributionNext=function(e,r){var n=null,a=null;var o=b.getDims(e);var s=o["horizontal"]["center"];var u=o["vertical"]["center"];var l="top",f="bottom";var c=u-i.guidelinesStyle.range*t.zoom();if(r=="above"){l="bottom";f="top";c=u}var v={below:function(e,t){return t-e>i.guidelinesStyle.minDistRange},above:function(e,t){return e-t>i.guidelinesStyle.minDistRange}};p.forEach(function(e,u){for(var c=0;c<u.length;c++){var d=u[c];var h=b.getDims(d);if(Math.abs(h["horizontal"]["center"]-o["horizontal"]["center"])<i.guidelinesStyle.range*t.zoom()){if(h["vertical"][f]==e&&v[r](h["vertical"][f],o["vertical"][l])){var g=h["vertical"][l]-(o["vertical"][l]-e);p.forEach(function(e,r){for(var o=0;o<r.length;o++){var u=r[o];if(Math.abs(b.getDims(u)["horizontal"]["center"]-s)<i.guidelinesStyle.range*t.zoom()){if(Math.abs(g-b.getDims(u)["vertical"][f])<2*i.guidelinesTolerance){n=d;a=u}}}},g-i.guidelinesTolerance,g+i.guidelinesTolerance)}}}},c,c+i.guidelinesStyle.range*t.zoom());if(n){w.vd=b.getDims(e)["vertical"][l]-b.getDims(n)["vertical"][f]-(b.getDims(n)["vertical"][l]-b.getDims(a)["vertical"][f]);if(!i.geometricGuideline||w.v==null||Math.abs(w.v)>Math.abs(w.vd)){w.v=w.vd}b.drawDV(e,n,a,r);return true}else if(!i.geometricGuideline){w.v=null}return false};b.drawDV=function(e,t,r,n){var a=b.getDims(e);var o=a["horizontal"]["center"];var s="top",u="bottom";if(n=="above"){s="bottom";u="top"}var l=E([t,e,r],"horizontal");b.drawLine({x:l,y:a["vertical"][s]},{x:l,y:b.getDims(t)["vertical"][u]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({x:l,y:b.getDims(t)["vertical"][s]},{x:l,y:b.getDims(r)["vertical"][u]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({x:o,y:a["vertical"][s]},{x:l,y:a["vertical"][s]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({x:b.getDims(t)["horizontal"]["center"],y:b.getDims(t)["vertical"][u]},{x:l,y:b.getDims(t)["vertical"][u]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({x:b.getDims(t)["horizontal"]["center"],y:b.getDims(t)["vertical"][s]},{x:l,y:b.getDims(t)["vertical"][s]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawLine({x:l,y:b.getDims(r)["vertical"][u]},{x:b.getDims(r)["horizontal"]["center"],y:b.getDims(r)["vertical"][u]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine);b.drawArrow({x:l,y:a["vertical"][s]},u);b.drawArrow({x:l,y:b.getDims(t)["vertical"][u]},s);b.drawArrow({x:l,y:b.getDims(t)["vertical"][s]},u);b.drawArrow({x:l,y:b.getDims(r)["vertical"][u]},s)};b.update=function(e){b.clear();if(i.initPosAlignment){D(e)}e.each(function(e,t){if(typeof e==="number"){e=t}if(i.geometricGuideline){b.searchForLine("horizontal",e);b.searchForLine("vertical",e)}if(i.distributionGuidelines){b.horizontalDistribution(e);b.verticalDistribution(e)}})};b.resize=function(){l()};function k(e){var t={};for(var r=0;r<e.length;r++){t[e[r].id()]=true}var n=e.filter(function(e,r){if(typeof e==="number"){e=r}var n=e.parent()[0];while(n!=null){if(t[n.id()]){return false}n=n.parent()[0]}return true});return n}var _={};var T={};var C=function(e){_=e.renderedPosition||e.cyRenderedPosition;T.x=_.x;T.y=_.y};var S=function(e){T.x+=e.x-x.x;T.y+=e.y-x.y;x.x=e.x;x.y=e.y};var D=function(e){var t=e.renderedPosition();if(Math.abs(y.y-t.y)<i.guidelinesTolerance){b.drawLine({x:T.x,y:_.y},{x:t.x,y:_.y},i.guidelinesStyle.initPosAlignmentColor,i.guidelinesStyle.initPosAlignmentLine);if(_.y==T.y){b.drawCross(T)}else{b.drawCross(_)}}else if(Math.abs(y.x-t.x)<i.guidelinesTolerance){b.drawLine({x:_.x,y:T.y},{x:_.x,y:t.y},i.guidelinesStyle.initPosAlignmentColor,i.guidelinesStyle.initPosAlignmentLine);if(_.x==T.x){b.drawCross(T)}else{b.drawCross(_)}}};function P(e,t){var r=k(t);var n=r.union(r.descendants());n.filter(":childless").forEach(function(t,r){if(typeof t==="number"){t=r}var n={x:e.x+t.renderedPosition("x"),y:e.y+t.renderedPosition("y")};t.renderedPosition(n)})}var A;t.on("tapstart","node",function(){A=this});var M,B={x:0,y:0};t.on("mousemove",function(e){M=e.renderedPosition||e.cyRenderedPosition;if(I)I.each(function(e,t){if(typeof e==="number"){e=t}if(e.locked()&&(Math.abs(M.x-B.x)>2*i.guidelinesTolerance||Math.abs(M.y-B.y)>2*i.guidelinesTolerance)){e.unlock();var r={};r.x=M.x-A.renderedPosition("x");r.y=M.y-A.renderedPosition("y");P(r,e)}})});var I;b.snapToAlignmentLocation=function(e){I=e;e.each(function(e,t){if(typeof e==="number"){e=t}var r=e.renderedPosition();if(w.h){B=M;r.x-=w.h;e.renderedPosition(r)}if(w.v){B=M;r.y-=w.v;e.renderedPosition(r)}if(w.v||w.h){w.h=null;w.v=null;I.lock()}});b.update(e)};return{changeOptions:o,lines:b,getTopMostNodes:k,getMousePos:C,setMousePos:S,resizeCanvas:l,resetCanvas:h}}},e=>{"use strict";e.exports=y;var t=0;var r=1;function n(e,t,r,n,a,i){this._color=e;this.key=t;this.value=r;this.left=n;this.right=a;this._count=i}function a(e){return new n(e._color,e.key,e.value,e.left,e.right,e._count)}function i(e,t){return new n(e,t.key,t.value,t.left,t.right,t._count)}function o(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function s(e,t){this._compare=e;this.root=t}var u=s.prototype;Object.defineProperty(u,"keys",{get:function(){var e=[];this.forEach(function(t,r){e.push(t)});return e}});Object.defineProperty(u,"values",{get:function(){var e=[];this.forEach(function(t,r){e.push(r)});return e}});Object.defineProperty(u,"length",{get:function(){if(this.root){return this.root._count}return 0}});u.insert=function(e,a){var u=this._compare;var l=this.root;var f=[];var c=[];while(l){var v=u(e,l.key);f.push(l);c.push(v);if(v<=0){l=l.left}else{l=l.right}}f.push(new n(t,e,a,null,null,1));for(var d=f.length-2;d>=0;--d){var l=f[d];if(c[d]<=0){f[d]=new n(l._color,l.key,l.value,f[d+1],l.right,l._count+1)}else{f[d]=new n(l._color,l.key,l.value,l.left,f[d+1],l._count+1)}}for(var d=f.length-1;d>1;--d){var h=f[d-1];var l=f[d];if(h._color===r||l._color===r){break}var p=f[d-2];if(p.left===h){if(h.left===l){var g=p.right;if(g&&g._color===t){h._color=r;p.right=i(r,g);p._color=t;d-=1}else{p._color=t;p.left=h.right;h._color=r;h.right=p;f[d-2]=h;f[d-1]=l;o(p);o(h);if(d>=3){var y=f[d-3];if(y.left===p){y.left=h}else{y.right=h}}break}}else{var g=p.right;if(g&&g._color===t){h._color=r;p.right=i(r,g);p._color=t;d-=1}else{h.right=l.left;p._color=t;p.left=l.right;l._color=r;l.left=h;l.right=p;f[d-2]=l;f[d-1]=h;o(p);o(h);o(l);if(d>=3){var y=f[d-3];if(y.left===p){y.left=l}else{y.right=l}}break}}}else{if(h.right===l){var g=p.left;if(g&&g._color===t){h._color=r;p.left=i(r,g);p._color=t;d-=1}else{p._color=t;p.right=h.left;h._color=r;h.left=p;f[d-2]=h;f[d-1]=l;o(p);o(h);if(d>=3){var y=f[d-3];if(y.right===p){y.right=h}else{y.left=h}}break}}else{var g=p.left;if(g&&g._color===t){h._color=r;p.left=i(r,g);p._color=t;d-=1}else{h.left=l.right;p._color=t;p.right=l.left;l._color=r;l.right=h;l.left=p;f[d-2]=l;f[d-1]=h;o(p);o(h);o(l);if(d>=3){var y=f[d-3];if(y.right===p){y.right=l}else{y.left=l}}break}}}}f[0]._color=r;return new s(u,f[0])};function l(e,t){if(t.left){var r=l(e,t.left);if(r){return r}}var r=e(t.key,t.value);if(r){return r}if(t.right){return l(e,t.right)}}function f(e,t,r,n){var a=t(e,n.key);if(a<=0){if(n.left){var i=f(e,t,r,n.left);if(i){return i}}var i=r(n.key,n.value);if(i){return i}}if(n.right){return f(e,t,r,n.right)}}function c(e,t,r,n,a){var i=r(e,a.key);var o=r(t,a.key);var s;if(i<=0){if(a.left){s=c(e,t,r,n,a.left);if(s){return s}}if(o>0){s=n(a.key,a.value);if(s){return s}}}if(o>0&&a.right){return c(e,t,r,n,a.right)}}u.forEach=function e(t,r,n){if(!this.root){return}switch(arguments.length){case 1:return l(t,this.root);{}case 2:return f(r,this._compare,t,this.root);{}case 3:if(this._compare(r,n)>=0){return}return c(r,n,this._compare,t,this.root);{}}};Object.defineProperty(u,"begin",{get:function(){var e=[];var t=this.root;while(t){e.push(t);t=t.left}return new v(this,e)}});Object.defineProperty(u,"end",{get:function(){var e=[];var t=this.root;while(t){e.push(t);t=t.right}return new v(this,e)}});u.at=function(e){if(e<0){return new v(this,[])}var t=this.root;var r=[];while(true){r.push(t);if(t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e){return new v(this,r)}e-=1;if(t.right){if(e>=t.right._count){break}t=t.right}else{break}}return new v(this,[])};u.ge=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i<=0){a=n.length}if(i<=0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};u.gt=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i<0){a=n.length}if(i<0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};u.lt=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i>0){a=n.length}if(i<=0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};u.le=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i>=0){a=n.length}if(i<0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};u.find=function(e){var t=this._compare;var r=this.root;var n=[];while(r){var a=t(e,r.key);n.push(r);if(a===0){return new v(this,n)}if(a<=0){r=r.left}else{r=r.right}}return new v(this,[])};u.remove=function(e){var t=this.find(e);if(t){return t.remove()}return this};u.get=function(e){var t=this._compare;var r=this.root;while(r){var n=t(e,r.key);if(n===0){return r.value}if(n<=0){r=r.left}else{r=r.right}}return};function v(e,t){this.tree=e;this._stack=t}var d=v.prototype;Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(d,"node",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1]}return null},enumerable:true});d.clone=function(){return new v(this.tree,this._stack.slice())};function h(e,t){e.key=t.key;e.value=t.value;e.left=t.left;e.right=t.right;e._color=t._color;e._count=t._count}function p(e){var n,s,u,l;for(var f=e.length-1;f>=0;--f){n=e[f];if(f===0){n._color=r;return}s=e[f-1];if(s.left===n){u=s.right;if(u.right&&u.right._color===t){u=s.right=a(u);l=u.right=a(u.right);s.right=u.left;u.left=s;u.right=l;u._color=s._color;n._color=r;s._color=r;l._color=r;o(s);o(u);if(f>1){var c=e[f-2];if(c.left===s){c.left=u}else{c.right=u}}e[f-1]=u;return}else if(u.left&&u.left._color===t){u=s.right=a(u);l=u.left=a(u.left);s.right=l.left;u.left=l.right;l.left=s;l.right=u;l._color=s._color;s._color=r;u._color=r;n._color=r;o(s);o(u);o(l);if(f>1){var c=e[f-2];if(c.left===s){c.left=l}else{c.right=l}}e[f-1]=l;return}if(u._color===r){if(s._color===t){s._color=r;s.right=i(t,u);return}else{s.right=i(t,u);continue}}else{u=a(u);s.right=u.left;u.left=s;u._color=s._color;s._color=t;o(s);o(u);if(f>1){var c=e[f-2];if(c.left===s){c.left=u}else{c.right=u}}e[f-1]=u;e[f]=s;if(f+1<e.length){e[f+1]=n}else{e.push(n)}f=f+2}}else{u=s.left;if(u.left&&u.left._color===t){u=s.left=a(u);l=u.left=a(u.left);s.left=u.right;u.right=s;u.left=l;u._color=s._color;n._color=r;s._color=r;l._color=r;o(s);o(u);if(f>1){var c=e[f-2];if(c.right===s){c.right=u}else{c.left=u}}e[f-1]=u;return}else if(u.right&&u.right._color===t){u=s.left=a(u);l=u.right=a(u.right);s.left=l.right;u.right=l.left;l.right=s;l.left=u;l._color=s._color;s._color=r;u._color=r;n._color=r;o(s);o(u);o(l);if(f>1){var c=e[f-2];if(c.right===s){c.right=l}else{c.left=l}}e[f-1]=l;return}if(u._color===r){if(s._color===t){s._color=r;s.left=i(t,u);return}else{s.left=i(t,u);continue}}else{u=a(u);s.left=u.right;u.right=s;u._color=s._color;s._color=t;o(s);o(u);if(f>1){var c=e[f-2];if(c.right===s){c.right=u}else{c.left=u}}e[f-1]=u;e[f]=s;if(f+1<e.length){e[f+1]=n}else{e.push(n)}f=f+2}}}}d.remove=function(){var e=this._stack;if(e.length===0){return this.tree}var a=new Array(e.length);var i=e[e.length-1];a[a.length-1]=new n(i._color,i.key,i.value,i.left,i.right,i._count);for(var o=e.length-2;o>=0;--o){var i=e[o];if(i.left===e[o+1]){a[o]=new n(i._color,i.key,i.value,a[o+1],i.right,i._count)}else{a[o]=new n(i._color,i.key,i.value,i.left,a[o+1],i._count)}}i=a[a.length-1];if(i.left&&i.right){var u=a.length;i=i.left;while(i.right){a.push(i);i=i.right}var l=a[u-1];a.push(new n(i._color,l.key,l.value,i.left,i.right,i._count));a[u-1].key=i.key;a[u-1].value=i.value;for(var o=a.length-2;o>=u;--o){i=a[o];a[o]=new n(i._color,i.key,i.value,i.left,a[o+1],i._count)}a[u-1].left=a[u]}i=a[a.length-1];if(i._color===t){var f=a[a.length-2];if(f.left===i){f.left=null}else if(f.right===i){f.right=null}a.pop();for(var o=0;o<a.length;++o){a[o]._count--}return new s(this.tree._compare,a[0])}else{if(i.left||i.right){if(i.left){h(i,i.left)}else if(i.right){h(i,i.right)}i._color=r;for(var o=0;o<a.length-1;++o){a[o]._count--}return new s(this.tree._compare,a[0])}else if(a.length===1){return new s(this.tree._compare,null)}else{for(var o=0;o<a.length;++o){a[o]._count--}var c=a[a.length-2];p(a);if(c.left===i){c.left=null}else{c.right=null}}}return new s(this.tree._compare,a[0])};Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1].key}return},enumerable:true});Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1].value}return},enumerable:true});Object.defineProperty(d,"index",{get:function(){var e=0;var t=this._stack;if(t.length===0){var r=this.tree.root;if(r){return r._count}return 0}else if(t[t.length-1].left){e=t[t.length-1].left._count}for(var n=t.length-2;n>=0;--n){if(t[n+1]===t[n].right){++e;if(t[n].left){e+=t[n].left._count}}}return e},enumerable:true});d.next=function(){var e=this._stack;if(e.length===0){return}var t=e[e.length-1];if(t.right){t=t.right;while(t){e.push(t);t=t.left}}else{e.pop();while(e.length>0&&e[e.length-1].right===t){t=e[e.length-1];e.pop()}}};Object.defineProperty(d,"hasNext",{get:function(){var e=this._stack;if(e.length===0){return false}if(e[e.length-1].right){return true}for(var t=e.length-1;t>0;--t){if(e[t-1].left===e[t]){return true}}return false}});d.update=function(e){var t=this._stack;if(t.length===0){throw new Error("Can't update empty node!")}var r=new Array(t.length);var a=t[t.length-1];r[r.length-1]=new n(a._color,a.key,e,a.left,a.right,a._count);for(var i=t.length-2;i>=0;--i){a=t[i];if(a.left===t[i+1]){r[i]=new n(a._color,a.key,a.value,r[i+1],a.right,a._count)}else{r[i]=new n(a._color,a.key,a.value,a.left,r[i+1],a._count)}}return new s(this.tree._compare,r[0])};d.prev=function(){var e=this._stack;if(e.length===0){return}var t=e[e.length-1];if(t.left){t=t.left;while(t){e.push(t);t=t.right}}else{e.pop();while(e.length>0&&e[e.length-1].left===t){t=e[e.length-1];e.pop()}}};Object.defineProperty(d,"hasPrev",{get:function(){var e=this._stack;if(e.length===0){return false}if(e[e.length-1].left){return true}for(var t=e.length-1;t>0;--t){if(e[t-1].right===e[t]){return true}}return false}});function g(e,t){if(e<t){return-1}if(e>t){return 1}return 0}function y(e){return new s(e||g,null)}},e=>{e.exports=function(e,t){var r=e;var n="_gridParentPadding";var a;function i(){t.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(e){r=e;a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing;i()}function s(e,t){if(t)e.addClass(n);else e.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}},e=>{e.exports=function(e,t,r){function n(e,t,r){var n=e.union(e.descendants());n.filter(":childless").positions(function(e,n){if(typeof e==="number"){e=n}var a=e.position();return{x:a.x+t,y:a.y+r}})}function a(e){var t={};for(var r=0;r<e.length;r++){t[e[r].id()]=true}var n=e.filter(function(e,r){if(typeof e==="number"){e=r}var n=e.parent()[0];while(n!=null){if(t[n.id()]){return false}n=n.parent()[0]}return true});return n}if(!r){e("collection","align",function(e,t,r){var i=a(this.nodes(":visible"));var o=r?r:i[0];i=i.not(o);e=e?e:"none";t=t?t:"none";var s=0;var u=0;if(t=="left")s=-1;else if(t=="right")s=1;if(e=="top")u=-1;else if(e=="bottom")u=1;for(var l=0;l<i.length;l++){var f=i[l];var c=Object.assign({},f.position());var v=Object.assign({},f.position());if(t!="none")v.x=o.position("x")+s*(o.outerWidth()-f.outerWidth())/2;if(e!="none")v.y=o.position("y")+u*(o.outerHeight()-f.outerHeight())/2;n(f,v.x-c.x,v.y-c.y)}return this})}if(t.undoRedo){function i(){var e={};var r=t.nodes();for(var n=0;n<r.length;n++){var a=r[n];e[a.id()]={x:a.position("x"),y:a.position("y")}}return e}function o(e){var r={};t.nodes().not(":parent").positions(function(t,n){if(typeof t==="number"){t=n}r[t.id()]={x:t.position("x"),y:t.position("y")};var a=e[t.id()];return{x:a.x,y:a.y}});return r}var s=t.undoRedo(null,true);s.action("align",function(e){var t;if(e.firstTime){t=i();e.nodes.align(e.horizontal,e.vertical,e.alignTo)}else t=o(e);return t},function(e){return o(e)})}}},e=>{var t=function(){var e="Expected a function";var t=Math.max,r=Date.now;var n=r||function(){return(new Date).getTime()};function a(r,a,o){var s,u,l,f,c,v,d,h=0,p=false,g=true;if(typeof r!="function"){throw new TypeError(e)}a=a<0?0:+a||0;if(o===true){var y=true;g=false}else if(i(o)){y=!!o.leading;p="maxWait"in o&&t(+o.maxWait||0,a);g="trailing"in o?!!o.trailing:g}function m(){if(v){clearTimeout(v)}if(u){clearTimeout(u)}h=0;u=v=d=undefined}function b(e,t){if(t){clearTimeout(t)}u=v=d=undefined;if(e){h=n();l=r.apply(c,s);if(!v&&!u){s=c=undefined}}}function x(){var e=a-(n()-f);if(e<=0||e>a){b(d,u)}else{v=setTimeout(x,e)}}function w(){b(g,v)}function E(){s=arguments;f=n();c=this;d=g&&(v||!y);if(p===false){var e=y&&!v}else{if(!u&&!y){h=f}var t=p-(f-h),i=t<=0||t>p;if(i){if(u){u=clearTimeout(u)}h=f;l=r.apply(c,s)}else if(!u){u=setTimeout(w,t)}}if(i&&v){v=clearTimeout(v)}else if(!v&&a!==p){v=setTimeout(x,a)}if(e){i=true;l=r.apply(c,s)}if(i&&!v&&!u){s=c=undefined}return l}E.cancel=m;return E}function i(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}return a}();e.exports=t},function(e,t,r){(function t(n,a){if(true)e.exports=a(r(1130));else{}})(this,function(e){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var a=t[n]={i:n,l:false,exports:{}};e[n].call(a.exports,a,a.exports,r);a.l=true;return a.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=0)}([function(e,t,r){var n=r(1);var a=function e(t){if(!t){return}t("layout","dagre",n)};if(typeof cytoscape!=="undefined"){a(cytoscape)}e.exports=a},function(e,t,r){function n(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function e(t){return typeof t}}else{n=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return n(e)}var a=function e(t){return typeof t==="function"};var i=r(2);var o=r(3);var s=r(4);function u(e){this.options=o({},i,e)}u.prototype.run=function(){var e=this.options;var t=this;var r=e.cy;var i=e.eles;var o=function e(t,r){return a(r)?r.apply(t,[t]):r};var u=e.boundingBox||{x1:0,y1:0,w:r.width(),h:r.height()};if(u.x2===undefined){u.x2=u.x1+u.w}if(u.w===undefined){u.w=u.x2-u.x1}if(u.y2===undefined){u.y2=u.y1+u.h}if(u.h===undefined){u.h=u.y2-u.y1}var l=new s.graphlib.Graph({multigraph:true,compound:true});var f={};var c=function e(t,r){if(r!=null){f[t]=r}};c("nodesep",e.nodeSep);c("edgesep",e.edgeSep);c("ranksep",e.rankSep);c("rankdir",e.rankDir);c("align",e.align);c("ranker",e.ranker);c("acyclicer",e.acyclicer);l.setGraph(f);l.setDefaultEdgeLabel(function(){return{}});l.setDefaultNodeLabel(function(){return{}});var v=i.nodes();if(a(e.sort)){v=v.sort(e.sort)}for(var d=0;d<v.length;d++){var h=v[d];var p=h.layoutDimensions(e);l.setNode(h.id(),{width:p.w,height:p.h,name:h.id()})}for(var g=0;g<v.length;g++){var y=v[g];if(y.isChild()){l.setParent(y.id(),y.parent().id())}}var m=i.edges().stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()});if(a(e.sort)){m=m.sort(e.sort)}for(var b=0;b<m.length;b++){var x=m[b];l.setEdge(x.source().id(),x.target().id(),{minlen:o(x,e.minLen),weight:o(x,e.edgeWeight),name:x.id()},x.id())}s.layout(l);var w=l.nodes();for(var E=0;E<w.length;E++){var k=w[E];var _=l.node(k);r.getElementById(k).scratch().dagre=_}var T;if(e.boundingBox){T={x1:Infinity,x2:-Infinity,y1:Infinity,y2:-Infinity};v.forEach(function(e){var t=e.scratch().dagre;T.x1=Math.min(T.x1,t.x);T.x2=Math.max(T.x2,t.x);T.y1=Math.min(T.y1,t.y);T.y2=Math.max(T.y2,t.y)});T.w=T.x2-T.x1;T.h=T.y2-T.y1}else{T=u}var C=function t(r){if(e.boundingBox){var n=T.w===0?0:(r.x-T.x1)/T.w;var a=T.h===0?0:(r.y-T.y1)/T.h;return{x:u.x1+n*u.w,y:u.y1+a*u.h}}else{return r}};v.layoutPositions(t,e,function(e){e=n(e)==="object"?e:this;var t=e.scratch().dagre;return C({x:t.x,y:t.y})});return this};e.exports=u},function(e,t){var r={nodeSep:undefined,edgeSep:undefined,rankSep:undefined,rankDir:undefined,align:undefined,acyclicer:undefined,ranker:undefined,minLen:function e(t){return 1},edgeWeight:function e(t){return 1},fit:true,padding:30,spacingFactor:undefined,nodeDimensionsIncludeLabels:false,animate:false,animateFilter:function e(t,r){return true},animationDuration:500,animationEasing:undefined,boundingBox:undefined,transform:function e(t,r){return r},ready:function e(){},sort:undefined,stop:function e(){}};e.exports=r},function(e,t){e.exports=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(t){Object.keys(t).forEach(function(r){return e[r]=t[r]})});return e}},function(t,r){t.exports=e}])})},(e,t,r)=>{e.exports={graphlib:r(1131),layout:r(1346),debug:r(1418),util:{time:r(1398).time,notime:r(1398).notime},version:r(1419)}},(e,t,r)=>{var n;if(true){try{n=r(1132)}catch(e){}}if(!n){n=window.graphlib}e.exports=n},(e,t,r)=>{var n=r(1133);e.exports={Graph:n.Graph,json:r(1331),alg:r(1332),version:n.version}},(e,t,r)=>{e.exports={Graph:r(1134),version:r(1330)}},(e,t,r)=>{"use strict";var n=r(1135);e.exports=s;var a="\0";var i="\0";var o="";function s(e){this._isDirected=n.has(e,"directed")?e.directed:true;this._isMultigraph=n.has(e,"multigraph")?e.multigraph:false;this._isCompound=n.has(e,"compound")?e.compound:false;this._label=undefined;this._defaultNodeLabelFn=n.constant(undefined);this._defaultEdgeLabelFn=n.constant(undefined);this._nodes={};if(this._isCompound){this._parent={};this._children={};this._children[i]={}}this._in={};this._preds={};this._out={};this._sucs={};this._edgeObjs={};this._edgeLabels={}}s.prototype._nodeCount=0;s.prototype._edgeCount=0;s.prototype.isDirected=function(){return this._isDirected};s.prototype.isMultigraph=function(){return this._isMultigraph};s.prototype.isCompound=function(){return this._isCompound};s.prototype.setGraph=function(e){this._label=e;return this};s.prototype.graph=function(){return this._label};s.prototype.setDefaultNodeLabel=function(e){if(!n.isFunction(e)){e=n.constant(e)}this._defaultNodeLabelFn=e;return this};s.prototype.nodeCount=function(){return this._nodeCount};s.prototype.nodes=function(){return n.keys(this._nodes)};s.prototype.sources=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._in[t])})};s.prototype.sinks=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._out[t])})};s.prototype.setNodes=function(e,t){var r=arguments;var a=this;n.each(e,function(e){if(r.length>1){a.setNode(e,t)}else{a.setNode(e)}});return this};s.prototype.setNode=function(e,t){if(n.has(this._nodes,e)){if(arguments.length>1){this._nodes[e]=t}return this}this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e);if(this._isCompound){this._parent[e]=i;this._children[e]={};this._children[i][e]=true}this._in[e]={};this._preds[e]={};this._out[e]={};this._sucs[e]={};++this._nodeCount;return this};s.prototype.node=function(e){return this._nodes[e]};s.prototype.hasNode=function(e){return n.has(this._nodes,e)};s.prototype.removeNode=function(e){var t=this;if(n.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e];if(this._isCompound){this._removeFromParentsChildList(e);delete this._parent[e];n.each(this.children(e),function(e){t.setParent(e)});delete this._children[e]}n.each(n.keys(this._in[e]),r);delete this._in[e];delete this._preds[e];n.each(n.keys(this._out[e]),r);delete this._out[e];delete this._sucs[e];--this._nodeCount}return this};s.prototype.setParent=function(e,t){if(!this._isCompound){throw new Error("Cannot set parent in a non-compound graph")}if(n.isUndefined(t)){t=i}else{t+="";for(var r=t;!n.isUndefined(r);r=this.parent(r)){if(r===e){throw new Error("Setting "+t+" as parent of "+e+" would create a cycle")}}this.setNode(t)}this.setNode(e);this._removeFromParentsChildList(e);this._parent[e]=t;this._children[t][e]=true;return this};s.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]};s.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==i){return t}}};s.prototype.children=function(e){if(n.isUndefined(e)){e=i}if(this._isCompound){var t=this._children[e];if(t){return n.keys(t)}}else if(e===i){return this.nodes()}else if(this.hasNode(e)){return[]}};s.prototype.predecessors=function(e){var t=this._preds[e];if(t){return n.keys(t)}};s.prototype.successors=function(e){var t=this._sucs[e];if(t){return n.keys(t)}};s.prototype.neighbors=function(e){var t=this.predecessors(e);if(t){return n.union(t,this.successors(e))}};s.prototype.isLeaf=function(e){var t;if(this.isDirected()){t=this.successors(e)}else{t=this.neighbors(e)}return t.length===0};s.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;n.each(this._nodes,function(r,n){if(e(n)){t.setNode(n,r)}});n.each(this._edgeObjs,function(e){if(t.hasNode(e.v)&&t.hasNode(e.w)){t.setEdge(e,r.edge(e))}});var a={};function i(e){var n=r.parent(e);if(n===undefined||t.hasNode(n)){a[e]=n;return n}else if(n in a){return a[n]}else{return i(n)}}if(this._isCompound){n.each(t.nodes(),function(e){t.setParent(e,i(e))})}return t};s.prototype.setDefaultEdgeLabel=function(e){if(!n.isFunction(e)){e=n.constant(e)}this._defaultEdgeLabelFn=e;return this};s.prototype.edgeCount=function(){return this._edgeCount};s.prototype.edges=function(){return n.values(this._edgeObjs)};s.prototype.setPath=function(e,t){var r=this;var a=arguments;n.reduce(e,function(e,n){if(a.length>1){r.setEdge(e,n,t)}else{r.setEdge(e,n)}return n});return this};s.prototype.setEdge=function(){var e,t,r,a;var i=false;var o=arguments[0];if(typeof o==="object"&&o!==null&&"v"in o){e=o.v;t=o.w;r=o.name;if(arguments.length===2){a=arguments[1];i=true}}else{e=o;t=arguments[1];r=arguments[3];if(arguments.length>2){a=arguments[2];i=true}}e=""+e;t=""+t;if(!n.isUndefined(r)){r=""+r}var s=f(this._isDirected,e,t,r);if(n.has(this._edgeLabels,s)){if(i){this._edgeLabels[s]=a}return this}if(!n.isUndefined(r)&&!this._isMultigraph){throw new Error("Cannot set a named edge when isMultigraph = false")}this.setNode(e);this.setNode(t);this._edgeLabels[s]=i?a:this._defaultEdgeLabelFn(e,t,r);var l=c(this._isDirected,e,t,r);e=l.v;t=l.w;Object.freeze(l);this._edgeObjs[s]=l;u(this._preds[t],e);u(this._sucs[e],t);this._in[t][s]=l;this._out[e][s]=l;this._edgeCount++;return this};s.prototype.edge=function(e,t,r){var n=arguments.length===1?v(this._isDirected,arguments[0]):f(this._isDirected,e,t,r);return this._edgeLabels[n]};s.prototype.hasEdge=function(e,t,r){var a=arguments.length===1?v(this._isDirected,arguments[0]):f(this._isDirected,e,t,r);return n.has(this._edgeLabels,a)};s.prototype.removeEdge=function(e,t,r){var n=arguments.length===1?v(this._isDirected,arguments[0]):f(this._isDirected,e,t,r);var a=this._edgeObjs[n];if(a){e=a.v;t=a.w;delete this._edgeLabels[n];delete this._edgeObjs[n];l(this._preds[t],e);l(this._sucs[e],t);delete this._in[t][n];delete this._out[e][n];this._edgeCount--}return this};s.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var a=n.values(r);if(!t){return a}return n.filter(a,function(e){return e.v===t})}};s.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var a=n.values(r);if(!t){return a}return n.filter(a,function(e){return e.w===t})}};s.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r){return r.concat(this.outEdges(e,t))}};function u(e,t){if(e[t]){e[t]++}else{e[t]=1}}function l(e,t){if(! --e[t]){delete e[t]}}function f(e,t,r,i){var s=""+t;var u=""+r;if(!e&&s>u){var l=s;s=u;u=l}return s+o+u+o+(n.isUndefined(i)?a:i)}function c(e,t,r,n){var a=""+t;var i=""+r;if(!e&&a>i){var o=a;a=i;i=o}var s={v:a,w:i};if(n){s.name=n}return s}function v(e,t){return f(e,t.v,t.w,t.name)}},(e,t,r)=>{var n;if(true){try{n={clone:r(1136),constant:r(1244),each:r(1245),filter:r(1254),has:r(1293),isArray:r(1194),isEmpty:r(1295),isFunction:r(1155),isUndefined:r(1296),keys:r(1188),map:r(1297),reduce:r(1299),size:r(1302),transform:r(1308),union:r(1309),values:r(1328)}}catch(e){}}if(!n){n=window._}e.exports=n},(e,t,r)=>{var n=r(1137);var a=4;function i(e){return n(e,a)}e.exports=i},(e,t,r)=>{var n=r(1138),a=r(1182),i=r(1183),o=r(1186),s=r(1208),u=r(1212),l=r(1213),f=r(1214),c=r(1218),v=r(1222),d=r(1224),h=r(1225),p=r(1230),g=r(1231),y=r(1238),m=r(1194),b=r(1195),x=r(1240),w=r(1162),E=r(1242),k=r(1188),_=r(1209);var T=1,C=2,S=4;var D="[object Arguments]",P="[object Array]",A="[object Boolean]",M="[object Date]",B="[object Error]",I="[object Function]",O="[object GeneratorFunction]",R="[object Map]",N="[object Number]",L="[object Object]",z="[object RegExp]",j="[object Set]",V="[object String]",F="[object Symbol]",G="[object WeakMap]";var W="[object ArrayBuffer]",q="[object DataView]",X="[object Float32Array]",Y="[object Float64Array]",U="[object Int8Array]",H="[object Int16Array]",K="[object Int32Array]",Z="[object Uint8Array]",$="[object Uint8ClampedArray]",Q="[object Uint16Array]",J="[object Uint32Array]";var ee={};ee[D]=ee[P]=ee[W]=ee[q]=ee[A]=ee[M]=ee[X]=ee[Y]=ee[U]=ee[H]=ee[K]=ee[R]=ee[N]=ee[L]=ee[z]=ee[j]=ee[V]=ee[F]=ee[Z]=ee[$]=ee[Q]=ee[J]=true;ee[B]=ee[I]=ee[G]=false;function te(e,t,r,P,A,M){var B,R=t&T,N=t&C,z=t&S;if(r){B=A?r(e,P,A,M):r(e)}if(B!==undefined){return B}if(!w(e)){return e}var j=m(e);if(j){B=p(e);if(!R){return l(e,B)}}else{var V=h(e),F=V==I||V==O;if(b(e)){return u(e,R)}if(V==L||V==D||F&&!A){B=N||F?{}:y(e);if(!R){return N?c(e,s(B,e)):f(e,o(B,e))}}else{if(!ee[V]){return A?e:{}}B=g(e,V,R)}}M||(M=new n);var G=M.get(e);if(G){return G}M.set(e,B);if(E(e)){e.forEach(function(n){B.add(te(n,t,r,n,e,M))})}else if(x(e)){e.forEach(function(n,a){B.set(a,te(n,t,r,a,e,M))})}var W=z?N?d:v:N?_:k;var q=j?undefined:W(e);a(q||e,function(n,a){if(q){a=n;n=e[a]}i(B,a,te(n,t,r,a,e,M))});return B}e.exports=te},(e,t,r)=>{var n=r(1139),a=r(1147),i=r(1148),o=r(1149),s=r(1150),u=r(1151);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=a;l.prototype["delete"]=i;l.prototype.get=o;l.prototype.has=s;l.prototype.set=u;e.exports=l},(e,t,r)=>{var n=r(1140),a=r(1141),i=r(1144),o=r(1145),s=r(1146);function u(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n;u.prototype["delete"]=a;u.prototype.get=i;u.prototype.has=o;u.prototype.set=s;e.exports=u},e=>{function t(){this.__data__=[];this.size=0}e.exports=t},(e,t,r)=>{var n=r(1142);var a=Array.prototype;var i=a.splice;function o(e){var t=this.__data__,r=n(t,e);if(r<0){return false}var a=t.length-1;if(r==a){t.pop()}else{i.call(t,r,1)}--this.size;return true}e.exports=o},(e,t,r)=>{var n=r(1143);function a(e,t){var r=e.length;while(r--){if(n(e[r][0],t)){return r}}return-1}e.exports=a},e=>{function t(e,t){return e===t||e!==e&&t!==t}e.exports=t},(e,t,r)=>{var n=r(1142);function a(e){var t=this.__data__,r=n(t,e);return r<0?undefined:t[r][1]}e.exports=a},(e,t,r)=>{var n=r(1142);function a(e){return n(this.__data__,e)>-1}e.exports=a},(e,t,r)=>{var n=r(1142);function a(e,t){var r=this.__data__,a=n(r,e);if(a<0){++this.size;r.push([e,t])}else{r[a][1]=t}return this}e.exports=a},(e,t,r)=>{var n=r(1139);function a(){this.__data__=new n;this.size=0}e.exports=a},e=>{function t(e){var t=this.__data__,r=t["delete"](e);this.size=t.size;return r}e.exports=t},e=>{function t(e){return this.__data__.get(e)}e.exports=t},e=>{function t(e){return this.__data__.has(e)}e.exports=t},(e,t,r)=>{var n=r(1139),a=r(1152),i=r(1167);var o=200;function s(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!a||s.length<o-1){s.push([e,t]);this.size=++r.size;return this}r=this.__data__=new i(s)}r.set(e,t);this.size=r.size;return this}e.exports=s},(e,t,r)=>{var n=r(1153),a=r(1158);var i=n(a,"Map");e.exports=i},(e,t,r)=>{var n=r(1154),a=r(1166);function i(e,t){var r=a(e,t);return n(r)?r:undefined}e.exports=i},(e,t,r)=>{var n=r(1155),a=r(1163),i=r(1162),o=r(1165);var s=/[\\^$.*+?()[\]{}|]/g;var u=/^\[object .+?Constructor\]$/;var l=Function.prototype,f=Object.prototype;var c=l.toString;var v=f.hasOwnProperty;var d=RegExp("^"+c.call(v).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(e){if(!i(e)||a(e)){return false}var t=n(e)?d:u;return t.test(o(e))}e.exports=h},(e,t,r)=>{var n=r(1156),a=r(1162);var i="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";function l(e){if(!a(e)){return false}var t=n(e);return t==o||t==s||t==i||t==u}e.exports=l},(e,t,r)=>{var n=r(1157),a=r(1160),i=r(1161);var o="[object Null]",s="[object Undefined]";var u=n?n.toStringTag:undefined;function l(e){if(e==null){return e===undefined?s:o}return u&&u in Object(e)?a(e):i(e)}e.exports=l},(e,t,r)=>{var n=r(1158);var a=n.Symbol;e.exports=a},(e,t,r)=>{var n=r(1159);var a=typeof self=="object"&&self&&self.Object===Object&&self;var i=n||a||Function("return this")();e.exports=i},(e,t,r)=>{var n=typeof r.g=="object"&&r.g&&r.g.Object===Object&&r.g;e.exports=n},(e,t,r)=>{var n=r(1157);var a=Object.prototype;var i=a.hasOwnProperty;var o=a.toString;var s=n?n.toStringTag:undefined;function u(e){var t=i.call(e,s),r=e[s];try{e[s]=undefined;var n=true}catch(e){}var a=o.call(e);if(n){if(t){e[s]=r}else{delete e[s]}}return a}e.exports=u},e=>{var t=Object.prototype;var r=t.toString;function n(e){return r.call(e)}e.exports=n},e=>{function t(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}e.exports=t},(e,t,r)=>{var n=r(1164);var a=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function i(e){return!!a&&a in e}e.exports=i},(e,t,r)=>{var n=r(1158);var a=n["__core-js_shared__"];e.exports=a},e=>{var t=Function.prototype;var r=t.toString;function n(e){if(e!=null){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=n},e=>{function t(e,t){return e==null?undefined:e[t]}e.exports=t},(e,t,r)=>{var n=r(1168),a=r(1176),i=r(1179),o=r(1180),s=r(1181);function u(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n;u.prototype["delete"]=a;u.prototype.get=i;u.prototype.has=o;u.prototype.set=s;e.exports=u},(e,t,r)=>{var n=r(1169),a=r(1139),i=r(1152);function o(){this.size=0;this.__data__={hash:new n,map:new(i||a),string:new n}}e.exports=o},(e,t,r)=>{var n=r(1170),a=r(1172),i=r(1173),o=r(1174),s=r(1175);function u(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n;u.prototype["delete"]=a;u.prototype.get=i;u.prototype.has=o;u.prototype.set=s;e.exports=u},(e,t,r)=>{var n=r(1171);function a(){this.__data__=n?n(null):{};this.size=0}e.exports=a},(e,t,r)=>{var n=r(1153);var a=n(Object,"create");e.exports=a},e=>{function t(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=t},(e,t,r)=>{var n=r(1171);var a="__lodash_hash_undefined__";var i=Object.prototype;var o=i.hasOwnProperty;function s(e){var t=this.__data__;if(n){var r=t[e];return r===a?undefined:r}return o.call(t,e)?t[e]:undefined}e.exports=s},(e,t,r)=>{var n=r(1171);var a=Object.prototype;var i=a.hasOwnProperty;function o(e){var t=this.__data__;return n?t[e]!==undefined:i.call(t,e)}e.exports=o},(e,t,r)=>{var n=r(1171);var a="__lodash_hash_undefined__";function i(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=n&&t===undefined?a:t;return this}e.exports=i},(e,t,r)=>{var n=r(1177);function a(e){var t=n(this,e)["delete"](e);this.size-=t?1:0;return t}e.exports=a},(e,t,r)=>{var n=r(1178);function a(e,t){var r=e.__data__;return n(t)?r[typeof t=="string"?"string":"hash"]:r.map}e.exports=a},e=>{function t(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}e.exports=t},(e,t,r)=>{var n=r(1177);function a(e){return n(this,e).get(e)}e.exports=a},(e,t,r)=>{var n=r(1177);function a(e){return n(this,e).has(e)}e.exports=a},(e,t,r)=>{var n=r(1177);function a(e,t){var r=n(this,e),a=r.size;r.set(e,t);this.size+=r.size==a?0:1;return this}e.exports=a},e=>{function t(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)===false){break}}return e}e.exports=t},(e,t,r)=>{var n=r(1184),a=r(1143);var i=Object.prototype;var o=i.hasOwnProperty;function s(e,t,r){var i=e[t];if(!(o.call(e,t)&&a(i,r))||r===undefined&&!(t in e)){n(e,t,r)}}e.exports=s},(e,t,r)=>{var n=r(1185);function a(e,t,r){if(t=="__proto__"&&n){n(e,t,{configurable:true,enumerable:true,value:r,writable:true})}else{e[t]=r}}e.exports=a},(e,t,r)=>{var n=r(1153);var a=function(){try{var e=n(Object,"defineProperty");e({},"",{});return e}catch(e){}}();e.exports=a},(e,t,r)=>{var n=r(1187),a=r(1188);function i(e,t){return e&&n(t,a(t),e)}e.exports=i},(e,t,r)=>{var n=r(1183),a=r(1184);function i(e,t,r,i){var o=!r;r||(r={});var s=-1,u=t.length;while(++s<u){var l=t[s];var f=i?i(r[l],e[l],l,r,e):undefined;if(f===undefined){f=e[l]}if(o){a(r,l,f)}else{n(r,l,f)}}return r}e.exports=i},(e,t,r)=>{var n=r(1189),a=r(1203),i=r(1207);function o(e){return i(e)?n(e):a(e)}e.exports=o},(e,t,r)=>{var n=r(1190),a=r(1191),i=r(1194),o=r(1195),s=r(1197),u=r(1198);var l=Object.prototype;var f=l.hasOwnProperty;function c(e,t){var r=i(e),l=!r&&a(e),c=!r&&!l&&o(e),v=!r&&!l&&!c&&u(e),d=r||l||c||v,h=d?n(e.length,String):[],p=h.length;for(var g in e){if((t||f.call(e,g))&&!(d&&(g=="length"||c&&(g=="offset"||g=="parent")||v&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||s(g,p)))){h.push(g)}}return h}e.exports=c},e=>{function t(e,t){var r=-1,n=Array(e);while(++r<e){n[r]=t(r)}return n}e.exports=t},(e,t,r)=>{var n=r(1192),a=r(1193);var i=Object.prototype;var o=i.hasOwnProperty;var s=i.propertyIsEnumerable;var u=n(function(){return arguments}())?n:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},(e,t,r)=>{var n=r(1156),a=r(1193);var i="[object Arguments]";function o(e){return a(e)&&n(e)==i}e.exports=o},e=>{function t(e){return e!=null&&typeof e=="object"}e.exports=t},e=>{var t=Array.isArray;e.exports=t},(e,t,r)=>{e=r.nmd(e);var n=r(1158),a=r(1196);var i=true&&t&&!t.nodeType&&t;var o=i&&"object"=="object"&&e&&!e.nodeType&&e;var s=o&&o.exports===i;var u=s?n.Buffer:undefined;var l=u?u.isBuffer:undefined;var f=l||a;e.exports=f},e=>{function t(){return false}e.exports=t},e=>{var t=9007199254740991;var r=/^(?:0|[1-9]\d*)$/;function n(e,n){var a=typeof e;n=n==null?t:n;return!!n&&(a=="number"||a!="symbol"&&r.test(e))&&(e>-1&&e%1==0&&e<n)}e.exports=n},(e,t,r)=>{var n=r(1199),a=r(1201),i=r(1202);var o=i&&i.isTypedArray;var s=o?a(o):n;e.exports=s},(e,t,r)=>{var n=r(1156),a=r(1200),i=r(1193);var o="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",f="[object Error]",c="[object Function]",v="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",g="[object Set]",y="[object String]",m="[object WeakMap]";var b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",k="[object Int8Array]",_="[object Int16Array]",T="[object Int32Array]",C="[object Uint8Array]",S="[object Uint8ClampedArray]",D="[object Uint16Array]",P="[object Uint32Array]";var A={};A[w]=A[E]=A[k]=A[_]=A[T]=A[C]=A[S]=A[D]=A[P]=true;A[o]=A[s]=A[b]=A[u]=A[x]=A[l]=A[f]=A[c]=A[v]=A[d]=A[h]=A[p]=A[g]=A[y]=A[m]=false;function M(e){return i(e)&&a(e.length)&&!!A[n(e)]}e.exports=M},e=>{var t=9007199254740991;function r(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=t}e.exports=r},e=>{function t(e){return function(t){return e(t)}}e.exports=t},(e,t,r)=>{e=r.nmd(e);var n=r(1159);var a=true&&t&&!t.nodeType&&t;var i=a&&"object"=="object"&&e&&!e.nodeType&&e;var o=i&&i.exports===a;var s=o&&n.process;var u=function(){try{var e=i&&i.require&&i.require("util").types;if(e){return e}return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u},(e,t,r)=>{var n=r(1204),a=r(1205);var i=Object.prototype;var o=i.hasOwnProperty;function s(e){if(!n(e)){return a(e)}var t=[];for(var r in Object(e)){if(o.call(e,r)&&r!="constructor"){t.push(r)}}return t}e.exports=s},e=>{var t=Object.prototype;function r(e){var r=e&&e.constructor,n=typeof r=="function"&&r.prototype||t;return e===n}e.exports=r},(e,t,r)=>{var n=r(1206);var a=n(Object.keys,Object);e.exports=a},e=>{function t(e,t){return function(r){return e(t(r))}}e.exports=t},(e,t,r)=>{var n=r(1155),a=r(1200);function i(e){return e!=null&&a(e.length)&&!n(e)}e.exports=i},(e,t,r)=>{var n=r(1187),a=r(1209);function i(e,t){return e&&n(t,a(t),e)}e.exports=i},(e,t,r)=>{var n=r(1189),a=r(1210),i=r(1207);function o(e){return i(e)?n(e,true):a(e)}e.exports=o},(e,t,r)=>{var n=r(1162),a=r(1204),i=r(1211);var o=Object.prototype;var s=o.hasOwnProperty;function u(e){if(!n(e)){return i(e)}var t=a(e),r=[];for(var o in e){if(!(o=="constructor"&&(t||!s.call(e,o)))){r.push(o)}}return r}e.exports=u},e=>{function t(e){var t=[];if(e!=null){for(var r in Object(e)){t.push(r)}}return t}e.exports=t},(e,t,r)=>{e=r.nmd(e);var n=r(1158);var a=true&&t&&!t.nodeType&&t;var i=a&&"object"=="object"&&e&&!e.nodeType&&e;var o=i&&i.exports===a;var s=o?n.Buffer:undefined,u=s?s.allocUnsafe:undefined;function l(e,t){if(t){return e.slice()}var r=e.length,n=u?u(r):new e.constructor(r);e.copy(n);return n}e.exports=l},e=>{function t(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r]}return t}e.exports=t},(e,t,r)=>{var n=r(1187),a=r(1215);function i(e,t){return n(e,a(e),t)}e.exports=i},(e,t,r)=>{var n=r(1216),a=r(1217);var i=Object.prototype;var o=i.propertyIsEnumerable;var s=Object.getOwnPropertySymbols;var u=!s?a:function(e){if(e==null){return[]}e=Object(e);return n(s(e),function(t){return o.call(e,t)})};e.exports=u},e=>{function t(e,t){var r=-1,n=e==null?0:e.length,a=0,i=[];while(++r<n){var o=e[r];if(t(o,r,e)){i[a++]=o}}return i}e.exports=t},e=>{function t(){return[]}e.exports=t},(e,t,r)=>{var n=r(1187),a=r(1219);function i(e,t){return n(e,a(e),t)}e.exports=i},(e,t,r)=>{var n=r(1220),a=r(1221),i=r(1215),o=r(1217);var s=Object.getOwnPropertySymbols;var u=!s?o:function(e){var t=[];while(e){n(t,i(e));e=a(e)}return t};e.exports=u},e=>{function t(e,t){var r=-1,n=t.length,a=e.length;while(++r<n){e[a+r]=t[r]}return e}e.exports=t},(e,t,r)=>{var n=r(1206);var a=n(Object.getPrototypeOf,Object);e.exports=a},(e,t,r)=>{var n=r(1223),a=r(1215),i=r(1188);function o(e){return n(e,i,a)}e.exports=o},(e,t,r)=>{var n=r(1220),a=r(1194);function i(e,t,r){var i=t(e);return a(e)?i:n(i,r(e))}e.exports=i},(e,t,r)=>{var n=r(1223),a=r(1219),i=r(1209);function o(e){return n(e,i,a)}e.exports=o},(e,t,r)=>{var n=r(1226),a=r(1152),i=r(1227),o=r(1228),s=r(1229),u=r(1156),l=r(1165);var f="[object Map]",c="[object Object]",v="[object Promise]",d="[object Set]",h="[object WeakMap]";var p="[object DataView]";var g=l(n),y=l(a),m=l(i),b=l(o),x=l(s);var w=u;if(n&&w(new n(new ArrayBuffer(1)))!=p||a&&w(new a)!=f||i&&w(i.resolve())!=v||o&&w(new o)!=d||s&&w(new s)!=h){w=function(e){var t=u(e),r=t==c?e.constructor:undefined,n=r?l(r):"";if(n){switch(n){case g:return p;case y:return f;case m:return v;case b:return d;case x:return h}}return t}}e.exports=w},(e,t,r)=>{var n=r(1153),a=r(1158);var i=n(a,"DataView");e.exports=i},(e,t,r)=>{var n=r(1153),a=r(1158);var i=n(a,"Promise");e.exports=i},(e,t,r)=>{var n=r(1153),a=r(1158);var i=n(a,"Set");e.exports=i},(e,t,r)=>{var n=r(1153),a=r(1158);var i=n(a,"WeakMap");e.exports=i},e=>{var t=Object.prototype;var r=t.hasOwnProperty;function n(e){var t=e.length,n=new e.constructor(t);if(t&&typeof e[0]=="string"&&r.call(e,"index")){n.index=e.index;n.input=e.input}return n}e.exports=n},(e,t,r)=>{var n=r(1232),a=r(1234),i=r(1235),o=r(1236),s=r(1237);var u="[object Boolean]",l="[object Date]",f="[object Map]",c="[object Number]",v="[object RegExp]",d="[object Set]",h="[object String]",p="[object Symbol]";var g="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",_="[object Uint8ClampedArray]",T="[object Uint16Array]",C="[object Uint32Array]";function S(e,t,r){var S=e.constructor;switch(t){case g:return n(e);case u:case l:return new S(+e);case y:return a(e,r);case m:case b:case x:case w:case E:case k:case _:case T:case C:return s(e,r);case f:return new S;case c:case h:return new S(e);case v:return i(e);case d:return new S;case p:return o(e)}}e.exports=S},(e,t,r)=>{var n=r(1233);function a(e){var t=new e.constructor(e.byteLength);new n(t).set(new n(e));return t}e.exports=a},(e,t,r)=>{var n=r(1158);var a=n.Uint8Array;e.exports=a},(e,t,r)=>{var n=r(1232);function a(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}e.exports=a},e=>{var t=/\w*$/;function r(e){var r=new e.constructor(e.source,t.exec(e));r.lastIndex=e.lastIndex;return r}e.exports=r},(e,t,r)=>{var n=r(1157);var a=n?n.prototype:undefined,i=a?a.valueOf:undefined;function o(e){return i?Object(i.call(e)):{}}e.exports=o},(e,t,r)=>{var n=r(1232);function a(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}e.exports=a},(e,t,r)=>{var n=r(1239),a=r(1221),i=r(1204);function o(e){return typeof e.constructor=="function"&&!i(e)?n(a(e)):{}}e.exports=o},(e,t,r)=>{var n=r(1162);var a=Object.create;var i=function(){function e(){}return function(t){if(!n(t)){return{}}if(a){return a(t)}e.prototype=t;var r=new e;e.prototype=undefined;return r}}();e.exports=i},(e,t,r)=>{var n=r(1241),a=r(1201),i=r(1202);var o=i&&i.isMap;var s=o?a(o):n;e.exports=s},(e,t,r)=>{var n=r(1225),a=r(1193);var i="[object Map]";function o(e){return a(e)&&n(e)==i}e.exports=o},(e,t,r)=>{var n=r(1243),a=r(1201),i=r(1202);var o=i&&i.isSet;var s=o?a(o):n;e.exports=s},(e,t,r)=>{var n=r(1225),a=r(1193);var i="[object Set]";function o(e){return a(e)&&n(e)==i}e.exports=o},e=>{function t(e){return function(){return e}}e.exports=t},(e,t,r)=>{e.exports=r(1246)},(e,t,r)=>{var n=r(1182),a=r(1247),i=r(1252),o=r(1194);function s(e,t){var r=o(e)?n:a;return r(e,i(t))}e.exports=s},(e,t,r)=>{var n=r(1248),a=r(1251);var i=a(n);e.exports=i},(e,t,r)=>{var n=r(1249),a=r(1188);function i(e,t){return e&&n(e,t,a)}e.exports=i},(e,t,r)=>{var n=r(1250);var a=n();e.exports=a},e=>{function t(e){return function(t,r,n){var a=-1,i=Object(t),o=n(t),s=o.length;while(s--){var u=o[e?s:++a];if(r(i[u],u,i)===false){break}}return t}}e.exports=t},(e,t,r)=>{var n=r(1207);function a(e,t){return function(r,a){if(r==null){return r}if(!n(r)){return e(r,a)}var i=r.length,o=t?i:-1,s=Object(r);while(t?o--:++o<i){if(a(s[o],o,s)===false){break}}return r}}e.exports=a},(e,t,r)=>{var n=r(1253);function a(e){return typeof e=="function"?e:n}e.exports=a},e=>{function t(e){return e}e.exports=t},(e,t,r)=>{var n=r(1216),a=r(1255),i=r(1256),o=r(1194);function s(e,t){var r=o(e)?n:a;return r(e,i(t,3))}e.exports=s},(e,t,r)=>{var n=r(1247);function a(e,t){var r=[];n(e,function(e,n,a){if(t(e,n,a)){r.push(e)}});return r}e.exports=a},(e,t,r)=>{var n=r(1257),a=r(1274),i=r(1253),o=r(1194),s=r(1290);function u(e){if(typeof e=="function"){return e}if(e==null){return i}if(typeof e=="object"){return o(e)?a(e[0],e[1]):n(e)}return s(e)}e.exports=u},(e,t,r)=>{var n=r(1258),a=r(1271),i=r(1273);function o(e){var t=a(e);if(t.length==1&&t[0][2]){return i(t[0][0],t[0][1])}return function(r){return r===e||n(r,e,t)}}e.exports=o},(e,t,r)=>{var n=r(1138),a=r(1259);var i=1,o=2;function s(e,t,r,s){var u=r.length,l=u,f=!s;if(e==null){return!l}e=Object(e);while(u--){var c=r[u];if(f&&c[2]?c[1]!==e[c[0]]:!(c[0]in e)){return false}}while(++u<l){c=r[u];var v=c[0],d=e[v],h=c[1];if(f&&c[2]){if(d===undefined&&!(v in e)){return false}}else{var p=new n;if(s){var g=s(d,h,v,e,t,p)}if(!(g===undefined?a(h,d,i|o,s,p):g)){return false}}}return true}e.exports=s},(e,t,r)=>{var n=r(1260),a=r(1193);function i(e,t,r,o,s){if(e===t){return true}if(e==null||t==null||!a(e)&&!a(t)){return e!==e&&t!==t}return n(e,t,r,o,i,s)}e.exports=i},(e,t,r)=>{var n=r(1138),a=r(1261),i=r(1267),o=r(1270),s=r(1225),u=r(1194),l=r(1195),f=r(1198);var c=1;var v="[object Arguments]",d="[object Array]",h="[object Object]";var p=Object.prototype;var g=p.hasOwnProperty;function y(e,t,r,p,y,m){var b=u(e),x=u(t),w=b?d:s(e),E=x?d:s(t);w=w==v?h:w;E=E==v?h:E;var k=w==h,_=E==h,T=w==E;if(T&&l(e)){if(!l(t)){return false}b=true;k=false}if(T&&!k){m||(m=new n);return b||f(e)?a(e,t,r,p,y,m):i(e,t,w,r,p,y,m)}if(!(r&c)){var C=k&&g.call(e,"__wrapped__"),S=_&&g.call(t,"__wrapped__");if(C||S){var D=C?e.value():e,P=S?t.value():t;m||(m=new n);return y(D,P,r,p,m)}}if(!T){return false}m||(m=new n);return o(e,t,r,p,y,m)}e.exports=y},(e,t,r)=>{var n=r(1262),a=r(1265),i=r(1266);var o=1,s=2;function u(e,t,r,u,l,f){var c=r&o,v=e.length,d=t.length;if(v!=d&&!(c&&d>v)){return false}var h=f.get(e);var p=f.get(t);if(h&&p){return h==t&&p==e}var g=-1,y=true,m=r&s?new n:undefined;f.set(e,t);f.set(t,e);while(++g<v){var b=e[g],x=t[g];if(u){var w=c?u(x,b,g,t,e,f):u(b,x,g,e,t,f)}if(w!==undefined){if(w){continue}y=false;break}if(m){if(!a(t,function(e,t){if(!i(m,t)&&(b===e||l(b,e,r,u,f))){return m.push(t)}})){y=false;break}}else if(!(b===x||l(b,x,r,u,f))){y=false;break}}f["delete"](e);f["delete"](t);return y}e.exports=u},(e,t,r)=>{var n=r(1167),a=r(1263),i=r(1264);function o(e){var t=-1,r=e==null?0:e.length;this.__data__=new n;while(++t<r){this.add(e[t])}}o.prototype.add=o.prototype.push=a;o.prototype.has=i;e.exports=o},e=>{var t="__lodash_hash_undefined__";function r(e){this.__data__.set(e,t);return this}e.exports=r},e=>{function t(e){return this.__data__.has(e)}e.exports=t},e=>{function t(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)){return true}}return false}e.exports=t},e=>{function t(e,t){return e.has(t)}e.exports=t},(e,t,r)=>{var n=r(1157),a=r(1233),i=r(1143),o=r(1261),s=r(1268),u=r(1269);var l=1,f=2;var c="[object Boolean]",v="[object Date]",d="[object Error]",h="[object Map]",p="[object Number]",g="[object RegExp]",y="[object Set]",m="[object String]",b="[object Symbol]";var x="[object ArrayBuffer]",w="[object DataView]";var E=n?n.prototype:undefined,k=E?E.valueOf:undefined;function _(e,t,r,n,E,_,T){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false}e=e.buffer;t=t.buffer;case x:if(e.byteLength!=t.byteLength||!_(new a(e),new a(t))){return false}return true;case c:case v:case p:return i(+e,+t);case d:return e.name==t.name&&e.message==t.message;case g:case m:return e==t+"";case h:var C=s;case y:var S=n&l;C||(C=u);if(e.size!=t.size&&!S){return false}var D=T.get(e);if(D){return D==t}n|=f;T.set(e,t);var P=o(C(e),C(t),n,E,_,T);T["delete"](e);return P;case b:if(k){return k.call(e)==k.call(t)}}return false}e.exports=_},e=>{function t(e){var t=-1,r=Array(e.size);e.forEach(function(e,n){r[++t]=[n,e]});return r}e.exports=t},e=>{function t(e){var t=-1,r=Array(e.size);e.forEach(function(e){r[++t]=e});return r}e.exports=t},(e,t,r)=>{var n=r(1222);var a=1;var i=Object.prototype;var o=i.hasOwnProperty;function s(e,t,r,i,s,u){var l=r&a,f=n(e),c=f.length,v=n(t),d=v.length;if(c!=d&&!l){return false}var h=c;while(h--){var p=f[h];if(!(l?p in t:o.call(t,p))){return false}}var g=u.get(e);var y=u.get(t);if(g&&y){return g==t&&y==e}var m=true;u.set(e,t);u.set(t,e);var b=l;while(++h<c){p=f[h];var x=e[p],w=t[p];if(i){var E=l?i(w,x,p,t,e,u):i(x,w,p,e,t,u)}if(!(E===undefined?x===w||s(x,w,r,i,u):E)){m=false;break}b||(b=p=="constructor")}if(m&&!b){var k=e.constructor,_=t.constructor;if(k!=_&&("constructor"in e&&"constructor"in t)&&!(typeof k=="function"&&k instanceof k&&typeof _=="function"&&_ instanceof _)){m=false}}u["delete"](e);u["delete"](t);return m}e.exports=s},(e,t,r)=>{var n=r(1272),a=r(1188);function i(e){var t=a(e),r=t.length;while(r--){var i=t[r],o=e[i];t[r]=[i,o,n(o)]}return t}e.exports=i},(e,t,r)=>{var n=r(1162);function a(e){return e===e&&!n(e)}e.exports=a},e=>{function t(e,t){return function(r){if(r==null){return false}return r[e]===t&&(t!==undefined||e in Object(r))}}e.exports=t},(e,t,r)=>{var n=r(1259),a=r(1275),i=r(1287),o=r(1278),s=r(1272),u=r(1273),l=r(1286);var f=1,c=2;function v(e,t){if(o(e)&&s(t)){return u(l(e),t)}return function(r){var o=a(r,e);return o===undefined&&o===t?i(r,e):n(t,o,f|c)}}e.exports=v},(e,t,r)=>{var n=r(1276);function a(e,t,r){var a=e==null?undefined:n(e,t);return a===undefined?r:a}e.exports=a},(e,t,r)=>{var n=r(1277),a=r(1286);function i(e,t){t=n(t,e);var r=0,i=t.length;while(e!=null&&r<i){e=e[a(t[r++])]}return r&&r==i?e:undefined}e.exports=i},(e,t,r)=>{var n=r(1194),a=r(1278),i=r(1280),o=r(1283);function s(e,t){if(n(e)){return e}return a(e,t)?[e]:i(o(e))}e.exports=s},(e,t,r)=>{var n=r(1194),a=r(1279);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function s(e,t){if(n(e)){return false}var r=typeof e;if(r=="number"||r=="symbol"||r=="boolean"||e==null||a(e)){return true}return o.test(e)||!i.test(e)||t!=null&&e in Object(t)}e.exports=s},(e,t,r)=>{var n=r(1156),a=r(1193);var i="[object Symbol]";function o(e){return typeof e=="symbol"||a(e)&&n(e)==i}e.exports=o},(e,t,r)=>{var n=r(1281);var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var i=/\\(\\)?/g;var o=n(function(e){var t=[];if(e.charCodeAt(0)===46){t.push("")}e.replace(a,function(e,r,n,a){t.push(n?a.replace(i,"$1"):r||e)});return t});e.exports=o},(e,t,r)=>{var n=r(1282);var a=500;function i(e){var t=n(e,function(e){if(r.size===a){r.clear()}return e});var r=t.cache;return t}e.exports=i},(e,t,r)=>{var n=r(1167);var a="Expected a function";function i(e,t){if(typeof e!="function"||t!=null&&typeof t!="function"){throw new TypeError(a)}var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a)){return i.get(a)}var o=e.apply(this,n);r.cache=i.set(a,o)||i;return o};r.cache=new(i.Cache||n);return r}i.Cache=n;e.exports=i},(e,t,r)=>{var n=r(1284);function a(e){return e==null?"":n(e)}e.exports=a},(e,t,r)=>{var n=r(1157),a=r(1285),i=r(1194),o=r(1279);var s=1/0;var u=n?n.prototype:undefined,l=u?u.toString:undefined;function f(e){if(typeof e=="string"){return e}if(i(e)){return a(e,f)+""}if(o(e)){return l?l.call(e):""}var t=e+"";return t=="0"&&1/e==-s?"-0":t}e.exports=f},e=>{function t(e,t){var r=-1,n=e==null?0:e.length,a=Array(n);while(++r<n){a[r]=t(e[r],r,e)}return a}e.exports=t},(e,t,r)=>{var n=r(1279);var a=1/0;function i(e){if(typeof e=="string"||n(e)){return e}var t=e+"";return t=="0"&&1/e==-a?"-0":t}e.exports=i},(e,t,r)=>{var n=r(1288),a=r(1289);function i(e,t){return e!=null&&a(e,t,n)}e.exports=i},e=>{function t(e,t){return e!=null&&t in Object(e)}e.exports=t},(e,t,r)=>{var n=r(1277),a=r(1191),i=r(1194),o=r(1197),s=r(1200),u=r(1286);function l(e,t,r){t=n(t,e);var l=-1,f=t.length,c=false;while(++l<f){var v=u(t[l]);if(!(c=e!=null&&r(e,v))){break}e=e[v]}if(c||++l!=f){return c}f=e==null?0:e.length;return!!f&&s(f)&&o(v,f)&&(i(e)||a(e))}e.exports=l},(e,t,r)=>{var n=r(1291),a=r(1292),i=r(1278),o=r(1286);function s(e){return i(e)?n(o(e)):a(e)}e.exports=s},e=>{function t(e){return function(t){return t==null?undefined:t[e]}}e.exports=t},(e,t,r)=>{var n=r(1276);function a(e){return function(t){return n(t,e)}}e.exports=a},(e,t,r)=>{var n=r(1294),a=r(1289);function i(e,t){return e!=null&&a(e,t,n)}e.exports=i},e=>{var t=Object.prototype;var r=t.hasOwnProperty;function n(e,t){return e!=null&&r.call(e,t)}e.exports=n},(e,t,r)=>{var n=r(1203),a=r(1225),i=r(1191),o=r(1194),s=r(1207),u=r(1195),l=r(1204),f=r(1198);var c="[object Map]",v="[object Set]";var d=Object.prototype;var h=d.hasOwnProperty;function p(e){if(e==null){return true}if(s(e)&&(o(e)||typeof e=="string"||typeof e.splice=="function"||u(e)||f(e)||i(e))){return!e.length}var t=a(e);if(t==c||t==v){return!e.size}if(l(e)){return!n(e).length}for(var r in e){if(h.call(e,r)){return false}}return true}e.exports=p},e=>{function t(e){return e===undefined}e.exports=t},(e,t,r)=>{var n=r(1285),a=r(1256),i=r(1298),o=r(1194);function s(e,t){var r=o(e)?n:i;return r(e,a(t,3))}e.exports=s},(e,t,r)=>{var n=r(1247),a=r(1207);function i(e,t){var r=-1,i=a(e)?Array(e.length):[];n(e,function(e,n,a){i[++r]=t(e,n,a)});return i}e.exports=i},(e,t,r)=>{var n=r(1300),a=r(1247),i=r(1256),o=r(1301),s=r(1194);function u(e,t,r){var u=s(e)?n:o,l=arguments.length<3;return u(e,i(t,4),r,l,a)}e.exports=u},e=>{function t(e,t,r,n){var a=-1,i=e==null?0:e.length;if(n&&i){r=e[++a]}while(++a<i){r=t(r,e[a],a,e)}return r}e.exports=t},e=>{function t(e,t,r,n,a){a(e,function(e,a,i){r=n?(n=false,e):t(r,e,a,i)});return r}e.exports=t},(e,t,r)=>{var n=r(1203),a=r(1225),i=r(1207),o=r(1303),s=r(1304);var u="[object Map]",l="[object Set]";function f(e){if(e==null){return 0}if(i(e)){return o(e)?s(e):e.length}var t=a(e);if(t==u||t==l){return e.size}return n(e).length}e.exports=f},(e,t,r)=>{var n=r(1156),a=r(1194),i=r(1193);var o="[object String]";function s(e){return typeof e=="string"||!a(e)&&i(e)&&n(e)==o}e.exports=s},(e,t,r)=>{var n=r(1305),a=r(1306),i=r(1307);function o(e){return a(e)?i(e):n(e)}e.exports=o},(e,t,r)=>{var n=r(1291);var a=n("length");e.exports=a},e=>{var t="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=r+n+a,o="\\ufe0e\\ufe0f";var s="\\u200d";var u=RegExp("["+s+t+i+o+"]");function l(e){return u.test(e)}e.exports=l},e=>{var t="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=r+n+a,o="\\ufe0e\\ufe0f";var s="["+t+"]",u="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",f="(?:"+u+"|"+l+")",c="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d";var p=f+"?",g="["+o+"]?",y="(?:"+h+"(?:"+[c,v,d].join("|")+")"+g+p+")*",m=g+p+y,b="(?:"+[c+u+"?",u,v,d,s].join("|")+")";var x=RegExp(l+"(?="+l+")|"+b+m,"g");function w(e){var t=x.lastIndex=0;while(x.test(e)){++t}return t}e.exports=w},(e,t,r)=>{var n=r(1182),a=r(1239),i=r(1248),o=r(1256),s=r(1221),u=r(1194),l=r(1195),f=r(1155),c=r(1162),v=r(1198);function d(e,t,r){var d=u(e),h=d||l(e)||v(e);t=o(t,4);if(r==null){var p=e&&e.constructor;if(h){r=d?new p:[]}else if(c(e)){r=f(p)?a(s(e)):{}}else{r={}}}(h?n:i)(e,function(e,n,a){return t(r,e,n,a)});return r}e.exports=d},(e,t,r)=>{var n=r(1310),a=r(1312),i=r(1318),o=r(1327);var s=a(function(e){return i(n(e,1,o,true))});e.exports=s},(e,t,r)=>{var n=r(1220),a=r(1311);function i(e,t,r,o,s){var u=-1,l=e.length;r||(r=a);s||(s=[]);while(++u<l){var f=e[u];if(t>0&&r(f)){if(t>1){i(f,t-1,r,o,s)}else{n(s,f)}}else if(!o){s[s.length]=f}}return s}e.exports=i},(e,t,r)=>{var n=r(1157),a=r(1191),i=r(1194);var o=n?n.isConcatSpreadable:undefined;function s(e){return i(e)||a(e)||!!(o&&e&&e[o])}e.exports=s},(e,t,r)=>{var n=r(1253),a=r(1313),i=r(1315);function o(e,t){return i(a(e,t,n),e+"")}e.exports=o},(e,t,r)=>{var n=r(1314);var a=Math.max;function i(e,t,r){t=a(t===undefined?e.length-1:t,0);return function(){var i=arguments,o=-1,s=a(i.length-t,0),u=Array(s);while(++o<s){u[o]=i[t+o]}o=-1;var l=Array(t+1);while(++o<t){l[o]=i[o]}l[t]=r(u);return n(e,this,l)}}e.exports=i},e=>{function t(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=t},(e,t,r)=>{var n=r(1316),a=r(1317);var i=a(n);e.exports=i},(e,t,r)=>{var n=r(1244),a=r(1185),i=r(1253);var o=!a?i:function(e,t){return a(e,"toString",{configurable:true,enumerable:false,value:n(t),writable:true})};e.exports=o},e=>{var t=800,r=16;var n=Date.now;function a(e){var a=0,i=0;return function(){var o=n(),s=r-(o-i);i=o;if(s>0){if(++a>=t){return arguments[0]}}else{a=0}return e.apply(undefined,arguments)}}e.exports=a},(e,t,r)=>{var n=r(1262),a=r(1319),i=r(1324),o=r(1266),s=r(1325),u=r(1269);var l=200;function f(e,t,r){var f=-1,c=a,v=e.length,d=true,h=[],p=h;if(r){d=false;c=i}else if(v>=l){var g=t?null:s(e);if(g){return u(g)}d=false;c=o;p=new n}else{p=t?[]:h}e:while(++f<v){var y=e[f],m=t?t(y):y;y=r||y!==0?y:0;if(d&&m===m){var b=p.length;while(b--){if(p[b]===m){continue e}}if(t){p.push(m)}h.push(y)}else if(!c(p,m,r)){if(p!==h){p.push(m)}h.push(y)}}return h}e.exports=f},(e,t,r)=>{var n=r(1320);function a(e,t){var r=e==null?0:e.length;return!!r&&n(e,t,0)>-1}e.exports=a},(e,t,r)=>{var n=r(1321),a=r(1322),i=r(1323);function o(e,t,r){return t===t?i(e,t,r):n(e,a,r)}e.exports=o},e=>{function t(e,t,r,n){var a=e.length,i=r+(n?1:-1);while(n?i--:++i<a){if(t(e[i],i,e)){return i}}return-1}e.exports=t},e=>{function t(e){return e!==e}e.exports=t},e=>{function t(e,t,r){var n=r-1,a=e.length;while(++n<a){if(e[n]===t){return n}}return-1}e.exports=t},e=>{function t(e,t,r){var n=-1,a=e==null?0:e.length;while(++n<a){if(r(t,e[n])){return true}}return false}e.exports=t},(e,t,r)=>{var n=r(1228),a=r(1326),i=r(1269);var o=1/0;var s=!(n&&1/i(new n([,-0]))[1]==o)?a:function(e){return new n(e)};e.exports=s},e=>{function t(){}e.exports=t},(e,t,r)=>{var n=r(1207),a=r(1193);function i(e){return a(e)&&n(e)}e.exports=i},(e,t,r)=>{var n=r(1329),a=r(1188);function i(e){return e==null?[]:n(e,a(e))}e.exports=i},(e,t,r)=>{var n=r(1285);function a(e,t){return n(t,function(t){return e[t]})}e.exports=a},e=>{e.exports="2.1.8"},(e,t,r)=>{var n=r(1135);var a=r(1134);e.exports={write:i,read:u};function i(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:o(e),edges:s(e)};if(!n.isUndefined(e.graph())){t.value=n.clone(e.graph())}return t}function o(e){return n.map(e.nodes(),function(t){var r=e.node(t);var a=e.parent(t);var i={v:t};if(!n.isUndefined(r)){i.value=r}if(!n.isUndefined(a)){i.parent=a}return i})}function s(e){return n.map(e.edges(),function(t){var r=e.edge(t);var a={v:t.v,w:t.w};if(!n.isUndefined(t.name)){a.name=t.name}if(!n.isUndefined(r)){a.value=r}return a})}function u(e){var t=new a(e.options).setGraph(e.value);n.each(e.nodes,function(e){t.setNode(e.v,e.value);if(e.parent){t.setParent(e.v,e.parent)}});n.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)});return t}},(e,t,r)=>{e.exports={components:r(1333),dijkstra:r(1334),dijkstraAll:r(1336),findCycles:r(1337),floydWarshall:r(1339),isAcyclic:r(1340),postorder:r(1342),preorder:r(1344),prim:r(1345),tarjan:r(1338),topsort:r(1341)}},(e,t,r)=>{var n=r(1135);e.exports=a;function a(e){var t={};var r=[];var a;function i(r){if(n.has(t,r))return;t[r]=true;a.push(r);n.each(e.successors(r),i);n.each(e.predecessors(r),i)}n.each(e.nodes(),function(e){a=[];i(e);if(a.length){r.push(a)}});return r}},(e,t,r)=>{var n=r(1135);var a=r(1335);e.exports=o;var i=n.constant(1);function o(e,t,r,n){return s(e,String(t),r||i,n||function(t){return e.outEdges(t)})}function s(e,t,r,n){var i={};var o=new a;var s,u;var l=function(e){var t=e.v!==s?e.v:e.w;var n=i[t];var a=r(e);var l=u.distance+a;if(a<0){throw new Error("dijkstra does not allow negative edge weights. "+"Bad edge: "+e+" Weight: "+a)}if(l<n.distance){n.distance=l;n.predecessor=s;o.decrease(t,l)}};e.nodes().forEach(function(e){var r=e===t?0:Number.POSITIVE_INFINITY;i[e]={distance:r};o.add(e,r)});while(o.size()>0){s=o.removeMin();u=i[s];if(u.distance===Number.POSITIVE_INFINITY){break}n(s).forEach(l)}return i}},(e,t,r)=>{var n=r(1135);e.exports=a;function a(){this._arr=[];this._keyIndices={}}a.prototype.size=function(){return this._arr.length};a.prototype.keys=function(){return this._arr.map(function(e){return e.key})};a.prototype.has=function(e){return n.has(this._keyIndices,e)};a.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==undefined){return this._arr[t].priority}};a.prototype.min=function(){if(this.size()===0){throw new Error("Queue underflow")}return this._arr[0].key};a.prototype.add=function(e,t){var r=this._keyIndices;e=String(e);if(!n.has(r,e)){var a=this._arr;var i=a.length;r[e]=i;a.push({key:e,priority:t});this._decrease(i);return true}return false};a.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();delete this._keyIndices[e.key];this._heapify(0);return e.key};a.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority){throw new Error("New priority is greater than current priority. "+"Key: "+e+" Old: "+this._arr[r].priority+" New: "+t)}this._arr[r].priority=t;this._decrease(r)};a.prototype._heapify=function(e){var t=this._arr;var r=2*e;var n=r+1;var a=e;if(r<t.length){a=t[r].priority<t[a].priority?r:a;if(n<t.length){a=t[n].priority<t[a].priority?n:a}if(a!==e){this._swap(e,a);this._heapify(a)}}};a.prototype._decrease=function(e){var t=this._arr;var r=t[e].priority;var n;while(e!==0){n=e>>1;if(t[n].priority<r){break}this._swap(e,n);e=n}};a.prototype._swap=function(e,t){var r=this._arr;var n=this._keyIndices;var a=r[e];var i=r[t];r[e]=i;r[t]=a;n[i.key]=e;n[a.key]=t}},(e,t,r)=>{var n=r(1334);var a=r(1135);e.exports=i;function i(e,t,r){return a.transform(e.nodes(),function(a,i){a[i]=n(e,i,t,r)},{})}},(e,t,r)=>{var n=r(1135);var a=r(1338);e.exports=i;function i(e){return n.filter(a(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}},(e,t,r)=>{var n=r(1135);e.exports=a;function a(e){var t=0;var r=[];var a={};var i=[];function o(s){var u=a[s]={onStack:true,lowlink:t,index:t++};r.push(s);e.successors(s).forEach(function(e){if(!n.has(a,e)){o(e);u.lowlink=Math.min(u.lowlink,a[e].lowlink)}else if(a[e].onStack){u.lowlink=Math.min(u.lowlink,a[e].index)}});if(u.lowlink===u.index){var l=[];var f;do{f=r.pop();a[f].onStack=false;l.push(f)}while(s!==f);i.push(l)}}e.nodes().forEach(function(e){if(!n.has(a,e)){o(e)}});return i}},(e,t,r)=>{var n=r(1135);e.exports=i;var a=n.constant(1);function i(e,t,r){return o(e,t||a,r||function(t){return e.outEdges(t)})}function o(e,t,r){var n={};var a=e.nodes();a.forEach(function(e){n[e]={};n[e][e]={distance:0};a.forEach(function(t){if(e!==t){n[e][t]={distance:Number.POSITIVE_INFINITY}}});r(e).forEach(function(r){var a=r.v===e?r.w:r.v;var i=t(r);n[e][a]={distance:i,predecessor:e}})});a.forEach(function(e){var t=n[e];a.forEach(function(r){var i=n[r];a.forEach(function(r){var n=i[e];var a=t[r];var o=i[r];var s=n.distance+a.distance;if(s<o.distance){o.distance=s;o.predecessor=a.predecessor}})})});return n}},(e,t,r)=>{var n=r(1341);e.exports=a;function a(e){try{n(e)}catch(e){if(e instanceof n.CycleException){return false}throw e}return true}},(e,t,r)=>{var n=r(1135);e.exports=a;a.CycleException=i;function a(e){var t={};var r={};var a=[];function o(s){if(n.has(r,s)){throw new i}if(!n.has(t,s)){r[s]=true;t[s]=true;n.each(e.predecessors(s),o);delete r[s];a.push(s)}}n.each(e.sinks(),o);if(n.size(t)!==e.nodeCount()){throw new i}return a}function i(){}i.prototype=new Error},(e,t,r)=>{var n=r(1343);e.exports=a;function a(e,t){return n(e,t,"post")}},(e,t,r)=>{var n=r(1135);e.exports=a;function a(e,t,r){if(!n.isArray(t)){t=[t]}var a=(e.isDirected()?e.successors:e.neighbors).bind(e);var o=[];var s={};n.each(t,function(t){if(!e.hasNode(t)){throw new Error("Graph does not have node: "+t)}i(e,t,r==="post",s,a,o)});return o}function i(e,t,r,a,o,s){if(!n.has(a,t)){a[t]=true;if(!r){s.push(t)}n.each(o(t),function(t){i(e,t,r,a,o,s)});if(r){s.push(t)}}}},(e,t,r)=>{var n=r(1343);e.exports=a;function a(e,t){return n(e,t,"pre")}},(e,t,r)=>{var n=r(1135);var a=r(1134);var i=r(1335);e.exports=o;function o(e,t){var r=new a;var o={};var s=new i;var u;function l(e){var r=e.v===u?e.w:e.v;var n=s.priority(r);if(n!==undefined){var a=t(e);if(a<n){o[r]=u;s.decrease(r,a)}}}if(e.nodeCount()===0){return r}n.each(e.nodes(),function(e){s.add(e,Number.POSITIVE_INFINITY);r.setNode(e)});s.decrease(e.nodes()[0],0);var f=false;while(s.size()>0){u=s.removeMin();if(n.has(o,u)){r.setEdge(u,o[u])}else if(f){throw new Error("Input graph is not connected: "+e)}else{f=true}e.nodeEdges(u).forEach(l)}return r}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1394);var i=r(1397);var o=r(1399);var s=r(1398).normalizeRanks;var u=r(1403);var l=r(1398).removeEmptyRanks;var f=r(1404);var c=r(1405);var v=r(1406);var d=r(1407);var h=r(1416);var p=r(1398);var g=r(1131).Graph;e.exports=y;function y(e,t){var r=t&&t.debugTiming?p.time:p.notime;r("layout",function(){var t=r("  buildLayoutGraph",function(){return D(e)});r("  runLayout",function(){m(t,r)});r("  updateInputGraph",function(){b(e,t)})})}function m(e,t){t("    makeSpaceForEdgeLabels",function(){P(e)});t("    removeSelfEdges",function(){z(e)});t("    acyclic",function(){a.run(e)});t("    nestingGraph.run",function(){f.run(e)});t("    rank",function(){o(p.asNonCompoundGraph(e))});t("    injectEdgeLabelProxies",function(){A(e)});t("    removeEmptyRanks",function(){l(e)});t("    nestingGraph.cleanup",function(){f.cleanup(e)});t("    normalizeRanks",function(){s(e)});t("    assignRankMinMax",function(){M(e)});t("    removeEdgeLabelProxies",function(){B(e)});t("    normalize.run",function(){i.run(e)});t("    parentDummyChains",function(){u(e)});t("    addBorderSegments",function(){c(e)});t("    order",function(){d(e)});t("    insertSelfEdges",function(){j(e)});t("    adjustCoordinateSystem",function(){v.adjust(e)});t("    position",function(){h(e)});t("    positionSelfEdges",function(){V(e)});t("    removeBorderNodes",function(){L(e)});t("    normalize.undo",function(){i.undo(e)});t("    fixupEdgeLabelCoords",function(){R(e)});t("    undoCoordinateSystem",function(){v.undo(e)});t("    translateGraph",function(){I(e)});t("    assignNodeIntersects",function(){O(e)});t("    reversePoints",function(){N(e)});t("    acyclic.undo",function(){a.undo(e)})}function b(e,t){n.forEach(e.nodes(),function(r){var n=e.node(r);var a=t.node(r);if(n){n.x=a.x;n.y=a.y;if(t.children(r).length){n.width=a.width;n.height=a.height}}});n.forEach(e.edges(),function(r){var a=e.edge(r);var i=t.edge(r);a.points=i.points;if(n.has(i,"x")){a.x=i.x;a.y=i.y}});e.graph().width=t.graph().width;e.graph().height=t.graph().height}var x=["nodesep","edgesep","ranksep","marginx","marginy"];var w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"};var E=["acyclicer","ranker","rankdir","align"];var k=["width","height"];var _={width:0,height:0};var T=["minlen","weight","width","height","labeloffset"];var C={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"};var S=["labelpos"];function D(e){var t=new g({multigraph:true,compound:true});var r=G(e.graph());t.setGraph(n.merge({},w,F(r,x),n.pick(r,E)));n.forEach(e.nodes(),function(r){var a=G(e.node(r));t.setNode(r,n.defaults(F(a,k),_));t.setParent(r,e.parent(r))});n.forEach(e.edges(),function(r){var a=G(e.edge(r));t.setEdge(r,n.merge({},C,F(a,T),n.pick(a,S)))});return t}function P(e){var t=e.graph();t.ranksep/=2;n.forEach(e.edges(),function(r){var n=e.edge(r);n.minlen*=2;if(n.labelpos.toLowerCase()!=="c"){if(t.rankdir==="TB"||t.rankdir==="BT"){n.width+=n.labeloffset}else{n.height+=n.labeloffset}}})}function A(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v);var a=e.node(t.w);var i={rank:(a.rank-n.rank)/2+n.rank,e:t};p.addDummyNode(e,"edge-proxy",i,"_ep")}})}function M(e){var t=0;n.forEach(e.nodes(),function(r){var a=e.node(r);if(a.borderTop){a.minRank=e.node(a.borderTop).rank;a.maxRank=e.node(a.borderBottom).rank;t=n.max(t,a.maxRank)}});e.graph().maxRank=t}function B(e){n.forEach(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="edge-proxy"){e.edge(r.e).labelRank=r.rank;e.removeNode(t)}})}function I(e){var t=Number.POSITIVE_INFINITY;var r=0;var a=Number.POSITIVE_INFINITY;var i=0;var o=e.graph();var s=o.marginx||0;var u=o.marginy||0;function l(e){var n=e.x;var o=e.y;var s=e.width;var u=e.height;t=Math.min(t,n-s/2);r=Math.max(r,n+s/2);a=Math.min(a,o-u/2);i=Math.max(i,o+u/2)}n.forEach(e.nodes(),function(t){l(e.node(t))});n.forEach(e.edges(),function(t){var r=e.edge(t);if(n.has(r,"x")){l(r)}});t-=s;a-=u;n.forEach(e.nodes(),function(r){var n=e.node(r);n.x-=t;n.y-=a});n.forEach(e.edges(),function(r){var i=e.edge(r);n.forEach(i.points,function(e){e.x-=t;e.y-=a});if(n.has(i,"x")){i.x-=t}if(n.has(i,"y")){i.y-=a}});o.width=r-t+s;o.height=i-a+u}function O(e){n.forEach(e.edges(),function(t){var r=e.edge(t);var n=e.node(t.v);var a=e.node(t.w);var i,o;if(!r.points){r.points=[];i=a;o=n}else{i=r.points[0];o=r.points[r.points.length-1]}r.points.unshift(p.intersectRect(n,i));r.points.push(p.intersectRect(a,o))})}function R(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(n.has(r,"x")){if(r.labelpos==="l"||r.labelpos==="r"){r.width-=r.labeloffset}switch(r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}}})}function N(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){r.points.reverse()}})}function L(e){n.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t);var a=e.node(r.borderTop);var i=e.node(r.borderBottom);var o=e.node(n.last(r.borderLeft));var s=e.node(n.last(r.borderRight));r.width=Math.abs(s.x-o.x);r.height=Math.abs(i.y-a.y);r.x=o.x+r.width/2;r.y=a.y+r.height/2}});n.forEach(e.nodes(),function(t){if(e.node(t).dummy==="border"){e.removeNode(t)}})}function z(e){n.forEach(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);if(!r.selfEdges){r.selfEdges=[]}r.selfEdges.push({e:t,label:e.edge(t)});e.removeEdge(t)}})}function j(e){var t=p.buildLayerMatrix(e);n.forEach(t,function(t){var r=0;n.forEach(t,function(t,a){var i=e.node(t);i.order=a+r;n.forEach(i.selfEdges,function(t){p.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:a+ ++r,e:t.e,label:t.label},"_se")});delete i.selfEdges})})}function V(e){n.forEach(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v);var a=n.x+n.width/2;var i=n.y;var o=r.x-a;var s=n.height/2;e.setEdge(r.e,r.label);e.removeNode(t);r.label.points=[{x:a+2*o/3,y:i-s},{x:a+5*o/6,y:i-s},{x:a+o,y:i},{x:a+5*o/6,y:i+s},{x:a+2*o/3,y:i+s}];r.label.x=r.x;r.label.y=r.y}})}function F(e,t){return n.mapValues(n.pick(e,t),Number)}function G(e){var t={};n.forEach(e,function(e,r){t[r.toLowerCase()]=e});return t}},(e,t,r)=>{var n;if(true){try{n={cloneDeep:r(1348),constant:r(1244),defaults:r(1349),each:r(1245),filter:r(1254),find:r(1351),flatten:r(1359),forEach:r(1246),forIn:r(1360),has:r(1293),isUndefined:r(1296),last:r(1361),map:r(1297),mapValues:r(1362),max:r(1363),merge:r(1366),min:r(1374),minBy:r(1376),now:r(1377),pick:r(1378),range:r(1383),reduce:r(1299),sortBy:r(1386),uniqueId:r(1391),values:r(1328),zipObject:r(1392)}}catch(e){}}if(!n){n=window._}e.exports=n},(e,t,r)=>{var n=r(1137);var a=1,i=4;function o(e){return n(e,a|i)}e.exports=o},(e,t,r)=>{var n=r(1312),a=r(1143),i=r(1350),o=r(1209);var s=Object.prototype;var u=s.hasOwnProperty;var l=n(function(e,t){e=Object(e);var r=-1;var n=t.length;var l=n>2?t[2]:undefined;if(l&&i(t[0],t[1],l)){n=1}while(++r<n){var f=t[r];var c=o(f);var v=-1;var d=c.length;while(++v<d){var h=c[v];var p=e[h];if(p===undefined||a(p,s[h])&&!u.call(e,h)){e[h]=f[h]}}}return e});e.exports=l},(e,t,r)=>{var n=r(1143),a=r(1207),i=r(1197),o=r(1162);function s(e,t,r){if(!o(r)){return false}var s=typeof t;if(s=="number"?a(r)&&i(t,r.length):s=="string"&&t in r){return n(r[t],e)}return false}e.exports=s},(e,t,r)=>{var n=r(1352),a=r(1353);var i=n(a);e.exports=i},(e,t,r)=>{var n=r(1256),a=r(1207),i=r(1188);function o(e){return function(t,r,o){var s=Object(t);if(!a(t)){var u=n(r,3);t=i(t);r=function(e){return u(s[e],e,s)}}var l=e(t,r,o);return l>-1?s[u?t[l]:l]:undefined}}e.exports=o},(e,t,r)=>{var n=r(1321),a=r(1256),i=r(1354);var o=Math.max;function s(e,t,r){var s=e==null?0:e.length;if(!s){return-1}var u=r==null?0:i(r);if(u<0){u=o(s+u,0)}return n(e,a(t,3),u)}e.exports=s},(e,t,r)=>{var n=r(1355);function a(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}e.exports=a},(e,t,r)=>{var n=r(1356);var a=1/0,i=17976931348623157e292;function o(e){if(!e){return e===0?e:0}e=n(e);if(e===a||e===-a){var t=e<0?-1:1;return t*i}return e===e?e:0}e.exports=o},(e,t,r)=>{var n=r(1357),a=r(1162),i=r(1279);var o=0/0;var s=/^[-+]0x[0-9a-f]+$/i;var u=/^0b[01]+$/i;var l=/^0o[0-7]+$/i;var f=parseInt;function c(e){if(typeof e=="number"){return e}if(i(e)){return o}if(a(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=a(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=n(e);var r=u.test(e);return r||l.test(e)?f(e.slice(2),r?2:8):s.test(e)?o:+e}e.exports=c},(e,t,r)=>{var n=r(1358);var a=/^\s+/;function i(e){return e?e.slice(0,n(e)+1).replace(a,""):e}e.exports=i},e=>{var t=/\s/;function r(e){var r=e.length;while(r--&&t.test(e.charAt(r))){}return r}e.exports=r},(e,t,r)=>{var n=r(1310);function a(e){var t=e==null?0:e.length;return t?n(e,1):[]}e.exports=a},(e,t,r)=>{var n=r(1249),a=r(1252),i=r(1209);function o(e,t){return e==null?e:n(e,a(t),i)}e.exports=o},e=>{function t(e){var t=e==null?0:e.length;return t?e[t-1]:undefined}e.exports=t},(e,t,r)=>{var n=r(1184),a=r(1248),i=r(1256);function o(e,t){var r={};t=i(t,3);a(e,function(e,a,i){n(r,a,t(e,a,i))});return r}e.exports=o},(e,t,r)=>{var n=r(1364),a=r(1365),i=r(1253);function o(e){return e&&e.length?n(e,i,a):undefined}e.exports=o},(e,t,r)=>{var n=r(1279);function a(e,t,r){var a=-1,i=e.length;while(++a<i){var o=e[a],s=t(o);if(s!=null&&(u===undefined?s===s&&!n(s):r(s,u))){var u=s,l=o}}return l}e.exports=a},e=>{function t(e,t){return e>t}e.exports=t},(e,t,r)=>{var n=r(1367),a=r(1373);var i=a(function(e,t,r){n(e,t,r)});e.exports=i},(e,t,r)=>{var n=r(1138),a=r(1368),i=r(1249),o=r(1369),s=r(1162),u=r(1209),l=r(1371);function f(e,t,r,c,v){if(e===t){return}i(t,function(i,u){v||(v=new n);if(s(i)){o(e,t,u,r,f,c,v)}else{var d=c?c(l(e,u),i,u+"",e,t,v):undefined;if(d===undefined){d=i}a(e,u,d)}},u)}e.exports=f},(e,t,r)=>{var n=r(1184),a=r(1143);function i(e,t,r){if(r!==undefined&&!a(e[t],r)||r===undefined&&!(t in e)){n(e,t,r)}}e.exports=i},(e,t,r)=>{var n=r(1368),a=r(1212),i=r(1237),o=r(1213),s=r(1238),u=r(1191),l=r(1194),f=r(1327),c=r(1195),v=r(1155),d=r(1162),h=r(1370),p=r(1198),g=r(1371),y=r(1372);function m(e,t,r,m,b,x,w){var E=g(e,r),k=g(t,r),_=w.get(k);if(_){n(e,r,_);return}var T=x?x(E,k,r+"",e,t,w):undefined;var C=T===undefined;if(C){var S=l(k),D=!S&&c(k),P=!S&&!D&&p(k);T=k;if(S||D||P){if(l(E)){T=E}else if(f(E)){T=o(E)}else if(D){C=false;T=a(k,true)}else if(P){C=false;T=i(k,true)}else{T=[]}}else if(h(k)||u(k)){T=E;if(u(E)){T=y(E)}else if(!d(E)||v(E)){T=s(k)}}else{C=false}}if(C){w.set(k,T);b(T,k,m,x,w);w["delete"](k)}n(e,r,T)}e.exports=m},(e,t,r)=>{var n=r(1156),a=r(1221),i=r(1193);var o="[object Object]";var s=Function.prototype,u=Object.prototype;var l=s.toString;var f=u.hasOwnProperty;var c=l.call(Object);function v(e){if(!i(e)||n(e)!=o){return false}var t=a(e);if(t===null){return true}var r=f.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&l.call(r)==c}e.exports=v},e=>{function t(e,t){if(t==="constructor"&&typeof e[t]==="function"){return}if(t=="__proto__"){return}return e[t]}e.exports=t},(e,t,r)=>{var n=r(1187),a=r(1209);function i(e){return n(e,a(e))}e.exports=i},(e,t,r)=>{var n=r(1312),a=r(1350);function i(e){return n(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:undefined,s=i>2?r[2]:undefined;o=e.length>3&&typeof o=="function"?(i--,o):undefined;if(s&&a(r[0],r[1],s)){o=i<3?undefined:o;i=1}t=Object(t);while(++n<i){var u=r[n];if(u){e(t,u,n,o)}}return t})}e.exports=i},(e,t,r)=>{var n=r(1364),a=r(1375),i=r(1253);function o(e){return e&&e.length?n(e,i,a):undefined}e.exports=o},e=>{function t(e,t){return e<t}e.exports=t},(e,t,r)=>{var n=r(1364),a=r(1256),i=r(1375);function o(e,t){return e&&e.length?n(e,a(t,2),i):undefined}e.exports=o},(e,t,r)=>{var n=r(1158);var a=function(){return n.Date.now()};e.exports=a},(e,t,r)=>{var n=r(1379),a=r(1382);var i=a(function(e,t){return e==null?{}:n(e,t)});e.exports=i},(e,t,r)=>{var n=r(1380),a=r(1287);function i(e,t){return n(e,t,function(t,r){return a(e,r)})}e.exports=i},(e,t,r)=>{var n=r(1276),a=r(1381),i=r(1277);function o(e,t,r){var o=-1,s=t.length,u={};while(++o<s){var l=t[o],f=n(e,l);if(r(f,l)){a(u,i(l,e),f)}}return u}e.exports=o},(e,t,r)=>{var n=r(1183),a=r(1277),i=r(1197),o=r(1162),s=r(1286);function u(e,t,r,u){if(!o(e)){return e}t=a(t,e);var l=-1,f=t.length,c=f-1,v=e;while(v!=null&&++l<f){var d=s(t[l]),h=r;if(d==="__proto__"||d==="constructor"||d==="prototype"){return e}if(l!=c){var p=v[d];h=u?u(p,d,v):undefined;if(h===undefined){h=o(p)?p:i(t[l+1])?[]:{}}}n(v,d,h);v=v[d]}return e}e.exports=u},(e,t,r)=>{var n=r(1359),a=r(1313),i=r(1315);function o(e){return i(a(e,undefined,n),e+"")}e.exports=o},(e,t,r)=>{var n=r(1384);var a=n();e.exports=a},(e,t,r)=>{var n=r(1385),a=r(1350),i=r(1355);function o(e){return function(t,r,o){if(o&&typeof o!="number"&&a(t,r,o)){r=o=undefined}t=i(t);if(r===undefined){r=t;t=0}else{r=i(r)}o=o===undefined?t<r?1:-1:i(o);return n(t,r,o,e)}}e.exports=o},e=>{var t=Math.ceil,r=Math.max;function n(e,n,a,i){var o=-1,s=r(t((n-e)/(a||1)),0),u=Array(s);while(s--){u[i?s:++o]=e;e+=a}return u}e.exports=n},(e,t,r)=>{var n=r(1310),a=r(1387),i=r(1312),o=r(1350);var s=i(function(e,t){if(e==null){return[]}var r=t.length;if(r>1&&o(e,t[0],t[1])){t=[]}else if(r>2&&o(t[0],t[1],t[2])){t=[t[0]]}return a(e,n(t,1),[])});e.exports=s},(e,t,r)=>{var n=r(1285),a=r(1276),i=r(1256),o=r(1298),s=r(1388),u=r(1201),l=r(1389),f=r(1253),c=r(1194);function v(e,t,r){if(t.length){t=n(t,function(e){if(c(e)){return function(t){return a(t,e.length===1?e[0]:e)}}return e})}else{t=[f]}var v=-1;t=n(t,u(i));var d=o(e,function(e,r,a){var i=n(t,function(t){return t(e)});return{criteria:i,index:++v,value:e}});return s(d,function(e,t){return l(e,t,r)})}e.exports=v},e=>{function t(e,t){var r=e.length;e.sort(t);while(r--){e[r]=e[r].value}return e}e.exports=t},(e,t,r)=>{var n=r(1390);function a(e,t,r){var a=-1,i=e.criteria,o=t.criteria,s=i.length,u=r.length;while(++a<s){var l=n(i[a],o[a]);if(l){if(a>=u){return l}var f=r[a];return l*(f=="desc"?-1:1)}}return e.index-t.index}e.exports=a},(e,t,r)=>{var n=r(1279);function a(e,t){if(e!==t){var r=e!==undefined,a=e===null,i=e===e,o=n(e);var s=t!==undefined,u=t===null,l=t===t,f=n(t);if(!u&&!f&&!o&&e>t||o&&s&&l&&!u&&!f||a&&s&&l||!r&&l||!i){return 1}if(!a&&!o&&!f&&e<t||f&&r&&i&&!a&&!o||u&&r&&i||!s&&i||!l){return-1}}return 0}e.exports=a},(e,t,r)=>{var n=r(1283);var a=0;function i(e){var t=++a;return n(e)+t}e.exports=i},(e,t,r)=>{var n=r(1183),a=r(1393);function i(e,t){return a(e||[],t||[],n)}e.exports=i},e=>{function t(e,t,r){var n=-1,a=e.length,i=t.length,o={};while(++n<a){var s=n<i?t[n]:undefined;r(o,e[n],s)}return o}e.exports=t},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1395);e.exports={run:i,undo:s};function i(e){var t=e.graph().acyclicer==="greedy"?a(e,r(e)):o(e);n.forEach(t,function(t){var r=e.edge(t);e.removeEdge(t);r.forwardName=t.name;r.reversed=true;e.setEdge(t.w,t.v,r,n.uniqueId("rev"))});function r(e){return function(t){return e.edge(t).weight}}}function o(e){var t=[];var r={};var a={};function i(o){if(n.has(a,o)){return}a[o]=true;r[o]=true;n.forEach(e.outEdges(o),function(e){if(n.has(r,e.w)){t.push(e)}else{i(e.w)}});delete r[o]}n.forEach(e.nodes(),i);return t}function s(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed;delete r.forwardName;e.setEdge(t.w,t.v,r,n)}})}},(e,t,r)=>{var n=r(1347);var a=r(1131).Graph;var i=r(1396);e.exports=s;var o=n.constant(1);function s(e,t){if(e.nodeCount()<=1){return[]}var r=f(e,t||o);var a=u(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(a,function(t){return e.outEdges(t.v,t.w)}),true)}function u(e,t,r){var n=[];var a=t[t.length-1];var i=t[0];var o;while(e.nodeCount()){while(o=i.dequeue()){l(e,t,r,o)}while(o=a.dequeue()){l(e,t,r,o)}if(e.nodeCount()){for(var s=t.length-2;s>0;--s){o=t[s].dequeue();if(o){n=n.concat(l(e,t,r,o,true));break}}}}return n}function l(e,t,r,a,i){var o=i?[]:undefined;n.forEach(e.inEdges(a.v),function(n){var a=e.edge(n);var s=e.node(n.v);if(i){o.push({v:n.v,w:n.w})}s.out-=a;c(t,r,s)});n.forEach(e.outEdges(a.v),function(n){var a=e.edge(n);var i=n.w;var o=e.node(i);o["in"]-=a;c(t,r,o)});e.removeNode(a.v);return o}function f(e,t){var r=new a;var o=0;var s=0;n.forEach(e.nodes(),function(e){r.setNode(e,{v:e,in:0,out:0})});n.forEach(e.edges(),function(e){var n=r.edge(e.v,e.w)||0;var a=t(e);var i=n+a;r.setEdge(e.v,e.w,i);s=Math.max(s,r.node(e.v).out+=a);o=Math.max(o,r.node(e.w)["in"]+=a)});var u=n.range(s+o+3).map(function(){return new i});var l=o+1;n.forEach(r.nodes(),function(e){c(u,l,r.node(e))});return{graph:r,buckets:u,zeroIdx:l}}function c(e,t,r){if(!r.out){e[0].enqueue(r)}else if(!r["in"]){e[e.length-1].enqueue(r)}else{e[r.out-r["in"]+t].enqueue(r)}}},e=>{e.exports=t;function t(){var e={};e._next=e._prev=e;this._sentinel=e}t.prototype.dequeue=function(){var e=this._sentinel;var t=e._prev;if(t!==e){r(t);return t}};t.prototype.enqueue=function(e){var t=this._sentinel;if(e._prev&&e._next){r(e)}e._next=t._next;t._next._prev=e;t._next=e;e._prev=t};t.prototype.toString=function(){var e=[];var t=this._sentinel;var r=t._prev;while(r!==t){e.push(JSON.stringify(r,n));r=r._prev}return"["+e.join(", ")+"]"};function r(e){e._prev._next=e._next;e._next._prev=e._prev;delete e._next;delete e._prev}function n(e,t){if(e!=="_next"&&e!=="_prev"){return t}}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1398);e.exports={run:i,undo:s};function i(e){e.graph().dummyChains=[];n.forEach(e.edges(),function(t){o(e,t)})}function o(e,t){var r=t.v;var n=e.node(r).rank;var i=t.w;var o=e.node(i).rank;var s=t.name;var u=e.edge(t);var l=u.labelRank;if(o===n+1)return;e.removeEdge(t);var f,c,v;for(v=0,++n;n<o;++v,++n){u.points=[];c={width:0,height:0,edgeLabel:u,edgeObj:t,rank:n};f=a.addDummyNode(e,"edge",c,"_d");if(n===l){c.width=u.width;c.height=u.height;c.dummy="edge-label";c.labelpos=u.labelpos}e.setEdge(r,f,{weight:u.weight},s);if(v===0){e.graph().dummyChains.push(f)}r=f}e.setEdge(r,i,{weight:u.weight},s)}function s(e){n.forEach(e.graph().dummyChains,function(t){var r=e.node(t);var n=r.edgeLabel;var a;e.setEdge(r.edgeObj,n);while(r.dummy){a=e.successors(t)[0];e.removeNode(t);n.points.push({x:r.x,y:r.y});if(r.dummy==="edge-label"){n.x=r.x;n.y=r.y;n.width=r.width;n.height=r.height}t=a;r=e.node(t)}})}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1131).Graph;e.exports={addDummyNode:i,simplify:o,asNonCompoundGraph:s,successorWeights:u,predecessorWeights:l,intersectRect:f,buildLayerMatrix:c,normalizeRanks:v,removeEmptyRanks:d,addBorderNode:h,maxRank:p,partition:g,time:y,notime:m};function i(e,t,r,a){var i;do{i=n.uniqueId(a)}while(e.hasNode(i));r.dummy=t;e.setNode(i,r);return i}function o(e){var t=(new a).setGraph(e.graph());n.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))});n.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1};var a=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+a.weight,minlen:Math.max(n.minlen,a.minlen)})});return t}function s(e){var t=new a({multigraph:e.isMultigraph()}).setGraph(e.graph());n.forEach(e.nodes(),function(r){if(!e.children(r).length){t.setNode(r,e.node(r))}});n.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))});return t}function u(e){var t=n.map(e.nodes(),function(t){var r={};n.forEach(e.outEdges(t),function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight});return r});return n.zipObject(e.nodes(),t)}function l(e){var t=n.map(e.nodes(),function(t){var r={};n.forEach(e.inEdges(t),function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight});return r});return n.zipObject(e.nodes(),t)}function f(e,t){var r=e.x;var n=e.y;var a=t.x-r;var i=t.y-n;var o=e.width/2;var s=e.height/2;if(!a&&!i){throw new Error("Not possible to find intersection inside of the rectangle")}var u,l;if(Math.abs(i)*o>Math.abs(a)*s){if(i<0){s=-s}u=s*a/i;l=s}else{if(a<0){o=-o}u=o;l=o*i/a}return{x:r+u,y:n+l}}function c(e){var t=n.map(n.range(p(e)+1),function(){return[]});n.forEach(e.nodes(),function(r){var a=e.node(r);var i=a.rank;if(!n.isUndefined(i)){t[i][a.order]=r}});return t}function v(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));n.forEach(e.nodes(),function(r){var a=e.node(r);if(n.has(a,"rank")){a.rank-=t}})}function d(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));var r=[];n.forEach(e.nodes(),function(n){var a=e.node(n).rank-t;if(!r[a]){r[a]=[]}r[a].push(n)});var a=0;var i=e.graph().nodeRankFactor;n.forEach(r,function(t,r){if(n.isUndefined(t)&&r%i!==0){--a}else if(a){n.forEach(t,function(t){e.node(t).rank+=a})}})}function h(e,t,r,n){var a={width:0,height:0};if(arguments.length>=4){a.rank=r;a.order=n}return i(e,"border",a,t)}function p(e){return n.max(n.map(e.nodes(),function(t){var r=e.node(t).rank;if(!n.isUndefined(r)){return r}}))}function g(e,t){var r={lhs:[],rhs:[]};n.forEach(e,function(e){if(t(e)){r.lhs.push(e)}else{r.rhs.push(e)}});return r}function y(e,t){var r=n.now();try{return t()}finally{console.log(e+" time: "+(n.now()-r)+"ms")}}function m(e,t){return t()}},(e,t,r)=>{"use strict";var n=r(1400);var a=n.longestPath;var i=r(1401);var o=r(1402);e.exports=s;function s(e){switch(e.graph().ranker){case"network-simplex":f(e);break;case"tight-tree":l(e);break;case"longest-path":u(e);break;default:f(e)}}var u=a;function l(e){a(e);i(e)}function f(e){o(e)}},(e,t,r)=>{"use strict";var n=r(1347);e.exports={longestPath:a,slack:i};function a(e){var t={};function r(a){var i=e.node(a);if(n.has(t,a)){return i.rank}t[a]=true;var o=n.min(n.map(e.outEdges(a),function(t){return r(t.w)-e.edge(t).minlen}));if(o===Number.POSITIVE_INFINITY||o===undefined||o===null){o=0}return i.rank=o}n.forEach(e.sources(),r)}function i(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1131).Graph;var i=r(1400).slack;e.exports=o;function o(e){var t=new a({directed:false});var r=e.nodes()[0];var n=e.nodeCount();t.setNode(r,{});var o,f;while(s(t,e)<n){o=u(t,e);f=t.hasNode(o.v)?i(e,o):-i(e,o);l(t,e,f)}return t}function s(e,t){function r(a){n.forEach(t.nodeEdges(a),function(n){var o=n.v,s=a===o?n.w:o;if(!e.hasNode(s)&&!i(t,n)){e.setNode(s,{});e.setEdge(a,s,{});r(s)}})}n.forEach(e.nodes(),r);return e.nodeCount()}function u(e,t){return n.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w)){return i(t,r)}})}function l(e,t,r){n.forEach(e.nodes(),function(e){t.node(e).rank+=r})}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1401);var i=r(1400).slack;var o=r(1400).longestPath;var s=r(1131).alg.preorder;var u=r(1131).alg.postorder;var l=r(1398).simplify;e.exports=f;f.initLowLimValues=h;f.initCutValues=c;f.calcCutValue=d;f.leaveEdge=g;f.enterEdge=y;f.exchangeEdges=m;function f(e){e=l(e);o(e);var t=a(e);h(t);c(t,e);var r,n;while(r=g(t)){n=y(t,e,r);m(t,e,r,n)}}function c(e,t){var r=u(e,e.nodes());r=r.slice(0,r.length-1);n.forEach(r,function(r){v(e,t,r)})}function v(e,t,r){var n=e.node(r);var a=n.parent;e.edge(r,a).cutvalue=d(e,t,r)}function d(e,t,r){var a=e.node(r);var i=a.parent;var o=true;var s=t.edge(r,i);var u=0;if(!s){o=false;s=t.edge(i,r)}u=s.weight;n.forEach(t.nodeEdges(r),function(n){var a=n.v===r,s=a?n.w:n.v;if(s!==i){var l=a===o,f=t.edge(n).weight;u+=l?f:-f;if(x(e,r,s)){var c=e.edge(r,s).cutvalue;u+=l?-c:c}}});return u}function h(e,t){if(arguments.length<2){t=e.nodes()[0]}p(e,{},1,t)}function p(e,t,r,a,i){var o=r;var s=e.node(a);t[a]=true;n.forEach(e.neighbors(a),function(i){if(!n.has(t,i)){r=p(e,t,r,i,a)}});s.low=o;s.lim=r++;if(i){s.parent=i}else{delete s.parent}return r}function g(e){return n.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function y(e,t,r){var a=r.v;var o=r.w;if(!t.hasEdge(a,o)){a=r.w;o=r.v}var s=e.node(a);var u=e.node(o);var l=s;var f=false;if(s.lim>u.lim){l=u;f=true}var c=n.filter(t.edges(),function(t){return f===w(e,e.node(t.v),l)&&f!==w(e,e.node(t.w),l)});return n.minBy(c,function(e){return i(t,e)})}function m(e,t,r,n){var a=r.v;var i=r.w;e.removeEdge(a,i);e.setEdge(n.v,n.w,{});h(e);c(e,t);b(e,t)}function b(e,t){var r=n.find(e.nodes(),function(e){return!t.node(e).parent});var a=s(e,r);a=a.slice(1);n.forEach(a,function(r){var n=e.node(r).parent,a=t.edge(r,n),i=false;if(!a){a=t.edge(n,r);i=true}t.node(r).rank=t.node(n).rank+(i?a.minlen:-a.minlen)})}function x(e,t,r){return e.hasEdge(t,r)}function w(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}},(e,t,r)=>{var n=r(1347);e.exports=a;function a(e){var t=o(e);n.forEach(e.graph().dummyChains,function(r){var n=e.node(r);var a=n.edgeObj;var o=i(e,t,a.v,a.w);var s=o.path;var u=o.lca;var l=0;var f=s[l];var c=true;while(r!==a.w){n=e.node(r);if(c){while((f=s[l])!==u&&e.node(f).maxRank<n.rank){l++}if(f===u){c=false}}if(!c){while(l<s.length-1&&e.node(f=s[l+1]).minRank<=n.rank){l++}f=s[l]}e.setParent(r,f);r=e.successors(r)[0]}})}function i(e,t,r,n){var a=[];var i=[];var o=Math.min(t[r].low,t[n].low);var s=Math.max(t[r].lim,t[n].lim);var u;var l;u=r;do{u=e.parent(u);a.push(u)}while(u&&(t[u].low>o||s>t[u].lim));l=u;u=n;while((u=e.parent(u))!==l){i.push(u)}return{path:a.concat(i.reverse()),lca:l}}function o(e){var t={};var r=0;function a(i){var o=r;n.forEach(e.children(i),a);t[i]={low:o,lim:r++}}n.forEach(e.children(),a);return t}},(e,t,r)=>{var n=r(1347);var a=r(1398);e.exports={run:i,cleanup:l};function i(e){var t=a.addDummyNode(e,"root",{},"_root");var r=s(e);var i=n.max(n.values(r))-1;var l=2*i+1;e.graph().nestingRoot=t;n.forEach(e.edges(),function(t){e.edge(t).minlen*=l});var f=u(e)+1;n.forEach(e.children(),function(n){o(e,t,l,f,i,r,n)});e.graph().nodeRankFactor=l}function o(e,t,r,i,s,u,l){var f=e.children(l);if(!f.length){if(l!==t){e.setEdge(t,l,{weight:0,minlen:r})}return}var c=a.addBorderNode(e,"_bt");var v=a.addBorderNode(e,"_bb");var d=e.node(l);e.setParent(c,l);d.borderTop=c;e.setParent(v,l);d.borderBottom=v;n.forEach(f,function(n){o(e,t,r,i,s,u,n);var a=e.node(n);var f=a.borderTop?a.borderTop:n;var d=a.borderBottom?a.borderBottom:n;var h=a.borderTop?i:2*i;var p=f!==d?1:s-u[l]+1;e.setEdge(c,f,{weight:h,minlen:p,nestingEdge:true});e.setEdge(d,v,{weight:h,minlen:p,nestingEdge:true})});if(!e.parent(l)){e.setEdge(t,c,{weight:0,minlen:s+u[l]})}}function s(e){var t={};function r(a,i){var o=e.children(a);if(o&&o.length){n.forEach(o,function(e){r(e,i+1)})}t[a]=i}n.forEach(e.children(),function(e){r(e,1)});return t}function u(e){return n.reduce(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function l(e){var t=e.graph();e.removeNode(t.nestingRoot);delete t.nestingRoot;n.forEach(e.edges(),function(t){var r=e.edge(t);if(r.nestingEdge){e.removeEdge(t)}})}},(e,t,r)=>{var n=r(1347);var a=r(1398);e.exports=i;function i(e){function t(r){var a=e.children(r);var i=e.node(r);if(a.length){n.forEach(a,t)}if(n.has(i,"minRank")){i.borderLeft=[];i.borderRight=[];for(var s=i.minRank,u=i.maxRank+1;s<u;++s){o(e,"borderLeft","_bl",r,i,s);o(e,"borderRight","_br",r,i,s)}}}n.forEach(e.children(),t)}function o(e,t,r,n,i,o){var s={width:0,height:0,rank:o,borderType:t};var u=i[t][o-1];var l=a.addDummyNode(e,"border",s,r);i[t][o]=l;e.setParent(l,n);if(u){e.setEdge(u,l,{weight:1})}}},(e,t,r)=>{"use strict";var n=r(1347);e.exports={adjust:a,undo:i};function a(e){var t=e.graph().rankdir.toLowerCase();if(t==="lr"||t==="rl"){o(e)}}function i(e){var t=e.graph().rankdir.toLowerCase();if(t==="bt"||t==="rl"){u(e)}if(t==="lr"||t==="rl"){f(e);o(e)}}function o(e){n.forEach(e.nodes(),function(t){s(e.node(t))});n.forEach(e.edges(),function(t){s(e.edge(t))})}function s(e){var t=e.width;e.width=e.height;e.height=t}function u(e){n.forEach(e.nodes(),function(t){l(e.node(t))});n.forEach(e.edges(),function(t){var r=e.edge(t);n.forEach(r.points,l);if(n.has(r,"y")){l(r)}})}function l(e){e.y=-e.y}function f(e){n.forEach(e.nodes(),function(t){c(e.node(t))});n.forEach(e.edges(),function(t){var r=e.edge(t);n.forEach(r.points,c);if(n.has(r,"x")){c(r)}})}function c(e){var t=e.x;e.x=e.y;e.y=t}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1408);var i=r(1409);var o=r(1410);var s=r(1414);var u=r(1415);var l=r(1131).Graph;var f=r(1398);e.exports=c;function c(e){var t=f.maxRank(e),r=v(e,n.range(1,t+1),"inEdges"),o=v(e,n.range(t-1,-1,-1),"outEdges");var s=a(e);h(e,s);var u=Number.POSITIVE_INFINITY,l;for(var c=0,p=0;p<4;++c,++p){d(c%2?r:o,c%4>=2);s=f.buildLayerMatrix(e);var g=i(e,s);if(g<u){p=0;l=n.cloneDeep(s);u=g}}h(e,l)}function v(e,t,r){return n.map(t,function(t){return s(e,t,r)})}function d(e,t){var r=new l;n.forEach(e,function(e){var a=e.graph().root;var i=o(e,a,r,t);n.forEach(i.vs,function(t,r){e.node(t).order=r});u(e,r,i.vs)})}function h(e,t){n.forEach(t,function(t){n.forEach(t,function(t,r){e.node(t).order=r})})}},(e,t,r)=>{"use strict";var n=r(1347);e.exports=a;function a(e){var t={};var r=n.filter(e.nodes(),function(t){return!e.children(t).length});var a=n.max(n.map(r,function(t){return e.node(t).rank}));var i=n.map(n.range(a+1),function(){return[]});function o(r){if(n.has(t,r))return;t[r]=true;var a=e.node(r);i[a.rank].push(r);n.forEach(e.successors(r),o)}var s=n.sortBy(r,function(t){return e.node(t).rank});n.forEach(s,o);return i}},(e,t,r)=>{"use strict";var n=r(1347);e.exports=a;function a(e,t){var r=0;for(var n=1;n<t.length;++n){r+=i(e,t[n-1],t[n])}return r}function i(e,t,r){var a=n.zipObject(r,n.map(r,function(e,t){return t}));var i=n.flatten(n.map(t,function(t){return n.sortBy(n.map(e.outEdges(t),function(t){return{pos:a[t.w],weight:e.edge(t).weight}}),"pos")}),true);var o=1;while(o<r.length)o<<=1;var s=2*o-1;o-=1;var u=n.map(new Array(s),function(){return 0});var l=0;n.forEach(i.forEach(function(e){var t=e.pos+o;u[t]+=e.weight;var r=0;while(t>0){if(t%2){r+=u[t+1]}t=t-1>>1;u[t]+=e.weight}l+=e.weight*r}));return l}},(e,t,r)=>{var n=r(1347);var a=r(1411);var i=r(1412);var o=r(1413);e.exports=s;function s(e,t,r,f){var c=e.children(t);var v=e.node(t);var d=v?v.borderLeft:undefined;var h=v?v.borderRight:undefined;var p={};if(d){c=n.filter(c,function(e){return e!==d&&e!==h})}var g=a(e,c);n.forEach(g,function(t){if(e.children(t.v).length){var a=s(e,t.v,r,f);p[t.v]=a;if(n.has(a,"barycenter")){l(t,a)}}});var y=i(g,r);u(y,p);var m=o(y,f);if(d){m.vs=n.flatten([d,m.vs,h],true);if(e.predecessors(d).length){var b=e.node(e.predecessors(d)[0]),x=e.node(e.predecessors(h)[0]);if(!n.has(m,"barycenter")){m.barycenter=0;m.weight=0}m.barycenter=(m.barycenter*m.weight+b.order+x.order)/(m.weight+2);m.weight+=2}}return m}function u(e,t){n.forEach(e,function(e){e.vs=n.flatten(e.vs.map(function(e){if(t[e]){return t[e].vs}return e}),true)})}function l(e,t){if(!n.isUndefined(e.barycenter)){e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight);e.weight+=t.weight}else{e.barycenter=t.barycenter;e.weight=t.weight}}},(e,t,r)=>{var n=r(1347);e.exports=a;function a(e,t){return n.map(t,function(t){var r=e.inEdges(t);if(!r.length){return{v:t}}else{var a=n.reduce(r,function(t,r){var n=e.edge(r),a=e.node(r.v);return{sum:t.sum+n.weight*a.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:a.sum/a.weight,weight:a.weight}}})}},(e,t,r)=>{"use strict";var n=r(1347);e.exports=a;function a(e,t){var r={};n.forEach(e,function(e,t){var a=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};if(!n.isUndefined(e.barycenter)){a.barycenter=e.barycenter;a.weight=e.weight}});n.forEach(t.edges(),function(e){var t=r[e.v];var a=r[e.w];if(!n.isUndefined(t)&&!n.isUndefined(a)){a.indegree++;t.out.push(r[e.w])}});var a=n.filter(r,function(e){return!e.indegree});return i(a)}function i(e){var t=[];function r(e){return function(t){if(t.merged){return}if(n.isUndefined(t.barycenter)||n.isUndefined(e.barycenter)||t.barycenter>=e.barycenter){o(e,t)}}}function a(t){return function(r){r["in"].push(t);if(--r.indegree===0){e.push(r)}}}while(e.length){var i=e.pop();t.push(i);n.forEach(i["in"].reverse(),r(i));n.forEach(i.out,a(i))}return n.map(n.filter(t,function(e){return!e.merged}),function(e){return n.pick(e,["vs","i","barycenter","weight"])})}function o(e,t){var r=0;var n=0;if(e.weight){r+=e.barycenter*e.weight;n+=e.weight}if(t.weight){r+=t.barycenter*t.weight;n+=t.weight}e.vs=t.vs.concat(e.vs);e.barycenter=r/n;e.weight=n;e.i=Math.min(t.i,e.i);t.merged=true}},(e,t,r)=>{var n=r(1347);var a=r(1398);e.exports=i;function i(e,t){var r=a.partition(e,function(e){return n.has(e,"barycenter")});var i=r.lhs,u=n.sortBy(r.rhs,function(e){return-e.i}),l=[],f=0,c=0,v=0;i.sort(s(!!t));v=o(l,u,v);n.forEach(i,function(e){v+=e.vs.length;l.push(e.vs);f+=e.barycenter*e.weight;c+=e.weight;v=o(l,u,v)});var d={vs:n.flatten(l,true)};if(c){d.barycenter=f/c;d.weight=c}return d}function o(e,t,r){var a;while(t.length&&(a=n.last(t)).i<=r){t.pop();e.push(a.vs);r++}return r}function s(e){return function(t,r){if(t.barycenter<r.barycenter){return-1}else if(t.barycenter>r.barycenter){return 1}return!e?t.i-r.i:r.i-t.i}}},(e,t,r)=>{var n=r(1347);var a=r(1131).Graph;e.exports=i;function i(e,t,r){var i=o(e),s=new a({compound:true}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});n.forEach(e.nodes(),function(a){var o=e.node(a),u=e.parent(a);if(o.rank===t||o.minRank<=t&&t<=o.maxRank){s.setNode(a);s.setParent(a,u||i);n.forEach(e[r](a),function(t){var r=t.v===a?t.w:t.v,i=s.edge(r,a),o=!n.isUndefined(i)?i.weight:0;s.setEdge(r,a,{weight:e.edge(t).weight+o})});if(n.has(o,"minRank")){s.setNode(a,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]})}}});return s}function o(e){var t;while(e.hasNode(t=n.uniqueId("_root")));return t}},(e,t,r)=>{var n=r(1347);e.exports=a;function a(e,t,r){var a={},i;n.forEach(r,function(r){var n=e.parent(r),o,s;while(n){o=e.parent(n);if(o){s=a[o];a[o]=n}else{s=i;i=n}if(s&&s!==n){t.setEdge(s,n);return}n=o}})}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1398);var i=r(1417).positionX;e.exports=o;function o(e){e=a.asNonCompoundGraph(e);s(e);n.forEach(i(e),function(t,r){e.node(r).x=t})}function s(e){var t=a.buildLayerMatrix(e);var r=e.graph().ranksep;var i=0;n.forEach(t,function(t){var a=n.max(n.map(t,function(t){return e.node(t).height}));n.forEach(t,function(t){e.node(t).y=i+a/2});i+=a+r})}},(e,t,r)=>{"use strict";var n=r(1347);var a=r(1131).Graph;var i=r(1398);e.exports={positionX:y,findType1Conflicts:o,findType2Conflicts:s,addConflict:l,hasConflict:f,verticalAlignment:c,horizontalCompaction:v,alignCoordinates:p,findSmallestWidthAlignment:h,balance:g};function o(e,t){var r={};function a(t,a){var i=0,o=0,s=t.length,f=n.last(a);n.forEach(a,function(t,c){var v=u(e,t),d=v?e.node(v).order:s;if(v||t===f){n.forEach(a.slice(o,c+1),function(t){n.forEach(e.predecessors(t),function(n){var a=e.node(n),o=a.order;if((o<i||d<o)&&!(a.dummy&&e.node(t).dummy)){l(r,n,t)}})});o=c+1;i=d}});return a}n.reduce(t,a);return r}function s(e,t){var r={};function a(t,a,i,o,s){var u;n.forEach(n.range(a,i),function(a){u=t[a];if(e.node(u).dummy){n.forEach(e.predecessors(u),function(t){var n=e.node(t);if(n.dummy&&(n.order<o||n.order>s)){l(r,t,u)}})}})}function i(t,r){var i=-1,o,s=0;n.forEach(r,function(n,u){if(e.node(n).dummy==="border"){var l=e.predecessors(n);if(l.length){o=e.node(l[0]).order;a(r,s,u,i,o);s=u;i=o}}a(r,s,r.length,o,t.length)});return r}n.reduce(t,i);return r}function u(e,t){if(e.node(t).dummy){return n.find(e.predecessors(t),function(t){return e.node(t).dummy})}}function l(e,t,r){if(t>r){var n=t;t=r;r=n}var a=e[t];if(!a){e[t]=a={}}a[r]=true}function f(e,t,r){if(t>r){var a=t;t=r;r=a}return n.has(e[t],r)}function c(e,t,r,a){var i={},o={},s={};n.forEach(t,function(e){n.forEach(e,function(e,t){i[e]=e;o[e]=e;s[e]=t})});n.forEach(t,function(e){var t=-1;n.forEach(e,function(e){var u=a(e);if(u.length){u=n.sortBy(u,function(e){return s[e]});var l=(u.length-1)/2;for(var c=Math.floor(l),v=Math.ceil(l);c<=v;++c){var d=u[c];if(o[e]===e&&t<s[d]&&!f(r,e,d)){o[d]=e;o[e]=i[e]=i[d];t=s[d]}}}})});return{root:i,align:o}}function v(e,t,r,a,i){var o={},s=d(e,t,r,i),u=i?"borderLeft":"borderRight";function l(e,t){var r=s.nodes();var n=r.pop();var a={};while(n){if(a[n]){e(n)}else{a[n]=true;r.push(n);r=r.concat(t(n))}n=r.pop()}}function f(e){o[e]=s.inEdges(e).reduce(function(e,t){return Math.max(e,o[t.v]+s.edge(t))},0)}function c(t){var r=s.outEdges(t).reduce(function(e,t){return Math.min(e,o[t.w]-s.edge(t))},Number.POSITIVE_INFINITY);var n=e.node(t);if(r!==Number.POSITIVE_INFINITY&&n.borderType!==u){o[t]=Math.max(o[t],r)}}l(f,s.predecessors.bind(s));l(c,s.successors.bind(s));n.forEach(a,function(e){o[e]=o[r[e]]});return o}function d(e,t,r,i){var o=new a,s=e.graph(),u=m(s.nodesep,s.edgesep,i);n.forEach(t,function(t){var a;n.forEach(t,function(t){var n=r[t];o.setNode(n);if(a){var i=r[a],s=o.edge(i,n);o.setEdge(i,n,Math.max(u(e,t,a),s||0))}a=t})});return o}function h(e,t){return n.minBy(n.values(t),function(t){var r=Number.NEGATIVE_INFINITY;var a=Number.POSITIVE_INFINITY;n.forIn(t,function(t,n){var i=b(e,n)/2;r=Math.max(t+i,r);a=Math.min(t-i,a)});return r-a})}function p(e,t){var r=n.values(t),a=n.min(r),i=n.max(r);n.forEach(["u","d"],function(r){n.forEach(["l","r"],function(o){var s=r+o,u=e[s],l;if(u===t)return;var f=n.values(u);l=o==="l"?a-n.min(f):i-n.max(f);if(l){e[s]=n.mapValues(u,function(e){return e+l})}})})}function g(e,t){return n.mapValues(e.ul,function(r,a){if(t){return e[t.toLowerCase()][a]}else{var i=n.sortBy(n.map(e,a));return(i[1]+i[2])/2}})}function y(e){var t=i.buildLayerMatrix(e);var r=n.merge(o(e,t),s(e,t));var a={};var u;n.forEach(["u","d"],function(i){u=i==="u"?t:n.values(t).reverse();n.forEach(["l","r"],function(t){if(t==="r"){u=n.map(u,function(e){return n.values(e).reverse()})}var o=(i==="u"?e.predecessors:e.successors).bind(e);var s=c(e,u,r,o);var l=v(e,u,s.root,s.align,t==="r");if(t==="r"){l=n.mapValues(l,function(e){return-e})}a[i+t]=l})});var l=h(e,a);p(a,l);return g(a,e.graph().align)}function m(e,t,r){return function(a,i,o){var s=a.node(i);var u=a.node(o);var l=0;var f;l+=s.width/2;if(n.has(s,"labelpos")){switch(s.labelpos.toLowerCase()){case"l":f=-s.width/2;break;case"r":f=s.width/2;break}}if(f){l+=r?f:-f}f=0;l+=(s.dummy?t:e)/2;l+=(u.dummy?t:e)/2;l+=u.width/2;if(n.has(u,"labelpos")){switch(u.labelpos.toLowerCase()){case"l":f=u.width/2;break;case"r":f=-u.width/2;break}}if(f){l+=r?f:-f}f=0;return l}}function b(e,t){return e.node(t).width}},(e,t,r)=>{var n=r(1347);var a=r(1398);var i=r(1131).Graph;e.exports={debugOrdering:o};function o(e){var t=a.buildLayerMatrix(e);var r=new i({compound:true,multigraph:true}).setGraph({});n.forEach(e.nodes(),function(t){r.setNode(t,{label:t});r.setParent(t,"layer"+e.node(t).rank)});n.forEach(e.edges(),function(e){r.setEdge(e.v,e.w,{},e.name)});n.forEach(t,function(e,t){var a="layer"+t;r.setNode(a,{rank:"same"});n.reduce(e,function(e,t){r.setEdge(e,t,{style:"invis"});return t})});return r}},e=>{e.exports="0.8.5"},(e,t,r)=>{"use strict";var n;(function(){var a=function e(t){if(!t){return}var r=function e(t){var r=this;var n=r.container();var a=document.createElement("canvas");n.appendChild(a);var i={zIndex:1,pixelRatio:"auto"};var o=Object.assign({},i,t);if(o.pixelRatio==="auto"){o.pixelRatio=window.devicePixelRatio||1}function s(){var e=n.offsetWidth;var t=n.offsetHeight;var i=e*o.pixelRatio;var s=t*o.pixelRatio;a.width=i;a.height=s;a.style.width=e+"px";a.style.height=t+"px";r.trigger("cyCanvas.resize")}r.on("resize",function(){s()});a.setAttribute("style","position:absolute; top:0; left:0; z-index:"+o.zIndex+";");s();return{getCanvas:function e(){return a},clear:function e(t){var n=r.width();var a=r.height();t.save();t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,n*o.pixelRatio,a*o.pixelRatio);t.restore()},resetTransform:function e(t){t.setTransform(1,0,0,1,0,0)},setTransform:function e(t){var n=r.pan();var a=r.zoom();t.setTransform(1,0,0,1,0,0);t.translate(n.x*o.pixelRatio,n.y*o.pixelRatio);t.scale(a*o.pixelRatio,a*o.pixelRatio)}}};t("core","cyCanvas",r)};if(true&&e.exports){e.exports=function(e){a(e)}}if(true){!(n=function(){return a}.call(t,r,t,e),n!==undefined&&(e.exports=n))}if(typeof cytoscape!=="undefined"){a(cytoscape)}})()}]);var t={};function r(n){var a=t[n];if(a!==undefined){return a.exports}var i=t[n]={id:n,loaded:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}(()=>{r.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()})();(()=>{r.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();(()=>{r.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();var n={};(()=>{
/**
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @copyright 2003-2014 by the INDEPNET Development Team.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */
window.cytoscape=r(1113);r(1114);r(1116);r(1117);r(1129);r(1420)})()})();