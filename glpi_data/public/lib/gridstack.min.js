(()=>{"use strict";var e={1058:(e,t,i)=>{i.r(t);i.d(t,{DDGridStack:()=>r.DDGridStack,GridStack:()=>d,GridStackEngine:()=>s.GridStackEngine,Utils:()=>n.Utils,gridDefaults:()=>o.gridDefaults,obsolete:()=>n.obsolete,obsoleteAttr:()=>n.obsoleteAttr,obsoleteOpts:()=>n.obsoleteOpts,obsoleteOptsDel:()=>n.obsoleteOptsDel});var s=i(1059);var n=i(1060);var o=i(1061);var r=i(1062);var l=i(1067);var a=i(1063);
/*!
 * GridStack 12.2.2
 * https://gridstackjs.com/
 *
 * Copyright (c) 2021-2024  Alain Dumesny
 * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE
 */const h=new r.DDGridStack;class d{static init(e={},t=".grid-stack"){if(typeof document==="undefined")return null;const i=d.getGridElement(t);if(!i){if(typeof t==="string"){console.error('GridStack.initAll() no grid was found with selector "'+t+'" - element missing or wrong selector ?'+'\nNote: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.')}else{console.error("GridStack.init() no grid element was passed.")}return null}if(!i.gridstack){i.gridstack=new d(i,n.Utils.cloneDeep(e))}return i.gridstack}static initAll(e={},t=".grid-stack"){const i=[];if(typeof document==="undefined")return i;d.getGridElements(t).forEach(t=>{if(!t.gridstack){t.gridstack=new d(t,n.Utils.cloneDeep(e))}i.push(t.gridstack)});if(i.length===0){console.error('GridStack.initAll() no grid was found with selector "'+t+'" - element missing or wrong selector ?'+'\nNote: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.')}return i}static addGrid(e,t={}){if(!e)return null;let i=e;if(i.gridstack){const e=i.gridstack;if(t)e.opts={...e.opts,...t};if(t.children!==undefined)e.load(t.children);return e}const s=e.classList.contains("grid-stack");if(!s||d.addRemoveCB){if(d.addRemoveCB){i=d.addRemoveCB(e,t,true,true)}else{i=n.Utils.createDiv(["grid-stack",t.class],e)}}const o=d.init(t,i);return o}static registerEngine(e){d.engineClass=e}get placeholder(){if(!this._placeholder){this._placeholder=n.Utils.createDiv([this.opts.placeholderClass,o.gridDefaults.itemClass,this.opts.itemClass]);const e=n.Utils.createDiv(["placeholder-content"],this._placeholder);if(this.opts.placeholderText){e.textContent=this.opts.placeholderText}}return this._placeholder}constructor(e,t={}){this.el=e;this.opts=t;this.animationDelay=300+10;this._gsEventHandler={};this._extraDragRow=0;this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};e.gridstack=this;this.opts=t=t||{};if(!e.classList.contains("grid-stack")){this.el.classList.add("grid-stack")}if(t.row){t.minRow=t.maxRow=t.row;delete t.row}const i=n.Utils.toNumber(e.getAttribute("gs-row"));if(t.column==="auto"){delete t.column}if(t.alwaysShowResizeHandle!==undefined){t._alwaysShowResizeHandle=t.alwaysShowResizeHandle}const r=t.columnOpts;if(r){const e=r.breakpoints;if(!r.columnWidth&&!e?.length){delete t.columnOpts}else{r.columnMax=r.columnMax||12;if(e?.length>1)e.sort((e,t)=>(t.w||0)-(e.w||0))}}const h={...n.Utils.cloneDeep(o.gridDefaults),column:n.Utils.toNumber(e.getAttribute("gs-column"))||o.gridDefaults.column,minRow:i?i:n.Utils.toNumber(e.getAttribute("gs-min-row"))||o.gridDefaults.minRow,maxRow:i?i:n.Utils.toNumber(e.getAttribute("gs-max-row"))||o.gridDefaults.maxRow,staticGrid:n.Utils.toBool(e.getAttribute("gs-static"))||o.gridDefaults.staticGrid,sizeToContent:n.Utils.toBool(e.getAttribute("gs-size-to-content"))||undefined,draggable:{handle:(t.handleClass?"."+t.handleClass:t.handle?t.handle:"")||o.gridDefaults.draggable.handle},removableOptions:{accept:t.itemClass||o.gridDefaults.removableOptions.accept,decline:o.gridDefaults.removableOptions.decline}};if(e.getAttribute("gs-animate")){h.animate=n.Utils.toBool(e.getAttribute("gs-animate"))}t=n.Utils.defaults(t,h);this._initMargin();this.checkDynamicColumn();this._updateColumnVar(t);if(t.rtl==="auto"){t.rtl=e.style.direction==="rtl"}if(t.rtl){this.el.classList.add("grid-stack-rtl")}const c=this.el.closest("."+o.gridDefaults.itemClass);const u=c?.gridstackNode;if(u){u.subGrid=this;this.parentGridNode=u;this.el.classList.add("grid-stack-nested");u.el.classList.add("grid-stack-sub-grid")}this._isAutoCellHeight=t.cellHeight==="auto";if(this._isAutoCellHeight||t.cellHeight==="initial"){this.cellHeight(undefined)}else{if(typeof t.cellHeight=="number"&&t.cellHeightUnit&&t.cellHeightUnit!==o.gridDefaults.cellHeightUnit){t.cellHeight=t.cellHeight+t.cellHeightUnit;delete t.cellHeightUnit}const e=t.cellHeight;delete t.cellHeight;this.cellHeight(e)}if(t.alwaysShowResizeHandle==="mobile"){t.alwaysShowResizeHandle=l.isTouch}this._setStaticClass();const g=t.engineClass||d.engineClass||s.GridStackEngine;this.engine=new g({column:this.getColumn(),float:t.float,maxRow:t.maxRow,onChange:e=>{e.forEach(e=>{const t=e.el;if(!t)return;if(e._removeDOM){if(t)t.remove();delete e._removeDOM}else{this._writePosAttr(t,e)}});this._updateContainerHeight()}});if(t.auto){this.batchUpdate();this.engine._loading=true;this.getGridItems().forEach(e=>this._prepareElement(e));delete this.engine._loading;this.batchUpdate(false)}if(t.children){const e=t.children;delete t.children;if(e.length)this.load(e)}this.setAnimation();if(t.subGridDynamic&&!a.DDManager.pauseDrag)a.DDManager.pauseDrag=true;if(t.draggable?.pause!==undefined)a.DDManager.pauseDrag=t.draggable.pause;this._setupRemoveDrop();this._setupAcceptWidget();this._updateResizeEvent()}_updateColumnVar(e=this.opts){this.el.classList.add("gs-"+e.column);if(typeof e.column==="number")this.el.style.setProperty("--gs-column-width",`${100/e.column}%`)}addWidget(e){if(typeof e==="string"){console.error("V11: GridStack.addWidget() does not support string anymore. see #2736");return}if(e.ELEMENT_NODE){console.error("V11: GridStack.addWidget() does not support HTMLElement anymore. use makeWidget()");return this.makeWidget(e)}let t;let i=e;i.grid=this;if(i?.el){t=i.el}else if(d.addRemoveCB){t=d.addRemoveCB(this.el,e,true,false)}else{t=this.createWidgetDivs(i)}if(!t)return;i=t.gridstackNode;if(i&&t.parentElement===this.el&&this.engine.nodes.find(e=>e._id===i._id))return t;const s=this._readAttr(t);n.Utils.defaults(e,s);this.engine.prepareNode(e);this.el.appendChild(t);this.makeWidget(t,e);return t}createWidgetDivs(e){const t=n.Utils.createDiv(["grid-stack-item",this.opts.itemClass]);const i=n.Utils.createDiv(["grid-stack-item-content"],t);if(n.Utils.lazyLoad(e)){if(!e.visibleObservable){e.visibleObservable=new IntersectionObserver(([t])=>{if(t.isIntersecting){e.visibleObservable?.disconnect();delete e.visibleObservable;d.renderCB(i,e);e.grid?.prepareDragDrop(e.el)}});window.setTimeout(()=>e.visibleObservable?.observe(t))}}else d.renderCB(i,e);return t}makeSubGrid(e,t,i,s=true){let o=e.gridstackNode;if(!o){o=this.makeWidget(e).gridstackNode}if(o.subGrid?.el)return o.subGrid;let r;let l=this;while(l&&!r){r=l.opts?.subGridOpts;l=l.parentGridNode?.grid}t=n.Utils.cloneDeep({...this.opts,id:undefined,children:undefined,column:"auto",columnOpts:undefined,layout:"list",subGridOpts:undefined,...r||{},...t||o.subGridOpts||{}});o.subGridOpts=t;let a;if(t.column==="auto"){a=true;t.column=Math.max(o.w||1,i?.w||1);delete t.columnOpts}let h=o.el.querySelector(".grid-stack-item-content");let c;let u;if(s){this._removeDD(o.el);u={...o,x:0,y:0};n.Utils.removeInternalForSave(u);delete u.subGridOpts;if(o.content){u.content=o.content;delete o.content}if(d.addRemoveCB){c=d.addRemoveCB(this.el,u,true,false)}else{c=n.Utils.createDiv(["grid-stack-item"]);c.appendChild(h);h=n.Utils.createDiv(["grid-stack-item-content"],o.el)}this.prepareDragDrop(o.el)}if(i){const e=a?t.column:o.w;const s=o.h+i.h;const n=o.el.style;n.transition="none";this.update(o.el,{w:e,h:s});setTimeout(()=>n.transition=null)}const g=o.subGrid=d.addGrid(h,t);if(i?._moving)g._isTemp=true;if(a)g._autoColumn=true;if(s){g.makeWidget(c,u)}if(i){if(i._moving){window.setTimeout(()=>n.Utils.simulateMouseEvent(i._event,"mouseenter",g.el),0)}else{g.makeWidget(o.el,o)}}this.resizeToContentCheck(false,o);return g}removeAsSubGrid(e){const t=this.parentGridNode?.grid;if(!t)return;t.batchUpdate();t.removeWidget(this.parentGridNode.el,true,true);this.engine.nodes.forEach(e=>{e.x+=this.parentGridNode.x;e.y+=this.parentGridNode.y;t.makeWidget(e.el,e)});t.batchUpdate(false);if(this.parentGridNode)delete this.parentGridNode.subGrid;delete this.parentGridNode;if(e){window.setTimeout(()=>n.Utils.simulateMouseEvent(e._event,"mouseenter",t.el),0)}}save(e=true,t=false,i=d.saveCB){const s=this.engine.save(e,i);s.forEach(s=>{if(e&&s.el&&!s.subGrid&&!i){const e=s.el.querySelector(".grid-stack-item-content");s.content=e?.innerHTML;if(!s.content)delete s.content}else{if(!e&&!i){delete s.content}if(s.subGrid?.el){const n=s.subGrid.save(e,t,i);s.subGridOpts=t?n:{children:n};delete s.subGrid}}delete s.el});if(t){const e=n.Utils.cloneDeep(this.opts);if(e.marginBottom===e.marginTop&&e.marginRight===e.marginLeft&&e.marginTop===e.marginRight){e.margin=e.marginTop;delete e.marginTop;delete e.marginRight;delete e.marginBottom;delete e.marginLeft}if(e.rtl===(this.el.style.direction==="rtl")){e.rtl="auto"}if(this._isAutoCellHeight){e.cellHeight="auto"}if(this._autoColumn){e.column="auto"}const t=e._alwaysShowResizeHandle;delete e._alwaysShowResizeHandle;if(t!==undefined){e.alwaysShowResizeHandle=t}else{delete e.alwaysShowResizeHandle}n.Utils.removeInternalAndSame(e,o.gridDefaults);e.children=s;return e}return s}load(e,t=d.addRemoveCB||true){e=n.Utils.cloneDeep(e);const i=this.getColumn();e.forEach(e=>{e.w=e.w||1;e.h=e.h||1});e=n.Utils.sort(e);this.engine.skipCacheUpdate=this._ignoreLayoutsNodeChange=true;let s=0;e.forEach(e=>{s=Math.max(s,(e.x||0)+e.w)});if(s>this.engine.defaultColumn)this.engine.defaultColumn=s;if(s>i){if(this.engine.nodes.length===0&&this.responseLayout){this.engine.nodes=e;this.engine.columnChanged(s,i,this.responseLayout);e=this.engine.nodes;this.engine.nodes=[];delete this.responseLayout}else this.engine.cacheLayout(e,s,true)}const o=d.addRemoveCB;if(typeof t==="function")d.addRemoveCB=t;const r=[];this.batchUpdate();const l=!this.engine.nodes.length;const a=l&&this.opts.animate;if(a)this.setAnimation(false);if(!l&&t){const t=[...this.engine.nodes];t.forEach(t=>{if(!t.id)return;const i=n.Utils.find(e,t.id);if(!i){if(d.addRemoveCB)d.addRemoveCB(this.el,t,false,false);r.push(t);this.removeWidget(t.el,true,false)}})}this.engine._loading=true;const h=[];this.engine.nodes=this.engine.nodes.filter(t=>{if(n.Utils.find(e,t.id)){h.push(t);return false}return true});e.forEach(e=>{const i=n.Utils.find(h,e.id);if(i){if(n.Utils.shouldSizeToContent(i))e.h=i.h;this.engine.nodeBoundFix(e);if(e.autoPosition||e.x===undefined||e.y===undefined){e.w=e.w||i.w;e.h=e.h||i.h;this.engine.findEmptyPosition(e)}this.engine.nodes.push(i);if(n.Utils.samePos(i,e)&&this.engine.nodes.length>1){this.moveNode(i,{...e,forceCollide:true});n.Utils.copyPos(e,i)}this.update(i.el,e);if(e.subGridOpts?.children){const t=i.el.querySelector(".grid-stack");if(t&&t.gridstack){t.gridstack.load(e.subGridOpts.children)}}}else if(t){this.addWidget(e)}});delete this.engine._loading;this.engine.removedNodes=r;this.batchUpdate(false);delete this._ignoreLayoutsNodeChange;delete this.engine.skipCacheUpdate;o?d.addRemoveCB=o:delete d.addRemoveCB;if(a)this.setAnimation(true,true);return this}batchUpdate(e=true){this.engine.batchUpdate(e);if(!e){this._updateContainerHeight();this._triggerRemoveEvent();this._triggerAddEvent();this._triggerChangeEvent()}return this}getCellHeight(e=false){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!e||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px")){return this.opts.cellHeight}if(this.opts.cellHeightUnit==="rem"){return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize)}if(this.opts.cellHeightUnit==="em"){return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize)}if(this.opts.cellHeightUnit==="cm"){return this.opts.cellHeight*(96/2.54)}if(this.opts.cellHeightUnit==="mm"){return this.opts.cellHeight*(96/2.54)/10}const t=this.el.querySelector("."+this.opts.itemClass);if(t){const e=n.Utils.toNumber(t.getAttribute("gs-h"))||1;return Math.round(t.offsetHeight/e)}const i=parseInt(this.el.getAttribute("gs-current-row"));return i?Math.round(this.el.getBoundingClientRect().height/i):this.opts.cellHeight}cellHeight(e){if(e!==undefined){if(this._isAutoCellHeight!==(e==="auto")){this._isAutoCellHeight=e==="auto";this._updateResizeEvent()}}if(e==="initial"||e==="auto"){e=undefined}if(e===undefined){const t=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;e=this.cellWidth()+t}const t=n.Utils.parseHeight(e);if(this.opts.cellHeightUnit===t.unit&&this.opts.cellHeight===t.h){return this}this.opts.cellHeightUnit=t.unit;this.opts.cellHeight=t.h;this.el.style.setProperty("--gs-cell-height",`${this.opts.cellHeight}${this.opts.cellHeightUnit}`);this._updateContainerHeight();this.resizeToContentCheck();return this}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(e=false){return e&&this.opts.columnOpts?.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){const e=this.opts.columnOpts;if(!e||!e.columnWidth&&!e.breakpoints?.length)return false;const t=this.getColumn();let i=t;const s=this._widthOrContainer(true);if(e.columnWidth){i=Math.min(Math.round(s/e.columnWidth)||1,e.columnMax)}else{i=e.columnMax;let n=0;while(n<e.breakpoints.length&&s<=e.breakpoints[n].w){i=e.breakpoints[n++].c||t}}if(i!==t){const t=e.breakpoints?.find(e=>e.c===i);this.column(i,t?.layout||e.layout);return true}return false}compact(e="compact",t=true){this.engine.compact(e,t);this._triggerChangeEvent();return this}column(e,t="moveScale"){if(!e||e<1||this.opts.column===e)return this;const i=this.getColumn();this.opts.column=e;if(!this.engine){this.responseLayout=t;return this}this.engine.column=e;this.el.classList.remove("gs-"+i);this._updateColumnVar();this.engine.columnChanged(i,e,t);if(this._isAutoCellHeight)this.cellHeight();this.resizeToContentCheck(true);this._ignoreLayoutsNodeChange=true;this._triggerChangeEvent();delete this._ignoreLayoutsNodeChange;return this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(e=>e.matches("."+this.opts.itemClass)&&!e.matches("."+this.opts.placeholderClass))}isIgnoreChangeCB(){return this._ignoreLayoutsNodeChange}destroy(e=true){if(!this.el)return;this.offAll();this._updateResizeEvent(true);this.setStatic(true,false);this.setAnimation(false);if(!e){this.removeAll(e);this.el.removeAttribute("gs-current-row")}else{this.el.parentNode.removeChild(this.el)}if(this.parentGridNode)delete this.parentGridNode.subGrid;delete this.parentGridNode;delete this.opts;delete this._placeholder?.gridstackNode;delete this._placeholder;delete this.engine;delete this.el.gridstack;delete this.el;return this}float(e){if(this.opts.float!==e){this.opts.float=this.engine.float=e;this._triggerChangeEvent()}return this}getFloat(){return this.engine.float}getCellFromPixel(e,t=false){const i=this.el.getBoundingClientRect();let s;if(t){s={top:i.top+document.documentElement.scrollTop,left:i.left}}else{s={top:this.el.offsetTop,left:this.el.offsetLeft}}const n=e.left-s.left;const o=e.top-s.top;const r=i.width/this.getColumn();const l=i.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(n/r),y:Math.floor(o/l)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow||0)}isAreaEmpty(e,t,i,s){return this.engine.isAreaEmpty(e,t,i,s)}makeWidget(e,t){const i=d.getElement(e);if(!i||i.gridstackNode)return i;if(!i.parentElement)this.el.appendChild(i);this._prepareElement(i,true,t);const s=i.gridstackNode;this._updateContainerHeight();if(s.subGridOpts){this.makeSubGrid(i,s.subGridOpts,undefined,false)}let n;if(this.opts.column===1&&!this._ignoreLayoutsNodeChange){n=this._ignoreLayoutsNodeChange=true}this._triggerAddEvent();this._triggerChangeEvent();if(n)delete this._ignoreLayoutsNodeChange;return i}on(e,t){if(e.indexOf(" ")!==-1){const i=e.split(" ");i.forEach(e=>this.on(e,t));return this}if(e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable"){const i=e==="enable"||e==="disable";if(i){this._gsEventHandler[e]=e=>t(e)}else{this._gsEventHandler[e]=e=>{if(e.detail)t(e,e.detail)}}this.el.addEventListener(e,this._gsEventHandler[e])}else if(e==="drag"||e==="dragstart"||e==="dragstop"||e==="resizestart"||e==="resize"||e==="resizestop"||e==="dropped"||e==="resizecontent"){this._gsEventHandler[e]=t}else{console.error("GridStack.on("+e+") event not supported")}return this}off(e){if(e.indexOf(" ")!==-1){const t=e.split(" ");t.forEach(e=>this.off(e));return this}if(e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable"){if(this._gsEventHandler[e]){this.el.removeEventListener(e,this._gsEventHandler[e])}}delete this._gsEventHandler[e];return this}offAll(){Object.keys(this._gsEventHandler).forEach(e=>this.off(e));return this}removeWidget(e,t=true,i=true){if(!e){console.error("Error: GridStack.removeWidget(undefined) called");return this}d.getElements(e).forEach(e=>{if(e.parentElement&&e.parentElement!==this.el)return;let s=e.gridstackNode;if(!s){s=this.engine.nodes.find(t=>e===t.el)}if(!s)return;if(t&&d.addRemoveCB){d.addRemoveCB(this.el,s,false,false)}delete e.gridstackNode;this._removeDD(e);this.engine.removeNode(s,t,i);if(t&&e.parentElement){e.remove()}});if(i){this._triggerRemoveEvent();this._triggerChangeEvent()}return this}removeAll(e=true,t=true){this.engine.nodes.forEach(t=>{if(e&&d.addRemoveCB){d.addRemoveCB(this.el,t,false,false)}delete t.el.gridstackNode;if(!this.opts.staticGrid)this._removeDD(t.el)});this.engine.removeAll(e,t);if(t)this._triggerRemoveEvent();return this}setAnimation(e=this.opts.animate,t){if(t){setTimeout(()=>{if(this.opts)this.setAnimation(e)})}else if(e){this.el.classList.add("grid-stack-animate")}else{this.el.classList.remove("grid-stack-animate")}this.opts.animate=e;return this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(e,t=true,i=true){if(!!this.opts.staticGrid===e)return this;e?this.opts.staticGrid=true:delete this.opts.staticGrid;this._setupRemoveDrop();this._setupAcceptWidget();this.engine.nodes.forEach(s=>{this.prepareDragDrop(s.el);if(s.subGrid&&i)s.subGrid.setStatic(e,t,i)});if(t){this._setStaticClass()}return this}updateOptions(e){const t=this.opts;if(e===t)return this;if(e.acceptWidgets!==undefined){t.acceptWidgets=e.acceptWidgets;this._setupAcceptWidget()}if(e.animate!==undefined)this.setAnimation(e.animate);if(e.cellHeight)this.cellHeight(e.cellHeight);if(e.class!==undefined&&e.class!==t.class){if(t.class)this.el.classList.remove(t.class);if(e.class)this.el.classList.add(e.class)}if(e.columnOpts){this.opts.columnOpts=e.columnOpts;this.checkDynamicColumn()}else if(e.columnOpts===null&&this.opts.columnOpts){delete this.opts.columnOpts;this._updateResizeEvent()}else if(typeof e.column==="number")this.column(e.column);if(e.margin!==undefined)this.margin(e.margin);if(e.staticGrid!==undefined)this.setStatic(e.staticGrid);if(e.disableDrag!==undefined&&!e.staticGrid)this.enableMove(!e.disableDrag);if(e.disableResize!==undefined&&!e.staticGrid)this.enableResize(!e.disableResize);if(e.float!==undefined)this.float(e.float);if(e.row!==undefined){t.minRow=t.maxRow=t.row=e.row;this._updateContainerHeight()}else{if(e.minRow!==undefined){t.minRow=e.minRow;this._updateContainerHeight()}if(e.maxRow!==undefined)t.maxRow=e.maxRow}if(e.children?.length)this.load(e.children);return this}update(e,t){d.getElements(e).forEach(e=>{const i=e?.gridstackNode;if(!i)return;const s={...n.Utils.copyPos({},i),...n.Utils.cloneDeep(t)};this.engine.nodeBoundFix(s);delete s.autoPosition;const o=["x","y","w","h"];let r;if(o.some(e=>s[e]!==undefined&&s[e]!==i[e])){r={};o.forEach(e=>{r[e]=s[e]!==undefined?s[e]:i[e];delete s[e]})}if(!r&&(s.minW||s.minH||s.maxW||s.maxH)){r={}}if(s.content!==undefined){const t=e.querySelector(".grid-stack-item-content");if(t&&t.textContent!==s.content){i.content=s.content;d.renderCB(t,s);if(i.subGrid?.el){t.appendChild(i.subGrid.el);i.subGrid._updateContainerHeight()}}delete s.content}let l=false;let a=false;for(const e in s){if(e[0]!=="_"&&i[e]!==s[e]){i[e]=s[e];l=true;a=a||!this.opts.staticGrid&&(e==="noResize"||e==="noMove"||e==="locked")}}n.Utils.sanitizeMinMax(i);if(r){const e=r.w!==undefined&&r.w!==i.w;this.moveNode(i,r);if(e&&i.subGrid){i.subGrid.onResize(this.hasAnimationCSS()?i.w:undefined)}else{this.resizeToContentCheck(e,i)}delete i._orig}if(r||l){this._writeAttr(e,i)}if(a){this.prepareDragDrop(i.el)}if(d.updateCB)d.updateCB(i)});return this}moveNode(e,t){const i=e._updating;if(!i)this.engine.cleanNodes().beginUpdate(e);this.engine.moveNode(e,t);this._updateContainerHeight();if(!i){this._triggerChangeEvent();this.engine.endUpdate()}}resizeToContent(e){if(!e)return;e.classList.remove("size-to-content-max");if(!e.clientHeight)return;const t=e.gridstackNode;if(!t)return;const i=t.grid;if(!i||e.parentElement!==i.el)return;const s=i.getCellHeight(true);if(!s)return;let n=t.h?t.h*s:e.clientHeight;let o;if(t.resizeToContentParent)o=e.querySelector(t.resizeToContentParent);if(!o)o=e.querySelector(d.resizeToContentParent);if(!o)return;const r=e.clientHeight-o.clientHeight;const l=t.h?t.h*s-r:o.clientHeight;let a;if(t.subGrid){a=t.subGrid.getRow()*t.subGrid.getCellHeight(true);const i=t.subGrid.el.getBoundingClientRect();const s=e.getBoundingClientRect();a+=i.top-s.top}else if(t.subGridOpts?.children?.length){return}else{const e=o.firstElementChild;if(!e){console.error(`Error: GridStack.resizeToContent() widget id:${t.id} '${d.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);return}a=e.getBoundingClientRect().height||l}if(l===a)return;n+=a-l;let h=Math.ceil(n/s);const c=Number.isInteger(t.sizeToContent)?t.sizeToContent:0;if(c&&h>c){h=c;e.classList.add("size-to-content-max")}if(t.minH&&h<t.minH)h=t.minH;else if(t.maxH&&h>t.maxH)h=t.maxH;if(h!==t.h){i._ignoreLayoutsNodeChange=true;i.moveNode(t,{h:h});delete i._ignoreLayoutsNodeChange}}resizeToContentCBCheck(e){if(d.resizeToContentCB)d.resizeToContentCB(e);else this.resizeToContent(e)}rotate(e,t){d.getElements(e).forEach(e=>{const i=e.gridstackNode;if(!n.Utils.canBeRotated(i))return;const s={w:i.h,h:i.w,minH:i.minW,minW:i.minH,maxH:i.maxW,maxW:i.maxH};if(t){const e=t.left>0?Math.floor(t.left/this.cellWidth()):0;const n=t.top>0?Math.floor(t.top/this.opts.cellHeight):0;s.x=i.x+e-(i.h-(n+1));s.y=i.y+n-e}Object.keys(s).forEach(e=>{if(s[e]===undefined)delete s[e]});const o=i._orig;this.update(e,s);i._orig=o});return this}margin(e){const t=typeof e==="string"&&e.split(" ").length>1;if(!t){const t=n.Utils.parseHeight(e);if(this.opts.marginUnit===t.unit&&this.opts.margin===t.h)return}this.opts.margin=e;this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=undefined;this._initMargin();return this}getMargin(){return this.opts.margin}willItFit(e){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");const e=arguments;let t=0,i={x:e[t++],y:e[t++],w:e[t++],h:e[t++],autoPosition:e[t++]};return this.willItFit(i)}return this.engine.willItFit(e)}_triggerChangeEvent(){if(this.engine.batchMode)return this;const e=this.engine.getDirtyNodes(true);if(e&&e.length){if(!this._ignoreLayoutsNodeChange){this.engine.layoutsNodesChange(e)}this._triggerEvent("change",e)}this.engine.saveInitial();return this}_triggerAddEvent(){if(this.engine.batchMode)return this;if(this.engine.addedNodes?.length){if(!this._ignoreLayoutsNodeChange){this.engine.layoutsNodesChange(this.engine.addedNodes)}this.engine.addedNodes.forEach(e=>{delete e._dirty});const e=[...this.engine.addedNodes];this.engine.addedNodes=[];this._triggerEvent("added",e)}return this}_triggerRemoveEvent(){if(this.engine.batchMode)return this;if(this.engine.removedNodes?.length){const e=[...this.engine.removedNodes];this.engine.removedNodes=[];this._triggerEvent("removed",e)}return this}_triggerEvent(e,t){const i=t?new CustomEvent(e,{bubbles:false,detail:t}):new Event(e);let s=this;while(s.parentGridNode)s=s.parentGridNode.grid;s.el.dispatchEvent(i);return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;const e=this.parentGridNode;let t=this.getRow()+this._extraDragRow;const i=this.opts.cellHeight;const s=this.opts.cellHeightUnit;if(!i)return this;if(!e&&!this.opts.minRow){const e=n.Utils.parseHeight(getComputedStyle(this.el)["minHeight"]);if(e.h>0&&e.unit===s){const s=Math.floor(e.h/i);if(t<s){t=s}}}this.el.setAttribute("gs-current-row",String(t));this.el.style.removeProperty("min-height");this.el.style.removeProperty("height");if(t){this.el.style[e?"minHeight":"height"]=t*i+s}if(e&&n.Utils.shouldSizeToContent(e)){e.grid.resizeToContentCBCheck(e.el)}return this}_prepareElement(e,t=false,i){i=i||this._readAttr(e);e.gridstackNode=i;i.el=e;i.grid=this;i=this.engine.addNode(i,t);this._writeAttr(e,i);e.classList.add(o.gridDefaults.itemClass,this.opts.itemClass);const s=n.Utils.shouldSizeToContent(i);s?e.classList.add("size-to-content"):e.classList.remove("size-to-content");if(s)this.resizeToContentCheck(false,i);if(!n.Utils.lazyLoad(i))this.prepareDragDrop(i.el);return this}_writePosAttr(e,t){if(!t._moving&&!t._resizing||this._placeholder===e){e.style.top=t.y?t.y===1?`var(--gs-cell-height)`:`calc(${t.y} * var(--gs-cell-height))`:null;e.style.left=t.x?t.x===1?`var(--gs-column-width)`:`calc(${t.x} * var(--gs-column-width))`:null;e.style.width=t.w>1?`calc(${t.w} * var(--gs-column-width))`:null;e.style.height=t.h>1?`calc(${t.h} * var(--gs-cell-height))`:null}t.x>0?e.setAttribute("gs-x",String(t.x)):e.removeAttribute("gs-x");t.y>0?e.setAttribute("gs-y",String(t.y)):e.removeAttribute("gs-y");t.w>1?e.setAttribute("gs-w",String(t.w)):e.removeAttribute("gs-w");t.h>1?e.setAttribute("gs-h",String(t.h)):e.removeAttribute("gs-h");return this}_writeAttr(e,t){if(!t)return this;this._writePosAttr(e,t);const i={noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id",sizeToContent:"gs-size-to-content"};for(const s in i){if(t[s]){e.setAttribute(i[s],String(t[s]))}else{e.removeAttribute(i[s])}}return this}_readAttr(e,t=true){const i={};i.x=n.Utils.toNumber(e.getAttribute("gs-x"));i.y=n.Utils.toNumber(e.getAttribute("gs-y"));i.w=n.Utils.toNumber(e.getAttribute("gs-w"));i.h=n.Utils.toNumber(e.getAttribute("gs-h"));i.autoPosition=n.Utils.toBool(e.getAttribute("gs-auto-position"));i.noResize=n.Utils.toBool(e.getAttribute("gs-no-resize"));i.noMove=n.Utils.toBool(e.getAttribute("gs-no-move"));i.locked=n.Utils.toBool(e.getAttribute("gs-locked"));const s=e.getAttribute("gs-size-to-content");if(s){if(s==="true"||s==="false")i.sizeToContent=n.Utils.toBool(s);else i.sizeToContent=parseInt(s,10)}i.id=e.getAttribute("gs-id");i.maxW=n.Utils.toNumber(e.getAttribute("gs-max-w"));i.minW=n.Utils.toNumber(e.getAttribute("gs-min-w"));i.maxH=n.Utils.toNumber(e.getAttribute("gs-max-h"));i.minH=n.Utils.toNumber(e.getAttribute("gs-min-h"));if(t){if(i.w===1)e.removeAttribute("gs-w");if(i.h===1)e.removeAttribute("gs-h");if(i.maxW)e.removeAttribute("gs-max-w");if(i.minW)e.removeAttribute("gs-min-w");if(i.maxH)e.removeAttribute("gs-max-h");if(i.minH)e.removeAttribute("gs-min-h")}for(const e in i){if(!i.hasOwnProperty(e))return;if(!i[e]&&i[e]!==0&&e!=="sizeToContent"){delete i[e]}}return i}_setStaticClass(){const e=["grid-stack-static"];if(this.opts.staticGrid){this.el.classList.add(...e);this.el.setAttribute("gs-static","true")}else{this.el.classList.remove(...e);this.el.removeAttribute("gs-static")}return this}onResize(e=this.el?.clientWidth){if(!e)return;if(this.prevWidth===e)return;this.prevWidth=e;this.batchUpdate();let t=false;if(this._autoColumn&&this.parentGridNode){if(this.opts.column!==this.parentGridNode.w){this.column(this.parentGridNode.w,this.opts.layout||"list");t=true}}else{t=this.checkDynamicColumn()}if(this._isAutoCellHeight)this.cellHeight();this.engine.nodes.forEach(e=>{if(e.subGrid)e.subGrid.onResize()});if(!this._skipInitialResize)this.resizeToContentCheck(t);delete this._skipInitialResize;this.batchUpdate(false);return this}resizeToContentCheck(e=false,t=undefined){if(!this.engine)return;if(e&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(false,t),this.animationDelay);if(t){if(n.Utils.shouldSizeToContent(t))this.resizeToContentCBCheck(t.el)}else if(this.engine.nodes.some(e=>n.Utils.shouldSizeToContent(e))){const e=[...this.engine.nodes];this.batchUpdate();e.forEach(e=>{if(n.Utils.shouldSizeToContent(e))this.resizeToContentCBCheck(e.el)});this._ignoreLayoutsNodeChange=true;this.batchUpdate(false);this._ignoreLayoutsNodeChange=false}if(this._gsEventHandler["resizecontent"])this._gsEventHandler["resizecontent"](null,t?[t]:this.engine.nodes)}_updateResizeEvent(e=false){const t=!this.parentGridNode&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(e=>e.sizeToContent));if(!e&&t&&!this.resizeObserver){this._sizeThrottle=n.Utils.throttle(()=>this.onResize(),this.opts.cellHeightThrottle);this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle());this.resizeObserver.observe(this.el);this._skipInitialResize=true}else if((e||!t)&&this.resizeObserver){this.resizeObserver.disconnect();delete this.resizeObserver;delete this._sizeThrottle}return this}static getElement(e=".grid-stack-item"){return n.Utils.getElement(e)}static getElements(e=".grid-stack-item"){return n.Utils.getElements(e)}static getGridElement(e){return d.getElement(e)}static getGridElements(e){return n.Utils.getElements(e)}_initMargin(){let e;let t=0;let i=[];if(typeof this.opts.margin==="string"){i=this.opts.margin.split(" ")}if(i.length===2){this.opts.marginTop=this.opts.marginBottom=i[0];this.opts.marginLeft=this.opts.marginRight=i[1]}else if(i.length===4){this.opts.marginTop=i[0];this.opts.marginRight=i[1];this.opts.marginBottom=i[2];this.opts.marginLeft=i[3]}else{e=n.Utils.parseHeight(this.opts.margin);this.opts.marginUnit=e.unit;t=this.opts.margin=e.h}const s=["marginTop","marginRight","marginBottom","marginLeft"];s.forEach(i=>{if(this.opts[i]===undefined){this.opts[i]=t}else{e=n.Utils.parseHeight(this.opts[i]);this.opts[i]=e.h;delete this.opts.margin}});this.opts.marginUnit=e.unit;if(this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight){this.opts.margin=this.opts.marginTop}const o=this.el.style;o.setProperty("--gs-item-margin-top",`${this.opts.marginTop}${this.opts.marginUnit}`);o.setProperty("--gs-item-margin-bottom",`${this.opts.marginBottom}${this.opts.marginUnit}`);o.setProperty("--gs-item-margin-right",`${this.opts.marginRight}${this.opts.marginUnit}`);o.setProperty("--gs-item-margin-left",`${this.opts.marginLeft}${this.opts.marginUnit}`);return this}static getDD(){return h}static setupDragIn(e,t,i,s=document){if(t?.pause!==undefined){a.DDManager.pauseDrag=t.pause}t={appendTo:"body",helper:"clone",...t||{}};const o=typeof e==="string"?n.Utils.getElements(e,s):e;o.forEach((e,s)=>{if(!h.isDraggable(e))h.dragIn(e,t);if(i?.[s])e.gridstackNode=i[s]})}movable(e,t){if(this.opts.staticGrid)return this;d.getElements(e).forEach(e=>{const i=e.gridstackNode;if(!i)return;t?delete i.noMove:i.noMove=true;this.prepareDragDrop(i.el)});return this}resizable(e,t){if(this.opts.staticGrid)return this;d.getElements(e).forEach(e=>{const i=e.gridstackNode;if(!i)return;t?delete i.noResize:i.noResize=true;this.prepareDragDrop(i.el)});return this}disable(e=true){if(this.opts.staticGrid)return;this.enableMove(false,e);this.enableResize(false,e);this._triggerEvent("disable");return this}enable(e=true){if(this.opts.staticGrid)return;this.enableMove(true,e);this.enableResize(true,e);this._triggerEvent("enable");return this}enableMove(e,t=true){if(this.opts.staticGrid)return this;e?delete this.opts.disableDrag:this.opts.disableDrag=true;this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el);if(i.subGrid&&t)i.subGrid.enableMove(e,t)});return this}enableResize(e,t=true){if(this.opts.staticGrid)return this;e?delete this.opts.disableResize:this.opts.disableResize=true;this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el);if(i.subGrid&&t)i.subGrid.enableResize(e,t)});return this}cancelDrag(){const e=this._placeholder?.gridstackNode;if(!e)return;if(e._isExternal){e._isAboutToRemove=true;this.engine.removeNode(e)}else if(e._isAboutToRemove){d._itemRemoving(e.el,false)}this.engine.restoreInitial()}_removeDD(e){h.draggable(e,"destroy").resizable(e,"destroy");if(e.gridstackNode){delete e.gridstackNode._initDD}delete e.ddElement;return this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable){h.droppable(this.el,"destroy");return this}let e,t;const i=(i,s,o)=>{o=o||s;const r=o.gridstackNode;if(!r)return;if(!r.grid?.el){o.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;const e=o.getBoundingClientRect();o.style.left=e.x+(this.dragTransform.xScale-1)*(i.clientX-e.x)/this.dragTransform.xScale+"px";o.style.top=e.y+(this.dragTransform.yScale-1)*(i.clientY-e.y)/this.dragTransform.yScale+"px";o.style.transformOrigin=`0px 0px`}let{top:l,left:a}=o.getBoundingClientRect();const d=this.el.getBoundingClientRect();a-=d.left;l-=d.top;const c={position:{top:l*this.dragTransform.xScale,left:a*this.dragTransform.yScale}};if(r._temporaryRemoved){r.x=Math.max(0,Math.round(a/t));r.y=Math.max(0,Math.round(l/e));delete r.autoPosition;this.engine.nodeBoundFix(r);if(!this.engine.willItFit(r)){r.autoPosition=true;if(!this.engine.willItFit(r)){h.off(s,"drag");return}if(r._willFitPos){n.Utils.copyPos(r,r._willFitPos);delete r._willFitPos}}this._onStartMoving(o,i,c,r,t,e)}else{this._dragOrResize(o,i,c,r,t,e)}};h.droppable(this.el,{accept:e=>{const t=e.gridstackNode||this._readAttr(e,false);if(t?.grid===this)return true;if(!this.opts.acceptWidgets)return false;let i=true;if(typeof this.opts.acceptWidgets==="function"){i=this.opts.acceptWidgets(e)}else{const t=this.opts.acceptWidgets===true?".grid-stack-item":this.opts.acceptWidgets;i=e.matches(t)}if(i&&t&&this.opts.maxRow){const e={w:t.w,h:t.h,minW:t.minW,minH:t.minH};i=this.engine.willItFit(e)}return i}}).on(this.el,"dropover",(s,n,o)=>{let r=o?.gridstackNode||n.gridstackNode;if(r?.grid===this&&!r._temporaryRemoved){return false}if(r?._sidebarOrig){r.w=r._sidebarOrig.w;r.h=r._sidebarOrig.h}if(r?.grid&&r.grid!==this&&!r._temporaryRemoved){const e=r.grid;e._leave(n,o)}o=o||n;t=this.cellWidth();e=this.getCellHeight(true);if(!r){const e=o.getAttribute("data-gs-widget")||o.getAttribute("gridstacknode");if(e){try{r=JSON.parse(e)}catch(t){console.error("Gridstack dropover: Bad JSON format: ",e)}o.removeAttribute("data-gs-widget");o.removeAttribute("gridstacknode")}if(!r)r=this._readAttr(o);r._sidebarOrig={w:r.w,h:r.h}}if(!r.grid){if(!r.el)r={...r};r._isExternal=true;o.gridstackNode=r}const l=r.w||Math.round(o.offsetWidth/t)||1;const a=r.h||Math.round(o.offsetHeight/e)||1;if(r.grid&&r.grid!==this){if(!n._gridstackNodeOrig)n._gridstackNodeOrig=r;n.gridstackNode=r={...r,w:l,h:a,grid:this};delete r.x;delete r.y;this.engine.cleanupNode(r).nodeBoundFix(r);r._initDD=r._isExternal=r._temporaryRemoved=true}else{r.w=l;r.h=a;r._temporaryRemoved=true}d._itemRemoving(r.el,false);h.on(n,"drag",i);i(s,n,o);return false}).on(this.el,"dropout",(e,t,i)=>{const s=i?.gridstackNode||t.gridstackNode;if(!s)return false;if(!s.grid||s.grid===this){this._leave(t,i);if(this._isTemp){this.removeAsSubGrid(s)}}return false}).on(this.el,"drop",(e,t,i)=>{const s=i?.gridstackNode||t.gridstackNode;if(s?.grid===this&&!s._isExternal)return false;const o=!!this.placeholder.parentElement;const r=t!==i;this.placeholder.remove();delete this.placeholder.gridstackNode;if(o&&this.opts.animate){this.setAnimation(false);this.setAnimation(true,true)}const l=t._gridstackNodeOrig;delete t._gridstackNodeOrig;if(o&&l?.grid&&l.grid!==this){const e=l.grid;e.engine.removeNodeFromLayoutCache(l);e.engine.removedNodes.push(l);e._triggerRemoveEvent()._triggerChangeEvent();if(e.parentGridNode&&!e.engine.nodes.length&&e.opts.subGridDynamic){e.removeAsSubGrid()}}if(!s)return false;if(o){this.engine.cleanupNode(s);s.grid=this}delete s.grid?._isTemp;h.off(t,"drag");if(i!==t){i.remove();t=i}else{t.remove()}this._removeDD(t);if(!o)return false;const a=s.subGrid?.el?.gridstack;n.Utils.copyPos(s,this._readAttr(this.placeholder));n.Utils.removePositioningStyles(t);if(r&&(s.content||s.subGridOpts||d.addRemoveCB)){delete s.el;t=this.addWidget(s)}else{this._prepareElement(t,true,s);this.el.appendChild(t);this.resizeToContentCheck(false,s);if(a){a.parentGridNode=s}this._updateContainerHeight()}this.engine.addedNodes.push(s);this._triggerAddEvent();this._triggerChangeEvent();this.engine.endUpdate();if(this._gsEventHandler["dropped"]){this._gsEventHandler["dropped"]({...e,type:"dropped"},l&&l.grid?l:undefined,s)}return false});return this}static _itemRemoving(e,t){if(!e)return;const i=e?e.gridstackNode:undefined;if(!i?.grid||e.classList.contains(i.grid.opts.removableOptions.decline))return;t?i._isAboutToRemove=true:delete i._isAboutToRemove;t?e.classList.add("grid-stack-item-removing"):e.classList.remove("grid-stack-item-removing")}_setupRemoveDrop(){if(typeof this.opts.removable!=="string")return this;const e=document.querySelector(this.opts.removable);if(!e)return this;if(!this.opts.staticGrid&&!h.isDroppable(e)){h.droppable(e,this.opts.removableOptions).on(e,"dropover",(e,t)=>d._itemRemoving(t,true)).on(e,"dropout",(e,t)=>d._itemRemoving(t,false))}return this}prepareDragDrop(e,t=false){const i=e?.gridstackNode;if(!i)return;const s=i.noMove||this.opts.disableDrag;const o=i.noResize||this.opts.disableResize;const r=this.opts.staticGrid||s&&o;if(t||r){if(i._initDD){this._removeDD(e);delete i._initDD}if(r)e.classList.add("ui-draggable-disabled","ui-resizable-disabled");if(!t)return this}if(!i._initDD){let t;let s;const o=(n,o)=>{this.triggerEvent(n,n.target);t=this.cellWidth();s=this.getCellHeight(true);this._onStartMoving(e,n,o,i,t,s)};const r=(n,o)=>{this._dragOrResize(e,n,o,i,t,s)};const l=t=>{this.placeholder.remove();delete this.placeholder.gridstackNode;delete i._moving;delete i._resizing;delete i._event;delete i._lastTried;const s=i.w!==i._orig.w;const o=t.target;if(!o.gridstackNode||o.gridstackNode.grid!==this)return;i.el=o;if(i._isAboutToRemove){const s=e.gridstackNode.grid;if(s._gsEventHandler[t.type]){s._gsEventHandler[t.type](t,o)}s.engine.nodes.push(i);s.removeWidget(e,true,true)}else{n.Utils.removePositioningStyles(o);if(i._temporaryRemoved){n.Utils.copyPos(i,i._orig);this._writePosAttr(o,i);this.engine.addNode(i)}else{this._writePosAttr(o,i)}this.triggerEvent(t,o)}this._extraDragRow=0;this._updateContainerHeight();this._triggerChangeEvent();this.engine.endUpdate();if(t.type==="resizestop"){if(Number.isInteger(i.sizeToContent))i.sizeToContent=i.h;this.resizeToContentCheck(s,i)}};h.draggable(e,{start:o,stop:l,drag:r}).resizable(e,{start:o,stop:l,resize:r});i._initDD=true}h.draggable(e,s?"disable":"enable").resizable(e,o?"disable":"enable");return this}_onStartMoving(e,t,i,s,o,r){this.engine.cleanNodes().beginUpdate(s);this._writePosAttr(this.placeholder,s);this.el.appendChild(this.placeholder);this.placeholder.gridstackNode=s;if(s.grid?.el){this.dragTransform=n.Utils.getValuesFromTransformedElement(e)}else if(this.placeholder&&this.placeholder.closest(".grid-stack")){const e=this.placeholder.closest(".grid-stack");this.dragTransform=n.Utils.getValuesFromTransformedElement(e)}else{this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0}}s.el=this.placeholder;s._lastUiPosition=i.position;s._prevYPix=i.position.top;s._moving=t.type==="dragstart";s._resizing=t.type==="resizestart";delete s._lastTried;if(t.type==="dropover"&&s._temporaryRemoved){this.engine.addNode(s);s._moving=true}this.engine.cacheRects(o,r,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft);if(t.type==="resizestart"){const t=this.getColumn()-s.x;const i=(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-s.y;h.resizable(e,"option","minWidth",o*Math.min(s.minW||1,t)).resizable(e,"option","minHeight",r*Math.min(s.minH||1,i)).resizable(e,"option","maxWidth",o*Math.min(s.maxW||Number.MAX_SAFE_INTEGER,t)).resizable(e,"option","maxWidthMoveLeft",o*Math.min(s.maxW||Number.MAX_SAFE_INTEGER,s.x+s.w)).resizable(e,"option","maxHeight",r*Math.min(s.maxH||Number.MAX_SAFE_INTEGER,i)).resizable(e,"option","maxHeightMoveUp",r*Math.min(s.maxH||Number.MAX_SAFE_INTEGER,s.y+s.h))}}_dragOrResize(e,t,i,s,o,r){const l={...s._orig};let a;let h=this.opts.marginLeft,d=this.opts.marginRight,c=this.opts.marginTop,u=this.opts.marginBottom;const g=Math.round(r*.1),f=Math.round(o*.1);h=Math.min(h,f);d=Math.min(d,f);c=Math.min(c,g);u=Math.min(u,g);if(t.type==="drag"){if(s._temporaryRemoved)return;const t=i.position.top-s._prevYPix;s._prevYPix=i.position.top;if(this.opts.draggable.scroll!==false){n.Utils.updateScrollPosition(e,i.position,t)}const a=i.position.left+(i.position.left>s._lastUiPosition.left?-d:h);const g=i.position.top+(i.position.top>s._lastUiPosition.top?-u:c);l.x=Math.round(a/o);l.y=Math.round(g/r);const f=this._extraDragRow;if(this.engine.collide(s,l)){const e=this.getRow();let t=Math.max(0,l.y+s.h-e);if(this.opts.maxRow&&e+t>this.opts.maxRow){t=Math.max(0,this.opts.maxRow-e)}this._extraDragRow=t}else this._extraDragRow=0;if(this._extraDragRow!==f)this._updateContainerHeight();if(s.x===l.x&&s.y===l.y)return}else if(t.type==="resize"){if(l.x<0)return;n.Utils.updateScrollResize(t,e,r);l.w=Math.round((i.size.width-h)/o);l.h=Math.round((i.size.height-c)/r);if(s.w===l.w&&s.h===l.h)return;if(s._lastTried&&s._lastTried.w===l.w&&s._lastTried.h===l.h)return;const d=i.position.left+h;const u=i.position.top+c;l.x=Math.round(d/o);l.y=Math.round(u/r);a=true}s._event=t;s._lastTried=l;const p={x:i.position.left+h,y:i.position.top+c,w:(i.size?i.size.width:s.w*o)-h-d,h:(i.size?i.size.height:s.h*r)-c-u};if(this.engine.moveNodeCheck(s,{...l,cellWidth:o,cellHeight:r,rect:p,resizing:a})){s._lastUiPosition=i.position;this.engine.cacheRects(o,r,c,d,u,h);delete s._skipDown;if(a&&s.subGrid)s.subGrid.onResize();this._extraDragRow=0;this._updateContainerHeight();const e=t.target;if(!s._sidebarOrig){this._writePosAttr(e,s)}this.triggerEvent(t,e)}}triggerEvent(e,t){let i=this;while(i.parentGridNode)i=i.parentGridNode.grid;if(i._gsEventHandler[e.type]){i._gsEventHandler[e.type](e,t)}}_leave(e,t){t=t||e;const i=t.gridstackNode;if(!i)return;t.style.transform=t.style.transformOrigin=null;h.off(e,"drag");if(i._temporaryRemoved)return;i._temporaryRemoved=true;this.engine.removeNode(i);i.el=i._isExternal&&t?t:e;const s=i._sidebarOrig;if(i._isExternal)this.engine.cleanupNode(i);i._sidebarOrig=s;if(this.opts.removable===true){d._itemRemoving(e,true)}if(e._gridstackNodeOrig){e.gridstackNode=e._gridstackNodeOrig;delete e._gridstackNodeOrig}else if(i._isExternal){this.engine.restoreInitial()}}commit(){(0,n.obsolete)(this,this.batchUpdate(false),"commit","batchUpdate","5.2");return this}}d.renderCB=(e,t)=>{if(e&&t?.content)e.textContent=t.content};d.resizeToContentParent=".grid-stack-item-content";d.Utils=n.Utils;d.Engine=s.GridStackEngine;d.GDRev="12.2.2"},1059:(e,t,i)=>{i.r(t);i.d(t,{GridStackEngine:()=>n});var s=i(1060);class n{constructor(e={}){this.addedNodes=[];this.removedNodes=[];this.defaultColumn=12;this.column=e.column||this.defaultColumn;if(this.column>this.defaultColumn)this.defaultColumn=this.column;this.maxRow=e.maxRow;this._float=e.float;this.nodes=e.nodes||[];this.onChange=e.onChange}batchUpdate(e=true,t=true){if(!!this.batchMode===e)return this;this.batchMode=e;if(e){this._prevFloat=this._float;this._float=true;this.cleanNodes();this.saveInitial()}else{this._float=this._prevFloat;delete this._prevFloat;if(t)this._packNodes();this._notify()}return this}_useEntireRowArea(e,t){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!e._moving||e._skipDown||t.y<=e.y)}_fixCollisions(e,t=e,i,n={}){this.sortNodes(-1);i=i||this.collide(e,t);if(!i)return false;if(e._moving&&!n.nested&&!this.float){if(this.swap(e,i))return true}let o=t;if(!this._loading&&this._useEntireRowArea(e,t)){o={x:0,w:this.column,y:t.y,h:t.h};i=this.collide(e,o,n.skip)}let r=false;const l={nested:true,pack:false};let a=0;while(i=i||this.collide(e,o,n.skip)){if(a++>this.nodes.length*2){throw new Error("Infinite collide check")}let o;if(i.locked||this._loading||e._moving&&!e._skipDown&&t.y>e.y&&!this.float&&(!this.collide(i,{...i,y:e.y},e)||!this.collide(i,{...i,y:t.y-i.h},e))){e._skipDown=e._skipDown||t.y>e.y;const a={...t,y:i.y+i.h,...l};o=this._loading&&s.Utils.samePos(e,a)?true:this.moveNode(e,a);if((i.locked||this._loading)&&o){s.Utils.copyPos(t,e)}else if(!i.locked&&o&&n.pack){this._packNodes();t.y=i.y+i.h;s.Utils.copyPos(e,t)}r=r||o}else{o=this.moveNode(i,{...i,y:t.y+t.h,skip:e,...l})}if(!o)return r;i=undefined}return r}collide(e,t=e,i){const n=e._id;const o=i?._id;return this.nodes.find(e=>e._id!==n&&e._id!==o&&s.Utils.isIntercepted(e,t))}collideAll(e,t=e,i){const n=e._id;const o=i?._id;return this.nodes.filter(e=>e._id!==n&&e._id!==o&&s.Utils.isIntercepted(e,t))}directionCollideCoverage(e,t,i){if(!t.rect||!e._rect)return;const s=e._rect;const n={...t.rect};if(n.y>s.y){n.h+=n.y-s.y;n.y=s.y}else{n.h+=s.y-n.y}if(n.x>s.x){n.w+=n.x-s.x;n.x=s.x}else{n.w+=s.x-n.x}let o;let r=.5;for(let e of i){if(e.locked||!e._rect){break}const t=e._rect;let i=Number.MAX_VALUE,l=Number.MAX_VALUE;if(s.y<t.y){i=(n.y+n.h-t.y)/t.h}else if(s.y+s.h>t.y+t.h){i=(t.y+t.h-n.y)/t.h}if(s.x<t.x){l=(n.x+n.w-t.x)/t.w}else if(s.x+s.w>t.x+t.w){l=(t.x+t.w-n.x)/t.w}const a=Math.min(l,i);if(a>r){r=a;o=e}}t.collide=o;return o}cacheRects(e,t,i,s,n,o){this.nodes.forEach(r=>r._rect={y:r.y*t+i,x:r.x*e+o,w:r.w*e-o-s,h:r.h*t-i-n});return this}swap(e,t){if(!t||t.locked||!e||e.locked)return false;function i(){const i=t.x,s=t.y;t.x=e.x;t.y=e.y;if(e.h!=t.h){e.x=i;e.y=t.y+t.h}else if(e.w!=t.w){e.x=t.x+t.w;e.y=s}else{e.x=i;e.y=s}e._dirty=t._dirty=true;return true}let n;if(e.w===t.w&&e.h===t.h&&(e.x===t.x||e.y===t.y)&&(n=s.Utils.isTouching(e,t)))return i();if(n===false)return;if(e.w===t.w&&e.x===t.x&&(n||(n=s.Utils.isTouching(e,t)))){if(t.y<e.y){const i=e;e=t;t=i}return i()}if(n===false)return;if(e.h===t.h&&e.y===t.y&&(n||(n=s.Utils.isTouching(e,t)))){if(t.x<e.x){const i=e;e=t;t=i}return i()}return false}isAreaEmpty(e,t,i,s){const n={x:e||0,y:t||0,w:i||1,h:s||1};return!this.collide(n)}compact(e="compact",t=true){if(this.nodes.length===0)return this;if(t)this.sortNodes();const i=this.batchMode;if(!i)this.batchUpdate();const s=this._inColumnResize;if(!s)this._inColumnResize=true;const n=this.nodes;this.nodes=[];n.forEach((t,i,s)=>{let n;if(!t.locked){t.autoPosition=true;if(e==="list"&&i)n=s[i-1]}this.addNode(t,false,n)});if(!s)delete this._inColumnResize;if(!i)this.batchUpdate(false);return this}set float(e){if(this._float===e)return;this._float=e||false;if(!e){this._packNodes()._notify()}}get float(){return this._float||false}sortNodes(e=1){this.nodes=s.Utils.sort(this.nodes,e);return this}_packNodes(){if(this.batchMode){return this}this.sortNodes();if(this.float){this.nodes.forEach(e=>{if(e._updating||e._orig===undefined||e.y===e._orig.y)return;let t=e.y;while(t>e._orig.y){--t;const i=this.collide(e,{x:e.x,y:t,w:e.w,h:e.h});if(!i){e._dirty=true;e.y=t}}})}else{this.nodes.forEach((e,t)=>{if(e.locked)return;while(e.y>0){const i=t===0?0:e.y-1;const s=t===0||!this.collide(e,{x:e.x,y:i,w:e.w,h:e.h});if(!s)break;e._dirty=e.y!==i;e.y=i}})}return this}prepareNode(e,t){e._id=e._id??n._idSeq++;const i=e.id;if(i){let t=1;while(this.nodes.find(t=>t.id===e.id&&t!==e)){e.id=i+"_"+t++}}if(e.x===undefined||e.y===undefined||e.x===null||e.y===null){e.autoPosition=true}const o={x:0,y:0,w:1,h:1};s.Utils.defaults(e,o);if(!e.autoPosition){delete e.autoPosition}if(!e.noResize){delete e.noResize}if(!e.noMove){delete e.noMove}s.Utils.sanitizeMinMax(e);if(typeof e.x=="string"){e.x=Number(e.x)}if(typeof e.y=="string"){e.y=Number(e.y)}if(typeof e.w=="string"){e.w=Number(e.w)}if(typeof e.h=="string"){e.h=Number(e.h)}if(isNaN(e.x)){e.x=o.x;e.autoPosition=true}if(isNaN(e.y)){e.y=o.y;e.autoPosition=true}if(isNaN(e.w)){e.w=o.w}if(isNaN(e.h)){e.h=o.h}this.nodeBoundFix(e,t);return e}nodeBoundFix(e,t){const i=e._orig||s.Utils.copyPos({},e);if(e.maxW){e.w=Math.min(e.w||1,e.maxW)}if(e.maxH){e.h=Math.min(e.h||1,e.maxH)}if(e.minW){e.w=Math.max(e.w||1,e.minW)}if(e.minH){e.h=Math.max(e.h||1,e.minH)}const n=(e.x||0)+(e.w||1)>this.column;if(n&&this.column<this.defaultColumn&&!this._inColumnResize&&!this.skipCacheUpdate&&e._id!=null&&this.findCacheLayout(e,this.defaultColumn)===-1){const t={...e};if(t.autoPosition||t.x===undefined){delete t.x;delete t.y}else t.x=Math.min(this.defaultColumn-1,t.x);t.w=Math.min(this.defaultColumn,t.w||1);this.cacheOneLayout(t,this.defaultColumn)}if(e.w>this.column){e.w=this.column}else if(e.w<1){e.w=1}if(this.maxRow&&e.h>this.maxRow){e.h=this.maxRow}else if(e.h<1){e.h=1}if(e.x<0){e.x=0}if(e.y<0){e.y=0}if(e.x+e.w>this.column){if(t){e.w=this.column-e.x}else{e.x=this.column-e.w}}if(this.maxRow&&e.y+e.h>this.maxRow){if(t){e.h=this.maxRow-e.y}else{e.y=this.maxRow-e.h}}if(!s.Utils.samePos(e,i)){e._dirty=true}return this}getDirtyNodes(e){if(e){return this.nodes.filter(e=>e._dirty&&!s.Utils.samePos(e,e._orig))}return this.nodes.filter(e=>e._dirty)}_notify(e){if(this.batchMode||!this.onChange)return this;const t=(e||[]).concat(this.getDirtyNodes());this.onChange(t);return this}cleanNodes(){if(this.batchMode)return this;this.nodes.forEach(e=>{delete e._dirty;delete e._lastTried});return this}saveInitial(){this.nodes.forEach(e=>{e._orig=s.Utils.copyPos({},e);delete e._dirty});this._hasLocked=this.nodes.some(e=>e.locked);return this}restoreInitial(){this.nodes.forEach(e=>{if(!e._orig||s.Utils.samePos(e,e._orig))return;s.Utils.copyPos(e,e._orig);e._dirty=true});this._notify();return this}findEmptyPosition(e,t=this.nodes,i=this.column,n){const o=n?n.y*i+(n.x+n.w):0;let r=false;for(let n=o;!r;++n){const o=n%i;const l=Math.floor(n/i);if(o+e.w>i){continue}const a={x:o,y:l,w:e.w,h:e.h};if(!t.find(e=>s.Utils.isIntercepted(a,e))){if(e.x!==o||e.y!==l)e._dirty=true;e.x=o;e.y=l;delete e.autoPosition;r=true}}return r}addNode(e,t=false,i){const s=this.nodes.find(t=>t._id===e._id);if(s)return s;this._inColumnResize?this.nodeBoundFix(e):this.prepareNode(e);delete e._temporaryRemoved;delete e._removeDOM;let n;if(e.autoPosition&&this.findEmptyPosition(e,this.nodes,this.column,i)){delete e.autoPosition;n=true}this.nodes.push(e);if(t){this.addedNodes.push(e)}if(!n)this._fixCollisions(e);if(!this.batchMode){this._packNodes()._notify()}return e}removeNode(e,t=true,i=false){if(!this.nodes.find(t=>t._id===e._id)){return this}if(i){this.removedNodes.push(e)}if(t)e._removeDOM=true;this.nodes=this.nodes.filter(t=>t._id!==e._id);if(!e._isAboutToRemove)this._packNodes();this._notify([e]);return this}removeAll(e=true,t=true){delete this._layouts;if(!this.nodes.length)return this;e&&this.nodes.forEach(e=>e._removeDOM=true);const i=this.nodes;this.removedNodes=t?i:[];this.nodes=[];return this._notify(i)}moveNodeCheck(e,t){if(!this.changedPosConstrain(e,t))return false;t.pack=true;if(!this.maxRow){return this.moveNode(e,t)}let i;const o=new n({column:this.column,float:this.float,nodes:this.nodes.map(t=>{if(t._id===e._id){i={...t};return i}return{...t}})});if(!i)return false;const r=o.moveNode(i,t)&&o.getRow()<=Math.max(this.getRow(),this.maxRow);if(!r&&!t.resizing&&t.collide){const i=t.collide.el.gridstackNode;if(this.swap(e,i)){this._notify();return true}}if(!r)return false;o.nodes.filter(e=>e._dirty).forEach(e=>{const t=this.nodes.find(t=>t._id===e._id);if(!t)return;s.Utils.copyPos(t,e);t._dirty=true});this._notify();return true}willItFit(e){delete e._willFitPos;if(!this.maxRow)return true;const t=new n({column:this.column,float:this.float,nodes:this.nodes.map(e=>({...e}))});const i={...e};this.cleanupNode(i);delete i.el;delete i._id;delete i.content;delete i.grid;t.addNode(i);if(t.getRow()<=this.maxRow){e._willFitPos=s.Utils.copyPos({},i);return true}return false}changedPosConstrain(e,t){t.w=t.w||e.w;t.h=t.h||e.h;if(e.x!==t.x||e.y!==t.y)return true;if(e.maxW){t.w=Math.min(t.w,e.maxW)}if(e.maxH){t.h=Math.min(t.h,e.maxH)}if(e.minW){t.w=Math.max(t.w,e.minW)}if(e.minH){t.h=Math.max(t.h,e.minH)}return e.w!==t.w||e.h!==t.h}moveNode(e,t){if(!e||!t)return false;let i;if(t.pack===undefined&&!this.batchMode){i=t.pack=true}if(typeof t.x!=="number"){t.x=e.x}if(typeof t.y!=="number"){t.y=e.y}if(typeof t.w!=="number"){t.w=e.w}if(typeof t.h!=="number"){t.h=e.h}const n=e.w!==t.w||e.h!==t.h;const o=s.Utils.copyPos({},e,true);s.Utils.copyPos(o,t);this.nodeBoundFix(o,n);s.Utils.copyPos(t,o);if(!t.forceCollide&&s.Utils.samePos(e,t))return false;const r=s.Utils.copyPos({},e);const l=this.collideAll(e,o,t.skip);let a=true;if(l.length){const n=e._moving&&!t.nested;let r=n?this.directionCollideCoverage(e,t,l):l[0];if(n&&r&&e.grid?.opts?.subGridDynamic&&!e.grid._isTemp){const i=s.Utils.areaIntercept(t.rect,r._rect);const n=s.Utils.area(t.rect);const o=s.Utils.area(r._rect);const l=i/(n<o?n:o);if(l>.8){r.grid.makeSubGrid(r.el,undefined,e);r=undefined}}if(r){a=!this._fixCollisions(e,o,r,t)}else{a=false;if(i)delete t.pack}}if(a&&!s.Utils.samePos(e,o)){e._dirty=true;s.Utils.copyPos(e,o)}if(t.pack){this._packNodes()._notify()}return!s.Utils.samePos(e,r)}getRow(){return this.nodes.reduce((e,t)=>Math.max(e,t.y+t.h),0)}beginUpdate(e){if(!e._updating){e._updating=true;delete e._skipDown;if(!this.batchMode)this.saveInitial()}return this}endUpdate(){const e=this.nodes.find(e=>e._updating);if(e){delete e._updating;delete e._skipDown}return this}save(e=true,t){const i=this._layouts?.length;const n=i&&this.column!==i-1?this._layouts[i-1]:null;const o=[];this.sortNodes();this.nodes.forEach(i=>{const r=n?.find(e=>e._id===i._id);const l={...i,...r||{}};s.Utils.removeInternalForSave(l,!e);if(t)t(i,l);o.push(l)});return o}layoutsNodesChange(e){if(!this._layouts||this._inColumnResize)return this;this._layouts.forEach((t,i)=>{if(!t||i===this.column)return this;if(i<this.column){this._layouts[i]=undefined}else{const s=i/this.column;e.forEach(e=>{if(!e._orig)return;const i=t.find(t=>t._id===e._id);if(!i)return;if(i.y>=0&&e.y!==e._orig.y){i.y+=e.y-e._orig.y}if(e.x!==e._orig.x){i.x=Math.round(e.x*s)}if(e.w!==e._orig.w){i.w=Math.round(e.w*s)}})}});return this}columnChanged(e,t,i="moveScale"){if(!this.nodes.length||!t||e===t)return this;const n=i==="compact"||i==="list";if(n){this.sortNodes(1)}if(t<e)this.cacheLayout(this.nodes,e);this.batchUpdate();let o=[];let r=n?this.nodes:s.Utils.sort(this.nodes,-1);if(t>e&&this._layouts){const i=this._layouts[t]||[];const s=this._layouts.length-1;if(!i.length&&e!==s&&this._layouts[s]?.length){e=s;this._layouts[s].forEach(e=>{const t=r.find(t=>t._id===e._id);if(t){if(!n&&!e.autoPosition){t.x=e.x??t.x;t.y=e.y??t.y}t.w=e.w??t.w;if(e.x==undefined||e.y===undefined)t.autoPosition=true}})}i.forEach(e=>{const t=r.findIndex(t=>t._id===e._id);if(t!==-1){const i=r[t];if(n){i.w=e.w;return}if(e.autoPosition||isNaN(e.x)||isNaN(e.y)){this.findEmptyPosition(e,o)}if(!e.autoPosition){i.x=e.x??i.x;i.y=e.y??i.y;i.w=e.w??i.w;o.push(i)}r.splice(t,1)}})}if(n){this.compact(i,false)}else{if(r.length){if(typeof i==="function"){i(t,e,o,r)}else{const s=n||i==="none"?1:t/e;const l=i==="move"||i==="moveScale";const a=i==="scale"||i==="moveScale";r.forEach(i=>{i.x=t===1?0:l?Math.round(i.x*s):Math.min(i.x,t-1);i.w=t===1||e===1?1:a?Math.round(i.w*s)||1:Math.min(i.w,t);o.push(i)});r=[]}}o=s.Utils.sort(o,-1);this._inColumnResize=true;this.nodes=[];o.forEach(e=>{this.addNode(e,false);delete e._orig})}this.nodes.forEach(e=>delete e._orig);this.batchUpdate(false,!n);delete this._inColumnResize;return this}cacheLayout(e,t,i=false){const s=[];e.forEach((e,t)=>{if(e._id===undefined){const t=e.id?this.nodes.find(t=>t.id===e.id):undefined;e._id=t?._id??n._idSeq++}s[t]={x:e.x,y:e.y,w:e.w,_id:e._id}});this._layouts=i?[]:this._layouts||[];this._layouts[t]=s;return this}cacheOneLayout(e,t){e._id=e._id??n._idSeq++;const i={x:e.x,y:e.y,w:e.w,_id:e._id};if(e.autoPosition||e.x===undefined){delete i.x;delete i.y;if(e.autoPosition)i.autoPosition=true}this._layouts=this._layouts||[];this._layouts[t]=this._layouts[t]||[];const s=this.findCacheLayout(e,t);if(s===-1)this._layouts[t].push(i);else this._layouts[t][s]=i;return this}findCacheLayout(e,t){return this._layouts?.[t]?.findIndex(t=>t._id===e._id)??-1}removeNodeFromLayoutCache(e){if(!this._layouts){return}for(let t=0;t<this._layouts.length;t++){const i=this.findCacheLayout(e,t);if(i!==-1){this._layouts[t].splice(i,1)}}}cleanupNode(e){for(const t in e){if(t[0]==="_"&&t!=="_id")delete e[t]}return this}}n._idSeq=0},1060:(e,t,i)=>{i.r(t);i.d(t,{Utils:()=>l,obsolete:()=>s,obsoleteAttr:()=>r,obsoleteOpts:()=>n,obsoleteOptsDel:()=>o});function s(e,t,i,s,n){const o=(...o)=>{console.warn("gridstack.js: Function `"+i+"` is deprecated in "+n+" and has been replaced "+"with `"+s+"`. It will be **removed** in a future release");return t.apply(e,o)};o.prototype=t.prototype;return o}function n(e,t,i,s){if(e[t]!==undefined){e[i]=e[t];console.warn("gridstack.js: Option `"+t+"` is deprecated in "+s+" and has been replaced with `"+i+"`. It will be **removed** in a future release")}}function o(e,t,i,s){if(e[t]!==undefined){console.warn("gridstack.js: Option `"+t+"` is deprecated in "+i+s)}}function r(e,t,i,s){const n=e.getAttribute(t);if(n!==null){e.setAttribute(i,n);console.warn("gridstack.js: attribute `"+t+"`="+n+" is deprecated on this object in "+s+" and has been replaced with `"+i+"`. It will be **removed** in a future release")}}class l{static getElements(e,t=document){if(typeof e==="string"){const i="getElementById"in t?t:undefined;if(i&&!isNaN(+e[0])){const t=i.getElementById(e);return t?[t]:[]}let s=t.querySelectorAll(e);if(!s.length&&e[0]!=="."&&e[0]!=="#"){s=t.querySelectorAll("."+e);if(!s.length){s=t.querySelectorAll("#"+e)}}return Array.from(s)}return[e]}static getElement(e,t=document){if(typeof e==="string"){const i="getElementById"in t?t:undefined;if(!e.length)return null;if(i&&e[0]==="#"){return i.getElementById(e.substring(1))}if(e[0]==="#"||e[0]==="."||e[0]==="["){return t.querySelector(e)}if(i&&!isNaN(+e[0])){return i.getElementById(e)}let s=t.querySelector(e);if(i&&!s){s=i.getElementById(e)}if(!s){s=t.querySelector("."+e)}return s}return e}static lazyLoad(e){return e.lazyLoad||e.grid?.opts?.lazyLoad&&e.lazyLoad!==false}static createDiv(e,t){const i=document.createElement("div");e.forEach(e=>{if(e)i.classList.add(e)});t?.appendChild(i);return i}static shouldSizeToContent(e,t=false){return e?.grid&&(t?e.sizeToContent===true||e.grid.opts.sizeToContent===true&&e.sizeToContent===undefined:!!e.sizeToContent||e.grid.opts.sizeToContent&&e.sizeToContent!==false)}static isIntercepted(e,t){return!(e.y>=t.y+t.h||e.y+e.h<=t.y||e.x+e.w<=t.x||e.x>=t.x+t.w)}static isTouching(e,t){return l.isIntercepted(e,{x:t.x-.5,y:t.y-.5,w:t.w+1,h:t.h+1})}static areaIntercept(e,t){const i=e.x>t.x?e.x:t.x;const s=e.x+e.w<t.x+t.w?e.x+e.w:t.x+t.w;if(s<=i)return 0;const n=e.y>t.y?e.y:t.y;const o=e.y+e.h<t.y+t.h?e.y+e.h:t.y+t.h;if(o<=n)return 0;return(s-i)*(o-n)}static area(e){return e.w*e.h}static sort(e,t=1){const i=1e4;return e.sort((e,s)=>{const n=t*((e.y??i)-(s.y??i));if(n===0)return t*((e.x??i)-(s.x??i));return n})}static find(e,t){return t?e.find(e=>e.id===t):undefined}static toBool(e){if(typeof e==="boolean"){return e}if(typeof e==="string"){e=e.toLowerCase();return!(e===""||e==="no"||e==="false"||e==="0")}return Boolean(e)}static toNumber(e){return e===null||e.length===0?undefined:Number(e)}static parseHeight(e){let t;let i="px";if(typeof e==="string"){if(e==="auto"||e==="")t=0;else{const s=e.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!s){throw new Error(`Invalid height val = ${e}`)}i=s[2]||"px";t=parseFloat(s[1])}}else{t=e}return{h:t,unit:i}}static defaults(e,...t){t.forEach(t=>{for(const i in t){if(!t.hasOwnProperty(i))return;if(e[i]===null||e[i]===undefined){e[i]=t[i]}else if(typeof t[i]==="object"&&typeof e[i]==="object"){this.defaults(e[i],t[i])}}});return e}static same(e,t){if(typeof e!=="object")return e==t;if(typeof e!==typeof t)return false;if(Object.keys(e).length!==Object.keys(t).length)return false;for(const i in e){if(e[i]!==t[i])return false}return true}static copyPos(e,t,i=false){if(t.x!==undefined)e.x=t.x;if(t.y!==undefined)e.y=t.y;if(t.w!==undefined)e.w=t.w;if(t.h!==undefined)e.h=t.h;if(i){if(t.minW)e.minW=t.minW;if(t.minH)e.minH=t.minH;if(t.maxW)e.maxW=t.maxW;if(t.maxH)e.maxH=t.maxH}return e}static samePos(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&(e.w||1)===(t.w||1)&&(e.h||1)===(t.h||1)}static sanitizeMinMax(e){if(!e.minW){delete e.minW}if(!e.minH){delete e.minH}if(!e.maxW){delete e.maxW}if(!e.maxH){delete e.maxH}}static removeInternalAndSame(e,t){if(typeof e!=="object"||typeof t!=="object")return;for(let i in e){const s=e[i];const n=t[i];if(i[0]==="_"||s===n){delete e[i]}else if(s&&typeof s==="object"&&n!==undefined){l.removeInternalAndSame(s,n);if(!Object.keys(s).length){delete e[i]}}}}static removeInternalForSave(e,t=true){for(let t in e){if(t[0]==="_"||e[t]===null||e[t]===undefined)delete e[t]}delete e.grid;if(t)delete e.el;if(!e.autoPosition)delete e.autoPosition;if(!e.noResize)delete e.noResize;if(!e.noMove)delete e.noMove;if(!e.locked)delete e.locked;if(e.w===1||e.w===e.minW)delete e.w;if(e.h===1||e.h===e.minH)delete e.h}static throttle(e,t){let i=false;return(...s)=>{if(!i){i=true;setTimeout(()=>{e(...s);i=false},t)}}}static removePositioningStyles(e){const t=e.style;if(t.position){t.removeProperty("position")}if(t.left){t.removeProperty("left")}if(t.top){t.removeProperty("top")}if(t.width){t.removeProperty("width")}if(t.height){t.removeProperty("height")}}static getScrollElement(e){if(!e)return document.scrollingElement||document.documentElement;const t=getComputedStyle(e);const i=/(auto|scroll)/;if(i.test(t.overflow+t.overflowY)){return e}else{return this.getScrollElement(e.parentElement)}}static updateScrollPosition(e,t,i){const s=e.getBoundingClientRect();const n=window.innerHeight||document.documentElement.clientHeight;if(s.top<0||s.bottom>n){const o=s.bottom-n;const r=s.top;const l=this.getScrollElement(e);if(l!==null){const a=l.scrollTop;if(s.top<0&&i<0){if(e.offsetHeight>n){l.scrollTop+=i}else{l.scrollTop+=Math.abs(r)>Math.abs(i)?i:r}}else if(i>0){if(e.offsetHeight>n){l.scrollTop+=i}else{l.scrollTop+=o>i?i:o}}t.top+=l.scrollTop-a}}}static updateScrollResize(e,t,i){const s=this.getScrollElement(t);const n=s.clientHeight;const o=s===this.getScrollElement()?0:s.getBoundingClientRect().top;const r=e.clientY-o;const l=r<i;const a=r>n-i;if(l){s.scrollBy({behavior:"smooth",top:r-i})}else if(a){s.scrollBy({behavior:"smooth",top:i-(n-r)})}}static clone(e){if(e===null||e===undefined||typeof e!=="object"){return e}if(e instanceof Array){return[...e]}return{...e}}static cloneDeep(e){const t=["parentGrid","el","grid","subGrid","engine"];const i=l.clone(e);for(const s in i){if(i.hasOwnProperty(s)&&typeof i[s]==="object"&&s.substring(0,2)!=="__"&&!t.find(e=>e===s)){i[s]=l.cloneDeep(e[s])}}return i}static cloneNode(e){const t=e.cloneNode(true);t.removeAttribute("id");return t}static appendTo(e,t){let i;if(typeof t==="string"){i=l.getElement(t)}else{i=t}if(i){i.appendChild(e)}}static addElStyles(e,t){if(t instanceof Object){for(const i in t){if(t.hasOwnProperty(i)){if(Array.isArray(t[i])){t[i].forEach(t=>{e.style[i]=t})}else{e.style[i]=t[i]}}}}}static initEvent(e,t){const i={type:t.type};const s={button:0,which:0,buttons:1,bubbles:true,cancelable:true,target:t.target?t.target:e.target};["altKey","ctrlKey","metaKey","shiftKey"].forEach(t=>i[t]=e[t]);["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(t=>i[t]=e[t]);return{...i,...s}}static simulateMouseEvent(e,t,i){const s=e;const n=new MouseEvent(t,{bubbles:true,composed:true,cancelable:true,view:window,detail:1,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:s.ctrlKey??false,altKey:s.altKey??false,shiftKey:s.shiftKey??false,metaKey:s.metaKey??false,button:0,relatedTarget:e.target});(i||e.target).dispatchEvent(n)}static getValuesFromTransformedElement(e){const t=document.createElement("div");l.addElStyles(t,{opacity:"0",position:"fixed",top:0+"px",left:0+"px",width:"1px",height:"1px",zIndex:"-999999"});e.appendChild(t);const i=t.getBoundingClientRect();e.removeChild(t);t.remove();return{xScale:1/i.width,yScale:1/i.height,xOffset:i.left,yOffset:i.top}}static swap(e,t,i){if(!e)return;const s=e[t];e[t]=e[i];e[i]=s}static canBeRotated(e){return!(!e||e.w===e.h||e.locked||e.noResize||e.grid?.opts.disableResize||e.minW&&e.minW===e.maxW||e.minH&&e.minH===e.maxH)}}},1061:(e,t,i)=>{i.r(t);i.d(t,{gridDefaults:()=>s});const s={alwaysShowResizeHandle:"mobile",animate:true,auto:true,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:true},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"}},1062:(e,t,i)=>{i.r(t);i.d(t,{DDGridStack:()=>r});var s=i(1060);var n=i(1063);var o=i(1064);class r{resizable(e,t,i,s){this._getDDElements(e,t).forEach(e=>{if(t==="disable"||t==="enable"){e.ddResizable&&e.ddResizable[t]()}else if(t==="destroy"){e.ddResizable&&e.cleanResizable()}else if(t==="option"){e.setupResizable({[i]:s})}else{const i=e.el.gridstackNode;const s=i.grid;let n=e.el.getAttribute("gs-resize-handles")||s.opts.resizable.handles||"e,s,se";if(n==="all")n="n,e,s,w,se,sw,ne,nw";const o=!s.opts.alwaysShowResizeHandle;e.setupResizable({...s.opts.resizable,...{handles:n,autoHide:o},...{start:t.start,stop:t.stop,resize:t.resize}})}});return this}draggable(e,t,i,s){this._getDDElements(e,t).forEach(e=>{if(t==="disable"||t==="enable"){e.ddDraggable&&e.ddDraggable[t]()}else if(t==="destroy"){e.ddDraggable&&e.cleanDraggable()}else if(t==="option"){e.setupDraggable({[i]:s})}else{const i=e.el.gridstackNode.grid;e.setupDraggable({...i.opts.draggable,...{start:t.start,stop:t.stop,drag:t.drag}})}});return this}dragIn(e,t){this._getDDElements(e).forEach(e=>e.setupDraggable(t));return this}droppable(e,t,i,s){if(typeof t.accept==="function"&&!t._accept){t._accept=t.accept;t.accept=e=>t._accept(e)}this._getDDElements(e,t).forEach(e=>{if(t==="disable"||t==="enable"){e.ddDroppable&&e.ddDroppable[t]()}else if(t==="destroy"){e.ddDroppable&&e.cleanDroppable()}else if(t==="option"){e.setupDroppable({[i]:s})}else{e.setupDroppable(t)}});return this}isDroppable(e){return!!(e?.ddElement?.ddDroppable&&!e.ddElement.ddDroppable.disabled)}isDraggable(e){return!!(e?.ddElement?.ddDraggable&&!e.ddElement.ddDraggable.disabled)}isResizable(e){return!!(e?.ddElement?.ddResizable&&!e.ddElement.ddResizable.disabled)}on(e,t,i){this._getDDElements(e).forEach(e=>e.on(t,e=>{i(e,n.DDManager.dragElement?n.DDManager.dragElement.el:e.target,n.DDManager.dragElement?n.DDManager.dragElement.helper:null)}));return this}off(e,t){this._getDDElements(e).forEach(e=>e.off(t));return this}_getDDElements(e,t){const i=e.gridstack||t!=="destroy"&&t!=="disable";const n=s.Utils.getElements(e);if(!n.length)return[];const r=n.map(e=>e.ddElement||(i?o.DDElement.init(e):null)).filter(e=>e);return r}}},1063:(e,t,i)=>{i.r(t);i.d(t,{DDManager:()=>s});class s{}},1064:(e,t,i)=>{i.r(t);i.d(t,{DDElement:()=>r});var s=i(1065);var n=i(1069);var o=i(1070);class r{static init(e){if(!e.ddElement){e.ddElement=new r(e)}return e.ddElement}constructor(e){this.el=e}on(e,t){if(this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1){this.ddDraggable.on(e,t)}else if(this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1){this.ddDroppable.on(e,t)}else if(this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1){this.ddResizable.on(e,t)}return this}off(e){if(this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1){this.ddDraggable.off(e)}else if(this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1){this.ddDroppable.off(e)}else if(this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1){this.ddResizable.off(e)}return this}setupDraggable(e){if(!this.ddDraggable){this.ddDraggable=new n.DDDraggable(this.el,e)}else{this.ddDraggable.updateOption(e)}return this}cleanDraggable(){if(this.ddDraggable){this.ddDraggable.destroy();delete this.ddDraggable}return this}setupResizable(e){if(!this.ddResizable){this.ddResizable=new s.DDResizable(this.el,e)}else{this.ddResizable.updateOption(e)}return this}cleanResizable(){if(this.ddResizable){this.ddResizable.destroy();delete this.ddResizable}return this}setupDroppable(e){if(!this.ddDroppable){this.ddDroppable=new o.DDDroppable(this.el,e)}else{this.ddDroppable.updateOption(e)}return this}cleanDroppable(){if(this.ddDroppable){this.ddDroppable.destroy();delete this.ddDroppable}return this}}},1065:(e,t,i)=>{i.r(t);i.d(t,{DDResizable:()=>l});var s=i(1066);var n=i(1068);var o=i(1060);var r=i(1063);class l extends n.DDBaseImplement{constructor(e,t={}){super();this.el=e;this.option=t;this.rectScale={x:1,y:1};this._ui=()=>{const e=this.el.parentElement;const t=e.getBoundingClientRect();const i={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled};const s=this.temporalRect||i;return{position:{left:(s.left-t.left)*this.rectScale.x,top:(s.top-t.top)*this.rectScale.y},size:{width:s.width*this.rectScale.x,height:s.height*this.rectScale.y}}};this._mouseOver=this._mouseOver.bind(this);this._mouseOut=this._mouseOut.bind(this);this.enable();this._setupAutoHide(this.option.autoHide);this._setupHandlers()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){super.enable();this.el.classList.remove("ui-resizable-disabled");this._setupAutoHide(this.option.autoHide)}disable(){super.disable();this.el.classList.add("ui-resizable-disabled");this._setupAutoHide(false)}destroy(){this._removeHandlers();this._setupAutoHide(false);delete this.el;super.destroy()}updateOption(e){const t=e.handles&&e.handles!==this.option.handles;const i=e.autoHide&&e.autoHide!==this.option.autoHide;Object.keys(e).forEach(t=>this.option[t]=e[t]);if(t){this._removeHandlers();this._setupHandlers()}if(i){this._setupAutoHide(this.option.autoHide)}return this}_setupAutoHide(e){if(e){this.el.classList.add("ui-resizable-autohide");this.el.addEventListener("mouseover",this._mouseOver);this.el.addEventListener("mouseout",this._mouseOut)}else{this.el.classList.remove("ui-resizable-autohide");this.el.removeEventListener("mouseover",this._mouseOver);this.el.removeEventListener("mouseout",this._mouseOut);if(r.DDManager.overResizeElement===this){delete r.DDManager.overResizeElement}}return this}_mouseOver(e){if(r.DDManager.overResizeElement||r.DDManager.dragElement)return;r.DDManager.overResizeElement=this;this.el.classList.remove("ui-resizable-autohide")}_mouseOut(e){if(r.DDManager.overResizeElement!==this)return;delete r.DDManager.overResizeElement;this.el.classList.add("ui-resizable-autohide")}_setupHandlers(){this.handlers=this.option.handles.split(",").map(e=>e.trim()).map(e=>new s.DDResizableHandle(this.el,e,{start:e=>{this._resizeStart(e)},stop:e=>{this._resizeStop(e)},move:t=>{this._resizing(t,e)}}));return this}_resizeStart(e){this.sizeToContent=o.Utils.shouldSizeToContent(this.el.gridstackNode,true);this.originalRect=this.el.getBoundingClientRect();this.scrollEl=o.Utils.getScrollElement(this.el);this.scrollY=this.scrollEl.scrollTop;this.scrolled=0;this.startEvent=e;this._setupHelper();this._applyChange();const t=o.Utils.initEvent(e,{type:"resizestart",target:this.el});if(this.option.start){this.option.start(t,this._ui())}this.el.classList.add("ui-resizable-resizing");this.triggerEvent("resizestart",t);return this}_resizing(e,t){this.scrolled=this.scrollEl.scrollTop-this.scrollY;this.temporalRect=this._getChange(e,t);this._applyChange();const i=o.Utils.initEvent(e,{type:"resize",target:this.el});if(this.option.resize){this.option.resize(i,this._ui())}this.triggerEvent("resize",i);return this}_resizeStop(e){const t=o.Utils.initEvent(e,{type:"resizestop",target:this.el});this._cleanHelper();if(this.option.stop){this.option.stop(t)}this.el.classList.remove("ui-resizable-resizing");this.triggerEvent("resizestop",t);delete this.startEvent;delete this.originalRect;delete this.temporalRect;delete this.scrollY;delete this.scrolled;return this}_setupHelper(){this.elOriginStyleVal=l._originStyleProp.map(e=>this.el.style[e]);this.parentOriginStylePosition=this.el.parentElement.style.position;const e=this.el.parentElement;const t=o.Utils.getValuesFromTransformedElement(e);this.rectScale={x:t.xScale,y:t.yScale};if(getComputedStyle(this.el.parentElement).position.match(/static/)){this.el.parentElement.style.position="relative"}this.el.style.position="absolute";this.el.style.opacity="0.8";return this}_cleanHelper(){l._originStyleProp.forEach((e,t)=>{this.el.style[e]=this.elOriginStyleVal[t]||null});this.el.parentElement.style.position=this.parentOriginStylePosition||null;return this}_getChange(e,t){const i=this.startEvent;const s={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled};const n=e.clientX-i.clientX;const o=this.sizeToContent?0:e.clientY-i.clientY;let r;let l;if(t.indexOf("e")>-1){s.width+=n}else if(t.indexOf("w")>-1){s.width-=n;s.left+=n;r=true}if(t.indexOf("s")>-1){s.height+=o}else if(t.indexOf("n")>-1){s.height-=o;s.top+=o;l=true}const a=this._constrainSize(s.width,s.height,r,l);if(Math.round(s.width)!==Math.round(a.width)){if(t.indexOf("w")>-1){s.left+=s.width-a.width}s.width=a.width}if(Math.round(s.height)!==Math.round(a.height)){if(t.indexOf("n")>-1){s.top+=s.height-a.height}s.height=a.height}return s}_constrainSize(e,t,i,s){const n=this.option;const o=(i?n.maxWidthMoveLeft:n.maxWidth)||Number.MAX_SAFE_INTEGER;const r=n.minWidth/this.rectScale.x||e;const l=(s?n.maxHeightMoveUp:n.maxHeight)||Number.MAX_SAFE_INTEGER;const a=n.minHeight/this.rectScale.y||t;const h=Math.min(o,Math.max(r,e));const d=Math.min(l,Math.max(a,t));return{width:h,height:d}}_applyChange(){let e={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){const t=this.el.parentElement;const{left:i,top:s}=t.getBoundingClientRect();e={left:i,top:s,width:0,height:0}}if(!this.temporalRect)return this;Object.keys(this.temporalRect).forEach(t=>{const i=this.temporalRect[t];const s=t==="width"||t==="left"?this.rectScale.x:t==="height"||t==="top"?this.rectScale.y:1;this.el.style[t]=(i-e[t])*s+"px"});return this}_removeHandlers(){this.handlers.forEach(e=>e.destroy());delete this.handlers;return this}}l._originStyleProp=["width","height","position","left","top","opacity","zIndex"]},1066:(e,t,i)=>{i.r(t);i.d(t,{DDResizableHandle:()=>n});var s=i(1067);class n{constructor(e,t,i){this.host=e;this.dir=t;this.option=i;this.moving=false;this._mouseDown=this._mouseDown.bind(this);this._mouseMove=this._mouseMove.bind(this);this._mouseUp=this._mouseUp.bind(this);this._keyEvent=this._keyEvent.bind(this);this._init()}_init(){const e=this.el=document.createElement("div");e.classList.add("ui-resizable-handle");e.classList.add(`${n.prefix}${this.dir}`);e.style.zIndex="100";e.style.userSelect="none";this.host.appendChild(this.el);this.el.addEventListener("mousedown",this._mouseDown);if(s.isTouch){this.el.addEventListener("touchstart",s.touchstart);this.el.addEventListener("pointerdown",s.pointerdown)}return this}destroy(){if(this.moving)this._mouseUp(this.mouseDownEvent);this.el.removeEventListener("mousedown",this._mouseDown);if(s.isTouch){this.el.removeEventListener("touchstart",s.touchstart);this.el.removeEventListener("pointerdown",s.pointerdown)}this.host.removeChild(this.el);delete this.el;delete this.host;return this}_mouseDown(e){this.mouseDownEvent=e;document.addEventListener("mousemove",this._mouseMove,{capture:true,passive:true});document.addEventListener("mouseup",this._mouseUp,true);if(s.isTouch){this.el.addEventListener("touchmove",s.touchmove);this.el.addEventListener("touchend",s.touchend)}e.stopPropagation();e.preventDefault()}_mouseMove(e){const t=this.mouseDownEvent;if(this.moving){this._triggerEvent("move",e)}else if(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>2){this.moving=true;this._triggerEvent("start",this.mouseDownEvent);this._triggerEvent("move",e);document.addEventListener("keydown",this._keyEvent)}e.stopPropagation()}_mouseUp(e){if(this.moving){this._triggerEvent("stop",e);document.removeEventListener("keydown",this._keyEvent)}document.removeEventListener("mousemove",this._mouseMove,true);document.removeEventListener("mouseup",this._mouseUp,true);if(s.isTouch){this.el.removeEventListener("touchmove",s.touchmove);this.el.removeEventListener("touchend",s.touchend)}delete this.moving;delete this.mouseDownEvent;e.stopPropagation();e.preventDefault()}_keyEvent(e){if(e.key==="Escape"){this.host.gridstackNode?.grid?.engine.restoreInitial();this._mouseUp(this.mouseDownEvent)}}_triggerEvent(e,t){if(this.option[e])this.option[e](t);return this}}n.prefix="ui-resizable-"},1067:(e,t,i)=>{i.r(t);i.d(t,{isTouch:()=>o,pointerdown:()=>u,pointerenter:()=>g,pointerleave:()=>f,touchend:()=>c,touchmove:()=>d,touchstart:()=>h});var s=i(1063);var n=i(1060);const o=typeof window!=="undefined"&&typeof document!=="undefined"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class r{}function l(e,t){if(e.touches.length>1)return;if(e.cancelable)e.preventDefault();n.Utils.simulateMouseEvent(e.changedTouches[0],t)}function a(e,t){if(e.cancelable)e.preventDefault();n.Utils.simulateMouseEvent(e,t)}function h(e){if(r.touchHandled)return;r.touchHandled=true;l(e,"mousedown")}function d(e){if(!r.touchHandled)return;l(e,"mousemove")}function c(e){if(!r.touchHandled)return;if(r.pointerLeaveTimeout){window.clearTimeout(r.pointerLeaveTimeout);delete r.pointerLeaveTimeout}const t=!!s.DDManager.dragElement;l(e,"mouseup");if(!t){l(e,"click")}r.touchHandled=false}function u(e){if(e.pointerType==="mouse")return;e.target.releasePointerCapture(e.pointerId)}function g(e){if(!s.DDManager.dragElement){return}if(e.pointerType==="mouse")return;a(e,"mouseenter")}function f(e){if(!s.DDManager.dragElement){return}if(e.pointerType==="mouse")return;r.pointerLeaveTimeout=window.setTimeout(()=>{delete r.pointerLeaveTimeout;a(e,"mouseleave")},10)}},1068:(e,t,i)=>{i.r(t);i.d(t,{DDBaseImplement:()=>s});class s{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(e,t){this._eventRegister[e]=t}off(e){delete this._eventRegister[e]}enable(){this._disabled=false}disable(){this._disabled=true}destroy(){delete this._eventRegister}triggerEvent(e,t){if(!this.disabled&&this._eventRegister&&this._eventRegister[e])return this._eventRegister[e](t)}}},1069:(e,t,i)=>{i.r(t);i.d(t,{DDDraggable:()=>a});var s=i(1063);var n=i(1060);var o=i(1068);var r=i(1067);const l='input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle';class a extends o.DDBaseImplement{constructor(e,t={}){super();this.el=e;this.option=t;this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};const i=t?.handle?.substring(1);const s=e.gridstackNode;this.dragEls=!i||e.classList.contains(i)?[e]:s?.subGrid?[e.querySelector(t.handle)||e]:Array.from(e.querySelectorAll(t.handle));if(this.dragEls.length===0){this.dragEls=[e]}this._mouseDown=this._mouseDown.bind(this);this._mouseMove=this._mouseMove.bind(this);this._mouseUp=this._mouseUp.bind(this);this._keyEvent=this._keyEvent.bind(this);this.enable()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){if(this.disabled===false)return;super.enable();this.dragEls.forEach(e=>{e.addEventListener("mousedown",this._mouseDown);if(r.isTouch){e.addEventListener("touchstart",r.touchstart);e.addEventListener("pointerdown",r.pointerdown)}});this.el.classList.remove("ui-draggable-disabled")}disable(e=false){if(this.disabled===true)return;super.disable();this.dragEls.forEach(e=>{e.removeEventListener("mousedown",this._mouseDown);if(r.isTouch){e.removeEventListener("touchstart",r.touchstart);e.removeEventListener("pointerdown",r.pointerdown)}});if(!e)this.el.classList.add("ui-draggable-disabled")}destroy(){if(this.dragTimeout)window.clearTimeout(this.dragTimeout);delete this.dragTimeout;if(this.mouseDownEvent)this._mouseUp(this.mouseDownEvent);this.disable(true);delete this.el;delete this.helper;delete this.option;super.destroy()}updateOption(e){Object.keys(e).forEach(t=>this.option[t]=e[t]);return this}_mouseDown(e){if(s.DDManager.mouseHandled)return;if(e.button!==0)return true;if(!this.dragEls.find(t=>t===e.target)&&e.target.closest(l))return true;if(this.option.cancel){if(e.target.closest(this.option.cancel))return true}this.mouseDownEvent=e;delete this.dragging;delete s.DDManager.dragElement;delete s.DDManager.dropElement;document.addEventListener("mousemove",this._mouseMove,{capture:true,passive:true});document.addEventListener("mouseup",this._mouseUp,true);if(r.isTouch){e.currentTarget.addEventListener("touchmove",r.touchmove);e.currentTarget.addEventListener("touchend",r.touchend)}e.preventDefault();if(document.activeElement)document.activeElement.blur();s.DDManager.mouseHandled=true;return true}_callDrag(e){if(!this.dragging)return;const t=n.Utils.initEvent(e,{target:this.el,type:"drag"});if(this.option.drag){this.option.drag(t,this.ui())}this.triggerEvent("drag",t)}_mouseMove(e){const t=this.mouseDownEvent;this.lastDrag=e;if(this.dragging){this._dragFollow(e);if(s.DDManager.pauseDrag){const t=Number.isInteger(s.DDManager.pauseDrag)?s.DDManager.pauseDrag:100;if(this.dragTimeout)window.clearTimeout(this.dragTimeout);this.dragTimeout=window.setTimeout(()=>this._callDrag(e),t)}else{this._callDrag(e)}}else if(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>3){this.dragging=true;s.DDManager.dragElement=this;const t=this.el.gridstackNode?.grid;if(t){s.DDManager.dropElement=t.el.ddElement.ddDroppable}else{delete s.DDManager.dropElement}this.helper=this._createHelper();this._setupHelperContainmentStyle();this.dragTransform=n.Utils.getValuesFromTransformedElement(this.helperContainment);this.dragOffset=this._getDragOffset(e,this.el,this.helperContainment);this._setupHelperStyle(e);const i=n.Utils.initEvent(e,{target:this.el,type:"dragstart"});if(this.option.start){this.option.start(i,this.ui())}this.triggerEvent("dragstart",i);document.addEventListener("keydown",this._keyEvent)}return true}_mouseUp(e){document.removeEventListener("mousemove",this._mouseMove,true);document.removeEventListener("mouseup",this._mouseUp,true);if(r.isTouch&&e.currentTarget){e.currentTarget.removeEventListener("touchmove",r.touchmove,true);e.currentTarget.removeEventListener("touchend",r.touchend,true)}if(this.dragging){delete this.dragging;delete this.el.gridstackNode?._origRotate;document.removeEventListener("keydown",this._keyEvent);if(s.DDManager.dropElement?.el===this.el.parentElement){delete s.DDManager.dropElement}this.helperContainment.style.position=this.parentOriginStylePosition||null;if(this.helper!==this.el)this.helper.remove();this._removeHelperStyle();const t=n.Utils.initEvent(e,{target:this.el,type:"dragstop"});if(this.option.stop){this.option.stop(t)}this.triggerEvent("dragstop",t);if(s.DDManager.dropElement){s.DDManager.dropElement.drop(e)}}delete this.helper;delete this.mouseDownEvent;delete s.DDManager.dragElement;delete s.DDManager.dropElement;delete s.DDManager.mouseHandled;e.preventDefault()}_keyEvent(e){const t=this.el.gridstackNode;const i=t?.grid||s.DDManager.dropElement?.el?.gridstack;if(e.key==="Escape"){if(t&&t._origRotate){t._orig=t._origRotate;delete t._origRotate}i?.cancelDrag();this._mouseUp(this.mouseDownEvent)}else if(t&&i&&(e.key==="r"||e.key==="R")){if(!n.Utils.canBeRotated(t))return;t._origRotate=t._origRotate||{...t._orig};delete t._moving;i.setAnimation(false).rotate(t.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation();t._moving=true;this.dragOffset=this._getDragOffset(this.lastDrag,t.el,this.helperContainment);this.helper.style.width=this.dragOffset.width+"px";this.helper.style.height=this.dragOffset.height+"px";n.Utils.swap(t._orig,"w","h");delete t._rect;this._mouseMove(this.lastDrag)}}_createHelper(){let e=this.el;if(typeof this.option.helper==="function"){e=this.option.helper(this.el)}else if(this.option.helper==="clone"){e=n.Utils.cloneNode(this.el)}if(!e.parentElement){n.Utils.appendTo(e,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo)}this.dragElementOriginStyle=a.originStyleProp.map(e=>this.el.style[e]);return e}_setupHelperStyle(e){this.helper.classList.add("ui-draggable-dragging");const t=this.helper.style;t.pointerEvents="none";t.width=this.dragOffset.width+"px";t.height=this.dragOffset.height+"px";t.willChange="left, top";t.position="fixed";this._dragFollow(e);t.transition="none";setTimeout(()=>{if(this.helper){t.transition=null}},0);return this}_removeHelperStyle(){this.helper.classList.remove("ui-draggable-dragging");const e=this.helper?.gridstackNode;if(!e?._isAboutToRemove&&this.dragElementOriginStyle){const e=this.helper;const t=this.dragElementOriginStyle["transition"]||null;e.style.transition=this.dragElementOriginStyle["transition"]="none";a.originStyleProp.forEach(t=>e.style[t]=this.dragElementOriginStyle[t]||null);setTimeout(()=>e.style.transition=t,50)}delete this.dragElementOriginStyle;return this}_dragFollow(e){const t={left:0,top:0};const i=this.helper.style;const s=this.dragOffset;i.left=(e.clientX+s.offsetLeft-t.left)*this.dragTransform.xScale+"px";i.top=(e.clientY+s.offsetTop-t.top)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){this.helperContainment=this.helper.parentElement;if(this.helper.style.position!=="fixed"){this.parentOriginStylePosition=this.helperContainment.style.position;if(getComputedStyle(this.helperContainment).position.match(/static/)){this.helperContainment.style.position="relative"}}return this}_getDragOffset(e,t,i){let s=0;let n=0;if(i){s=this.dragTransform.xOffset;n=this.dragTransform.yOffset}const o=t.getBoundingClientRect();return{left:o.left,top:o.top,offsetLeft:-e.clientX+o.left-s,offsetTop:-e.clientY+o.top-n,width:o.width*this.dragTransform.xScale,height:o.height*this.dragTransform.yScale}}ui(){const e=this.el.parentElement;const t=e.getBoundingClientRect();const i=this.helper.getBoundingClientRect();return{position:{top:(i.top-t.top)*this.dragTransform.yScale,left:(i.left-t.left)*this.dragTransform.xScale}}}}a.originStyleProp=["width","height","transform","transform-origin","transition","pointerEvents","position","left","top","minWidth","willChange"]},1070:(e,t,i)=>{i.r(t);i.d(t,{DDDroppable:()=>l});var s=i(1063);var n=i(1068);var o=i(1060);var r=i(1067);class l extends n.DDBaseImplement{constructor(e,t={}){super();this.el=e;this.option=t;this._mouseEnter=this._mouseEnter.bind(this);this._mouseLeave=this._mouseLeave.bind(this);this.enable();this._setupAccept()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){if(this.disabled===false)return;super.enable();this.el.classList.add("ui-droppable");this.el.classList.remove("ui-droppable-disabled");this.el.addEventListener("mouseenter",this._mouseEnter);this.el.addEventListener("mouseleave",this._mouseLeave);if(r.isTouch){this.el.addEventListener("pointerenter",r.pointerenter);this.el.addEventListener("pointerleave",r.pointerleave)}}disable(e=false){if(this.disabled===true)return;super.disable();this.el.classList.remove("ui-droppable");if(!e)this.el.classList.add("ui-droppable-disabled");this.el.removeEventListener("mouseenter",this._mouseEnter);this.el.removeEventListener("mouseleave",this._mouseLeave);if(r.isTouch){this.el.removeEventListener("pointerenter",r.pointerenter);this.el.removeEventListener("pointerleave",r.pointerleave)}}destroy(){this.disable(true);this.el.classList.remove("ui-droppable");this.el.classList.remove("ui-droppable-disabled");super.destroy()}updateOption(e){Object.keys(e).forEach(t=>this.option[t]=e[t]);this._setupAccept();return this}_mouseEnter(e){if(!s.DDManager.dragElement)return;if(!this._canDrop(s.DDManager.dragElement.el))return;e.preventDefault();e.stopPropagation();if(s.DDManager.dropElement&&s.DDManager.dropElement!==this){s.DDManager.dropElement._mouseLeave(e,true)}s.DDManager.dropElement=this;const t=o.Utils.initEvent(e,{target:this.el,type:"dropover"});if(this.option.over){this.option.over(t,this._ui(s.DDManager.dragElement))}this.triggerEvent("dropover",t);this.el.classList.add("ui-droppable-over")}_mouseLeave(e,t=false){if(!s.DDManager.dragElement||s.DDManager.dropElement!==this)return;e.preventDefault();e.stopPropagation();const i=o.Utils.initEvent(e,{target:this.el,type:"dropout"});if(this.option.out){this.option.out(i,this._ui(s.DDManager.dragElement))}this.triggerEvent("dropout",i);if(s.DDManager.dropElement===this){delete s.DDManager.dropElement;if(!t){let t;let i=this.el.parentElement;while(!t&&i){t=i.ddElement?.ddDroppable;i=i.parentElement}if(t){t._mouseEnter(e)}}}}drop(e){e.preventDefault();const t=o.Utils.initEvent(e,{target:this.el,type:"drop"});if(this.option.drop){this.option.drop(t,this._ui(s.DDManager.dragElement))}this.triggerEvent("drop",t)}_canDrop(e){return e&&(!this.accept||this.accept(e))}_setupAccept(){if(!this.option.accept)return this;if(typeof this.option.accept==="string"){this.accept=e=>e.classList.contains(this.option.accept)||e.matches(this.option.accept)}else{this.accept=this.option.accept}return this}_ui(e){return{draggable:e.el,...e.ui()}}}},1071:(e,t,i)=>{i.r(t)}};var t={};function i(s){var n=t[s];if(n!==undefined){return n.exports}var o=t[s]={exports:{}};e[s](o,o.exports,i);return o.exports}(()=>{i.d=(e,t)=>{for(var s in t){if(i.o(t,s)&&!i.o(e,s)){Object.defineProperty(e,s,{enumerable:true,get:t[s]})}}}})();(()=>{i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{i.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();var s={};(()=>{i.r(s);var e=i(1058);
/**
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @copyright 2003-2014 by the INDEPNET Development Team.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */window.GridStack=e.GridStack;i(1071)})()})();