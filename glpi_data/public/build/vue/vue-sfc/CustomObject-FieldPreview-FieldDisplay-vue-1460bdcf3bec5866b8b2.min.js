/*!
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */
"use strict";(self["webpackChunk_glpi_glpi"]=self["webpackChunk_glpi_glpi"]||[]).push([[1],{28:(e,t,n)=>{n.r(t);n.d(t,{default:()=>s});var i=n(29);var l=n(31);var o=n(41);var a=n(27);const d=(0,a["default"])(l["default"],[["render",i.render],["__scopeId","data-v-71bc6034"],["__file","js/src/vue/CustomObject/FieldPreview/FieldDisplay.vue"]]);if(false){}const s=d},29:(e,t,n)=>{n.r(t);n.d(t,{render:()=>i.render});var i=n(30)},30:(e,t,n)=>{n.r(t);n.d(t,{render:()=>p});var i=n(9);const l={class:"col-12 col-xxl-12 flex-column px-n3",ref:"component_root"};const o={class:"d-flex flex-row flex-wrap flex-xl-nowrap"};const a={class:"row flex-row align-items-start flex-grow-1 d-flex"};const d={class:"col"};const s={class:"user-select-none row flex-row p-2",id:"sortable-fields",style:{"min-height":"50px"}};const r={key:0,class:"required"};const f=["title"];const c=["name","value"];const _=["name","value"];function p(e,t,n,p,u,m){return(0,i.openBlock)(),(0,i.createElementBlock)("div",l,[t[0]||(t[0]=(0,i.createElementVNode)("input",{type:"hidden",name:"_update_fields_display",value:"1"},null,-1)),t[1]||(t[1]=(0,i.createElementVNode)("input",{type:"hidden",name:"fields_display",value:""},null,-1)),(0,i.createElementVNode)("div",o,[(0,i.createElementVNode)("div",a,[(0,i.createElementVNode)("div",d,[(0,i.createElementVNode)("div",s,[((0,i.openBlock)(true),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(p.active_fields,t=>((0,i.openBlock)(),(0,i.createBlock)(p["Field"],{key:t.key,field_key:t.key,customfields_id:t.customfields_id,field_options:t.field_options,is_active:t.is_active},{field_label:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(t.label),1)]),field_markers:(0,i.withCtx)(()=>[parseInt(t.field_options.required??0)===1?((0,i.openBlock)(),(0,i.createElementBlock)("span",r,"*")):(0,i.createCommentVNode)("v-if",true),parseInt(t.field_options.readonly??0)===1?((0,i.openBlock)(),(0,i.createElementBlock)("i",{key:1,class:"ti ti-pencil-off ms-2",title:e.__("Readonly")},null,8,f)):(0,i.createCommentVNode)("v-if",true)]),field_options:(0,i.withCtx)(()=>[((0,i.openBlock)(true),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(t.field_options,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:n},[Array.isArray(e)?((0,i.openBlock)(true),(0,i.createElementBlock)(i.Fragment,{key:0},(0,i.renderList)(e,e=>((0,i.openBlock)(),(0,i.createElementBlock)("input",{type:"hidden",name:`field_options[${t.key}][${n}][]`,value:e},null,8,c))),256)):((0,i.openBlock)(),(0,i.createElementBlock)("input",{key:1,type:"hidden",name:`field_options[${t.key}][${n}]`,value:e},null,8,_))],64))),128))]),_:2},1032,["field_key","customfields_id","field_options","is_active"]))),128))])]),(0,i.createVNode)(p["Sidebar"],{inactive_fields:p.inactive_fields,add_edit_fn:n.add_edit_fn},null,8,["inactive_fields","add_edit_fn"])])])],512)}},31:(e,t,n)=>{n.r(t);n.d(t,{default:()=>i["default"]});var i=n(32)},32:(e,t,n)=>{n.r(t);n.d(t,{default:()=>a});var i=n(9);var l=n(11);var o=n(33);const a={__name:"FieldDisplay",props:{items_id:Number,toolbar_el:String,all_fields:Object,fields_display:Array,add_edit_fn:String,can_create_fields:Boolean},setup(e,{expose:t}){t();const n=e;const a=(0,i.ref)(n.all_fields);const d=n.fields_display;const s=(0,i.useTemplateRef)("component_root");const r=(0,i.computed)(()=>$(s.value).parent());const f=(0,i.reactive)(new Map);function c(){(0,i.nextTick)(()=>{window.sortable("#sortable-fields",{items:".sortable-field",forcePlaceholderSize:false,acceptFrom:".fields-sidebar, #sortable-fields"});window.sortable(".fields-sidebar",{items:".sortable-field",forcePlaceholderSize:false,acceptFrom:false})})}function p(e,t=undefined){const n=[];e.forEach(e=>{let i;if(t!==undefined&&t[e]!==undefined){i=t[e]}else{i=a.value[e]}if(i===undefined){return}n.push({key:e,selected_field:i})});n.forEach(({key:e,selected_field:t})=>{if(!f.has(e)){const n=f.size;f.set(e,{key:e,label:t.text??t,field_options:d.find(t=>t.key===e)?.field_options??{},customfields_id:t.customfields_id??-1,is_active:t.is_active??true,order:d.find(t=>t.key===e)?.order??n})}});c()}function u(e){f.get(e).is_active=false;c()}function m(){const e=`${CFG_GLPI.root_doc}/ajax/asset/assetdefinition.php?action=get_all_fields&assetdefinitions_id=${n.items_id}`;$.get(e,e=>{const t={};$.each(e["results"],(e,n)=>{t[n.id]=n});p(Object.keys(t),t);c()})}(0,i.onMounted)(()=>{$.each(a.value,(e,t)=>{const n=t;n.is_active=d.find(t=>t.key===e)!==undefined;p([e],{[e]:n})});const e=$("#sortable-fields");e.on("dragenter",()=>{const t=$(".sortable-field.sortable-dragging");const n=t.attr("class").split(" ").filter(e=>!["sortable-dragging"].includes(e)).join(" ");e.find(".sortable-placeholder").attr("class",`sortable-placeholder ${n} px-2`);if(e.find(".sortable-placeholder .sortable-placeholder-inner").length===0){e.find(".sortable-placeholder").append(`<div class="sortable-placeholder-inner"></div>`)}});e.on("sortupdate",e=>{const t=e.originalEvent.detail.origin.container;const n=e.originalEvent.detail.destination.container;if(t===n){return}const i=$(e.originalEvent.detail.item);const l=$(n).attr("id")==="sortable-fields";if(l){const e=f.get(i.attr("data-key"));e.is_active=true;f.forEach(e=>{e.order=$(s.value).find(".sortable-field").index($(`.sortable-field[data-key="${CSS.escape(e.key)}"]`))})}else{u(i.attr("data-key"))}});$(s.value).on("click",".edit-field",e=>{const t=$(e.target).closest(".sortable-field");const i=t.attr("data-customfield-id");const l=t.attr("data-key");if(i===undefined||i==="-1"){const e=new URLSearchParams({action:"get_core_field_editor",assetdefinitions_id:n.items_id,key:t.attr("data-key")});const i=f.get(l);for(const[t,n]of Object.entries(i.field_options)){if(Array.isArray(n)){n.forEach(n=>{e.append(`field_options[${t}][]`,n)})}else{e.append(`field_options[${t}]`,n)}}const o=`${CFG_GLPI.root_doc}/ajax/asset/assetdefinition.php?${e}`;window.glpi_ajax_dialog({id:"core_field_options_editor",modalclass:"modal-xl",appendTo:`#${CSS.escape($(r.value).attr("id"))}`,title:_.escape(t.text()),url:o,buttons:[{id:"cancel_core_field_options",label:__("Cancel"),class:"btn-ghost-secondary"},{id:"save_core_field_options",label:_x("button","Save"),class:"btn-primary"}]})}else{window[n.add_edit_fn](i);$("#customfield_form_container_modal .modal-title").text(t.text())}}).on("click",".hide-field",e=>{const t=$(e.target).closest(".sortable-field").attr("data-key");u(t)}).on("click",".purge-field",e=>{const t=$(e.target).closest(".sortable-field").attr("data-key");const n=$(e.target).closest(".sortable-field").attr("data-customfield-id");$.ajax({url:`${CFG_GLPI.root_doc}/ajax/asset/customfield.php`,type:"POST",data:{customfielddefinitions_id:n,action:"purge_field"},success:()=>{f.delete(t);c()},complete:()=>{displayAjaxMessageAfterRedirect()}})});r.value.on("click","#save_core_field_options",()=>{const e=$('#core_field_options_editor form input[name="key"]');const t=e.val();e.remove();const n=$("#core_field_options_editor form").serializeArray();const i=f.get(t);i.field_options={};n.forEach(e=>{let t=e.name.replace("field_options[","");if(t.endsWith("[]")){t=t.slice(0,-3);if(!Array.isArray(i.field_options[t])){i.field_options[t]=[]}i.field_options[t].push(e.value)}else{t=t.slice(0,-1);i.field_options[t]=e.value}});p([t]);$("#core_field_options_editor").modal("hide")}).on("click","#cancel_core_field_options",()=>{$("#core_field_options_editor").modal("hide")});const t=$("#customfield_form_container_modal");t.on("glpi:submit:success","form",(e,t)=>{const n=t.submitter;const i=new FormData(e.target);const l=`custom_${i.get("system_name")}`;m();if(n.attr("name")==="add"||n.attr("name")==="update"){p([l],{[l]:{text:i.get("label")}});const e=f.get(l);e.field_options={};i.entries().forEach(([t,n])=>{if(t.startsWith("field_options[")){const i=t.endsWith("[]");const l=t.replace("field_options[","").replace(/\[\]/,"");if(i){e.field_options[l]=e.field_options[l]??[];if(!Array.isArray(e.field_options[l])){e.field_options[l]=[e.field_options[l]]}e.field_options[l].push(n)}else{e.field_options[l]=n}}})}else if(n.attr("name")==="purge"){u(l)}})});const b=(0,i.computed)(()=>{const e=[];[...f].filter(([e,t])=>t.is_active).sort((e,t)=>e[1].order-t[1].order).forEach(([t,n])=>{e.push({...n,key:t})});return e});const v=(0,i.computed)(()=>new Map([...f].filter(([e,t])=>!t.is_active)));(0,i.watch)(b,()=>{$(s.value).find(".hide-field").prop("disabled",f.size===1).prop("title",f.size===1?__("Cannot remove the last field"):__("Hide"))},{deep:true});const y={props:n,initial_fields:a,fields_display:d,component_root:s,sortable_fields_container:r,sortable_fields:f,refreshSortables:c,appendField:p,removeField:u,refreshAllFields:m,active_fields:b,inactive_fields:v,onMounted:i.onMounted,computed:i.computed,ref:i.ref,reactive:i.reactive,watch:i.watch,useTemplateRef:i.useTemplateRef,nextTick:i.nextTick,Field:l["default"],Sidebar:o["default"]};Object.defineProperty(y,"__isScriptSetup",{enumerable:false,value:true});return y}}},41:(e,t,n)=>{n.r(t);var i=n(42)},42:(e,t,n)=>{n.r(t);n.d(t,{default:()=>y});var i=n(18);var l=n.n(i);var o=n(19);var a=n.n(o);var d=n(20);var s=n.n(d);var r=n(21);var f=n.n(r);var c=n(22);var _=n.n(c);var p=n(23);var u=n.n(p);var m=n(43);var b={};b.styleTagTransform=u();b.setAttributes=f();b.insert=s().bind(null,"head");b.domAPI=a();b.insertStyleElement=_();var v=l()(m["default"],b);const y=m["default"]&&m["default"].locals?m["default"].locals:undefined},43:(e,t,n)=>{n.r(t);n.d(t,{default:()=>s});var i=n(25);var l=n.n(i);var o=n(26);var a=n.n(o);var d=a()(l());d.push([e.id,`\n[data-v-71bc6034] .sortable-field .btn.hide-field:disabled {\n        pointer-events: auto;\n}\n[data-v-71bc6034] .sortable-placeholder {\n        background: unset;\n        border: unset;\n        height: 38px;\n.sortable-placeholder-inner {\n            border: 2px dashed #dad55e;\n            background: #fff99038;\n            height: 100%;\n}\n}\n`,"",{version:3,sources:["webpack://./js/src/vue/CustomObject/FieldPreview/FieldDisplay.vue"],names:[],mappings:";AAwVI;QACI,oBAAoB;AACxB;AACA;QACI,iBAAiB;QACjB,aAAa;QACb,YAAY;AACZ;YACI,0BAA0B;YAC1B,qBAAqB;YACrB,YAAY;AAChB;AACJ",sourcesContent:["<script setup>\n    import {onMounted, computed, ref, reactive, watch, useTemplateRef, nextTick} from 'vue';\n    import Field from \"./Field.vue\";\n    import Sidebar from \"./Sidebar.vue\";\n\n    const props = defineProps({\n        items_id: Number,\n        toolbar_el: String,\n        all_fields: Object,\n        fields_display: Array,\n        add_edit_fn: String,\n        can_create_fields: Boolean,\n    });\n\n    const initial_fields = ref(props.all_fields);\n    const fields_display = props.fields_display;\n    const component_root = useTemplateRef('component_root');\n    const sortable_fields_container = computed(() => {\n        return $(component_root.value).parent();\n    });\n    /**\n     * @typedef {{key: string, label: string, field_options: {}, preview_html: string, label_classes: string, field_classes: string, wrapper_classes: string}} SortableField\n     */\n    /**\n     * @type {Map<string, SortableField>}\n     */\n    const sortable_fields = reactive(new Map());\n\n    function refreshSortables() {\n        nextTick(() => {\n            // Need to wait for the DOM changes to be applied\n            window.sortable('#sortable-fields', {\n                items: '.sortable-field',\n                forcePlaceholderSize: false,\n                acceptFrom: '.fields-sidebar, #sortable-fields',\n            });\n            window.sortable('.fields-sidebar', {\n                items: '.sortable-field',\n                forcePlaceholderSize: false,\n                acceptFrom: false,\n            });\n        });\n    }\n\n    /**\n     * Append a field to the sortable list\n     * @param keys {string[]} The key of the field to append\n     * @param selected_fields_data {{}} The data of the selected fields. If not provided, it will be fetched from the select2 dropdown\n     */\n    function appendField(keys, selected_fields_data = undefined) {\n        const preview_data = [];\n        keys.forEach((key) => {\n            let selected_field;\n            if (selected_fields_data !== undefined && selected_fields_data[key] !== undefined) {\n                selected_field = selected_fields_data[key];\n            } else {\n                selected_field = initial_fields.value[key];\n            }\n            if (selected_field === undefined) {\n                return;\n            }\n            preview_data.push({key: key, selected_field: selected_field});\n        });\n        preview_data.forEach(({key, selected_field}) => {\n            if (!sortable_fields.has(key)) {\n                const next_order_position = sortable_fields.size;\n                sortable_fields.set(key, {\n                    key: key,\n                    label: selected_field.text ?? selected_field,\n                    field_options: fields_display.find((field) => field.key === key)?.field_options ?? {},\n                    customfields_id: selected_field.customfields_id ?? -1,\n                    is_active: selected_field.is_active ?? true,\n                    order: fields_display.find((field) => field.key === key)?.order ?? next_order_position,\n                });\n            }\n        });\n        refreshSortables();\n    }\n\n    function removeField(key) {\n        // remove the field from sortable list\n        sortable_fields.get(key).is_active = false;\n        refreshSortables();\n    }\n\n    /**\n     * Refresh the data in the all_fields object\n     */\n    function refreshAllFields() {\n        const url = `${CFG_GLPI.root_doc}/ajax/asset/assetdefinition.php?action=get_all_fields&assetdefinitions_id=${props.items_id}`;\n        $.get(url, (data) => {\n            const new_fields = {};\n            $.each(data['results'], (key, field) => {\n                new_fields[field.id] = field;\n            });\n            appendField(Object.keys(new_fields), new_fields)\n            refreshSortables();\n        });\n    }\n\n    onMounted(() => {\n        $.each(initial_fields.value, (key, field) => {\n            const field_data = field;\n            field_data.is_active = fields_display.find((field) => field.key === key) !== undefined;\n            appendField([key], {[key]: field_data});\n        });\n\n        const sortable_container = $('#sortable-fields');\n\n        sortable_container.on('dragenter', () => {\n            const sort_el = $('.sortable-field.sortable-dragging');\n            const classes_to_copy = sort_el.attr('class').split(' ')\n                .filter((cls) => !['sortable-dragging'].includes(cls))\n                .join(' ');\n            sortable_container.find('.sortable-placeholder').attr('class', `sortable-placeholder ${classes_to_copy} px-2`);\n            if (sortable_container.find('.sortable-placeholder .sortable-placeholder-inner').length === 0) {\n                sortable_container.find('.sortable-placeholder').append(`<div class=\"sortable-placeholder-inner\"></div>`);\n            }\n        });\n\n        // Change is_active property of the field when done dragging\n        sortable_container.on('sortupdate', (e) => {\n            const origin_container = e.originalEvent.detail.origin.container;\n            const destination_container = e.originalEvent.detail.destination.container;\n            // Do nothing here if the origin and destination are the same\n            if (origin_container === destination_container) {\n                return;\n            }\n            const moved_field = $(e.originalEvent.detail.item);\n            const moved_to_displayed = $(destination_container).attr('id') === 'sortable-fields';\n\n            if (moved_to_displayed) {\n                const sortable_field = sortable_fields.get(moved_field.attr('data-key'));\n                sortable_field.is_active = true;\n                // Recalculate the order of the fields to match the index in the displayed list\n                sortable_fields.forEach((field) => {\n                    field.order = $(component_root.value).find('.sortable-field').index($(`.sortable-field[data-key=\"${CSS.escape(field.key)}\"]`));\n                });\n            } else {\n                removeField(moved_field.attr('data-key'));\n            }\n        });\n\n        $(component_root.value).on('click', '.edit-field', (e) => {\n            const field_el = $(e.target).closest('.sortable-field');\n            const field_id = field_el.attr('data-customfield-id');\n            const field_key = field_el.attr('data-key');\n            if (field_id === undefined || field_id === '-1') {\n                const url_params = new URLSearchParams({\n                    action: 'get_core_field_editor',\n                    assetdefinitions_id: props.items_id,\n                    key: field_el.attr('data-key'),\n                });\n                const sortable_field = sortable_fields.get(field_key);\n                for (const [name, value] of Object.entries(sortable_field.field_options)) {\n                    if (Array.isArray(value)) {\n                        value.forEach((item) => {\n                            url_params.append(`field_options[${name}][]`, item);\n                        })\n                    } else {\n                        url_params.append(`field_options[${name}]`, value);\n                    }\n                }\n                const url = `${CFG_GLPI.root_doc}/ajax/asset/assetdefinition.php?${url_params}`;\n                window.glpi_ajax_dialog({\n                    id: 'core_field_options_editor',\n                    modalclass: 'modal-xl',\n                    appendTo: `#${CSS.escape($(sortable_fields_container.value).attr('id'))}`,\n                    title: _.escape(field_el.text()),\n                    url: url,\n                    buttons: [\n                        {\n                            id: 'cancel_core_field_options',\n                            label: __('Cancel'),\n                            class: 'btn-ghost-secondary',\n                        },\n                        {\n                            id: 'save_core_field_options',\n                            label: _x('button', 'Save'),\n                            class: 'btn-primary',\n                        },\n                    ]\n                });\n            } else {\n                window[props.add_edit_fn](field_id);\n                $('#customfield_form_container_modal .modal-title').text(field_el.text());\n            }\n        }).on('click', '.hide-field', (e) => {\n            const field_key = $(e.target).closest('.sortable-field').attr('data-key');\n            removeField(field_key);\n        }).on('click', '.purge-field', (e) => {\n            // Only custom fields can be purged\n            const field_key = $(e.target).closest('.sortable-field').attr('data-key');\n            const custom_fields_id = $(e.target).closest('.sortable-field').attr('data-customfield-id');\n\n            // Submit a form via AJAX to delete the field\n            $.ajax({\n                url: `${CFG_GLPI.root_doc}/ajax/asset/customfield.php`,\n                type: 'POST',\n                data: {\n                    customfielddefinitions_id: custom_fields_id,\n                    action: 'purge_field'\n                },\n                success: () => {\n                    sortable_fields.delete(field_key);\n                    refreshSortables();\n                },\n                complete: () => {\n                    displayAjaxMessageAfterRedirect();\n                }\n            });\n        });\n\n        sortable_fields_container.value.on('click', '#save_core_field_options', () => {\n            const key_field = $('#core_field_options_editor form input[name=\"key\"]');\n            const field_key = key_field.val();\n            key_field.remove();\n            const field_options = $('#core_field_options_editor form').serializeArray();\n            const sortable_field = sortable_fields.get(field_key);\n\n            sortable_field.field_options = {};\n            field_options.forEach((option) => {\n                let name = option.name.replace('field_options[', '');\n                if (name.endsWith('[]')) { // We are in array, we store the key as the value\n                    name = name.slice(0, -3);\n                    if (!Array.isArray(sortable_field.field_options[name])) {\n                        sortable_field.field_options[name] = [];\n                    }\n                    sortable_field.field_options[name].push(option.value);\n                } else { // OG code, remove the ]\n                    name = name.slice(0, -1);\n                    sortable_field.field_options[name] = option.value;\n                }\n            });\n            // Reload preview\n            appendField([field_key]);\n\n            $('#core_field_options_editor').modal('hide');\n        }).on('click', '#cancel_core_field_options', () => {\n            $('#core_field_options_editor').modal('hide');\n        });\n\n        const create_edit_field_modal = $('#customfield_form_container_modal');\n        create_edit_field_modal.on('glpi:submit:success', 'form', (e, data) => {\n            const btn_submit = data.submitter;\n            const form_data = new FormData(e.target);\n            const field_key = `custom_${form_data.get('system_name')}`;\n\n            refreshAllFields();\n            if (btn_submit.attr('name') === 'add' || btn_submit.attr('name') === 'update') {\n                appendField([field_key], {[field_key]: {\n                    text: form_data.get('label'),\n                }});\n                const sortable_field = sortable_fields.get(field_key);\n\n                sortable_field.field_options = {};\n                form_data.entries().forEach(([name, value]) => {\n                    if (name.startsWith('field_options[')) {\n                        const is_array = name.endsWith('[]');\n                        const option_name = name.replace('field_options[', '').replace(/\\[\\]/, '');\n                        if (is_array) {\n                            sortable_field.field_options[option_name] = sortable_field.field_options[option_name] ?? [];\n                            if (!Array.isArray(sortable_field.field_options[option_name])) {\n                                sortable_field.field_options[option_name] = [sortable_field.field_options[option_name]];\n                            }\n                            sortable_field.field_options[option_name].push(value);\n                        } else {\n                            sortable_field.field_options[option_name] = value;\n                        }\n                    }\n                });\n            } else if (btn_submit.attr('name') === 'purge') {\n                removeField(field_key);\n            }\n        });\n    });\n\n    const active_fields = computed(() => {\n        const ordered_active_fields = [];\n        [...sortable_fields].filter(([key, field]) => field.is_active)\n            .sort((a, b) => a[1].order - b[1].order)\n            .forEach(([key, field]) => {\n                ordered_active_fields.push({...field, key: key});\n            });\n        return ordered_active_fields;\n    });\n\n    const inactive_fields = computed(() => {\n        return new Map([...sortable_fields].filter(([key, field]) => !field.is_active));\n    });\n\n    watch(active_fields, () => {\n        // If only one field remains, disable the remove button\n        $(component_root.value).find('.hide-field')\n            .prop('disabled', sortable_fields.size === 1)\n            .prop('title', sortable_fields.size === 1 ? __('Cannot remove the last field') : __('Hide'));\n\n    }, {deep: true});\n<\/script>\n\n<template>\n    <div class=\"col-12 col-xxl-12 flex-column px-n3\" ref=\"component_root\">\n        <input type=\"hidden\" name=\"_update_fields_display\" value=\"1\" />\n        <input type=\"hidden\" name=\"fields_display\" value=\"\" />\n\n        <div class=\"d-flex flex-row flex-wrap flex-xl-nowrap\">\n            <div class=\"row flex-row align-items-start flex-grow-1 d-flex\">\n                <div class=\"col\">\n                    <div class=\"user-select-none row flex-row p-2\" id=\"sortable-fields\" style=\"min-height: 50px\">\n                        <Field v-for=\"sortable_field of active_fields\" :key=\"sortable_field.key\"\n                               :field_key=\"sortable_field.key\" :customfields_id=\"sortable_field.customfields_id\" :field_options=\"sortable_field.field_options\"\n                               :is_active=\"sortable_field.is_active\">\n                            <template v-slot:field_label>{{ sortable_field.label }}</template>\n                            <template v-slot:field_markers>\n                                <span v-if=\"parseInt(sortable_field.field_options.required ?? 0) === 1\" class=\"required\">*</span>\n                                <i v-if=\"parseInt(sortable_field.field_options.readonly ?? 0) === 1\" class=\"ti ti-pencil-off ms-2\" :title=\"__('Readonly')\"></i>\n                            </template>\n                            <template v-slot:field_options>\n                                <template v-for=\"(field_option_value, field_option_name) in sortable_field.field_options\" :key=\"field_option_name\">\n                                    <input\n                                        v-if=\"Array.isArray(field_option_value)\"\n                                        v-for=\"value in field_option_value\"\n                                        type=\"hidden\"\n                                        :name=\"`field_options[${sortable_field.key}][${field_option_name}][]`\"\n                                        :value=\"value\"\n                                    />\n                                    <input\n                                        v-else\n                                        type=\"hidden\"\n                                        :name=\"`field_options[${sortable_field.key}][${field_option_name}]`\"\n                                        :value=\"field_option_value\"\n                                    />\n                                </template>\n                            </template>\n                        </Field>\n                    </div>\n                </div>\n                <Sidebar :inactive_fields=\"inactive_fields\" :add_edit_fn=\"add_edit_fn\"></Sidebar>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n    :deep(.sortable-field .btn.hide-field:disabled) {\n        pointer-events: auto;\n    }\n    :deep(.sortable-placeholder) {\n        background: unset;\n        border: unset;\n        height: 38px;\n        .sortable-placeholder-inner {\n            border: 2px dashed #dad55e;\n            background: #fff99038;\n            height: 100%;\n        }\n    }\n</style>\n"],sourceRoot:""}]);const s=d}}]);