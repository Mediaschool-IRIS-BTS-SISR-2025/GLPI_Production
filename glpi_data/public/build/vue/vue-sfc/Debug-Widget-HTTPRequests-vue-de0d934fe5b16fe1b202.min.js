/*!
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */
"use strict";(self["webpackChunk_glpi_glpi"]=self["webpackChunk_glpi_glpi"]||[]).push([[6],{18:e=>{var t=[];function n(e){var n=-1;for(var r=0;r<t.length;r++){if(t[r].identifier===e){n=r;break}}return n}function r(e,r){var s={};var o=[];for(var i=0;i<e.length;i++){var l=e[i];var u=r.base?l[0]+r.base:l[0];var d=s[u]||0;var c="".concat(u," ").concat(d);s[u]=d+1;var p=n(c);var f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(p!==-1){t[p].references++;t[p].updater(f)}else{var v=a(f,r);r.byIndex=i;t.splice(i,0,{identifier:c,updater:v,references:1})}o.push(c)}return o}function a(e,t){var n=t.domAPI(t);n.update(e);var r=function t(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap&&r.supports===e.supports&&r.layer===e.layer){return}n.update(e=r)}else{n.remove()}};return r}e.exports=function(e,a){a=a||{};e=e||[];var s=r(e,a);return function e(o){o=o||[];for(var i=0;i<s.length;i++){var l=s[i];var u=n(l);t[u].references--}var d=r(o,a);for(var c=0;c<s.length;c++){var p=s[c];var f=n(p);if(t[f].references===0){t[f].updater();t.splice(f,1)}}s=d}}},19:e=>{function t(e,t,n){var r="";if(n.supports){r+="@supports (".concat(n.supports,") {")}if(n.media){r+="@media ".concat(n.media," {")}var a=typeof n.layer!=="undefined";if(a){r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")}r+=n.css;if(a){r+="}"}if(n.media){r+="}"}if(n.supports){r+="}"}var s=n.sourceMap;if(s&&typeof btoa!=="undefined"){r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")}t.styleTagTransform(r,e,t.options)}function n(e){if(e.parentNode===null){return false}e.parentNode.removeChild(e)}function r(e){if(typeof document==="undefined"){return{update:function e(){},remove:function e(){}}}var r=e.insertStyleElement(e);return{update:function n(a){t(r,e,a)},remove:function e(){n(r)}}}e.exports=r},20:e=>{var t={};function n(e){if(typeof t[e]==="undefined"){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement){try{n=n.contentDocument.head}catch(e){n=null}}t[e]=n}return t[e]}function r(e,t){var r=n(e);if(!r){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}r.appendChild(t)}e.exports=r},21:(e,t,n)=>{function r(e){var t=true?n.nc:0;if(t){e.setAttribute("nonce",t)}}e.exports=r},22:e=>{function t(e){var t=document.createElement("style");e.setAttributes(t,e.attributes);e.insert(t,e.options);return t}e.exports=t},23:e=>{function t(e,t){if(t.styleSheet){t.styleSheet.cssText=e}else{while(t.firstChild){t.removeChild(t.firstChild)}t.appendChild(document.createTextNode(e))}}e.exports=t},25:e=>{e.exports=function(e){var t=e[1];var n=e[3];if(!n){return t}if(typeof btoa==="function"){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n))));var a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r);var s="/*# ".concat(a," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},26:e=>{e.exports=function(e){var t=[];t.toString=function t(){return this.map(function(t){var n="";var r=typeof t[5]!=="undefined";if(t[4]){n+="@supports (".concat(t[4],") {")}if(t[2]){n+="@media ".concat(t[2]," {")}if(r){n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")}n+=e(t);if(r){n+="}"}if(t[2]){n+="}"}if(t[4]){n+="}"}return n}).join("")};t.i=function e(n,r,a,s,o){if(typeof n==="string"){n=[[null,n,undefined]]}var i={};if(a){for(var l=0;l<this.length;l++){var u=this[l][0];if(u!=null){i[u]=true}}}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);if(a&&i[c[0]]){continue}if(typeof o!=="undefined"){if(typeof c[5]==="undefined"){c[5]=o}else{c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}");c[5]=o}}if(r){if(!c[2]){c[2]=r}else{c[1]="@media ".concat(c[2]," {").concat(c[1],"}");c[2]=r}}if(s){if(!c[4]){c[4]="".concat(s)}else{c[1]="@supports (".concat(c[4],") {").concat(c[1],"}");c[4]=s}}t.push(c)}};return t}},65:(e,t,n)=>{n.r(t);n.d(t,{default:()=>l});var r=n(66);var a=n(68);var s=n(75);var o=n(27);const i=(0,o["default"])(a["default"],[["render",r.render],["__scopeId","data-v-57a59a22"],["__file","js/src/vue/Debug/Widget/HTTPRequests.vue"]]);if(false){}const l=i},66:(e,t,n)=>{n.r(t);n.d(t,{render:()=>r.render});var r=n(67)},67:(e,t,n)=>{n.r(t);n.d(t,{render:()=>A});var r=n(9);const a={key:0,class:"request-timeline"};const s={class:"d-flex flex-row h-100 split-panel-h"};const o={class:"left-panel"};const i={class:"overflow-auto h-100 me-2"};const l={id:"debug-requests-table",class:"table table-hover mb-1"};const u=["data-request-id"];const d=["title","data-truncated"];const c={class:"right-panel overflow-auto ms-2 flex-grow-1"};const p=["id"];const f={class:"nav nav-tabs","data-bs-toggle":"tabs"};const v={class:"nav-item"};const m={class:"nav-item"};const _={class:"nav-item"};const b={class:"nav-item"};const g={class:"card-body overflow-auto p-1"};const h={class:"tab-content request-details-content-area"};const q={key:0};const w={key:1};const y=["data-request-id"];function A(e,t,n,A,C,k){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"h-100",ref:"content_area",onMousemove:t[12]||(t[12]=e=>A.onMouseMove(e)),onMouseup:t[13]||(t[13]=e=>A.onMouseUp())},[A.is_mounted&&A.show_timeline?((0,r.openBlock)(),(0,r.createElementBlock)("div",a,[(0,r.createVNode)(A["RequestTimeline"],{initial_request:n.initial_request,ajax_requests:A.props.ajax_requests,content_area:A.content_area,onChange_request:A.onRequestChanged},null,8,["initial_request","ajax_requests","content_area"])])):(0,r.createCommentVNode)("v-if",true),(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("table",l,[(0,r.createElementVNode)("thead",null,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("th",{onClick:t[0]||(t[0]=e=>A.setSortedCol("number"))},"Number"),(0,r.createElementVNode)("th",{onClick:t[1]||(t[1]=e=>A.setSortedCol("url"))},"URL"),(0,r.createElementVNode)("th",{onClick:t[2]||(t[2]=e=>A.setSortedCol("status"))},"Status"),(0,r.createElementVNode)("th",{onClick:t[3]||(t[3]=e=>A.setSortedCol("type"))},"Type"),(0,r.createElementVNode)("th",{onClick:t[4]||(t[4]=e=>A.setSortedCol("duration"))},"Duration")])]),(0,r.createElementVNode)("tbody",null,[((0,r.openBlock)(true),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(A.sorted_requests_data,e=>((0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:e.id,"data-request-id":e.id,class:(0,r.normalizeClass)(`cursor-pointer ${e.id===A.current_request_id?"table-active":""}`),onClick:t[6]||(t[6]=e=>A.selectRow(e))},[(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.number),1),(0,r.createElementVNode)("td",{title:e.url,"data-truncated":A.urlNeedsTruncated(e.url)},[(0,r.createTextVNode)((0,r.toDisplayString)(e.url.substring(0,A.REQUEST_PATH_LENGTH)),1),A.urlNeedsTruncated(e.url)?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"ms-1 badge bg-secondary text-secondary-fg",name:"show_full_url",onClick:t[5]||(t[5]=e=>A.expandRequestURL(e))},[...t[14]||(t[14]=[(0,r.createElementVNode)("i",{class:"ti ti-dots"},null,-1)])])):(0,r.createCommentVNode)("v-if",true)],8,d),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.status),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.type),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.duration)+" ms",1)],10,u))),128))])])])]),(0,r.createElementVNode)("div",{class:"resize-handle",onMousedown:t[7]||(t[7]=(0,r.withModifiers)(e=>A.onMouseDown(e),["stop","prevent"]))},null,32),(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("div",{id:`debugpanel${A.rand}`,class:"p-0 mt-n1"},[(0,r.createElementVNode)("ul",f,[(0,r.createElementVNode)("li",v,[(0,r.createElementVNode)("button",{onClick:t[8]||(t[8]=e=>A.switchSubwidget("request_summary")),class:"nav-link active","data-bs-toggle":"tab","data-glpi-debug-widget-id":"request_summary"},"Summary")]),(0,r.createElementVNode)("li",m,[(0,r.createElementVNode)("button",{onClick:t[9]||(t[9]=e=>A.switchSubwidget("sql")),class:"nav-link","data-bs-toggle":"tab","data-glpi-debug-widget-id":"sql"},"SQL")]),(0,r.createElementVNode)("li",_,[(0,r.createElementVNode)("button",{onClick:t[10]||(t[10]=e=>A.switchSubwidget("globals")),class:"nav-link","data-bs-toggle":"tab","data-glpi-debug-widget-id":"globals"},"Globals")]),(0,r.createElementVNode)("li",b,[(0,r.createElementVNode)("button",{onClick:t[11]||(t[11]=e=>A.switchSubwidget("profiler")),class:"nav-link","data-bs-toggle":"tab","data-glpi-debug-widget-id":"profiler"},"Profiler")])]),(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",h,[A.current_profile?((0,r.openBlock)(),(0,r.createElementBlock)("div",q,[A.active_subwidget?((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(A.active_subwidget_component),{key:0,current_profile:A.current_profile},null,8,["current_profile"])):(0,r.createCommentVNode)("v-if",true)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",w,[t[16]||(t[16]=(0,r.createElementVNode)("div",{class:"alert alert-danger"},[(0,r.createElementVNode)("span",null,"No debug data was found for this request immediately after it finished. Some requests like /front/locale.php will never have data as they intentionally close the session.")],-1)),(0,r.createElementVNode)("button",{type:"button",class:"btn btn-primary","data-request-id":A.current_request_id},[...t[15]||(t[15]=[(0,r.createElementVNode)("i",{class:"ti ti-reload"},null,-1),(0,r.createTextVNode)("Retry",-1)])],8,y)]))])])],8,p)])])],544)}},68:(e,t,n)=>{n.r(t);n.d(t,{default:()=>r["default"]});var r=n(69)},69:(e,t,n)=>{n.r(t);n.d(t,{default:()=>o});var r=n(9);var a=n(70);const s=100;const o={__name:"HTTPRequests",props:{initial_request:{type:Object,required:true},ajax_requests:{type:Array,required:true},widgets:{type:Object,required:true}},setup(e,{expose:t}){t();(0,r.useCssVars)(e=>({"57a59a22-left_panel_flexbasis":m.value}));const n=e;const o=(0,r.ref)(false);(0,r.onMounted)(()=>{o.value=true});const i=Math.floor(Math.random()*1e6);const l=(0,r.ref)(null);const u=(0,r.computed)(()=>$(l.value));const d=(0,r.ref)(false);const c=(0,r.ref)(n.initial_request.id);const p=(0,r.computed)(()=>{if(c.value===n.initial_request.id){return n.initial_request}return n.ajax_requests.find(e=>e.id===c.value).profile});$("#debug-toolbar").on("keyup",e=>{e.preventDefault();e.stopPropagation();if($(e.target).closest(".monaco-editor").length>0){return}if(e.keyCode===84){d.value=!d.value}});const f=(0,r.ref)(false);const v=(0,r.ref)(null);const m=(0,r.computed)(()=>{if(v.value===null){return"33%"}return v.value+"px"});function _(e){if(e.buttons===1){f.value=true;e.preventDefault()}}function b(e){if(f.value&&e.buttons===1){const t=u.value.find(".split-panel-h .left-panel");v.value=e.pageX-t.offset().left}}function g(){f.value=false}function h(e){return e.length>s}const q=(0,r.computed)(()=>window.location.pathname);const w=(0,r.ref)("number");const y=(0,r.ref)("asc");const A=(0,r.computed)(()=>{const e=[];e.push({id:n.initial_request.id,number:0,url:q.value,status:"-",type:n.initial_request.globals.server["REQUEST_METHOD"]||"-",duration:n.initial_request.server_performance.execution_time});for(const t of n.ajax_requests){e.push({id:t.id,number:e.length,url:t.url,status:t.status,type:t.type,duration:t.time})}e.sort((e,t)=>{let n=e[w.value];let r=t[w.value];if(w.value==="duration"){n=parseFloat(n);r=parseFloat(r)}if(n===r){return 0}if(y.value==="asc"){return n<r?-1:1}else{return n>r?-1:1}});return e});function C(e){if(w.value===e){if(y.value==="asc"){y.value="desc"}else{y.value="asc"}}else{w.value=e;y.value="asc"}}const k=n.ajax_requests.map(e=>e.id);(0,r.watch)(n.ajax_requests,(e,t)=>{for(const e of t){if(k.indexOf(e.id)===-1){k.push(e.id);setTimeout(()=>{const t=$(`tr[data-request-id="${CSS.escape(e.id)}"]`);t.css("background-color","#FFFF7B80");setTimeout(()=>{t.css("background-color","transparent")},2e3)},10)}}});function x(e){const t=$(e.currentTarget);const n=t.closest("td");n.text(n.attr("title"));t.hide()}function E(e){c.value=$(e.currentTarget).attr("data-request-id")}const N=(0,r.ref)("request_summary");const T=(0,r.computed)(()=>{if(N.value===null){return null}const e=n.widgets.find(e=>e.id===N.value);if(e===undefined){return null}return e.component_registered_name});function S(e){N.value=e}function B(){c.value=u.value.data("requests_request_id")||n.initial_request.id}const V={props:n,is_mounted:o,rand:i,REQUEST_PATH_LENGTH:s,content_area:l,$content_area:u,show_timeline:d,current_request_id:c,current_profile:p,is_dragging:f,left_panel_width:v,left_panel_flexbasis:m,onMouseDown:_,onMouseMove:b,onMouseUp:g,urlNeedsTruncated:h,currentPath:q,sorted_col:w,sort_dir:y,sorted_requests_data:A,setSortedCol:C,seen_request_ids:k,expandRequestURL:x,selectRow:E,active_subwidget:N,active_subwidget_component:T,switchSubwidget:S,onRequestChanged:B,computed:r.computed,onMounted:r.onMounted,ref:r.ref,watch:r.watch,RequestTimeline:a["default"]};Object.defineProperty(V,"__isScriptSetup",{enumerable:false,value:true});return V}}},75:(e,t,n)=>{n.r(t);var r=n(76)},76:(e,t,n)=>{n.r(t);n.d(t,{default:()=>g});var r=n(18);var a=n.n(r);var s=n(19);var o=n.n(s);var i=n(20);var l=n.n(i);var u=n(21);var d=n.n(u);var c=n(22);var p=n.n(c);var f=n(23);var v=n.n(f);var m=n(77);var _={};_.styleTagTransform=v();_.setAttributes=d();_.insert=l().bind(null,"head");_.domAPI=o();_.insertStyleElement=p();var b=a()(m["default"],_);const g=m["default"]&&m["default"].locals?m["default"].locals:undefined},77:(e,t,n)=>{n.r(t);n.d(t,{default:()=>l});var r=n(25);var a=n.n(r);var s=n(26);var o=n.n(s);var i=o()(a());i.push([e.id,`\ndiv.left-panel[data-v-57a59a22] {\n        border-right: 1px solid #808080;\n        min-width: 100px;\n        flex: 0 0 var(--57a59a22-left_panel_flexbasis);\n}\n.split-panel-h .resize-handle[data-v-57a59a22] {\n        cursor: col-resize;\n        width: 10px;\n        z-index: 1030;\n        margin-left: -0.5rem;\n        margin-right: -0.25rem;\n}\n#debug-requests-table thead tr th[data-v-57a59a22] {\n        cursor: pointer;\n}\n#debug-requests-table thead tr th[data-v-57a59a22]:nth-child(2) {\n        max-width: 200px;\n        white-space: pre-wrap;\n}\n#debug-requests-table tbody tr td[data-v-57a59a22]:nth-child(2) {\n        max-width: 200px;\n        white-space: pre-wrap;\n}\n#debug-requests-table tbody[data-v-57a59a22] {\n        white-space: nowrap\n}\n#debug-requests-table thead th[data-v-57a59a22] {\n        position: sticky;\n        top: 0;\n}\n`,"",{version:3,sources:["webpack://./js/src/vue/Debug/Widget/HTTPRequests.vue"],names:[],mappings:";AA+QI;QACI,+BAA+B;QAC/B,gBAAgB;QAChB,8CAAsC;AAC1C;AACA;QACI,kBAAkB;QAClB,WAAW;QACX,aAAa;QACb,oBAAoB;QACpB,sBAAsB;AAC1B;AACA;QACI,eAAe;AACnB;AACA;QACI,gBAAgB;QAChB,qBAAqB;AACzB;AACA;QACI,gBAAgB;QAChB,qBAAqB;AACzB;AACA;QACI;AACJ;AACA;QACI,gBAAgB;QAChB,MAAM;AACV",sourcesContent:['<script setup>\n    import {computed, onMounted, ref, watch} from "vue";\n    import RequestTimeline from "./RequestTimeline.vue";\n\n    const props = defineProps({\n        initial_request: {\n            type: Object,\n            required: true\n        },\n        ajax_requests: {\n            type: Array,\n            required: true\n        },\n        widgets: {\n            type: Object,\n            required: true\n        },\n    });\n\n    const is_mounted = ref(false);\n    onMounted(() => {\n        is_mounted.value = true;\n    });\n\n    const rand = Math.floor(Math.random() * 1000000);\n    const REQUEST_PATH_LENGTH = 100;\n    const content_area = ref(null);\n    const $content_area = computed(() => {\n        return $(content_area.value);\n    });\n\n    const show_timeline = ref(false);\n    const current_request_id = ref(props.initial_request.id);\n    const current_profile = computed(() => {\n        if (current_request_id.value === props.initial_request.id) {\n            return props.initial_request;\n        }\n        return props.ajax_requests.find((request) => request.id === current_request_id.value).profile;\n    });\n\n    $(\'#debug-toolbar\').on(\'keyup\', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        // ignore input inside monaco editors\n        if ($(e.target).closest(\'.monaco-editor\').length > 0) {\n            return;\n        }\n        if (e.keyCode === 84) { // \'t\'\n            show_timeline.value = !show_timeline.value;\n        }\n    });\n\n    const is_dragging = ref(false);\n    const left_panel_width = ref(null);\n    const left_panel_flexbasis = computed(() => {\n        if (left_panel_width.value === null) {\n            return \'33%\';\n        }\n        return left_panel_width.value + \'px\';\n    });\n\n    function onMouseDown(e) {\n        if (e.buttons === 1) {\n            is_dragging.value = true;\n            e.preventDefault();\n        }\n    }\n\n    function onMouseMove(e) {\n        if (is_dragging.value && e.buttons === 1) {\n            const left_column = $content_area.value.find(\'.split-panel-h .left-panel\');\n            left_panel_width.value = e.pageX - left_column.offset().left;\n        }\n    }\n\n    function onMouseUp() {\n        is_dragging.value = false;\n    }\n\n    function urlNeedsTruncated(url) {\n        return url.length > REQUEST_PATH_LENGTH;\n    }\n\n    const currentPath = computed(() => {\n        return window.location.pathname;\n    });\n\n    const sorted_col = ref(\'number\');\n    const sort_dir = ref(\'asc\');\n    const sorted_requests_data = computed(() => {\n        const sorted = [];\n        sorted.push({\n            id: props.initial_request.id,\n            number: 0,\n            url: currentPath.value,\n            status: \'-\',\n            type: props.initial_request.globals.server[\'REQUEST_METHOD\'] || \'-\',\n            duration: props.initial_request.server_performance.execution_time,\n        });\n        for (const request of props.ajax_requests) {\n            sorted.push({\n                id: request.id,\n                number: sorted.length,\n                url: request.url,\n                status: request.status,\n                type: request.type,\n                duration: request.time,\n            });\n        }\n        // Sort by column\n        sorted.sort((a, b) => {\n            let a_val = a[sorted_col.value];\n            let b_val = b[sorted_col.value];\n            if (sorted_col.value === \'duration\') {\n                a_val = parseFloat(a_val);\n                b_val = parseFloat(b_val);\n            }\n            if (a_val === b_val) {\n                return 0;\n            }\n            if (sort_dir.value === \'asc\') {\n                return a_val < b_val ? -1 : 1;\n            } else {\n                return a_val > b_val ? -1 : 1;\n            }\n        });\n        return sorted;\n    });\n\n    function setSortedCol(col) {\n        if (sorted_col.value === col) {\n            if (sort_dir.value === \'asc\') {\n                sort_dir.value = \'desc\';\n            } else {\n                sort_dir.value = \'asc\';\n            }\n        } else {\n            sorted_col.value = col;\n            sort_dir.value = \'asc\';\n        }\n    }\n\n    const seen_request_ids = props.ajax_requests.map(r => r.id);\n\n    watch(props.ajax_requests, (old_v, new_v) => {\n        for (const request of new_v) {\n            if (seen_request_ids.indexOf(request.id) === -1) {\n                seen_request_ids.push(request.id);\n                setTimeout(() => {\n                    // Need this timeout because this watcher is called before the DOM is updated\n                    const row = $(`tr[data-request-id="${CSS.escape(request.id)}"]`);\n                    row.css(\'background-color\', \'#FFFF7B80\');\n                    setTimeout(() => {\n                        row.css(\'background-color\', \'transparent\');\n                    }, 2000);\n                }, 10);\n            }\n        }\n    });\n\n    function expandRequestURL(e) {\n        const btn = $(e.currentTarget);\n        const td = btn.closest(\'td\');\n        td.text(td.attr(\'title\'));\n        btn.hide();\n    }\n\n    function selectRow(e) {\n        current_request_id.value = $(e.currentTarget).attr(\'data-request-id\');\n    }\n\n    const active_subwidget = ref(\'request_summary\');\n    const active_subwidget_component = computed(() => {\n        if (active_subwidget.value === null) {\n            return null;\n        }\n        const widget = props.widgets.find(w => w.id === active_subwidget.value);\n        if (widget === undefined) {\n            return null;\n        }\n        return widget.component_registered_name;\n    });\n    function switchSubwidget(widget_id) {\n        active_subwidget.value = widget_id;\n    }\n\n    function onRequestChanged() {\n        current_request_id.value = $content_area.value.data(\'requests_request_id\') || props.initial_request.id;\n    }\n<\/script>\n\n<template>\n    <div class="h-100" ref="content_area" @mousemove="onMouseMove($event)" @mouseup="onMouseUp()">\n        <div class="request-timeline" v-if="is_mounted && show_timeline">\n            <RequestTimeline :initial_request="initial_request" :ajax_requests="props.ajax_requests" :content_area="content_area"\n                             @change_request="onRequestChanged"></RequestTimeline>\n        </div>\n        <div class="d-flex flex-row h-100 split-panel-h">\n            <div class="left-panel">\n                <div class="overflow-auto h-100 me-2">\n                    <table id="debug-requests-table" class="table table-hover mb-1">\n                        <thead>\n                            <tr>\n                                <th @click="setSortedCol(\'number\')">Number</th>\n                                <th @click="setSortedCol(\'url\')">URL</th>\n                                <th @click="setSortedCol(\'status\')">Status</th>\n                                <th @click="setSortedCol(\'type\')">Type</th>\n                                <th @click="setSortedCol(\'duration\')">Duration</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for="request in sorted_requests_data" :key="request.id" :data-request-id="request.id"\n                                :class="`cursor-pointer ${request.id === current_request_id ? \'table-active\' : \'\'}`" @click="selectRow($event)">\n                                <td>{{ request.number }}</td>\n                                <td :title="request.url"\n                                    :data-truncated="urlNeedsTruncated(request.url)">{{ request.url.substring(0, REQUEST_PATH_LENGTH) }}<button\n                                        v-if="urlNeedsTruncated(request.url)" class="ms-1 badge bg-secondary text-secondary-fg" name="show_full_url"\n                                        @click="expandRequestURL($event)">\n                                        <i class="ti ti-dots"></i>\n                                    </button>\n                                </td>\n                                <td>{{ request.status }}</td>\n                                <td>{{ request.type }}</td>\n                                <td>{{ request.duration }} ms</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            <div class="resize-handle" @mousedown.stop.prevent="onMouseDown($event)"></div>\n            <div class="right-panel overflow-auto ms-2 flex-grow-1">\n                <div :id="`debugpanel${rand}`" class="p-0 mt-n1">\n                    <ul class="nav nav-tabs" data-bs-toggle="tabs">\n                        <li class="nav-item">\n                            <button @click="switchSubwidget(\'request_summary\')"\n                                    class="nav-link active" data-bs-toggle="tab" data-glpi-debug-widget-id="request_summary">Summary</button>\n                        </li>\n                        <li class="nav-item">\n                            <button @click="switchSubwidget(\'sql\')"\n                                    class="nav-link" data-bs-toggle="tab" data-glpi-debug-widget-id="sql">SQL</button>\n                        </li>\n                        <li class="nav-item">\n                            <button @click="switchSubwidget(\'globals\')"\n                                    class="nav-link" data-bs-toggle="tab" data-glpi-debug-widget-id="globals">Globals</button>\n                        </li>\n                        <li class="nav-item">\n                            <button @click="switchSubwidget(\'profiler\')"\n                                    class="nav-link" data-bs-toggle="tab" data-glpi-debug-widget-id="profiler">Profiler</button>\n                        </li>\n                    </ul>\n\n                    <div class="card-body overflow-auto p-1">\n                        <div class="tab-content request-details-content-area">\n                            <div v-if="current_profile">\n                                <component v-if="active_subwidget" :is="active_subwidget_component" :current_profile="current_profile"></component>\n                            </div>\n                            <div v-else>\n                                <div class="alert alert-danger">\n                                    <span>No debug data was found for this request immediately after it finished. Some requests like /front/locale.php will never have data as they intentionally close the session.</span>\n                                </div>\n                                <button type="button" class="btn btn-primary" :data-request-id="current_request_id"><i class="ti ti-reload"></i>Retry</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n    div.left-panel {\n        border-right: 1px solid #808080;\n        min-width: 100px;\n        flex: 0 0 v-bind(left_panel_flexbasis);\n    }\n    .split-panel-h .resize-handle {\n        cursor: col-resize;\n        width: 10px;\n        z-index: 1030;\n        margin-left: -0.5rem;\n        margin-right: -0.25rem;\n    }\n    #debug-requests-table thead tr th {\n        cursor: pointer;\n    }\n    #debug-requests-table thead tr th:nth-child(2) {\n        max-width: 200px;\n        white-space: pre-wrap;\n    }\n    #debug-requests-table tbody tr td:nth-child(2) {\n        max-width: 200px;\n        white-space: pre-wrap;\n    }\n    #debug-requests-table tbody {\n        white-space: nowrap\n    }\n    #debug-requests-table thead th {\n        position: sticky;\n        top: 0;\n    }\n</style>\n'],sourceRoot:""}]);const l=i}}]);