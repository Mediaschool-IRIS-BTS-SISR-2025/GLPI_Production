/*!
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */
"use strict";(self["webpackChunk_glpi_glpi"]=self["webpackChunk_glpi_glpi"]||[]).push([[12],{18:e=>{var t=[];function n(e){var n=-1;for(var a=0;a<t.length;a++){if(t[a].identifier===e){n=a;break}}return n}function a(e,a){var r={};var l=[];for(var c=0;c<e.length;c++){var s=e[c];var i=a.base?s[0]+a.base:s[0];var d=r[i]||0;var p="".concat(i," ").concat(d);r[i]=d+1;var u=n(p);var f={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(u!==-1){t[u].references++;t[u].updater(f)}else{var v=o(f,a);a.byIndex=c;t.splice(c,0,{identifier:p,updater:v,references:1})}l.push(p)}return l}function o(e,t){var n=t.domAPI(t);n.update(e);var a=function t(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap&&a.supports===e.supports&&a.layer===e.layer){return}n.update(e=a)}else{n.remove()}};return a}e.exports=function(e,o){o=o||{};e=e||[];var r=a(e,o);return function e(l){l=l||[];for(var c=0;c<r.length;c++){var s=r[c];var i=n(s);t[i].references--}var d=a(l,o);for(var p=0;p<r.length;p++){var u=r[p];var f=n(u);if(t[f].references===0){t[f].updater();t.splice(f,1)}}r=d}}},19:e=>{function t(e,t,n){var a="";if(n.supports){a+="@supports (".concat(n.supports,") {")}if(n.media){a+="@media ".concat(n.media," {")}var o=typeof n.layer!=="undefined";if(o){a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")}a+=n.css;if(o){a+="}"}if(n.media){a+="}"}if(n.supports){a+="}"}var r=n.sourceMap;if(r&&typeof btoa!=="undefined"){a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")}t.styleTagTransform(a,e,t.options)}function n(e){if(e.parentNode===null){return false}e.parentNode.removeChild(e)}function a(e){if(typeof document==="undefined"){return{update:function e(){},remove:function e(){}}}var a=e.insertStyleElement(e);return{update:function n(o){t(a,e,o)},remove:function e(){n(a)}}}e.exports=a},20:e=>{var t={};function n(e){if(typeof t[e]==="undefined"){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement){try{n=n.contentDocument.head}catch(e){n=null}}t[e]=n}return t[e]}function a(e,t){var a=n(e);if(!a){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}a.appendChild(t)}e.exports=a},21:(e,t,n)=>{function a(e){var t=true?n.nc:0;if(t){e.setAttribute("nonce",t)}}e.exports=a},22:e=>{function t(e){var t=document.createElement("style");e.setAttributes(t,e.attributes);e.insert(t,e.options);return t}e.exports=t},23:e=>{function t(e,t){if(t.styleSheet){t.styleSheet.cssText=e}else{while(t.firstChild){t.removeChild(t.firstChild)}t.appendChild(document.createTextNode(e))}}e.exports=t},25:e=>{e.exports=function(e){var t=e[1];var n=e[3];if(!n){return t}if(typeof btoa==="function"){var a=btoa(unescape(encodeURIComponent(JSON.stringify(n))));var o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a);var r="/*# ".concat(o," */");return[t].concat([r]).join("\n")}return[t].join("\n")}},26:e=>{e.exports=function(e){var t=[];t.toString=function t(){return this.map(function(t){var n="";var a=typeof t[5]!=="undefined";if(t[4]){n+="@supports (".concat(t[4],") {")}if(t[2]){n+="@media ".concat(t[2]," {")}if(a){n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")}n+=e(t);if(a){n+="}"}if(t[2]){n+="}"}if(t[4]){n+="}"}return n}).join("")};t.i=function e(n,a,o,r,l){if(typeof n==="string"){n=[[null,n,undefined]]}var c={};if(o){for(var s=0;s<this.length;s++){var i=this[s][0];if(i!=null){c[i]=true}}}for(var d=0;d<n.length;d++){var p=[].concat(n[d]);if(o&&c[p[0]]){continue}if(typeof l!=="undefined"){if(typeof p[5]==="undefined"){p[5]=l}else{p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}");p[5]=l}}if(a){if(!p[2]){p[2]=a}else{p[1]="@media ".concat(p[2]," {").concat(p[1],"}");p[2]=a}}if(r){if(!p[4]){p[4]="".concat(r)}else{p[1]="@supports (".concat(p[4],") {").concat(p[1],"}");p[4]=r}}t.push(p)}};return t}},27:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t){n[e]=a}return n}},104:(e,t,n)=>{n.r(t);n.d(t,{default:()=>s});var a=n(105);var o=n(107);var r=n(109);var l=n(27);const c=(0,l["default"])(o["default"],[["render",a.render],["__scopeId","data-v-ae39f27a"],["__file","js/src/vue/Debug/Widget/SearchOptions.vue"]]);if(false){}const s=c},105:(e,t,n)=>{n.r(t);n.d(t,{render:()=>a.render});var a=n(106)},106:(e,t,n)=>{n.r(t);n.d(t,{render:()=>S});var a=n(9);const o={class:"py-2 px-3 col-12"};const r={class:"d-flex"};const l={class:"form-group row"};const c=["for"];const s={class:"col-7"};const i={class:"input-group"};const d=["id"];const p=["value","textContent"];const u=["id"];const f={key:0,class:"table search-opts-table"};const v=["textContent"];const m=["textContent"];const h=["textContent"];const _=["textContent"];const y=["textContent"];const b=["textContent"];const k={key:1};const C=["textContent"];const g=["textContent"];const x={key:1};function S(e,t,n,S,E,N){return(0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("label",{class:"col-5",for:`itemtype${S.rand}`},"Itemtype",8,c),(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("div",i,[S.itemtype_input_mode==="select"?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("select",{key:0,class:"form-select",id:`itemtype${S.rand}`,"onUpdate:modelValue":t[0]||(t[0]=e=>S.current_itemtype=e)},[t[11]||(t[11]=(0,a.createElementVNode)("option",{value:""},"-----",-1)),((0,a.openBlock)(true),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(S.all_itemtypes,e=>((0,a.openBlock)(),(0,a.createElementBlock)("option",{value:e,textContent:(0,a.toDisplayString)(e)},null,8,p))),256))],8,d)),[[a.vModelSelect,S.current_itemtype]]):(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("input",{key:1,class:"form-control",id:`itemtype${S.rand}`,"onUpdate:modelValue":t[1]||(t[1]=e=>S.current_itemtype=e)},null,8,u)),[[a.vModelText,S.current_itemtype,void 0,{lazy:true}]]),(0,a.createElementVNode)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[2]||(t[2]=e=>S.itemtype_input_mode=S.itemtype_input_mode==="select"?"input":"select"),title:"Toggle manual input"},[...t[12]||(t[12]=[(0,a.createElementVNode)("i",{class:"ti ti-switch-horizontal"},null,-1)])])])])])]),S.current_itemtype!==null&&S.current_itemtype!==""?((0,a.openBlock)(),(0,a.createElementBlock)("table",f,[(0,a.createElementVNode)("thead",null,[t[13]||(t[13]=(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",{colspan:"8",class:"text-center"},"Search Options")],-1)),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",{onClick:t[3]||(t[3]=e=>S.setSortedCol("opt_id"))},"Search ID"),(0,a.createElementVNode)("th",{onClick:t[4]||(t[4]=e=>S.setSortedCol("table"))},"Table"),(0,a.createElementVNode)("th",{onClick:t[5]||(t[5]=e=>S.setSortedCol("field"))},"Field"),(0,a.createElementVNode)("th",{onClick:t[6]||(t[6]=e=>S.setSortedCol("name"))},"Name"),(0,a.createElementVNode)("th",{onClick:t[7]||(t[7]=e=>S.setSortedCol("linkfield"))},"Link Field"),(0,a.createElementVNode)("th",{onClick:t[8]||(t[8]=e=>S.setSortedCol("datatype"))},"Datatype"),(0,a.createElementVNode)("th",{onClick:t[9]||(t[9]=e=>S.setSortedCol("nosearch"))},"Searchable"),(0,a.createElementVNode)("th",{onClick:t[10]||(t[10]=e=>S.setSortedCol("massiveaction"))},"Massive Action")])]),(0,a.createElementVNode)("tbody",null,[S.sorted_search_options.length?((0,a.openBlock)(true),(0,a.createElementBlock)(a.Fragment,{key:0},(0,a.renderList)(S.sorted_search_options,e=>((0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:e.opt_id},[(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.opt_id)},null,8,v),(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.table)},null,8,m),(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.field)},null,8,h),(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.name)},null,8,_),(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.linkfield)},null,8,y),e.datatype?((0,a.openBlock)(),(0,a.createElementBlock)("td",{key:0,textContent:(0,a.toDisplayString)(e.datatype)},null,8,b)):((0,a.openBlock)(),(0,a.createElementBlock)("td",k,[...t[14]||(t[14]=[(0,a.createElementVNode)("span",{class:"fst-italic"},"Not specified",-1)])])),(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.nosearch!==true?"Yes":"No")},null,8,C),(0,a.createElementVNode)("td",{textContent:(0,a.toDisplayString)(e.massiveaction!==false?"Yes":"No")},null,8,g)]))),128)):((0,a.openBlock)(),(0,a.createElementBlock)("tr",x,[...t[15]||(t[15]=[(0,a.createElementVNode)("td",{colspan:"8",class:"text-center"},"No Search Options",-1)])]))])])):(0,a.createCommentVNode)("v-if",true)])}},107:(e,t,n)=>{n.r(t);n.d(t,{default:()=>a["default"]});var a=n(108)},108:(e,t,n)=>{n.r(t);n.d(t,{default:()=>o});var a=n(9);const o={__name:"SearchOptions",setup(e,{expose:t}){t();const n=Math.floor(Math.random()*1e9);const o=(0,a.ref)([]);const r=(0,a.ref)("");const l=(0,a.ref)({});const c=(0,a.ref)("opt_id");const s=(0,a.ref)("asc");const i=(0,a.computed)(()=>{let e=[];$.each(l.value,(t,n)=>{e.push({opt_id:t,table:n["table"],field:n["field"],name:n["name"],linkfield:n["linkfield"],datatype:n["datatype"]||"",nosearch:n["nosearch"]||false,massiveaction:n["massiveaction"]||true})});e.sort((e,t)=>{let n=e[c.value];let a=t[c.value];if(c.value==="opt_id"){n=parseInt(n);a=parseInt(a)}if(n===a){return 0}if(s.value==="asc"){return n<a?-1:1}else{return n>a?-1:1}});return e});function d(e){if(c.value===e){if(s.value==="asc"){s.value="desc"}else{s.value="asc"}}else{c.value=e;s.value="asc"}}function p(){if(r.value===null||r.value===""){return}$.ajax({url:CFG_GLPI.root_doc+"/ajax/debug.php",data:{action:"get_search_options",itemtype:r.value}}).then(e=>{l.value=e})}(0,a.onMounted)(()=>{$.ajax({url:CFG_GLPI.root_doc+"/ajax/debug.php",data:{action:"get_itemtypes"}}).then(e=>{o.value=e});p()});(0,a.watch)(r,()=>{p()});const u=(0,a.ref)("select");const f={rand:n,all_itemtypes:o,current_itemtype:r,search_options:l,sorted_col:c,sort_dir:s,sorted_search_options:i,setSortedCol:d,updateSearchOptions:p,itemtype_input_mode:u,computed:a.computed,onMounted:a.onMounted,ref:a.ref,watch:a.watch};Object.defineProperty(f,"__isScriptSetup",{enumerable:false,value:true});return f}}},109:(e,t,n)=>{n.r(t);var a=n(110)},110:(e,t,n)=>{n.r(t);n.d(t,{default:()=>y});var a=n(18);var o=n.n(a);var r=n(19);var l=n.n(r);var c=n(20);var s=n.n(c);var i=n(21);var d=n.n(i);var p=n(22);var u=n.n(p);var f=n(23);var v=n.n(f);var m=n(111);var h={};h.styleTagTransform=v();h.setAttributes=d();h.insert=s().bind(null,"head");h.domAPI=l();h.insertStyleElement=u();var _=o()(m["default"],h);const y=m["default"]&&m["default"].locals?m["default"].locals:undefined},111:(e,t,n)=>{n.r(t);n.d(t,{default:()=>s});var a=n(25);var o=n.n(a);var r=n(26);var l=n.n(r);var c=l()(o());c.push([e.id,`\n.search-opts-table thead tr:nth-of-type(2) th[data-v-ae39f27a] {\n        cursor: pointer;\n}\n`,"",{version:3,sources:["webpack://./js/src/vue/Debug/Widget/SearchOptions.vue"],names:[],mappings:";AAwJI;QACI,eAAe;AACnB",sourcesContent:['<script setup>\n    import {computed, onMounted, ref, watch} from "vue";\n\n    const rand = Math.floor(Math.random() * 1000000000);\n\n    const all_itemtypes = ref([]);\n    const current_itemtype = ref(\'\');\n    const search_options = ref({});\n\n    const sorted_col = ref(\'opt_id\');\n    const sort_dir = ref(\'asc\');\n    const sorted_search_options = computed(() => {\n        let sorted = [];\n\n        $.each(search_options.value, (opt_id, data) => {\n            sorted.push({\n                opt_id: opt_id,\n                table: data[\'table\'],\n                field: data[\'field\'],\n                name: data[\'name\'],\n                linkfield: data[\'linkfield\'],\n                datatype: data[\'datatype\'] || \'\',\n                nosearch: data[\'nosearch\'] || false,\n                massiveaction: data[\'massiveaction\'] || true,\n            });\n        });\n\n        // Sort by column\n        sorted.sort((a, b) => {\n            let a_val = a[sorted_col.value];\n            let b_val = b[sorted_col.value];\n            // if the sorted_col is the opt_id, need to sort the numbers properly instead of as strings\n            if (sorted_col.value === \'opt_id\') {\n                a_val = parseInt(a_val);\n                b_val = parseInt(b_val);\n            }\n            if (a_val === b_val) {\n                return 0;\n            }\n            if (sort_dir.value === \'asc\') {\n                return a_val < b_val ? -1 : 1;\n            } else {\n                return a_val > b_val ? -1 : 1;\n            }\n        });\n        return sorted;\n    });\n\n    function setSortedCol(col) {\n        if (sorted_col.value === col) {\n            if (sort_dir.value === \'asc\') {\n                sort_dir.value = \'desc\';\n            } else {\n                sort_dir.value = \'asc\';\n            }\n        } else {\n            sorted_col.value = col;\n            sort_dir.value = \'asc\';\n        }\n    }\n\n    function updateSearchOptions() {\n        if (current_itemtype.value === null || current_itemtype.value === \'\') {\n            return;\n        }\n        $.ajax({\n            url: CFG_GLPI.root_doc + \'/ajax/debug.php\',\n            data: {\n                action: \'get_search_options\',\n                itemtype: current_itemtype.value\n            },\n        }).then((data) => {\n            search_options.value = data;\n        });\n    }\n\n    onMounted(() => {\n        $.ajax({\n            url: CFG_GLPI.root_doc + \'/ajax/debug.php\',\n            data: {\n                action: \'get_itemtypes\'\n            },\n        }).then((data) => {\n            all_itemtypes.value = data;\n        });\n        updateSearchOptions();\n    });\n\n    watch(current_itemtype, () => {\n        updateSearchOptions();\n    });\n\n    const itemtype_input_mode = ref(\'select\');\n<\/script>\n\n<template>\n    <div class="py-2 px-3 col-12">\n        <div class="d-flex">\n            <div class="form-group row">\n                <label class="col-5" :for="`itemtype${rand}`">Itemtype</label>\n                <div class="col-7">\n                    <div class="input-group">\n                        <select v-if="itemtype_input_mode === \'select\'" class="form-select" :id="`itemtype${rand}`" v-model="current_itemtype">\n                            <option value="">-----</option>\n                            <option v-for="itemtype in all_itemtypes" :value="itemtype" v-text="itemtype"></option>\n                        </select>\n                        <input v-else class="form-control" :id="`itemtype${rand}`" v-model.lazy="current_itemtype">\n                        <button class="btn btn-sm btn-outline-secondary" @click="itemtype_input_mode = itemtype_input_mode === \'select\' ? \'input\' : \'select\'"\n                                title="Toggle manual input">\n                            <i class="ti ti-switch-horizontal"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <table class="table search-opts-table" v-if="current_itemtype !== null && current_itemtype !== \'\'">\n            <thead>\n                <tr>\n                    <th colspan="8" class="text-center">Search Options</th>\n                </tr>\n                <tr>\n                    <th @click="setSortedCol(\'opt_id\')">Search ID</th>\n                    <th @click="setSortedCol(\'table\')">Table</th>\n                    <th @click="setSortedCol(\'field\')">Field</th>\n                    <th @click="setSortedCol(\'name\')">Name</th>\n                    <th @click="setSortedCol(\'linkfield\')">Link Field</th>\n                    <th @click="setSortedCol(\'datatype\')">Datatype</th>\n                    <th @click="setSortedCol(\'nosearch\')">Searchable</th>\n                    <th @click="setSortedCol(\'massiveaction\')">Massive Action</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-if="sorted_search_options.length" v-for="opt in sorted_search_options" :key="opt.opt_id">\n                    <td v-text="opt.opt_id"></td>\n                    <td v-text="opt.table"></td>\n                    <td v-text="opt.field"></td>\n                    <td v-text="opt.name"></td>\n                    <td v-text="opt.linkfield"></td>\n                    <td v-if="opt.datatype" v-text="opt.datatype"></td>\n                    <td v-else><span class="fst-italic">Not specified</span></td>\n                    <td v-text="opt.nosearch !== true ? \'Yes\' : \'No\'"></td>\n                    <td v-text="opt.massiveaction !== false ? \'Yes\' : \'No\'"></td>\n                </tr>\n                <tr v-else>\n                    <td colspan="8" class="text-center">No Search Options</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</template>\n\n<style scoped>\n    .search-opts-table thead tr:nth-of-type(2) th {\n        cursor: pointer;\n    }\n</style>\n'],sourceRoot:""}]);const s=c}}]);