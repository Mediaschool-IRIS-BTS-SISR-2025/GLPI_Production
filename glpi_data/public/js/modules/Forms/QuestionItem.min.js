/**
 * ---------------------------------------------------------------------
 *
 * GLPI - Gestionnaire Libre de Parc Informatique
 *
 * http://glpi-project.org
 *
 * @copyright 2015-2025 Teclib' and contributors.
 * @copyright 2003-2014 by the INDEPNET Development Team.
 * @licence   https://www.gnu.org/licenses/gpl-3.0.html
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * ---------------------------------------------------------------------
 */
export class GlpiFormQuestionTypeItem{#e;constructor(e,t){this.#e=e;$(document).on("glpi-form-editor-question-type-changed",(e,t,a)=>{if(this.#e===a){const e=t.find("[data-glpi-form-editor-question-type-specific]");this.#t(e)}});$(document).on("glpi-form-editor-question-sub-type-changed",(e,a,i)=>{if(a.find('[name="type"], [data-glpi-form-editor-original-name="type"]').val()!==this.#e){return}const o=a.find('[data-glpi-form-editor-question-type-specific] select[name="default_value"], [data-glpi-form-editor-question-type-specific] select[data-glpi-form-editor-original-name="default_value"]');const d=o.parent();d.children().attr("data-to-remove","true");d.load(`${CFG_GLPI.root_doc}/ajax/dropdownAllItems.php`,{idtable:i,width:"100%",name:o.data("glpi-form-editor-original-name")||o.attr("name"),aria_label:o.attr("aria-label"),display_emptychoice:0,value:-1,valuename:t,toadd:{"-1":t}},()=>d.find("[data-to-remove]").remove())})}#t(e){const t=getUUID();e.find('span[id^="show_default_value"]').attr("id",`show_default_value${t}`);e.find("div script").each((a,i)=>{const o=e.find('select[name="itemtype"]').attr("id");i.text=i.text.replace(/dropdown_itemtype[0-9]+/g,o);i.text=i.text.replace(/show_default_value[0-9]+/g,`show_default_value${t}`);i.text=i.text.replace(/rand:[0-9]+/g,`rand:'${t}'`);$.globalEval(i.text)})}}